{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u9996\u9875","text":""},{"location":"#_2","title":"\u8f6f\u4ef6\u200b\u6e90","text":"<ul> <li>cr.loongnix.cn  \u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u4ed3\u5e93\u200b, \u200b\u9002\u7528\u200b\u4e8e\u200b\u5185\u6838\u200b\u7248\u672c\u200b &lt; 5.10\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u5982\u9f99\u200b\u8725\u200b8.8\u3001\u200b\u9f99\u82af\u200bdebian10\u200b\u7b49\u200b\u3002</li> <li>lcr.loongnix.cn  \u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u4ed3\u5e93\u200b\uff0c\u200b\u9002\u7528\u200b\u4e8e\u200b\u5185\u6838\u200b\u7248\u672c\u200b&gt;=5.10\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u5982\u200b\u6b27\u62c9\u200b22.03\u3001\u200b\u6b27\u62c9\u200b24.03\u3001\u200b\u9f99\u200b\u8725\u200b23\u200b\u7248\u672c\u200b\u7b49\u200b\u3002</li> <li>goproxy.loongnix.cn Go \u200b\u6a21\u5757\u200b\u4ee3\u7406\u200b</li> </ul>"},{"location":"#_3","title":"\u6e90\u7801","text":"<ul> <li>Loongson Cloud Community \u200b\u6e90\u7801\u200b\u4ed3\u5e93\u200b</li> <li>Loongson Cloud Dockerfiles cr.loongnix.cn\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u6e90\u7801\u200b</li> <li>Loongson Cloud Dockerfiles lcr.loongnix.cn\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u6e90\u7801\u200b</li> </ul>"},{"location":"faq/","title":"FAQ","text":"<p>\u200b\u672c\u200b\u7ad9\u70b9\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u6574\u5408\u200b\u9f99\u82af\u200b\u8f6f\u4ef6\u8d44\u6e90\u200b\uff0c\u200b\u4e3a\u200b\u4f7f\u7528\u8005\u200b\u63d0\u4f9b\u200b\u7edf\u4e00\u200b\u7684\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u8d44\u6e90\u200b\u83b7\u53d6\u200b\u9014\u5f84\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u4f7f\u7528\u8005\u200b\u5728\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u7684\u200b\u4f7f\u7528\u200b\u4f53\u9a8c\u200b\u3002\u200b\u5177\u4f53\u200b\u5305\u542b\u200b</p> <ol> <li>\u200b\u63d0\u4f9b\u200b\u9002\u7528\u200b\u4e8e\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u7684\u200b\u6e90\u7801\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u7b49\u200b</li> <li>\u200b\u63d0\u4f9b\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u7684\u200b\u5e38\u89c1\u95ee\u9898\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b</li> <li>\u200b\u63d0\u4f9b\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u4f7f\u7528\u200b\u95ee\u9898\u200b\u7684\u200b\u53cd\u9988\u200b\u5e73\u53f0\u200b</li> </ol> <p>\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200bLoongson Cloud Community Release \u200b\u67e5\u627e\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u652f\u6301\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u5217\u8868\u200b\u548c\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\u3002\u200b\u5982\u679c\u200b\u67e5\u627e\u200b\u4e0d\u5230\u200b\uff0c\u200b\u8bf7\u200b\u901a\u8fc7\u200bgithub issue\u200b\u53cd\u9988\u200b\u7ed9\u200b\u6211\u4eec\u200b</p> <p>\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200bLoongson Cloud Community\u200b\u67e5\u627e\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u6e90\u7801\u200b\u3002\u200b\u5982\u679c\u200b\u67e5\u627e\u200b\u4e0d\u5230\u200b\uff0c\u200b\u8bf7\u200b\u901a\u8fc7\u200bgithub issue\u200b\u53cd\u9988\u200b\u7ed9\u200b\u6211\u4eec\u200b</p> <p>\u200b\u9f99\u82af\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u4ed3\u5e93\u200b https://cr.loongnix.cn</p> <p>TODO</p> <p>TODO</p> <p>TODO</p> <p>\u200b\u8bf7\u200b\u901a\u8fc7\u200bgithub issue\u200b\u5411\u200b\u6211\u4eec\u200b\u53cd\u9988\u200b</p>"},{"location":"faq/#_1","title":"\u8fd9\u4e2a\u200b\u7ad9\u70b9\u200b\u662f\u200b\u505a\u200b\u4ec0\u4e48\u200b\u7684","text":""},{"location":"faq/#xxx","title":"\u9f99\u82af\u200b\u662f\u5426\u200b\u652f\u6301\u200b xxx \u200b\u8f6f\u4ef6\u200b\uff0c\u200b\u5728\u200b\u54ea\u91cc\u200b\u53ef\u4ee5\u200b\u4e0b\u8f7d","text":""},{"location":"faq/#xxx_1","title":"\u9f99\u82af\u200b\u79fb\u690d\u200b\u7684\u200b xxx \u200b\u8f6f\u4ef6\u200b\u6e90\u7801\u200b\u5728\u200b\u54ea\u91cc","text":""},{"location":"faq/#_2","title":"\u54ea\u91cc\u200b\u53ef\u4ee5\u200b\u4e0b\u8f7d\u200b\u5230\u200b\u9002\u7528\u200b\u4e8e\u200b\u9f99\u82af\u200b\u67b6\u6784\u200b\u7684\u200b\u5bb9\u5668\u200b\u955c\u50cf","text":""},{"location":"faq/#golang","title":"golang \u200b\u9879\u76ee\u200b\u7f16\u8bd1\u200b\u62a5\u9519\u200b\u5e94\u8be5\u200b\u600e\u4e48\u529e","text":""},{"location":"faq/#pip","title":"pip \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305\u200b\u62a5\u9519\u200b\u5e94\u8be5\u200b\u600e\u4e48\u529e","text":""},{"location":"faq/#npm","title":"npm \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305\u200b\u62a5\u9519\u200b\u5e94\u8be5\u200b\u600e\u4e48\u529e","text":""},{"location":"faq/#_3","title":"\u6211\u200b\u6709\u200b\u95ee\u9898\u200b\u5e94\u8be5\u200b\u5728\u200b\u54ea\u91cc\u200b\u53cd\u9988","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/alpine-image-abi2.0/","title":"Alpine image abi2.0","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/alpine-image-abi2.0/#alpine-abi20","title":"alpine abi2.0 \u200b\u955c\u50cf\u200b\u79fb\u690d\u200b\u60c5\u51b5","text":"\u5e8f\u53f7\u200b \u200b\u9879\u76ee\u200b \u200b\u662f\u5426\u200b\u79fb\u690d\u200b \u200b\u963b\u585e\u200b\u9879\u200b 1 apache/httpd/2.4.38-alpine/Dockerfile \u200b\u662f\u200b 2 apache/httpd/2.4.39-alpine/Dockerfile \u200b\u662f\u200b 3 apache/httpd/2.4.46-alpine/Dockerfile \u200b\u662f\u200b(\u200b\u5e76\u200b\u5b8c\u6210\u200b2.4.58\u200b\u7248\u672c\u200b\u5236\u4f5c\u200b) 4 calico/calico/3.26.1/0001-support-loong64.patch \u200b\u6b63\u5728\u200b\u8fdb\u884c\u200b 5 curlimages/curl/latest/Dockerfile \u200b\u662f\u200b\uff08\u200b\u5b8c\u6210\u200b8.7.1\u200b\u7248\u672c\u200b\u5236\u4f5c\u200b\uff09 6 deepflowio/deepflow/6.1.4-alpine-server/Dockerfile \u200b\u662f\u200b 7 dragonflyoss/dfclient/1.0.6/0001-port-to-loong64.patch \u200b\u662f\u200b 8 dragonflyoss/nginx/alpine/Dockerfile \u200b\u662f\u200b 9 dragonflyoss/supernode/1.0.6/0001-port-to-loong64.patch \u200b\u662f\u200b 10 edgexfoundry/app-service-configurable/2.3.0/0001-port-to-loong64.patch \u200b\u662f\u200b 11 edgexfoundry/app-service-configurable/3.0.0/0001-port-to-loong64.patch \u200b\u662f\u200b 12 edgexfoundry/core-command/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 13 edgexfoundry/core-data/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 14 edgexfoundry/core-metadata/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 15 edgexfoundry/device-rest/0001-loong64-support-for-device-rest.patch \u200b\u662f\u200b 16 edgexfoundry/device-virtual/0001-add-loong64-support-device-virtual.patch \u200b\u662f\u200b 17 edgexfoundry/edgex-go/2.3.0/0001-port-to-loong64.patch \u200b\u662f\u200b 18 edgexfoundry/edgex-ui/3.0.0/0001-port-to-loong64.patch \u200b\u662f\u200b 19 edgexfoundry/support-notifications/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 20 edgexfoundry/support-scheduler/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 21 edgexfoundry/sys-mgmt-agent/3.0.0/0001-fix-add-loong64-support.patch \u200b\u662f\u200b 22 flannel-io/cni-plugin/1.2.0/0001-add-dockerfile-loong64.patch \u200b\u662f\u200b 23 flannel-io/cni-plugin/1.4.0-flannel1/0001-support-loong64.patch \u200b\u662f\u200b 24 flannel-io/flannel/0.22.1/0001-support-loong64-in-v0.22.1.patch \u200b\u662f\u200b 25 flannel-io/flannel/0.24.2/0001-support-loong64.patch \u200b\u662f\u200b 26 flannel-io/flannel/0.24.3/0001-support-loong64.patch \u200b\u662f\u200b 27 fluent/fluentd/13.3.3-alpine/Dockerfile \u200b\u5426\u200b ruby\u200b\u7248\u672c\u200b\u8fc7\u9ad8\u200b\uff0c\u200b\u6539\u4e3a\u200b\u79fb\u690d\u200b1.16.5\u200b\u7248\u672c\u200b 28 gitlab/gitlab-runner-helper/13.11/Dockerfile \u200b\u662f\u200b 29 gitlab/gitlab-runner/13.11-alpine/Dockerfile \u200b\u662f\u200b 30 grafana/loki/2.8.5/0001-support-loong64.patch \u200b\u662f\u200b 31 jenkins/jenkins/2.270/Dockerfile \u200b\u662f\u200b 32 justwatchcom/elasticsearch_exporter/1.1.0/0001-add-loong64-support.patch \u200b\u662f\u200b 33 k3s-io/klipper-lb/0.12/Dockerfile \u200b\u662f\u200b 34 k8s-staging-ingress-nginx/controller/1.2.1/0001-port-to-loong64.patch 35 k8s-staging-ingress-nginx/nginx/1.2.1/0001-port-to-loong64.patch 36 kbudde/rabbitmq_exporter/1.0.0/Dockerfile \u200b\u662f\u200b 37 kubernetes-sigs/cluster-proportional-autoscaler/1.8.4/0001-port-to-loong64.patch 38 kubernetes-sigs/metrics-server/0.4.2/Dockerfile 39 kubernetes-sigs/metrics-server/0.5.0/0001-init-vendor.patch 40 kubernetes/etcd/3.5.12/Dockerfile \u200b\u662f\u200b\uff083.5.4\uff09 41 kubesphere/fluentbit-operator/0.13.0/Dockerfile \u200b\u662f\u200b 42 kubesphere/ks-installer/v3.2.1/Dockerfile 43 kubesphere/ks-installer/v3.3.0/Dockerfile 44 kubesphere/kube-events-exporter/0.3.0/0001-port-to-loong64.patch 45 kubesphere/kube-events-ruler/0.3.0/0001-port-to-loong64.patch 46 kubesphere/log-sidecar-injector/1.1/0001-port-to-loong64.patch 47 kubesphere/openpitrix-jobs/3.2.1/Dockerfile 48 lfedge/ekuiper/1.6-alpine/Dockerfile \u200b\u662f\u200b 49 library/bash/5.2/Dockerfile \u200b\u662f\u200b 50 library/consul/1.15.2/Dockerfile \u200b\u662f\u200b 51 library/dockerfile/1.5.0/0001-add-loongarch64-support.patch 52 library/eclipse-mosquitto/2.0.15/Dockerfile 53 library/golang/1.15-alpine/Dockerfile 54 library/golang/1.19-alpine/Dockerfile \u200b\u662f\u200b 55 library/golang/1.20-alpine/Dockerfile \u200b\u662f\u200b 56 library/golang/1.21-alpine/Dockerfile 57 library/golang/1.22-alpine/Dockerfile 58 library/haproxy/2.3-alpine/Dockerfile 59 library/kong/2.5.0-centos/0002-port-to-loong64.patch 60 library/kong/2.5.0-centos/0002-port-to-loong64.patch 61 library/nextcloud/17-fpm-alpine/Dockerfile 62 library/nginx/1.23.1-alpine/Dockerfile \u200b\u662f\u200b 63 library/php/7.4.30-cli-alpine/Dockerfile \u200b\u662f\u200b 64 library/php/7.4.30-fpm-alpine/Dockerfile \u200b\u662f\u200b 65 library/postgres/13-alpine/Dockerfile \u200b\u662f\u200b 66 library/postgres/9.6.24-alpine/Dockerfile \u200b\u662f\u200b 67 library/python/3.8.0-alpine/Dockerfile 68 library/rabbitmq/3.8.18/Dockerfile \u200b\u6b63\u5728\u200b\u8fdb\u884c\u200b 69 library/rabbitmq/3.8.2/Dockerfile \u200b\u6b63\u5728\u200b\u8fdb\u884c\u200b 70 library/rabbitmq/3.8.2/management/Dockerfile 71 library/rabbitmq/3.9.22/Dockerfile \u200b\u6b63\u5728\u200b\u8fdb\u884c\u200b 72 library/rabbitmq/3.9.22/management/Dockerfile 73 library/rabbitmq/3.9.4/Dockerfile 74 library/redis/7.0-alpine/Dockerfile \u200b\u662f\u200b 75 library/ruby/2.5.9-alpine/Dockerfile \u200b\u662f\u200b 76 library/spiped/1.6-alpine/Dockerfile \u200b\u662f\u200b 77 library/sqlite/3.35.5-alpine/Dockerfile \u200b\u662f\u200b 78 minio/mc/RELEASE.2019-08-07T23-14-43Z/Dockerfile 79 minio/minio/RELEASE.2019-08-07T01-59-21Z/0001-port-to-loong64.patch 80 nicolaka/netshoot/0.0.6/Dockerfile 81 oliver006/redis_exporter/1.44.0/Dockerfile 82 osixia/docker-keepalived/release-2.1.5-dev/0001-add-loong64-support-keepalived.patch 83 osixia/light-baseimage/alpine-0.1.6/0001-add-loong64-support-light-baseimage.patch 84 phpmyadmin/phpmyadmin/4.9.2-fpm-alpine/Dockerfile 85 plndr/kube-vip/0.3.8/0001-port-to-loong64.patch 86 rancher/klipper-helm/v0.4.3/0001-add-loong64-support.patch 87 rancher/klipper-lb/v0.1.2/0001-add-loong64-support.patch 88 rancher/library-traefik/2.4.8/0001-add-loong64-support.patch 89 rancher/local-path-provisioner/v0.0.19/0001-add-loong64-support.patch 90 spotahome/redis-operator/v1.1.1/0001-add-loong64-support.patch 91 vectordotdev/vector/0.26.0/Dockerfile.alpine 92 zabbix/zabbix-server-mysql/alpine-3.4.15/Dockerfile \u200b\u662f\u200b 93 zabbix/zabbix-web-apache-mysql/alpine-3.4.15/Dockerfile \u200b\u662f\u200b 94 zabbix/zabbix-web-apache-mysql/alpine-5.0.2/Dockerfile \u200b\u8be5\u200b\u7248\u672c\u200b\u6682\u65f6\u200b\u4e0d\u200b\u5236\u4f5c\u200b\uff0c\u200b\u540e\u9762\u200b\u8003\u8651\u200b\u5236\u4f5c\u200b\u9ad8\u200b\u7248\u672c\u200b 95 edgexfoundry/app-service-configurable/2.3.0 \u200b\u662f\u200b 96 edgexfoundry/core-command/2.3.0 \u200b\u662f\u200b 97 edgexfoundry/core-data/2.3.0 \u200b\u662f\u200b 98 edgexfoundry/core-metadata/2.3.0 \u200b\u662f\u200b 99 edgexfoundry/device-rest/2.3.0 \u200b\u662f\u200b 100 edgexfoundry/device-virtual/2.3.0 \u200b\u662f\u200b 101 edgexfoundry/edgex-ui/2.3.0 \u200b\u662f\u200b 102 edgexfoundry/support-notifications/2.3.0 \u200b\u662f\u200b 103 edgexfoundry/support-scheduler/2.3.0 \u200b\u662f\u200b 104 edgexfoundry/sys-mgmt-agent/2.3.0 \u200b\u662f\u200b 105 calico/go-build/0.73 \u200b\u662f\u200b\uff08\u200b\u4ee5\u53ca\u200b0.85\uff09 106 calico/bpftool/5.19 \u200b\u662f\u200b 107 calico/node/3.24.1 \u200b\u662f\u200b 108 calico/operator/3.24.1 \u200b\u662f"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/assembly/","title":"Assembly","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/assembly/#_1","title":"\u5e38\u7528\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u6bb5","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/assembly/#crc32","title":"crc32","text":"<p>x86 <pre><code>asm volatile(\n    \"crc32q %[buf], %[crc]\\n\\t\"\n    :[crc]\"=r\"(crc64)\n    :\"0\"(crc64), [buf]\"r\"(*p)\n);\n</code></pre> aarch64 <pre><code>asm volatile(\n    \"crc32cx %w[c], %w[c], %x[v]\"\n    :[c]\"=r\"(crc64)\n    :\"0\"(crc64), [v]\"r\"(*p)\n);\n</code></pre></p> <p>loongarch64 <pre><code>// TODO\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/assembly/#cmpxchag","title":"cmpxchag","text":"<p>x86 <pre><code>T ret;\n__asm__ __volatile__(\"lock; cmpxchg %1, (%2);\"\n                     :\"=a\"(ret)\n                      // GCC may produces %sil or %dil for\n                      // constraint \"r\", but some of apple's gas\n                      // dosn't know the 8 bit registers.\n                      // We use \"q\" to avoid these registers.\n                     :\"q\"(newval), \"q\"(ptr), \"a\"(oldval)\n                     :\"memory\", \"cc\");\nreturn ret;\n</code></pre> loongarch64 <pre><code>// TODO\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/","title":"buildx\u200b\u4f7f\u7528\u624b\u518c","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#0","title":"0. \u200b\u7b80\u4ecb","text":"<p>Buildx\u200b\u662f\u200bDocker\u200b\u5b98\u65b9\u200b\u63d0\u4f9b\u200b\u7684\u200b\u4e00\u79cd\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b\uff0c\u200b\u4f18\u52bf\u200b:     (1) \u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u5e73\u53f0\u200b\u4e0a\u200b\u6784\u5efa\u200b\u591a\u200b\u67b6\u6784\u200b\u7684\u200bDocker\u200b\u955c\u50cf\u200b\uff0c\u200b\u652f\u6301\u200bDockerfile\u200b\u548c\u200bOCI\u200b\u955c\u50cf\u200b\u683c\u5f0f\u200b;     (2) \u200b\u652f\u6301\u200bhcl\u200b\u8bed\u6cd5\u200b\uff0c\u200b\u6279\u91cf\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b     (3) \u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u591a\u79cd\u200b\u6784\u5efa\u200b\u5668\u200b\uff0c\u200b\u5982\u200bBuildKit\u3001Docker-CLI\u3001Buildah\u200b\u7b49\u200b\u3002 Buildx\u200b\u7684\u200b\u4e3b\u8981\u200b\u4f18\u52bf\u200b\u5728\u4e8e\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e0d\u540c\u200b\u67b6\u6784\u200b\u7684\u200bDocker\u200b\u955c\u50cf\u200b\u6253\u5305\u200b\u5230\u200b\u540c\u4e00\u4e2a\u200b\u955c\u50cf\u200b\u4e2d\u200b\uff0c\u200b\u4ece\u800c\u200b\u652f\u6301\u200b\u591a\u200b\u5e73\u53f0\u200b\u90e8\u7f72\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u4e86\u200bDocker\u200b\u955c\u50cf\u200b\u7684\u200b\u53ef\u79fb\u690d\u6027\u200b\u548c\u200b\u517c\u5bb9\u6027\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#1","title":"1. \u200b\u90e8\u7f72\u200b\u73af\u5883","text":"<pre><code>[yzw@bogon ~]$ cat /etc/os-release \nNAME=\"Anolis OS\"\nVERSION=\"23\"\nID=\"anolis\"\nVERSION_ID=\"23\"\nPLATFORM_ID=\"platform:an23\"\nPRETTY_NAME=\"Anolis OS 23\"\nANSI_COLOR=\"0;31\"\nHOME_URL=\"https://openanolis.cn/\"\nBUG_REPORT_URL=\"https://bugzilla.openanolis.cn/\"\n\n[yzw@bogon ~]$ uname -a\nLinux bogon 5.10.134-15.1.an23.loongarch64 #1 SMP Thu Sep 7 02:30:41 UTC 2023 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#2","title":"2. \u200b\u5b89\u88c5","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_1","title":"\u4e0b\u8f7d\u200b\u5e76\u200b\u521b\u5efa\u200b\u76ee\u5f55","text":"<pre><code>wget http://cloud.loongnix.xa/docker/buildx%2F0.12.0/docker-buildx-0.12.0-rc1_Linux_Loong64.tar.gz\n\nmkdir -p ~/.docker/cli-plugins/\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_2","title":"\u5b89\u88c5","text":"<pre><code>install docker-buildx ~/.docker/cli-plugins/\nchmod a+x ~/.docker/cli-plugins/docker-buildx\n+docker buildx install //\u200b\u4f7f\u7528\u200bdocker builder \u200b\u4ee3\u66ff\u200bdocker buildx  \u200b\u6267\u884c\u200bdocker buildx uninstall\u200b\u53d6\u6d88\u200b\n\n\u200b\u7531\u4e8e\u200b\u9700\u8981\u200b\u5f00\u542f\u200b\u5b9e\u9a8c\u200b\u6a21\u5f0f\u200b\u624d\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bbuildx,\u200b\u4e24\u79cd\u200b\u8bbe\u7f6e\u200b\u65b9\u6cd5\u200b\nvi ~/.docker/config.json \u200b\u6216\u200b\u3000vi /etc/docker/daemon.json\n\"experimental\": \"enabled\"\n\u200b\u6216\u200b\n\u200b\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b\u3000DOCKER_CLI_EXPERIMENTAL=enabled\n\n\u200b\u91cd\u542f\u200bdocker\u200b\u4f7f\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b\nsystemctl daemon-reload\nsystemctl restart docker\n\n\u200b\u6d4b\u8bd5\u200b: docker buildx  -h \n      docker builder -h\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#3","title":"3. \u200b\u57fa\u672c\u200b\u4f7f\u7528\u200b\u547d\u4ee4","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_3","title":"\u57fa\u672c\u64cd\u4f5c\u200b\u8bed\u53e5","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#builder-buildx","title":"\u521b\u5efa\u200b\u5b9e\u4f8b\u200b\u547d\u4ee4\u200b\u53ca\u200b\u5bf9\u5e94\u200b\u53c2\u6570\u200b  \u200b\u6b64\u5904\u200b\u53ca\u200b\u4e4b\u540e\u200b\u7684\u200b\u547d\u4ee4\u200b\u5747\u200b\u4f7f\u7528\u200bbuilder \u200b\u4f7f\u7528\u200bbuildx\u200b\u6548\u679c\u200b\u76f8\u540c","text":"<pre><code>docker builder create [\u200b\u53c2\u6570\u200b] [\u200b\u5185\u5bb9\u200b|]\ndocker builder create --name loongson --driver=docker-container --driver-opt=image=moby/buildkit:latest\ndocker buildx create --name alpine   --driver docker-container   --driver-opt image=lcr.loongnix.cn/library/buildkit:0.12.3-alpine3.21    --config /etc/buildkit/buildkitd.toml\nbuildkitd.toml \u200b\u7684\u200b\u4ecb\u7ecd\u200b\u89c1\u200bhttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildkitd.toml%20%E4%BB%8B%E7%BB%8D\n//\u200b\u521b\u5efa\u200b\u540d\u5b57\u200b\u4e3a\u200bloongson\u200b\u7684\u200b\u5b9e\u4f8b\u200b,\u200b\u6307\u5b9a\u200b\u6784\u5efa\u200b\u5668\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u4e3a\u200bdocker,\u200b\u6307\u5b9a\u200b\u9a71\u52a8\u7a0b\u5e8f\u200b\u4e3a\u200bbuildkit\uff0c\u200b\u7248\u672c\u200b\u53ef\u200b\u9009\u200b\n//\u200b\u5982\u679c\u200b\u9700\u8981\u200b\u652f\u6301\u200b\u591a\u200b\u67b6\u6784\u200b\uff0c\u200b\u5219\u200b\u5728\u200bcreate\u200b\u65f6\u200b\u6307\u5b9a\u200b\u9700\u8981\u200b\u7684\u200b\u67b6\u6784\u200b\uff0c\u200b\u5426\u5219\u200b\u4e4b\u540e\u200b\u5728\u200b/proc/sys/fs/binfmt_misc/\u200b\u6ce8\u518c\u200b\u5176\u4ed6\u200b\u67b6\u6784\u200b\u7684\u200bqemu-register\u200b\u65f6\u4f1a\u200b\u5931\u6548\u200b --platform linux/amd64,linux/arm64,linux/riscv64,linux/loong64\ndocker buildx inspect --bootstrap loongson &amp;&amp; docker buildx use loongson\n//\u200b\u521d\u59cb\u5316\u200b\u5e76\u200b\u4f7f\u7528\u200b\n\u200b\u6784\u5efa\u200b\u5668\u200b\u7c7b\u578b\u200b\n++++++++++++++++++++++++++++++++++++++++\ndocker           + default buildkit    +\ndocker-container + buildkit \u3000\u3000\u3000      +\nkubernetes       + k8s pod\u3000           +\nremote           + local use buildctl  +\n++++++++++++++++++++++++++++++++++++++++\n\n\u200b\u4e3b\u8981\u200b\u4f7f\u7528\u200b\u524d\u200b\u4e24\u4e2a\u200b\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_4","title":"\u67e5\u8be2\u200b\u3000\u200b\u5220\u9664\u200b\u3000\u200b\u5207\u6362\u200b\u9a71\u52a8\u5668","text":"<p><pre><code>docker builder ls \ndocker builder rm &lt;name&gt;\n\ndocker builder use &lt;name&gt;\ndocker builder inspect --bootstrap &lt;name&gt;\n\ndocker builder \n\ndocker builder \n</code></pre> \u200b\u5177\u4f53\u200b\u547d\u4ee4\u200b\u624b\u518c\u200b\u89c1\u200b(https://github.com/docker/buildx/blob/master/docs/reference/buildx_create.md)[https://github.com/docker/buildx/blob/master/docs/reference/buildx_create.md]</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_5","title":"\u6784\u5efa\u200b\u955c\u50cf","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#buildxbakejson-yaml-hcl","title":"buildx\u200b\u4e3b\u8981\u200b\u4f9d\u8d56\u200bbake\u200b\u547d\u4ee4\u200b\u6765\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8bc6\u522b\u200bjson \u200b\u6587\u4ef6\u200b\u3001.yaml \u200b\u6587\u4ef6\u200b\u4ee5\u53ca\u200b*.hcl\u200b\u6587\u4ef6\u200b\u6765\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\uff0c\u200b\u5177\u4f53\u200b\u53ef\u200b\u8bc6\u522b\u200b\u7684\u200b\u6587\u4ef6\u200b\u540d\u5b57\u200b\u5982\u4e0b\u200b\uff1a","text":"<ul> <li>docker-bake.override.hcl</li> <li>docker-bake.hcl</li> <li>docker-bake.override.json</li> <li>docker-bake.json</li> <li>docker-compose.yaml</li> <li>docker-compose.yml</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_6","title":"\u5177\u4f53\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\u5982\u4e0b\u200b\uff1a","text":"<pre><code>docker builder bake --file=../docker/bake.hcl\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#hcl","title":"hcl\u200b\u6587\u4ef6\u200b\u7684\u200b\u914d\u7f6e\u200b\u89e3\u6790","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#bake","title":"Bake \u200b\u6587\u4ef6\u200b\u652f\u6301\u200b\u4ee5\u4e0b\u200b\u5c5e\u6027\u200b\u7c7b\u578b\u200b\uff1a","text":"<ul> <li>target: \u200b\u6784\u5efa\u200b\u76ee\u6807\u200b</li> <li>group: \u200b\u6784\u5efa\u200b\u76ee\u6807\u200b\u7684\u200b\u96c6\u5408\u200b</li> <li>variable: \u200b\u6784\u5efa\u200b\u65f6\u200b\u7684\u200b\u53c2\u6570\u200b\u53ca\u503c\u200b</li> <li>function: \u200b\u81ea\u5b9a\u4e49\u200b\u51fd\u6570\u200b \u200b\u4e0d\u540c\u200b\u5c5e\u6027\u200b\u7c7b\u578b\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u5b9a\u4e49\u200b\u7684\u200b\u5c5e\u6027\u200b\u5982\u4e0b\u200b\uff1a Name                Type    \u200b\u63cf\u8ff0\u200b         args                Map \u200b\u6784\u5efa\u200b\u53c2\u6570\u200b  --build-arg attest              List    \u200b\u5b89\u5168\u200b\u7279\u6027\u200b\u8bbe\u7f6e\u200b cache-from      List    \u200b\u6307\u5b9a\u200b\u6784\u5efa\u200b\u65f6\u200b\u7684\u200b\u7f13\u5b58\u200b\u6e90\u200b cache-to        List    \u200b\u6307\u5b9a\u200b\u6784\u5efa\u200b\u65f6\u200b\u5b58\u50a8\u200b\u7684\u200b\u7f13\u5b58\u200b\u76ee\u6807\u200b context             String  \u200b\u6307\u5b9a\u200b\u6784\u5efa\u200b\u4e0a\u4e0b\u6587\u200b\u4f4d\u7f6e\u200b \u200b\u4ee3\u66ff\u200b. contexts            Map Additional build contexts dockerfile-inline   String  \u200b\u5185\u8054\u200bDockerfile dockerfile      String  --file inherits        List    \u200b\u58f0\u660e\u200binherits\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u5176\u4ed6\u200b\u6807\u7b7e\u200b\u7ee7\u627f\u200b\u5c5e\u6027\u200b\uff0c\u200b\u5f53\u200b\u4ece\u200b\u591a\u4e2a\u200b\u76ee\u6807\u200b\u7ee7\u627f\u200b\u5c5e\u6027\u200b\u5e76\u4e14\u200b\u5b58\u5728\u200b\u51b2\u7a81\u200b\u65f6\u200b\uff0c\u200b\u7ee7\u627f\u200b\u5217\u8868\u200b\u4e2d\u200b\u6700\u540e\u200b\u51fa\u73b0\u200b\u7684\u200b\u76ee\u6807\u200b\u4f18\u5148\u200b labels          Map \u200b\u58f0\u660e\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\u7684\u200b\u6807\u7b7e\u200b matrix          Map \u200b\u4f7f\u7528\u200b\u77e9\u9635\u200b\u5728\u200b\u4e00\u4e2a\u200btarget\u200b\u4e0b\u200b\u540c\u65f6\u200b\u58f0\u660e\u200b\u591a\u4e2a\u200b\u5f85\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b name            String  Override the target name when using a matrix. no-cache-filter     List    Disable build cache for specific stages no-cache        Boolean Disable build cache completely output          List    Output destinations platforms       List    \u200b\u955c\u50cf\u200b\u5bf9\u5e94\u200b\u7684\u200b\u76ee\u6807\u200b\u67b6\u6784\u200b pull            Boolean Always pull images secret          List    Secrets to expose to the build ssh         List    SSH agent sockets or keys to expose to the build tags            List    -tags target          String  Target build stage</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#bake_1","title":"\u4e0b\u9762\u200b\u7ed9\u51fa\u200bbake\u200b\u6587\u4ef6\u200b\u7684\u200b\u5e38\u7528\u200b\u6837\u4f8b\u200b:","text":"<ol> <li> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b Bake \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5206\u5c42\u200b\u5b9a\u4e49\u200b\u5c5e\u6027\u200b\uff0c\u200b\u5e76\u200b\u53ef\u4ee5\u200b\u7ed9\u200b\u5c5e\u6027\u200b\u5206\u914d\u200b1\u200b\u81f3\u200b\u591a\u4e2a\u200b\u503c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5197\u957f\u200b\u7684\u200bdocker build\u200b\u547d\u4ee4\u200b\u5199\u5165\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\u3002 \u200b\u4f8b\u5b50\u200b:  <pre><code>docker build \\\n  --build-arg HTTP_PROXY=http://10.20.30.2:1234 \\\n  --build-arg GO_VERSION=1.20.1 \\\n  --file=Dockerfile.hello \\\n  --tag=lcr.loongnix.cn/library/hello:latest \\\n  https://github.com/hello\n</code></pre> <pre><code>target \"hello\" {\n  args={\n    HTTP_PROXY=http://10.20.30.2:1234\n    GO_VERSION=1.20.1\n  }\n  dockerfile = \"Dockerfile.hello\"\n  tags = [\"lcr.loongnix.cn/library/hello:latest\"]\n  context = \"https://github.com/hello\"\n}\n</code></pre></p> </li> <li> <p>\u200b\u4e0b\u9762\u200b\u7ed9\u51fa\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b Bake \u200b\u6587\u4ef6\u200b\u3002\u200b\u5176\u4e2d\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4e09\u4e2a\u200b\u5c5e\u6027\u200b\uff1a\u200b\u53d8\u91cf\u200b\u3001\u200b\u7ec4\u548c\u200b\u76ee\u6807\u200b\u3002 <pre><code>variable \"TAG\" {\n  default = \"latest\"\n}\n\ngroup \"default\" {\n  targets = [\"hello\"]\n}\n\ntarget \"hello\" {\n  dockerfile = \"Dockerfile\"\n  tags = [\"cr.loongnix.cn/library/hello:${TAG}\"]\n}\n</code></pre></p> </li> <li> <p>\u200b\u591a\u200b\u9636\u6bb5\u200b\u6784\u5efa\u200b <pre><code># docker-bake.hcl\ntarget \"base\" {\n    dockerfile = \"baseapp.Dockerfile\"\n}\ntarget \"app\" {\n    contexts = {\n        baseapp = \"target:base\"\n    }\n}\n</code></pre></p> </li> <li> <p>\u200b\u51fd\u6570\u200b <pre><code># docker-bake.hcl\nfunction \"increment\" {\n  params = [number]\n  result = number + 1\n}\n\ntarget \"webapp-dev\" {\n  dockerfile = \"webtest.Dockerfile\"\n  tags = [\"lcr.loongnix.cn/library/webapp:latest\"]\n  args = {\n    buildno = \"${increment(123)}\"\n  }\n}\n</code></pre></p> </li> <li>\u200b\u5e38\u7528\u547d\u4ee4\u200b |            \u200b\u547d\u4ee4\u200b           |          \u200b\u63cf\u8ff0\u200b        | \u200b\u6ce8\u91ca\u200b | | ------------------------- | -------------------- | ---- | |  docker buildx bake       | \u200b\u4ece\u200bhcl\u200b\u6587\u4ef6\u200b\u6784\u5efa\u200b        | - | |  docker buildx build      | \u200b\u4ece\u200bDockerfile\u200b\u6784\u5efa\u200b     | - | |  docker buildx create     | \u200b\u521b\u5efa\u200bbuilder\u200b\u5b9e\u4f8b\u200b      | - | |  docker buildx ls         | \u200b\u5217\u51fa\u200b builder\u200b\u5b9e\u4f8b\u200b     | - | |  docker buildx inspect    | \u200b\u5f53\u524d\u200bbuilder\u200b\u5b9e\u4f8b\u200b      | - | |  docker buildx rm         | \u200b\u5220\u9664\u200b builder\u200b\u5b9e\u4f8b\u200b     | - | |  docker buildx use        | \u200b\u5207\u6362\u200b builder \u200b\u5b9e\u4f8b\u200b    | - | |  docker buildx stop       | \u200b\u505c\u6b62\u200b builder\u200b\u5b9e\u4f8b\u200b     | - | |  docker buildx prune      | \u200b\u79fb\u9664\u200b\u6784\u5efa\u200b\u7f13\u5b58\u200b         | - | |  docker buildx du         | \u200b\u78c1\u76d8\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b         | - | |  docker buildx imagetools | \u200b\u5728\u200bregistry\u200b\u4e2d\u200b\u5904\u7406\u200b\u955c\u50cf\u200b | - | |  docker buildx version    | buildx\u200b\u7248\u672c\u4fe1\u606f\u200b       | - |</li> </ol> <p>\u200b\u66f4\u200b\u5177\u4f53\u200b\u7684\u200b\u53c2\u6570\u200b\u53ca\u6837\u200b\u4f8b\u89c1\u200bhttps://docs.docker.com/build/bake/reference/</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#4","title":"4. \u200b\u8de8\u5e73\u53f0\u200b\u955c\u50cf\u200b\u6279\u91cf\u200b\u6784\u5efa\u200b\u529f\u80fd","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_7","title":"\u9009\u7528\u200b\u5e73\u53f0","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#x86loongarch64","title":"x86/loongarch64 (\u200b\u4f7f\u7528\u200b\u7684\u200b\u955c\u50cf\u200b\u4e0d\u540c\u200b)","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#qemu","title":"\u6ce8\u518c\u200b\u591a\u200b\u67b6\u6784\u200bqemu\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d","text":"<p>x86\u200b\u67b6\u6784\u200b <pre><code>docker run --privileged --rm tonistiigi/binfmt --install all\n</code></pre> abi 1.0 (linux kernel &lt; 5.10) <pre><code>docker run --privileged --rm cr.loongnix.cn/library/tonistiigi/binfmt:latest --install all\n</code></pre> abi 2.0 (linux kernel &gt;= 5.10) <pre><code>docker run --privileged --rm lcr.loongnix.cn/library/tonistiigi/binfmt:latest --install all\n</code></pre> \u200b\u6ce8\u518c\u200b\u5b8c\u6bd5\u200b\u540e\u200b\u67e5\u770b\u200b\u76ee\u5f55\u200bbinfmt_misc \u200b\u786e\u8ba4\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6a21\u62df\u5668\u200b\u662f\u5426\u200b\u88ab\u200b\u6ce8\u518c\u200b\uff0c\u200b\u4f8b\u200b \u200b\u5728\u200bx86\u200b\u67b6\u6784\u200b <pre><code>ls /proc/sys/fs/binfmt_misc\nllvm-14-runtime.binfmt  qemu-arm      qemu-mips64el  qemu-s390x\npython3.11      qemu-loongarch64  qemu-ppc64le   register\nqemu-aarch64        qemu-mips64   qemu-riscv64   status\n</code></pre> \u200b\u786e\u8ba4\u200b\u5bf9\u5e94\u200bloongarch\u200b\u7684\u200bemulator\u200b\u5df2\u7ecf\u200b\u88ab\u200b\u6ce8\u518c\u200b</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#_8","title":"\u4f7f\u7528\u200b\u9ed8\u8ba4\u200b\u6784\u5efa\u200b\u5668","text":"<p>\u200b\u4e00\u6b21\u200b\u53ea\u80fd\u200b\u6784\u5efa\u200b\u4e00\u4e2a\u200b\u67b6\u6784\u200b\u7684\u200b\u955c\u50cf\u200b\uff0c\u200b\u65e0\u6cd5\u200b\u5c06\u200b\u591a\u4e2a\u200b\u67b6\u6784\u200b\u955c\u50cf\u200b\u540c\u65f6\u200b\u5b58\u50a8\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200bmanifest\u200b\u4e2d\u200b <pre><code>$ docker buildx build --platform linux/arm64 \n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/buildx/#buildkit","title":"\u4f7f\u7528\u200bbuildkit","text":"<p><pre><code>$ docker builder create --name loongson\u3000--driver=docker --driver-opt=moby/buildkit:v0.11.3\n$ docker buildx build --push --platform linux/arm64,linux/loongarch64 -t cr.loongnix.cn/library/test:latest -f Dockerfile .\n\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6784\u5efa\u200b\u5355\u4e00\u200b\u67b6\u6784\u200b(single arch)\u200b\u4e0b\u200b\u955c\u50cf\u200b\u65f6\u200b\u4f7f\u7528\u200b--load --platform linux/arm64 \u200b\u7ec4\u5408\u200b\n\u200b\u800c\u200b\u591a\u200b\u67b6\u6784\u200b\u53ea\u80fd\u200b\u4f7f\u7528\u200b--push --platform linux/arm64,linux/loongarch64\n--load \u200b\u8868\u793a\u200b\u6784\u5efa\u200b\u5230\u200b\u672c\u5730\u200b\n--push\u200b\u5219\u200b\u76f4\u63a5\u200bpush\u200b\u5230\u200bdockerhub\n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6bd5\u200b\u540e\u200b\uff0c\u200b\u67e5\u770b\u200b\u6784\u5efa\u200b\u7684\u200b\u591a\u200b\u67b6\u6784\u200b\u955c\u50cf\u200b\u4fe1\u606f\u200b\uff1a <pre><code>docker buildx imagetools inspect jianghushinian/hello-go\n</code></pre></p> <p>\u200b\u4ea4\u53c9\u200b\u7f16\u8bd1\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7684\u200b\u53c2\u6570\u200b \u3000\u3000\u200b\u53d8\u91cf\u200b    \u200b\u8bf4\u660e\u200b TARGETPLATFORM  \u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\u7684\u200b\u76ee\u6807\u200b\u5e73\u53f0\u200b\uff0c\u200b\u5982\u200b\uff1alinux/amd64\uff0clinux/arm/v7\uff0cwindows/amd64\u3002 TARGETOS    TARGETPLATFORM \u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff0c\u200b\u5982\u200b\uff1alinux\u3001windows\u3002 TARGETARCH  TARGETPLATFORM \u200b\u7684\u200b\u67b6\u6784\u200b\u7c7b\u578b\u200b\uff0c\u200b\u5982\u200b\uff1aamd64\u3001arm\u3002 TARGETVARIANT   TARGETPLATFORM \u200b\u7684\u200b\u53d8\u4f53\u200b\uff0c\u200b\u5982\u200b\uff1av7\u3002 BUILDPLATFORM   \u200b\u6267\u884c\u200b\u6784\u5efa\u200b\u6240\u5728\u200b\u7684\u200b\u8282\u70b9\u200b\u5e73\u53f0\u200b\u3002 BUILDOS \u3000\u3000\u3000\u3000BUILDPLATFORM \u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u3002 BUILDARCH   BUILDPLATFORM \u200b\u7684\u200b\u67b6\u6784\u200b\u7c7b\u578b\u200b\u3002 BUILDVARIANT    BUILDPLATFORM \u200b\u7684\u200b\u53d8\u4f53\u200b\u3002</p> <p>\u200b\u5982\u200b\u5e0c\u671b\u200b\u5728\u200bx86\u200b\u4e0b\u200b\u7f16\u8bd1\u200bloongarch: <pre><code>Dockerfile\nFROM --platform=$BUILDPLATFORM golang:1.20-alpine AS builder\nARG TARGETOS\nARG TARGETARCH\nWORKDIR /app\nADD . .\nRUN GOOS=$TARGETOS GOARCH=$TARGETARCH go build -o hello .\n\nFROM lcr.loongnix.cn/library/alpine:v3.18.4-base\nWORKDIR /app\nCOPY --from=builder /app/hello .\nCMD [\"./hello\"]\n\ndocker-bake.hcl\nvariable \"TARGETPLATFORM\" {\n  default = \"loong64\"\n}\nvariable \"BUILDPLATFORM\" {\n  default = \"amd64\"\n}\nvariable \"TARGETOS\" {\n  default = \"linux\"\n}\nvariable \"TARGETARCH\" {\n  default = \"loong64\"\n}\n</code></pre> \u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u76ee\u6807\u200b\u5e73\u53f0\u200b\u82e5\u200b\u4e3a\u200bloongarch\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u8c03\u7528\u200blcr\u200b\u9f99\u82af\u200b\u5b98\u65b9\u200b\u955c\u50cf\u200b\u6e90\u200b\u7684\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b</p> <p>\u200b\u5982\u679c\u200b\u60f3\u200b\u5728\u200bDockerfile\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u524d\u7aef\u200b\u6784\u5efa\u200b\u5668\u200b\uff0c\u200b\u5728\u200b(\u200b\u9f99\u82af\u200b\u955c\u50cf\u200b\u5b98\u7f51\u200b)[https://cr.loongnix.cn/search] \u200b\u641c\u7d22\u200bdockerfile \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u524d\u7aef\u200b\u6784\u5efa\u200b\u5668\u200b\u7248\u672c\u200b(experiment)\uff0c\u200b\u6682\u65f6\u200b\u53ea\u200b\u9002\u914d\u200b\u4e86\u200bbuildkit/0.12.3 \u200b\u4e0b\u200b\u7684\u200b\u524d\u7aef\u200b\u6784\u5efa\u200b\u5668\u200b\uff0c\u200b\u652f\u6301\u200b\u5927\u90e8\u5206\u200b\u65b0\u200b\u7684\u200bDockerfile DSL\u200b\u8bed\u6cd5\u200b\uff0c\u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b (frontend\u200b\u539f\u7406\u200b)[https://www.yuque.com/yzewei/rb4gmw/px44zok1xgklc0if?singleDoc# \u300a\u200b\u4e91\u200b\u539f\u751f\u200b Docker Buildkit \u200b\u4e8c\u200b\u300b] <pre><code>Dockerfile\n# syntax=cr.loongnix.cn/library/dockerfile:experiment\nFROM golang:1.20-alpine AS builder\nWORKDIR /app\nADD . .\n#ADD main.go main.go\nRUN --mount=type=cache,target=/root/.cache/go-build \\\n    go build -ldflags=\"-w\" -o ./hello hello.go\n\nFROM debian:buster\n#FROM alpine:latest\nWORKDIR /app\n#ADD . .\nCOPY --link --from=builder /app/hello .\nCMD [\"./hello\"]\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/debian-image-abi2.0/","title":"Debian image abi2.0","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/debian-image-abi2.0/#debian-abi20","title":"debian abi2.0 \u200b\u955c\u50cf\u200b\u79fb\u690d\u200b\u60c5\u51b5","text":"\u5e8f\u53f7\u200b \u200b\u9879\u76ee\u200b \u200b\u662f\u5426\u200b\u79fb\u690d\u200b \u200b\u963b\u585e\u200b\u9879\u200b 1 gitlab/gitlab-runner/13.11-buster/Dockerfile 2 confluentinc/base/5.3.0/Dockerfile 3 prometheus/busybox/glibc/Dockerfile 4 kubernetes/coredns/v1.10.1/0001-support-loong64.patch 5 kubernetes/coredns/1.11.2/0001-support-loong64.patch 6 kubernetes/kube-state-metrics/2.3.0/Dockerfile 7 kubernetes/etcd/3.4.27/0001-support-loong64.patch 8 joyieldnic/predixy/1.0.5/Dockerfile 9 osixia/light-baseimage/1.2.0/0001-port-to-loong64.patch 10 osixia/light-baseimage/v1.3.2/0001-port-to-loong64.patch 11 bitnami/zookeeper/3.5.9/Dockerfile 12 bitnami/kafka/2.7.0/Dockerfile 13 clickhouse/clickhouse-server/22.3.2.2/Dockerfile 14 nacos/nacos-server/2.0.3-slim/Dockerfile 15 library/ruby/2.5.5/Dockerfile 16 library/elasticsearch/8.7.0/Dockerfile 17 library/logstash/8.7.0/Dockerfile 18 library/python/3.7.10/Dockerfile \u200b\u662f\u200b 19 library/python/3.9/debian/Dockerfile \u200b\u662f\u200b 20 library/python/3.12/debian/Dockerfile \u200b\u662f\u200b 21 library/python/3.10/debian/Dockerfile \u200b\u662f\u200b 22 library/python/3.11/debian/Dockerfile \u200b\u662f\u200b 23 library/php/7.4.30-apache/Dockerfile 24 library/mariadb/10.6/Dockerfile 25 library/mariadb/10.5.18/Dockerfile 26 library/mariadb/10.3.34/Dockerfile 27 library/mariadb/10.11/Dockerfile 28 library/openjdk/17-buster/Dockerfile 29 library/openjdk/11-buster/Dockerfile 30 library/openjdk/8-buster/Dockerfile 31 library/openjdk/21-buster/Dockerfile 32 library/postgres/13.13-debian/Dockerfile 33 library/caddy/debian/Dockerfile 34 library/buildpack-deps/buster-curl/Dockerfile 35 library/nginx/1.24.0/debian/Dockerfile 36 library/node/18.18.1-debian/Dockerfile 37 library/node/16.20.2-debian/Dockerfile 38 library/node/16.3.0-debian/Dockerfile 39 library/node/16.17.1-debian/Dockerfile 40 library/node/16.5.0-debian/Dockerfile 41 library/node/18.13.0-debian/Dockerfile 42 library/node/20.8.0-debian/Dockerfile 43 library/kibana/8.7.0/Dockerfile 44 library/haproxy/2.9/Dockerfile 45 library/haproxy/2.3/Dockerfile 46 library/haproxy/2.8/Dockerfile 47 library/neo4j-community/5.7.0/Dockerfile 48 library/spiped/1.6/Dockerfile 49 library/redis/7.0/debian/Dockerfile 50 library/redis/6.2/debian/Dockerfile 51 library/redis/6.0/debian/Dockerfile 52 minio/mc/debian/Dockerfile 53 minio/minio/debian/Dockerfile 54 goharbor/spilo-11/1.6-p3/0001-port-to-loong64.patch 55 goharbor/harbor-operator/release-1.2.0/0004-Generate-image.patch 56 kubernetes-ingress-controller/kube-webhook-certgen/1.1.2/rootfs/Dockerfile 57 rancher/rancher/2.4.8/Dockerfile 58 rancher/coredns-coredns/1.8.3/0001-add-loong64-support.patch 59 k8s-build-image/debian-base/latest/Dockerfile 60 k8s-build-image/debian-iptables/latest/Dockerfile 61 k8s-build-image/go-runner/latest/Dockerfile 62 influxdata/kapacitor/1.6.6/Dockerfile 63 influxdata/kapacitor/1.6.6/Dockerfile_build_ubuntu64 64 guacamole/guacamole-server/1.5.3/Dockerfile 65 guacamole/guacamole-server/1.5.3/guacenc/Dockerfile 66 guacamole/guacamole-server/1.5.3/guacenc/Dockerfile 67 google_containers/nginx-slim/0.14/Dockerfile 68 nicolaka/netshoot/0.0.6/Dockerfile 69 kubernetes-sigs/metrics-server/0.5.0/0001-init-vendor.patch 70 kubernetes-sigs/metrics-server/0.5.0/0003-Add-support-for-loong64.patch 71 kong/fpm/0.5.1/0001-port-to-loong64.patch 72 onlyoffice/documentserver/7.1.1/Dockerfile 73 calico/bpftool/5.19/0001-port-to-loong64.patch 74 calico/bird/0.3.3/0001-port-to-loong64.patch 75 calico/node/3.24.1/0001-port-to-loong64.patch 76 grafana/promtail/2.8.2/0001-support-loong64.patch 77 grafana/promtail/2.6.1/0001-port-to-loong64.patch 78 kubevirt/passwd/0.50.0/Dockerfile 79 openpolicyagent/gatekeeper/3.5.2/Dockerfile 80 tdengine/tdengine/3.0.0.0/Dockerfile 81 kubesphere/notification-manager-operator/1.4.0/Dockerfile 82 kubesphere/fluentbit-operator/0.13.0/Dockerfile 83 kubesphere/notification-manager/1.4.0/Dockerfile 84 kubesphere/kube-events-ruler/0.3.0/0001-port-to-loong64.patch 85 kubesphere/notification-tenant-sidecar/3.2.0/Dockerfile 86 vectordotdev/vector/0.26.0/Dockerfile.debian 87 openstackhelm/ceph-config-helper/latest-ubuntu_bionic/Dockerfile 88 stackanetes/kubernetes-entrypoint/0.3.1/Dockerfile 89 emqx/emqx/5.3.2/Dockerfile 90 istio/proxyv2/1.11.1/0001-add-loong64-support.patch 91 fluent/fluent-bit/1.8.11/Dockerfile"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/flink/","title":"flink","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/flink/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>release-1.14.6    </p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/flink/#2","title":"2.\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u89c1\u200b\u8865\u4e01\u200b</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/flink/#3maven","title":"3.\u200b\u4fee\u6539\u200bmaven\u200b\u6e90","text":"<p>\u200b\u5c06\u200bmaven\u200b\u6e90\u200b\u4fee\u6539\u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\u3002 \u200b\u5728\u200b\u6587\u4ef6\u200b/etc/maven/settings.xml \u200b\u548c\u200b ~/.m2/settings.xml \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a     <pre><code>        &lt;profile&gt;\n        &lt;id&gt;loongson&lt;/id&gt;\n        &lt;repositories&gt;\n        &lt;repository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;/repositories&gt;\n        &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n</code></pre> <pre><code>  &lt;activeProfiles&gt;\n        &lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/flink/#4","title":"4.\u200b\u6784\u5efa","text":"<pre><code>mvn clean package -DskipTests\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/","title":"go \u200b\u9879\u76ee\u200b\u901a\u7528\u200b\u79fb\u690d\u200b\u53c2\u8003","text":"<p>\u200b\u672c\u200b\u6587\u7ae0\u200b\u4ecb\u7ecd\u200b\u4f7f\u7528\u200b go mod \u200b\u6a21\u5f0f\u200b\u7ba1\u7406\u200b \u200b\u7684\u200b go \u200b\u8bed\u8a00\u200b\u9879\u76ee\u200b\u7684\u200b\u901a\u7528\u200b\u79fb\u690d\u200b\u65b9\u6cd5\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#_1","title":"\u73af\u5883\u200b\u51c6\u5907","text":"<ul> <li>loongarch64 \u200b\u673a\u5668\u200b</li> <li>golang loongarch64 \u200b\u7f16\u8bd1\u5668\u200b</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#_2","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#1","title":"1. \u200b\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf","text":"<p>\u200b\u5c06\u200b goproxy \u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\uff0c\u200b\u4ece\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200b\u7684\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u4f9d\u8d56\u200b\u662f\u200b\u9002\u914d\u200b\u8fc7\u200b\u7684\u200b\uff1b\u200b\u5173\u95ed\u200b GOSUMDB \u200b\u548c\u200b \u200b\u5220\u9664\u200b\u9879\u76ee\u200b\u91cc\u200b\u7684\u200b go.sum \u200b\u6587\u4ef6\u200b\u662f\u200b\u4fdd\u8bc1\u200b\u4e0d\u200b\u4f7f\u7528\u200b SUM \u200b\u6821\u9a8c\u200b\uff0c <pre><code>export GOPROXY=http://goproxy.loongnix.cn\nexport GOSUMDB=off\nrm  -f go.sum\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#2","title":"2. \u200b\u6784\u5efa","text":"<pre><code>go build $TARGET\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#_3","title":"\u53ef\u80fd\u200b\u51fa\u73b0\u200b\u7684\u200b\u95ee\u9898","text":"<ol> <li>\u200b\u6784\u5efa\u200b\u65b9\u5f0f\u200b\u4e0d\u540c\u200b </li> </ol> <p>\u200b\u548c\u200b\u4e0a\u8fb9\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4e0d\u540c\u200b\uff0c\u200b\u5927\u90e8\u5206\u200b\u9879\u76ee\u200b\u4f7f\u7528\u200b Makefile \u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b Makefile \u200b\u4e2d\u200b\u7f16\u5199\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u5bf9\u5e94\u200b Makefile \u200b\u4e2d\u200b\u7684\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\u4ee5\u200b\u9002\u5e94\u200b\u9f99\u82af\u200b\u67b6\u6784\u200b</p> <ol> <li>GOPATH \u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u65e7\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5bfc\u81f4\u200b\u7f16\u8bd1\u200b\u51fa\u9519\u200b</li> </ol> <p>\u200b\u5982\u679c\u200b\u5728\u200b\u8bbe\u7f6e\u200b GOPROXY \u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\u4e4b\u524d\u200b GOPATH \u200b\u91cc\u200b\u5df2\u7ecf\u200b\u6709\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5305\u200b\uff0c\u200b\u5219\u200b\u53ef\u80fd\u200b\u5bfc\u81f4\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u4f7f\u7528\u200b\u65e7\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5305\u200b\uff0c\u200b\u6240\u4ee5\u200b\u53ef\u4ee5\u200b\u5148\u200b\u6e05\u7a7a\u200b GOPATH</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/go-project/#_4","title":"\u95ee\u9898\u200b\u53cd\u9988","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u53d1\u73b0\u200b\u6709\u200b\u9f99\u82af\u200b\u672a\u200b\u96c6\u6210\u200b\u7684\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5305\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u53cd\u9988\u200b\u7ed9\u200b\u6211\u4eec\u200bissues</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/jar/","title":"Jar","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/jar/#jar","title":"\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u5df2\u200b\u6784\u5efa\u200b\u7684\u200bjar\u200b\u5305","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/jar/#1-zstd-jni-149-1jar","title":"1. zstd-jni-1.4.9-1.jar","text":"<p>https://github.com/Loongson-Cloud-Community/zstd-jni/releases/download/loong64-v1.4.9-1/zstd-jni-1.4.9-1.jar   </p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/","title":"kubevirt\u200b\u5355\u200b\u8282\u70b9\u200b\u90e8\u7f72\u200b\u53c2\u8003\u200b\u6587\u6863","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_1","title":"\u90e8\u7f72\u200b\u7248\u672c","text":"<p>v0.35.0</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_2","title":"\u90e8\u7f72\u200b\u73af\u5883","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_3","title":"\u67b6\u6784\u200b\u4fe1\u606f","text":"<p>loongarch64</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_4","title":"\u7cfb\u7edf","text":"<p>loongnix-server 8.4.0</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_5","title":"\u5185\u6838\u200b\u4fe1\u606f","text":"<p>4.19.190-6.5.lns8.loongarch64</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_6","title":"\u90e8\u7f72\u200b\u6b65\u9aa4","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_7","title":"\u51c6\u5907\u200b\u5de5\u4f5c","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200b\u672c\u6b21\u200b\u90e8\u7f72\u200b\u7528\u5230\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4e0b\u8f7d\u200b\u540e\u200b\u8bf7\u200b\u89e3\u538b\u200b <pre><code>tar -zxf kubevirt-0.35.0-loong64.tar.gz\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#k8s","title":"\u90e8\u7f72\u200bk8s","text":"<p>k8s\u200b\u7684\u200b\u5feb\u901f\u200b\u90e8\u7f72\u200b\u53c2\u8003\u200b\u8fd9\u91cc\u200b </p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#calico","title":"\u6dfb\u52a0\u200bcalico","text":"<pre><code>kubectl apply -f calico.yaml\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#master","title":"\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u89e3\u9664\u200bmaster\u200b\u7684\u200b\u9650\u5236","text":"<pre><code>kubectl taint nodes --all node-role.kubernetes.io/master-\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#kubevirt_1","title":"\u90e8\u7f72\u200bkubevirt","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_8","title":"\u5b89\u88c5\u200b\u4f9d\u8d56","text":"<pre><code>yum -y install qemu-kvm libvirt virt-install bridge-utils\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#kubevirt-v0350","title":"\u4e0b\u8f7d\u200bkubevirt v0.35.0\u200b\u955c\u50cf","text":"<pre><code>docker pull cr.loongnix.cn/kubevirt/virt-operator:0.35.0 &amp;&amp;\\\ndocker pull cr.loongnix.cn/kubevirt/virt-launcher:0.35.0 &amp;&amp;\\\ndocker pull cr.loongnix.cn/kubevirt/virt-handler:0.35.0 &amp;&amp;\\\ndocker pull cr.loongnix.cn/kubevirt/virt-controller:0.35.0 &amp;&amp;\\\ndocker pull cr.loongnix.cn/kubevirt/virt-api:0.35.0\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_9","title":"\u79bb\u7ebf\u200b\u5bfc\u5165\u200b\u955c\u50cf","text":"<p>\u200b\u6240\u6709\u200b\u955c\u50cf\u200b\u90fd\u200b\u4fdd\u5b58\u200b\u5728\u200b <code>images</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5bfc\u5165\u200b\u547d\u4ee4\u200b\u4e3a\u200b\uff1a <pre><code>docker load -i [tar\u200b\u5305\u200b]\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_10","title":"\u90e8\u7f72","text":"<p><pre><code>kubectl apply -f kubevirt-operator.yaml\nkubectl apply -f kubevirt-cr.yaml\n</code></pre> \u200b\u67e5\u770b\u200bpods\u200b\u72b6\u6001\u200b <pre><code>NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE\nkube-system   calico-kube-controllers-698f8585b6-7zrh7   1/1     Running   0          3m56s\nkube-system   calico-node-n478r                          1/1     Running   0          3m56s\nkube-system   coredns-7cb7cc6b47-df6hb                   1/1     Running   0          6m17s\nkube-system   coredns-7cb7cc6b47-qhdgx                   1/1     Running   0          6m17s\nkube-system   etcd-bogon                                 1/1     Running   0          6m15s\nkube-system   kube-apiserver-bogon                       1/1     Running   0          6m15s\nkube-system   kube-controller-manager-bogon              1/1     Running   0          6m15s\nkube-system   kube-proxy-4f468                           1/1     Running   0          6m17s\nkube-system   kube-scheduler-bogon                       1/1     Running   0          6m15s\nkubevirt      virt-api-58c85665f9-gtxn9                  1/1     Running   0          59s\nkubevirt      virt-api-58c85665f9-t77np                  1/1     Running   0          59s\nkubevirt      virt-controller-797544bbbd-7tl4c           1/1     Running   0          42s\nkubevirt      virt-controller-797544bbbd-dxhmw           1/1     Running   0          42s\nkubevirt      virt-handler-nfn9h                         1/1     Running   0          42s\nkubevirt      virt-operator-5459ff7758-sql9t             1/1     Running   0          3m3s\nkubevirt      virt-operator-5459ff7758-vg6g8             1/1     Running   0          3m3s\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#_11","title":"\u542f\u52a8\u200b\u865a\u62df\u673a\u200b\u5b9e\u4f8b","text":"<p>\u200b\u5bfc\u5165\u200b\u865a\u62df\u673a\u200b\u955c\u50cf\u200b <pre><code>docker load -i loongnix-server.tar\n</code></pre> \u200b\u542f\u52a8\u200b\u4e00\u4e2a\u200b\u865a\u62df\u673a\u200b\u5b9e\u4f8b\u200b <pre><code>kubectl apply -f vmi.yaml\n</code></pre> \u200b\u67e5\u770b\u200b\u865a\u62df\u673a\u200b\u5b9e\u4f8b\u200b\u72b6\u6001\u200b <pre><code>kubectl get vmis\n</code></pre> <pre><code>NAME      AGE     PHASE     IP                NODENAME\ntestvmi   2m30s   Running   172.18.29.12/32   bogon\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/kubevirt/#virtctl","title":"virtctl\u200b\u8bbf\u95ee\u200b\u865a\u62df\u673a\u200b\u5b9e\u4f8b","text":"<p>virtctl\u200b\u9759\u6001\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u653e\u200b\u5728\u200b<code>bin</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b <pre><code>./virtctl console testvmi\n</code></pre> \u200b\u4f7f\u7528\u200broot\u200b\u7528\u6237\u200b\u76f4\u63a5\u200b\u767b\u5f55\u200b <pre><code>Successfully connected to testvmi console. The escape sequence is ^]\n\nLoongnix-Server Linux 8\nKernel 4.19.190-6.2.4.lns8.loongarch64 on an loongarch64\n\ntestvmi login: root\nLast login: Mon Feb  6 02:41:57 on tty1\n[root@testvmi ~]# \n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/modify-container-image-metadata/","title":"\u4fee\u6539\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u5143\u200b\u6570\u636e\u200b\u7684\u200b\u65b9\u6cd5","text":"<p>\u200b\u672c\u6587\u200b\u4ecb\u7ecd\u200b\u5728\u200b\u4e0d\u200b\u91cd\u6784\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\uff08\u200b\u540e\u6587\u200b\u7edf\u79f0\u200b\u955c\u50cf\u200b\uff09\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u4fee\u6539\u200b\u955c\u50cf\u200b\u5143\u200b\u6570\u636e\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/modify-container-image-metadata/#_2","title":"\u955c\u50cf\u200b\u5143\u200b\u6570\u636e","text":"<p>\u200b\u955c\u50cf\u200b\u5143\u200b\u6570\u636e\u200b\uff0c\u200b\u5c31\u662f\u200b\u901a\u8fc7\u200b <code>docker inspect $image</code> \u200b\u770b\u5230\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u5305\u62ec\u200b\u955c\u50cf\u200b\u540d\u79f0\u200b\uff0c\u200b\u521b\u5efa\u200b\u65f6\u95f4\u200b\uff0c\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u67b6\u6784\u200b\u7b49\u200b\u3002 \u200b\u5c06\u200b\u955c\u50cf\u200b\u5bfc\u51fa\u200b\u4e3a\u200b tar \u200b\u5305\u200b\u4e4b\u540e\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u955c\u50cf\u200b\u7531\u200b manifest \u200b\u548c\u200b layers \u200b\u6784\u6210\u200b\uff0c\u200b\u5176\u4e2d\u200b manifest \u200b\u548c\u200b layers \u200b\u4e2d\u200b\u7684\u200b json \u200b\u6587\u4ef6\u200b\u90fd\u200b\u5c5e\u4e8e\u200b\u8fd9\u4e2a\u200b\u955c\u50cf\u200b\u7684\u200b\u5143\u200b\u6570\u636e\u200b\u3002</p> <p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u955c\u50cf\u200b\u6784\u6210\u200b\u793a\u4f8b\u200b <pre><code>\u251c\u2500\u2500 56cd0b7152f568cf0e8e17ec2d37db74416ea32e6d5c0f62c87d9c404d60d4ee.json\n\u251c\u2500\u2500 84a7aa0301eb675638756dd950eabb17c572809a21a24d60ede2d1f7fbc0c29e\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 layer.tar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 VERSION\n\u251c\u2500\u2500 dcdeada94ff36fb8f661cf4f72b91c94dc942ed9cea79e0baf108a433827a1f8\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 layer.tar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 VERSION\n\u251c\u2500\u2500 f508bc28db275267838b552afe909f03fe29c8af12b4f434b57cf7b9c7d1838f\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 layer.tar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 VERSION\n\u251c\u2500\u2500 faff0f5bd6c542771b1531732e02f21e346e3be146871e52cc46202e40983220\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 layer.tar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 VERSION\n\u251c\u2500\u2500 manifest.json\n\u2514\u2500\u2500 repositories\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/modify-container-image-metadata/#_3","title":"\u4fee\u6539\u200b\u5143\u200b\u6570\u636e","text":"<p>\u200b\u4ee5\u200b\u5c06\u200b\u955c\u50cf\u200b <code>cr.loongnix.cn/library/haproxy:2.7</code> \u200b\u7684\u200b\u67b6\u6784\u200b\u4fe1\u606f\u200b\u4ece\u200b loongarch64 \u200b\u53d8\u66f4\u200b\u4e3a\u200b loong64 \u200b\u4e3a\u4f8b\u200b\u3002</p> <p>\u200b\u62c9\u53d6\u200b\u955c\u50cf\u200b <pre><code>docker pull cr.loongnix.cn/library/haproxy:2.7\n</code></pre></p> <p>\u200b\u5bfc\u51fa\u200b\u955c\u50cf\u200b \u200b\u9700\u8981\u200b\u5c06\u200b\u955c\u50cf\u200b\u540d\u79f0\u200b\u4e2d\u200b\u7684\u200b <code>/</code> \u200b\u66ff\u6362\u6210\u200b\u666e\u901a\u200b\u5b57\u7b26\u200b <pre><code>docker save -o old/cr.loongnix.cn_library_haproxy_2.7.tar\n</code></pre></p> <p>\u200b\u89e3\u538b\u200b <pre><code>tar -xvf old/cr.loongnix.cn_library_haproxy_2.7.tar -C unpack\n</code></pre></p> <p>\u200b\u4fee\u6539\u200b\u67b6\u6784\u200b <pre><code>find unpack -name *json | xargs -L 1 sed 's/loongarch64/loong64/g'\n</code></pre></p> <p>\u200b\u91cd\u65b0\u200b\u6253\u5305\u200b <pre><code>tar -cvf cr.loongnix.cn_library_haproxy_2.7.tar -C unpack .\n</code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/modify-container-image-metadata/#_4","title":"\u9644\u5f55\u200b \u200b\u6279\u91cf\u200b\u4fee\u6539\u200b\u5143\u200b\u6570\u636e\u200b\u811a\u672c","text":"<pre><code>#!/bin/bash\n\nset -o nounset\nset -o errexit\n\nimages=(\n)\n\ntar_name=\n# pull $image\nget_image()\n{\n  img=$1\n  tar_name=${img//\\//_}.tar.gz\n  echo $img\n  echo $tar_name\n  docker pull $img\n  docker save $img -o old/$tar_name\n}\n\nmodify()\n{\n  tar -xvf old/$tar_name -C unpack\n\n  files=$(find -name *json -print)\n  for file in ${files[@]}; do\n    sed -i 's/loongarch64/loong64/g' $file\n  done\n\n  tar -cvf new/$tar_name -C unpack .\n}\n\nclean_unpack()\n{\n  rm -rf unpack/*\n}\n\nfor image in ${images[@]}; do\n  echo $image\n  get_image $image\n  modify\n  clean_unpack\ndone\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/","title":"Python\u200b\u65e5\u5fd7\u200b\u5904\u7406\u200b(logging\u200b\u6a21\u5757\u200b\u4ecb\u7ecd\u200b)","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#logging","title":"\u4e00\u200b\u3001logging\u200b\u6a21\u5757\u200b\u4f7f\u7528\u200b\u65b9\u5f0f\u200b\u4ecb\u7ecd","text":"<p><code>logging</code>\u200b\u6a21\u5757\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e24\u79cd\u200b\u8bb0\u5f55\u200b\u65e5\u5fd7\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u7b2c\u4e00\u79cd\u200b\u65b9\u5f0f\u200b\u662f\u200b\u4f7f\u7528\u200b<code>logging</code>\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6a21\u5757\u200b\u7ea7\u522b\u200b\u7684\u200b\u51fd\u6570\u200b\u3002</li> <li>\u200b\u7b2c\u4e8c\u79cd\u200b\u65b9\u5f0f\u200b\u662f\u200b\u4f7f\u7528\u200b<code>logging</code>\u200b\u65e5\u5fd7\u200b\u7cfb\u7edf\u200b\u7684\u200b\u56db\u5927\u200b\u7ec4\u4ef6\u200b</li> </ul> <p>\u200b\u5176\u5b9e\u200b\uff0c<code>logging</code>\u200b\u6240\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6a21\u5757\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u4e5f\u200b\u662f\u200b\u5bf9\u200b<code>logging</code>\u200b\u65e5\u5fd7\u200b\u7cfb\u7edf\u200b\u76f8\u5173\u200b\u7c7b\u200b\u7684\u200b\u5c01\u88c5\u200b\u800c\u5df2\u200b\u3002</p> \u200b\u51fd\u6570\u200b \u200b\u8bf4\u660e\u200b logging.debug(msg, args, *kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200bDEBUG\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.info(msg, args, *kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200bINFO\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.warning(msg, args, *kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200bWARNING\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.error(msg, args, *kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200bERROR\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.critical(msg, args, *kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200bCRITICAL\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.log(level, *args, kwargs) \u200b\u521b\u5efa\u200b\u4e00\u6761\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200blevel\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b logging.basicConfig(kwargs) \u200b\u5bf9\u200broot logger\u200b\u8fdb\u884c\u200b\u4e00\u6b21\u6027\u200b\u914d\u7f6e\u200b <p>\u200b\u5176\u4e2d\u200b<code>logging.basicConfig(**kwargs)</code>\u200b\u51fd\u6570\u200b\u7528\u4e8e\u200b\u6307\u5b9a\u200b\u201c\u200b\u8981\u200b\u8bb0\u5f55\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\u201d\u3001\u201c\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b\u201d\u3001\u201c\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u4f4d\u7f6e\u200b\u201d\u3001\u201c\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u7684\u200b\u6253\u5f00\u200b\u6a21\u5f0f\u200b\u201d\u200b\u7b49\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5176\u4ed6\u200b\u51e0\u4e2a\u200b\u90fd\u200b\u662f\u200b\u7528\u4e8e\u200b\u8bb0\u5f55\u200b\u5404\u4e2a\u200b\u7ea7\u522b\u200b\u65e5\u5fd7\u200b\u7684\u200b\u51fd\u6570\u200b\u3002</p> <p>logging\u200b\u6a21\u5757\u200b\u7684\u200b\u56db\u5927\u200b\u7ec4\u4ef6\u200b</p> \u200b\u7ec4\u4ef6\u200b \u200b\u8bf4\u660e\u200b loggers \u200b\u63d0\u4f9b\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\u7684\u200b\u63a5\u53e3\u200b handlers \u200b\u7528\u4e8e\u200b\u5c06\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u53d1\u9001\u5230\u200b\u6307\u5b9a\u200b\u7684\u200b\u76ee\u7684\u200b\u4f4d\u7f6e\u200b filters \u200b\u63d0\u4f9b\u200b\u66f4\u200b\u7ec6\u7c92\u5ea6\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8fc7\u6ee4\u200b\u529f\u80fd\u200b\uff0c\u200b\u7528\u4e8e\u200b\u51b3\u5b9a\u200b\u54ea\u4e9b\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u8f93\u51fa\u200b\uff08\u200b\u5176\u5b83\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5ffd\u7565\u200b\uff09 formatters \u200b\u7528\u4e8e\u200b\u63a7\u5236\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u7684\u200b\u6700\u7ec8\u200b\u8f93\u51fa\u200b\u683c\u5f0f\u200b <p>\u200b\u8bf4\u660e\u200b\uff1a logging\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6a21\u5757\u200b\u7ea7\u522b\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b9e\u9645\u4e0a\u200b\u4e5f\u200b\u662f\u200b\u901a\u8fc7\u200b\u8fd9\u200b\u51e0\u4e2a\u200b\u7ec4\u4ef6\u200b\u7684\u200b\u76f8\u5173\u200b\u5b9e\u73b0\u200b\u7c7b\u6765\u200b\u8bb0\u5f55\u200b\u65e5\u5fd7\u200b\u7684\u200b\uff0c\u200b\u53ea\u662f\u200b\u5728\u200b\u521b\u5efa\u200b\u8fd9\u4e9b\u200b\u7c7b\u200b\u7684\u200b\u5b9e\u4f8b\u200b\u7684\u200b\u65f6\u5019\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u9ed8\u8ba4\u503c\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#logging_1","title":"\u4e8c\u200b\u3001\u200b\u4f7f\u7528\u200blogging\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6a21\u5757\u200b\u7ea7\u200b\u51fd\u6570\u200b\u8bb0\u5f55\u200b\u65e5\u5fd7","text":"<p>\u200b\u56de\u987e\u200b\u524d\u9762\u200b\u63d0\u5230\u200b\u7684\u200b\u51e0\u4e2a\u200b\u91cd\u8981\u200b\u4fe1\u606f\u200b\uff1a</p> <ul> <li>\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200blogging\u200b\u6a21\u5757\u200b\u7ea7\u522b\u200b\u7684\u200b\u65b9\u6cd5\u200b\u5b8c\u6210\u200b\u7b80\u5355\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b</li> <li>\u200b\u53ea\u6709\u200b\u7ea7\u522b\u200b\u5927\u4e8e\u200b\u6216\u8005\u200b\u7b49\u4e8e\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u5668\u200b\u6307\u5b9a\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u624d\u200b\u4f1a\u200b\u88ab\u200b\u8f93\u51fa\u200b\uff0c\u200b\u5c0f\u4e8e\u200b\u8be5\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u4e22\u5f03\u200b\u3002</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#21","title":"2.1 \u200b\u7b80\u5355\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8f93\u51fa","text":"<pre><code>import logging\n# \u200b\u8bbe\u7f6e\u200b\u9ed8\u8ba4\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff0c &gt;=logging.INFO \u200b\u5219\u200b\u8f93\u51fa\u200b\nlogging.basicConfig(level=logging.INFO)\nlogging.debug(\"This is a debug log.\")\nlogging.info(\"This is a info log.\")\nlogging.warning(\"This is a warning log.\")\nlogging.error(\"This is a error log.\")\nlogging.critical(\"This is a critical log.\")\n</code></pre> <p>\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8fd9\u6837\u200b\u5199\u200b\uff1a</p> <pre><code>import logging\nlogging.basicConfig(level=logging.INFO)\nlogging.log(logging.DEBUG, \"This is a debug log.\")\nlogging.log(logging.INFO, \"This is a info log.\")\nlogging.log(logging.WARNING, \"This is a warning log.\")\nlogging.log(logging.ERROR, \"This is a error log.\")\nlogging.log(logging.CRITICAL, \"This is a critical log.\")\n</code></pre> <p>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff1a</p> <pre><code>INFO:root:This is a info log.\nWARNING:root:This is a warning log.\nERROR:root:This is a error log.\nCRITICAL:root:This is a critical log.\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#22","title":"2.2 \u200b\u7591\u95ee","text":"<p>1. \u200b\u6253\u5370\u200b\u51fa\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7684\u200b\u5404\u5b57\u200b\u6bb5\u200b\u662f\u200b\u4ec0\u4e48\u200b\u610f\u601d\u200b\uff1f\u200b\u4e3a\u4ec0\u4e48\u200b\u4f1a\u200b\u8fd9\u6837\u200b\u8f93\u51fa\u200b\uff1f</p> <pre><code>\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff1a\u200b\u65e5\u5fd7\u200b\u5668\u200b\u540d\u79f0\u200b\uff1a\u200b\u65e5\u5fd7\u200b\u5185\u5bb9\u200b\n</code></pre> <p>\u200b\u4e4b\u6240\u4ee5\u200b\u4f1a\u200b\u8fd9\u6837\u200b\u8f93\u51fa\u200b\uff0c\u200b\u662f\u56e0\u4e3a\u200b<code>logging</code>\u200b\u6a21\u5757\u200b\u63d0\u4f9b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\uff0c\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff0c\u200b\u5176\u200b\u9ed8\u8ba4\u503c\u200b\u4e3a\u200b<code>logging.BASIC_FORMAT</code>:</p> <pre><code>BASIC_FORMAT = \"%(levelname)s:%(name)s:%(message)s\"\n</code></pre> <p>2. \u200b\u6253\u5370\u200b\u51fa\u200b\u7684\u200b\u65e5\u5fd7\u200b\u9ed8\u8ba4\u200b\u8f93\u51fa\u200b\u5230\u200b\u4ec0\u4e48\u200b\u4f4d\u7f6e\u200b\uff1f</p> <p><code>logging</code>\u200b\u6a21\u5757\u200b\u63d0\u4f9b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u8f93\u51fa\u200b\u4f4d\u7f6e\u200b\u4e3a\u200b<code>sys.stderr</code></p> <p>3. \u200b\u5982\u4f55\u200b\u77e5\u9053\u200b\u9ed8\u8ba4\u503c\u200b\uff1f</p> <p>\u200b\u67e5\u770b\u200b\u8fd9\u4e9b\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u7684\u200b\u5b9e\u73b0\u200b\u4ee3\u7801\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\uff1a\u200b\u5f53\u200b\u6211\u4eec\u200b\u6ca1\u6709\u200b\u63d0\u4f9b\u200b\u4efb\u4f55\u200b\u914d\u7f6e\u200b\u4fe1\u606f\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u51fd\u6570\u200b\u90fd\u200b\u4f1a\u200b\u53bb\u200b\u8c03\u7528\u200b<code>logging.basicConfig(**kwargs)</code>\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4e14\u200b\u4e0d\u4f1a\u200b\u5411\u200b\u8be5\u200b\u65b9\u6cd5\u200b\u4f20\u9012\u200b\u4efb\u4f55\u200b\u53c2\u6570\u200b\u3002\u200b\u7ee7\u7eed\u200b\u67e5\u770b\u200b<code>basicConfig()</code>\u200b\u65b9\u6cd5\u200b\u7684\u200b\u4ee3\u7801\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u627e\u5230\u200b\u4e0a\u9762\u200b\u8fd9\u4e9b\u200b\u95ee\u9898\u200b\u7684\u200b\u7b54\u6848\u200b\u4e86\u200b\u3002</p> <p>4. \u200b\u600e\u4e48\u200b\u4fee\u6539\u200b\u8fd9\u4e9b\u200b\u9ed8\u8ba4\u503c\u200b\u5462\u200b\uff1f</p> <p>\u200b\u5176\u5b9e\u200b\u5f88\u200b\u7b80\u5355\u200b\uff0c\u200b\u5728\u200b\u6211\u4eec\u200b\u8c03\u7528\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u4e4b\u524d\u200b\uff0c\u200b\u624b\u52a8\u200b\u8c03\u7528\u200b\u4e00\u4e0b\u200b<code>basicConfig</code>\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u628a\u200b\u6211\u4eec\u200b\u60f3\u200b\u8bbe\u7f6e\u200b\u7684\u200b\u5185\u5bb9\u200b\u4ee5\u200b\u53c2\u6570\u200b\u7684\u200b\u5f62\u5f0f\u200b\u4f20\u200b\u8fdb\u53bb\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4e86\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#23-loggingbasicconfig","title":"2.3 logging.basicConfig\u200b\u51fd\u6570\u200b\u8bf4\u660e","text":"<p>\u200b\u8be5\u200b\u65b9\u6cd5\u200b\u7528\u4e8e\u200b<code>logging</code>\u200b\u7cfb\u7edf\u200b\u505a\u200b\u4e00\u4e9b\u200b\u57fa\u672c\u200b\u914d\u7f6e\u200b\uff0c\u200b\u5176\u200b\u65b9\u6cd5\u200b\u5b9a\u4e49\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>logging.basicConfig(**kwargs)\n</code></pre> \u200b\u53c2\u6570\u200b\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b filename \u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u6587\u4ef6\u540d\u200b\uff0c\u200b\u6307\u5b9a\u200b\u8be5\u200b\u8bbe\u7f6e\u200b\u9879\u540e\u200b\uff0c\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u5c31\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u8f93\u51fa\u200b\u5230\u200b\u63a7\u5236\u53f0\u200b\u4e86\u200b filemode \u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u7684\u200b\u6253\u5f00\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200b'a'\u3002\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u8be5\u200b\u9009\u9879\u200b\u8981\u200b\u5728\u200bfilename\u200b\u6307\u5b9a\u200b\u65f6\u624d\u200b\u6709\u6548\u200b format \u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5373\u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u65f6\u6240\u200b\u5305\u542b\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u4fe1\u606f\u200b\u4ee5\u53ca\u200b\u5b83\u4eec\u200b\u7684\u200b\u987a\u5e8f\u200b\u3002logging\u200b\u6a21\u5757\u200b\u5b9a\u4e49\u200b\u7684\u200b\u683c\u5f0f\u200b\u5b57\u200b\u6bb5\u200b\u4e0b\u9762\u200b\u4f1a\u200b\u5217\u51fa\u200b datefmt \u200b\u6307\u5b9a\u200b\u65e5\u671f\u200b/\u200b\u65f6\u95f4\u200b\u683c\u5f0f\u200b\u3002\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u8be5\u200b\u9009\u9879\u200b\u8981\u200b\u5728\u200bformat\u200b\u4e2d\u200b\u5305\u542b\u200b\u65f6\u95f4\u200b\u5b57\u200b\u6bb5\u200b%(asctime)s\u200b\u65f6\u624d\u200b\u6709\u6548\u200b level \u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u5668\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b stream \u200b\u6307\u5b9a\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u76ee\u6807\u200bstream\uff0c\u200b\u5982\u200bsys.stdout\u3001sys.stderr\u200b\u4ee5\u53ca\u200b\u7f51\u7edc\u200bstream\u3002\u200b\u9700\u8981\u200b\u8bf4\u660e\u200b\u7684\u200b\u662f\u200b\uff0cstream\u200b\u548c\u200bfilename\u200b\u4e0d\u80fd\u200b\u540c\u65f6\u200b\u63d0\u4f9b\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u5f15\u53d1\u200b ValueError\u200b\u5f02\u5e38\u200b style Python 3.2\u200b\u4e2d\u200b\u65b0\u200b\u6dfb\u52a0\u200b\u7684\u200b\u914d\u7f6e\u200b\u9879\u200b\u3002\u200b\u6307\u5b9a\u200bformat\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u98ce\u683c\u200b\uff0c\u200b\u53ef\u200b\u53d6\u503c\u200b\u4e3a\u200b'%'\u3001'{'\u200b\u548c\u200b'$'\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200b'%' handlers Python 3.3\u200b\u4e2d\u200b\u65b0\u200b\u6dfb\u52a0\u200b\u7684\u200b\u914d\u7f6e\u200b\u9879\u200b\u3002\u200b\u8be5\u200b\u9009\u9879\u200b\u5982\u679c\u200b\u88ab\u200b\u6307\u5b9a\u200b\uff0c\u200b\u5b83\u200b\u5e94\u8be5\u200b\u662f\u200b\u4e00\u4e2a\u200b\u521b\u5efa\u200b\u4e86\u200b\u591a\u4e2a\u200bHandler\u200b\u7684\u200b\u53ef\u200b\u8fed\u4ee3\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u8fd9\u4e9b\u200bhandler\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u6dfb\u52a0\u200b\u5230\u200broot logger\u3002\u200b\u9700\u8981\u200b\u8bf4\u660e\u200b\u7684\u200b\u662f\u200b\uff1afilename\u3001stream\u200b\u548c\u200bhandlers\u200b\u8fd9\u200b\u4e09\u4e2a\u200b\u914d\u7f6e\u200b\u9879\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5b58\u5728\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u540c\u65f6\u200b\u51fa\u73b0\u200b2\u200b\u4e2a\u200b\u6216\u200b3\u200b\u4e2a\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u5f15\u53d1\u200bValueError\u200b\u5f02\u5e38\u200b\u3002"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#24-logging","title":"2.4 logging\u200b\u5b9a\u4e49\u200b\u7684\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u200b\u5b57\u200b\u6bb5","text":"\u5b57\u200b\u6bb5\u200b/\u200b\u5c5e\u6027\u200b\u540d\u79f0\u200b \u200b\u4f7f\u7528\u200b\u683c\u5f0f\u200b \u200b\u63cf\u8ff0\u200b asctime %(asctime)s \u200b\u65e5\u5fd7\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u7684\u200b\u65f6\u95f4\u200b--\u200b\u4eba\u7c7b\u200b\u53ef\u200b\u8bfb\u200b\u65f6\u95f4\u200b\uff0c\u200b\u5982\u200b\uff1a2003-07-08 16:49:45,896 created %(created)f \u200b\u65e5\u5fd7\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u7684\u200b\u65f6\u95f4\u200b--\u200b\u65f6\u95f4\u200b\u6233\u200b\uff0c\u200b\u5c31\u662f\u200b\u5f53\u65f6\u200b\u8c03\u7528\u200btime.time()\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u7684\u200b\u503c\u200b relativeCreated %(relativeCreated)d \u200b\u65e5\u5fd7\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u7684\u200b\u65f6\u95f4\u200b\u76f8\u5bf9\u200b\u4e8e\u200blogging\u200b\u6a21\u5757\u200b\u52a0\u8f7d\u200b\u65f6\u95f4\u200b\u7684\u200b\u76f8\u5bf9\u200b\u6beb\u79d2\u200b\u6570\u200b\uff08\u200b\u76ee\u524d\u200b\u8fd8\u200b\u4e0d\u200b\u77e5\u9053\u200b\u5e72\u561b\u200b\u7528\u200b\u7684\u200b\uff09 msecs %(msecs)d \u200b\u65e5\u5fd7\u200b\u4e8b\u4ef6\u200b\u53d1\u751f\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6beb\u79d2\u200b\u90e8\u5206\u200b levelname %(levelname)s \u200b\u8be5\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7684\u200b\u6587\u5b57\u200b\u5f62\u5f0f\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff08'DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'\uff09 levelno %(levelno)s \u200b\u8be5\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7684\u200b\u6570\u5b57\u200b\u5f62\u5f0f\u200b\u7684\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff0810, 20, 30, 40, 50\uff09 name %(name)s \u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5668\u200b\u540d\u79f0\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u662f\u200b'root'\uff0c\u200b\u56e0\u4e3a\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200b rootLogger message %(message)s \u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7684\u200b\u6587\u672c\u200b\u5185\u5bb9\u200b\uff0c\u200b\u901a\u8fc7\u200b msg % args\u200b\u8ba1\u7b97\u200b\u5f97\u5230\u200b\u7684\u200b pathname %(pathname)s \u200b\u8c03\u7528\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u7684\u200b\u6e90\u7801\u200b\u6587\u4ef6\u200b\u7684\u200b\u5168\u200b\u8def\u5f84\u200b filename %(filename)s pathname\u200b\u7684\u200b\u6587\u4ef6\u540d\u200b\u90e8\u5206\u200b\uff0c\u200b\u5305\u542b\u200b\u6587\u4ef6\u200b\u540e\u7f00\u200b module %(module)s filename\u200b\u7684\u200b\u540d\u79f0\u200b\u90e8\u5206\u200b\uff0c\u200b\u4e0d\u200b\u5305\u542b\u200b\u540e\u7f00\u200b lineno %(lineno)d \u200b\u8c03\u7528\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u7684\u200b\u6e90\u4ee3\u7801\u200b\u6240\u5728\u200b\u7684\u200b\u884c\u53f7\u200b funcName %(funcName)s \u200b\u8c03\u7528\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u51fd\u6570\u200b\u7684\u200b\u51fd\u6570\u200b\u540d\u200b process %(process)d \u200b\u8fdb\u7a0b\u200bID processName %(processName)s \u200b\u8fdb\u7a0b\u200b\u540d\u79f0\u200b\uff0cPython 3.1\u200b\u65b0\u589e\u200b thread %(thread)d \u200b\u7ebf\u7a0b\u200bID threadName %(thread)s \u200b\u7ebf\u7a0b\u200b\u540d\u79f0"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#25","title":"2.5 \u200b\u65e5\u5fd7\u200b\u5e38\u7528\u200b\u914d\u7f6e\u200b\u6f14\u793a","text":"<p>\u200b\u7b80\u5355\u200b\u914d\u7f6e\u200b\u4e00\u4e0b\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\uff1a</p> <pre><code>logging.basicConfig(level=logging.DEBUG)\nlogging.log(logging.DEBUG, \"This is a debug log.\")\nlogging.log(logging.INFO, \"This is a info log.\")\nlogging.log(logging.WARNING, \"This is a warning log.\")\nlogging.log(logging.ERROR, \"This is a error log.\")\nlogging.log(logging.CRITICAL, \"This is a critical log.\")\n</code></pre> <p>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff1a</p> <pre><code>DEBUG:root:This is a debug log.\nINFO:root:This is a info log.\nWARNING:root:This is a warning log.\nERROR:root:This is a error log.\nCRITICAL:root:This is a critical log.\n</code></pre> <p>\u200b\u6240\u6709\u200b\u7b49\u7ea7\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u5168\u90e8\u200b\u8f93\u51fa\u200b\u4e86\u200b\uff0c\u200b\u8bf4\u660e\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b\u4e86\u200b\u3002</p> <p>\u200b\u5728\u200b\u914d\u7f6e\u200b\u65e5\u5fd7\u200b\u5668\u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u200b\uff0c\u200b\u7ee7\u7eed\u200b\u914d\u7f6e\u200b\u4e0b\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u548c\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b</p> <pre><code>import logging\nLOG_FORMAT = \"%(asctime)s-%(levelname)s-%(message)s\"\nlogging.basicConfig(level=logging.DEBUG, format=LOG_FORMAT, filename=\"my.log\")\nlogging.log(logging.DEBUG, \"This is a debug log.\")\nlogging.log(logging.INFO, \"This is a info log.\")\nlogging.log(logging.WARNING, \"This is a warning log.\")\nlogging.log(logging.ERROR, \"This is a error log.\")\nlogging.log(logging.CRITICAL, \"This is a critical log.\")\n</code></pre> <p>\u200b\u6b64\u65f6\u200b\u4f1a\u200b\u53d1\u73b0\u200b\u63a7\u5236\u53f0\u200b\u4e4b\u4e2d\u200b\u5df2\u7ecf\u200b\u6ca1\u6709\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u4e86\u200b\uff0c\u200b\u4f46\u662f\u200b\u5728\u200bpython\u200b\u4ee3\u7801\u200b\u7684\u200b\u76f8\u540c\u200b\u76ee\u5f55\u200b\u4e0b\u4f1a\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u540d\u4e3a\u200b\"my.log\"\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u7684\u200b\u5185\u5bb9\u200b\u4e3a\u200b\uff1a</p> <pre><code>2024-01-03 10:44:11,954-DEBUG-This is a debug log.\n2024-01-03 10:44:11,954-INFO-This is a info log.\n2024-01-03 10:44:11,955-WARNING-This is a warning log.\n2024-01-03 10:44:11,955-ERROR-This is a error log.\n2024-01-03 10:44:11,955-CRITICAL-This is a critical log.\n</code></pre> <p>\u200b\u5728\u200b\u6b64\u57fa\u7840\u200b\u4e0a\u200b\u6211\u4eec\u200b\u518d\u200b\u6765\u200b\u8bbe\u7f6e\u200b\u4e00\u4e0b\u200b\u65e5\u671f\u200b/\u200b\u65f6\u95f4\u200b\u683c\u5f0f\u200b\uff1a</p> <pre><code>import logging\nLOG_FORMAT = \"%(asctime)s-%(levelname)s-%(message)s\"\nDATE_FORMAT = \"%m/%d/%Y %H:%M:%S %p\"\nlogging.basicConfig(level=logging.DEBUG, format=LOG_FORMAT, filename=\"my.log\", datefmt=DATE_FORMAT)\nlogging.log(logging.DEBUG, \"This is a debug log.\")\nlogging.log(logging.INFO, \"This is a info log.\")\nlogging.log(logging.WARNING, \"This is a warning log.\")\nlogging.log(logging.ERROR, \"This is a error log.\")\nlogging.log(logging.CRITICAL, \"This is a critical log.\")\n</code></pre> <pre><code>01/03/2024 10:51:43 AM-DEBUG-This is a debug log.\n01/03/2024 10:51:43 AM-INFO-This is a info log.\n01/03/2024 10:51:43 AM-WARNING-This is a warning log.\n01/03/2024 10:51:43 AM-ERROR-This is a error log.\n01/03/2024 10:51:43 AM-CRITICAL-This is a critical log.\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#26","title":"2.6 \u200b\u5176\u5b83\u200b\u8bf4\u660e","text":"<p>\u200b\u51e0\u4e2a\u200b\u8981\u200b\u8bf4\u660e\u200b\u7684\u200b\u5185\u5bb9\u200b\uff1a</p> <ul> <li> <p><code>logging.basicConfig()</code>\u200b\u51fd\u6570\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e00\u6b21\u6027\u200b\u7684\u200b\u7b80\u5355\u200b\u914d\u7f6e\u200b\u5de5\u5177\u200b\u4f7f\u200b\uff0c\u200b\u4e5f\u5c31\u662f\u8bf4\u200b\u53ea\u6709\u200b\u5728\u200b\u7b2c\u4e00\u6b21\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u65f6\u4f1a\u200b\u8d77\u200b\u4f5c\u7528\u200b\uff0c\u200b\u540e\u7eed\u200b\u518d\u6b21\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u65f6\u200b\u5b8c\u5168\u200b\u4e0d\u4f1a\u200b\u4ea7\u751f\u200b\u4efb\u4f55\u200b\u64cd\u4f5c\u200b\u7684\u200b\uff0c\u200b\u591a\u6b21\u200b\u8c03\u7528\u200b\u7684\u200b\u8bbe\u7f6e\u200b\u5e76\u200b\u4e0d\u662f\u200b\u7d2f\u52a0\u200b\u64cd\u4f5c\u200b\u3002</p> </li> <li> <p>\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff08<code>Logger</code>\uff09\u200b\u662f\u200b\u6709\u200b\u5c42\u7ea7\u200b\u5173\u7cfb\u200b\u7684\u200b\uff0c\u200b\u4e0a\u9762\u200b\u8c03\u7528\u200b\u7684\u200b<code>logging</code>\u200b\u6a21\u5757\u200b\u7ea7\u522b\u200b\u7684\u200b\u51fd\u6570\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5668\u662f\u200b<code>RootLogger</code>\u200b\u7c7b\u200b\u7684\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u5176\u200b\u540d\u79f0\u200b\u4e3a\u200b<code>root</code>\uff0c\u200b\u5b83\u200b\u662f\u200b\u5904\u4e8e\u200b\u65e5\u5fd7\u200b\u5668\u200b\u5c42\u7ea7\u200b\u5173\u7cfb\u200b\u6700\u200b\u9876\u5c42\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff0c\u200b\u4e14\u200b\u8be5\u200b\u5b9e\u4f8b\u200b\u662f\u200b\u4ee5\u200b\u5355\u4f8b\u200b\u6a21\u5f0f\u200b\u5b58\u5728\u200b\u7684\u200b\u3002</p> </li> <li> <p>\u200b\u5982\u679c\u200b\u8981\u200b\u8bb0\u5f55\u200b\u7684\u200b\u65e5\u5fd7\u200b\u4e2d\u200b\u5305\u542b\u200b\u53d8\u91cf\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7b2c\u4e00\u4e2a\u200b\u53c2\u6570\u200b\u4f5c\u4e3a\u200b\u5b57\u7b26\u4e32\u200b\u683c\u5f0f\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u53d8\u91cf\u200b\u6570\u636e\u200b\u4f5c\u4e3a\u200b\u7b2c\u4e8c\u4e2a\u200b\u53c2\u6570\u200b*args\u200b\u7684\u200b\u503c\u200b\u8fdb\u884c\u200b\u4f20\u9012\u200b\uff0c\u200b\u5982\u200b:<code>logging.warning('%s is %d years old.', 'Tom', 10)</code>\uff0c\u200b\u8f93\u51fa\u200b\u5185\u5bb9\u200b\u4e3a\u200b<code>WARNING:root:Tom is 10 years old.</code>\u3002</p> </li> <li> <p><code>logging.debug()</code>, <code>logging.info()</code>\u200b\u7b49\u200b\u65b9\u6cd5\u200b\u7684\u200b\u5b9a\u4e49\u200b\u4e2d\u200b\uff0c\u200b\u9664\u4e86\u200b<code>msg</code>\u200b\u548c\u200b<code>args</code>\u200b\u53c2\u6570\u200b\u5916\u200b\uff0c\u200b\u8fd8\u6709\u200b\u4e00\u4e2a\u200b<code>**kwargs</code>\u200b\u53c2\u6570\u200b\u3002\u200b\u5b83\u4eec\u200b\u652f\u6301\u200b3\u200b\u4e2a\u200b\u5173\u952e\u5b57\u200b\u53c2\u6570\u200b: <code>exc_info</code>, <code>stack_info</code>, <code>extra</code>\uff0c\u200b\u4e0b\u9762\u200b\u5bf9\u200b\u8fd9\u200b\u51e0\u4e2a\u200b\u5173\u952e\u5b57\u200b\u53c2\u6570\u200b\u4f5c\u4e2a\u200b\u8bf4\u660e\u200b\u3002</p> </li> </ul> <p>\u200b\u5173\u4e8e\u200bexc_info, stack_info, extra\u200b\u5173\u952e\u8bcd\u200b\u53c2\u6570\u200b\u7684\u200b\u8bf4\u660e\u200b\uff1a</p> <ul> <li> <p>exc_info(exception_info)\uff1a \u200b\u5176\u503c\u200b\u4e3a\u200b\u5e03\u5c14\u503c\u200b\uff0c\u200b\u5982\u679c\u200b\u8be5\u200b\u53c2\u6570\u200b\u7684\u200b\u503c\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b<code>True</code>\uff0c\u200b\u5219\u200b\u4f1a\u200b\u5c06\u200b\u5f02\u5e38\u200b\u5f02\u5e38\u200b\u4fe1\u606f\u200b\u6dfb\u52a0\u200b\u5230\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u4e2d\u200b\u3002\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u5f02\u5e38\u200b\u4fe1\u606f\u200b\u5219\u200b\u6dfb\u52a0\u200b<code>None</code>\u200b\u5230\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u4e2d\u200b\u3002</p> </li> <li> <p>stack_info\uff1a \u200b\u5176\u503c\u200b\u4e5f\u200b\u4e3a\u200b\u5e03\u5c14\u503c\u200b\uff0c\u200b\u9ed8\u8ba4\u503c\u200b\u4e3a\u200bFalse\u3002\u200b\u5982\u679c\u200b\u8be5\u200b\u53c2\u6570\u200b\u7684\u200b\u503c\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bTrue\uff0c\u200b\u6808\u200b\u4fe1\u606f\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u6dfb\u52a0\u200b\u5230\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u4e2d\u200b\u3002</p> </li> <li> <p>extra\uff1a \u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b\u5b57\u5178\u200b\uff08dict\uff09\u200b\u53c2\u6570\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u7528\u6765\u200b\u81ea\u5b9a\u4e49\u200b\u6d88\u606f\u200b\u683c\u5f0f\u200b\u4e2d\u200b\u6240\u200b\u5305\u542b\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4f46\u662f\u200b\u5b83\u200b\u7684\u200bkey\u200b\u4e0d\u80fd\u200b\u4e0e\u200blogging\u200b\u6a21\u5757\u200b\u5b9a\u4e49\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u51b2\u7a81\u200b\u3002</p> </li> </ul> <p>\u200b\u4e00\u4e2a\u200b\u4f8b\u5b50\u200b\uff1a</p> <pre><code>FORMAT = '%(asctime)s %(clientip)-15s %(user)-8s %(message)s'\nlogging.basicConfig(format=FORMAT)\nd = {'clientip': '192.168.0.1', 'user': 'jack'}\nlogger = logging.getLogger('tcpserver')\nlogger.warning('Protocol problem: %s', 'connection reset', extra=d)\n</code></pre> <p>\u200b\u8f93\u51fa\u200b</p> <pre><code>2024-01-03 13:56:40,112 192.168.0.1     jack     Protocol problem: connection reset\n</code></pre> <p><code>exc_info=True</code>\u200b\u7684\u200b\u6848\u4f8b\u200b\uff1a</p> <pre><code>LOG_FORMAT = \"%(asctime)s-%(levelname)s-%(message)s\"\nDATE_FORMAT = \"%m/%d/%Y %H:%M:%S %p\"\nlogging.basicConfig(level=logging.DEBUG, format=LOG_FORMAT, datefmt=DATE_FORMAT)\ntry:\n1/0\nexcept Exception as e:\nlogging.log(logging.WARNING, \"This is a warning log.\", exc_info=True, stack_info=False)\n</code></pre> <p>\u200b\u4f1a\u200b\u5728\u200b\u5f02\u5e38\u200b\u5757\u200b\uff0c\u200b\u91cc\u9762\u200b\u8f93\u51fa\u200b\u5f02\u5e38\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u518d\u200b\u5f02\u5e38\u200b\u5757\u200b\u91cc\u9762\u200b\uff0c\u200b\u5219\u200b\u8f93\u51fa\u200b<code>NoneType</code></p> <pre><code>01/03/2024 14:01:39 PM-WARNING-This is a warning log.\nTraceback (most recent call last):\n  File \"demo.py\", line 11, in &lt;module&gt;\n    1/0\nZeroDivisionError: division by zero\n</code></pre> <p><code>stack_info=True</code>\u200b\u7684\u200b\u6848\u4f8b\u200b\uff1a</p> <pre><code>logging.log(logging.WARNING, \"This is a warning log.\", exc_info=False, stack_info=True)\n</code></pre> <p><code>stack_info=True</code>\u200b\u65e0\u8bba\u5982\u4f55\u200b\u90fd\u200b\u4f1a\u200b\u8f93\u51fa\u200b\u8c03\u7528\u200b\u6808\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>01/03/2024 14:12:00 PM-WARNING-This is a warning log.\nStack (most recent call last):\nFile \"demo.py\", line 9, in &lt;module&gt;\nlogging.log(logging.WARNING, \"This is a warning log.\", exc_info=False, stack_info=True)\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#logging_2","title":"\u4e09\u200b\u3001 logging\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5904\u7406\u200b\u7ec4\u4ef6","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#31-logging","title":"3.1 logging\u200b\u65e5\u5fd7\u200b\u6a21\u5757\u200b\u56db\u5927\u200b\u7ec4\u4ef6","text":"<p>\u200b\u5728\u200b\u4ecb\u7ecd\u200b<code>logging</code>\u200b\u6a21\u5757\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6d41\u200b\u5904\u7406\u200b\u6d41\u7a0b\u200b\u4e4b\u524d\u200b\uff0c\u200b\u6211\u4eec\u200b\u5148\u200b\u6765\u200b\u4ecb\u7ecd\u200b\u4e0b\u200b<code>logging</code>\u200b\u6a21\u5757\u200b\u7684\u200b\u56db\u5927\u200b\u7ec4\u4ef6\u200b\uff1a</p> \u200b\u7ec4\u4ef6\u200b\u540d\u79f0\u200b \u200b\u5bf9\u5e94\u200b\u7c7b\u540d\u200b \u200b\u529f\u80fd\u200b\u63cf\u8ff0\u200b \u200b\u65e5\u5fd7\u200b\u5668\u200b Logger \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u200b\u4e00\u76f4\u200b\u4f7f\u7528\u200b\u7684\u200b\u63a5\u53e3\u200b \u200b\u5904\u7406\u5668\u200b Handler \u200b\u5c06\u200blogger\u200b\u521b\u5efa\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u53d1\u9001\u5230\u200b\u5408\u9002\u200b\u7684\u200b\u76ee\u7684\u200b\u8f93\u51fa\u200b \u200b\u8fc7\u6ee4\u5668\u200b Filter \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u66f4\u200b\u7ec6\u7c92\u5ea6\u200b\u7684\u200b\u63a7\u5236\u200b\u5de5\u5177\u200b\u6765\u200b\u51b3\u5b9a\u200b\u8f93\u51fa\u200b\u54ea\u6761\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\uff0c\u200b\u4e22\u5f03\u200b\u54ea\u6761\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b \u200b\u683c\u5f0f\u200b\u5668\u200b Formatter \u200b\u51b3\u5b9a\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7684\u200b\u6700\u7ec8\u200b\u8f93\u51fa\u200b\u683c\u5f0f\u200b <p>\u200b\u8fd9\u4e9b\u200b\u7ec4\u4ef6\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb\u200b\u63cf\u8ff0\u200b\uff1a</p> <ul> <li> <p>\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff08<code>logger</code>\uff09\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u5c06\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u8f93\u51fa\u200b\u5230\u200b\u76ee\u6807\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u5982\u200b\uff1a\u200b\u6587\u4ef6\u200b\u3001<code>sys.stdout</code>\u3001\u200b\u7f51\u7edc\u200b\u7b49\u200b\uff1b</p> </li> <li> <p>\u200b\u4e0d\u540c\u200b\u7684\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u65e5\u5fd7\u200b\u8f93\u51fa\u200b\u5230\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff1b</p> </li> <li> <p>\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff08<code>logger</code>\uff09\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u591a\u4e2a\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u5c06\u200b\u540c\u200b\u4e00\u6761\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u8f93\u51fa\u200b\u5230\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff1b \u200b\u6bcf\u4e2a\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u81ea\u5df1\u200b\u7684\u200b\u8fc7\u6ee4\u5668\u200b\uff08<code>filter</code>\uff09\u200b\u5b9e\u73b0\u200b\u65e5\u5fd7\u200b\u8fc7\u6ee4\u200b\uff0c\u200b\u4ece\u800c\u200b\u53ea\u200b\u4fdd\u7559\u200b\u611f\u5174\u8da3\u200b\u7684\u200b\u65e5\u5fd7\u200b\uff1b</p> </li> <li> <p>\u200b\u6bcf\u4e2a\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8bbe\u7f6e\u200b\u81ea\u5df1\u200b\u7684\u200b\u683c\u5f0f\u200b\u5668\u200b\uff08<code>formatter</code>\uff09\u200b\u5b9e\u73b0\u200b\u540c\u200b\u4e00\u6761\u200b\u65e5\u5fd7\u200b\u4ee5\u200b\u4e0d\u540c\u200b\u7684\u200b\u683c\u5f0f\u200b\u8f93\u51fa\u200b\u5230\u200b\u4e0d\u540c\u200b\u7684\u200b\u5730\u65b9\u200b\u3002</p> </li> <li> <p>\u200b\u7b80\u5355\u200b\u70b9\u200b\u8bf4\u200b\u5c31\u662f\u200b\uff1a\u200b\u65e5\u5fd7\u200b\u5668\u200b\uff08<code>logger</code>\uff09\u200b\u662f\u200b\u5165\u53e3\u200b\uff0c\u200b\u771f\u6b63\u200b\u5e72\u6d3b\u513f\u200b\u7684\u200b\u662f\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\uff0c\u200b\u5904\u7406\u5668\u200b\uff08<code>handler</code>\uff09\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8fc7\u6ee4\u5668\u200b\uff08<code>filter</code>\uff09\u200b\u548c\u200b\u683c\u5f0f\u200b\u5668\u200b\uff08<code>formatter</code>\uff09\u200b\u5bf9\u8981\u200b\u8f93\u51fa\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5185\u5bb9\u200b\u505a\u200b\u8fc7\u6ee4\u200b\u548c\u200b\u683c\u5f0f\u5316\u200b\u7b49\u200b\u5904\u7406\u200b\u64cd\u4f5c\u200b\u3002</p> </li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#32-logger","title":"3.2 Logger\u200b\u7ec4\u4ef6\u200b\u8bf4\u660e","text":"<p><code>Logger</code>\u200b\u5bf9\u8c61\u200b\u6709\u200b3\u200b\u4e2a\u200b\u4efb\u52a1\u200b\u8981\u200b\u505a\u200b\uff1a</p> <ol> <li>\u200b\u5411\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u66b4\u9732\u200b\u51e0\u4e2a\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4f7f\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u8bb0\u5f55\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\uff1b</li> <li>\u200b\u57fa\u4e8e\u200b\u65e5\u5fd7\u200b\u4e25\u91cd\u200b\u7b49\u7ea7\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u8fc7\u6ee4\u200b\u8bbe\u65bd\u200b\uff09\u200b\u6216\u200b<code>filter</code>\u200b\u5bf9\u8c61\u200b\u6765\u200b\u51b3\u5b9a\u200b\u8981\u200b\u5bf9\u200b\u54ea\u4e9b\u200b\u65e5\u5fd7\u200b\u8fdb\u884c\u200b\u540e\u7eed\u200b\u5904\u7406\u200b\uff1b</li> <li>\u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u4f20\u9001\u200b\u7ed9\u200b\u6240\u6709\u200b\u611f\u5174\u8da3\u200b\u7684\u200b\u65e5\u5fd7\u200b<code>handlers</code>\u3002 <code>Logger</code>\u200b\u5bf9\u8c61\u200b\u6700\u200b\u5e38\u7528\u200b\u7684\u200b\u65b9\u6cd5\u200b\u5206\u4e3a\u200b\u4e24\u7c7b\u200b\uff1a\u200b\u914d\u7f6e\u200b\u7c7b\u200b\u7684\u200b\u65b9\u6cd5\u200b\u548c\u200b\u6d88\u606f\u200b\u53d1\u9001\u200b\u7c7b\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002</li> </ol> <p>\u200b\u6700\u200b\u5e38\u7528\u200b\u7684\u200b\u914d\u7f6e\u200b\u65b9\u6cd5\u200b\u5982\u4e0b\u200b\uff1a</p> \u200b\u65b9\u6cd5\u200b \u200b\u63cf\u8ff0\u200b Logger.setLevel() \u200b\u8bbe\u7f6e\u200b\u65e5\u5fd7\u200b\u5668\u200b\u5c06\u200b\u4f1a\u200b\u5904\u7406\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u7684\u200b\u6700\u4f4e\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b Logger.addHandler() \u200b\u548c\u200b Logger.removeHandler() \u200b\u4e3a\u200b\u8be5\u200blogger\u200b\u5bf9\u8c61\u200b\u6dfb\u52a0\u200b \u200b\u548c\u200b \u200b\u79fb\u9664\u200b\u4e00\u4e2a\u200bhandler\u200b\u5bf9\u8c61\u200b Logger.addFilter() \u200b\u548c\u200b Logger.removeFilter() \u200b\u4e3a\u200b\u8be5\u200blogger\u200b\u5bf9\u8c61\u200b\u6dfb\u52a0\u200b \u200b\u548c\u200b \u200b\u79fb\u9664\u200b\u4e00\u4e2a\u200bfilter\u200b\u5bf9\u8c61\u200b <p>logger\u200b\u5bf9\u8c61\u200b\u914d\u7f6e\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4e0b\u9762\u200b\u7684\u200b\u65b9\u6cd5\u200b\u6765\u200b\u521b\u5efa\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\uff1a</p> \u200b\u65b9\u6cd5\u200b \u200b\u63cf\u8ff0\u200b Logger.debug(), Logger.info(), Logger.warning(), Logger.error(), Logger.critical() \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u5b83\u4eec\u200b\u7684\u200b\u65b9\u6cd5\u200b\u540d\u200b\u5bf9\u5e94\u200b\u7b49\u7ea7\u200b\u7684\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b Logger.exception() \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u7c7b\u4f3c\u200b\u4e8e\u200bLogger.error()\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\uff0c \u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200bexception\u200b\u5757\u200b\uff0c\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b<code>exc_info=True</code> Logger.log() \u200b\u9700\u8981\u200b\u83b7\u53d6\u200b\u4e00\u4e2a\u200b\u660e\u786e\u200b\u7684\u200b\u65e5\u5fd7\u200blevel\u200b\u53c2\u6570\u200b\u6765\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\uff0c\u200b\u5728\u200b\u81ea\u5b9a\u4e49\u200blevel\u200b\u7684\u200b\u65f6\u5019\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <p>\u200b\u90a3\u4e48\u200b\uff0c\u200b\u600e\u6837\u200b\u5f97\u5230\u200b\u4e00\u4e2a\u200b<code>Logger</code>\u200b\u5bf9\u8c61\u200b\u5462\u200b\uff1f\u200b\u4e00\u79cd\u200b\u65b9\u5f0f\u200b\u662f\u200b\u901a\u8fc7\u200b<code>Logger</code>\u200b\u7c7b\u200b\u7684\u200b\u5b9e\u4f8b\u200b\u5316\u200b\u65b9\u6cd5\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b<code>Logger</code>\u200b\u7c7b\u200b\u7684\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u4f46\u662f\u200b\u6211\u4eec\u200b\u901a\u5e38\u200b\u90fd\u200b\u662f\u200b\u7528\u200b\u7b2c\u4e8c\u79cd\u200b\u65b9\u5f0f\u200b--<code>logging.getLogger()</code>\u200b\u65b9\u6cd5\u200b\u3002</p> <p><code>logging.getLogger()</code>\u200b\u65b9\u6cd5\u200b\u6709\u200b\u4e00\u4e2a\u200b\u53ef\u200b\u9009\u200b\u53c2\u6570\u200b<code>name</code>\uff0c\u200b\u8be5\u200b\u53c2\u6570\u200b\u8868\u793a\u200b\u5c06\u8981\u200b\u8fd4\u56de\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5668\u200b\u7684\u200b\u540d\u79f0\u200b\u6807\u8bc6\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u63d0\u4f9b\u200b\u8be5\u200b\u53c2\u6570\u200b\uff0c\u200b\u5219\u200b\u5176\u503c\u200b\u4e3a\u200b'root'\u3002\u200b\u82e5\u200b\u4ee5\u200b\u76f8\u540c\u200b\u7684\u200b<code>name</code>\u200b\u53c2\u6570\u503c\u200b\u591a\u6b21\u200b\u8c03\u7528\u200b<code>getLogger()</code>\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5c06\u4f1a\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u540c\u4e00\u4e2a\u200b<code>logger</code>\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5f15\u7528\u200b\u3002</p> <p>\u200b\u901a\u8fc7\u200b<code>logging.Logger.manager.loggerDict.keys()</code>\u200b\u53ef\u4ee5\u200b\u83b7\u53d6\u200b\u5230\u200b\u6240\u6709\u200blogger\u200b\u7684\u200b\u540d\u79f0\u200b</p> <p>\u200b\u5173\u4e8e\u200b<code>logger</code>\u200b\u7684\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u4e0e\u200b\u6709\u6548\u200b\u7b49\u7ea7\u200b\u7684\u200b\u8bf4\u660e\u200b\uff1a</p> <ul> <li> <p><code>logger</code>\u200b\u7684\u200b\u540d\u79f0\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4ee5\u200b<code>.</code>\u200b\u5206\u5272\u200b\u7684\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\uff0c\u200b\u6bcf\u4e2a\u200b<code>.</code>\u200b\u540e\u9762\u200b\u7684\u200b<code>logger</code>\u200b\u90fd\u200b\u662f\u200b<code>.</code>\u200b\u524d\u9762\u200b\u7684\u200b<code>logger</code>\u200b\u7684\u200b<code>children</code>\uff0c\u200b\u4f8b\u5982\u200b\uff0c\u200b\u6709\u200b\u4e00\u4e2a\u200b\u540d\u79f0\u200b\u4e3a\u200b<code>foo</code>\u200b\u7684\u200b<code>logger</code>\uff0c\u200b\u5176\u5b83\u200b\u540d\u79f0\u200b\u5206\u522b\u200b\u4e3a\u200b<code>foo.bar</code>,<code>foo.bar.baz</code>\u200b\u548c\u200b<code>foo.bam</code>\u200b\u90fd\u200b\u662f\u200b<code>foo</code>\u200b\u7684\u200b\u540e\u4ee3\u200b\u3002</p> </li> <li> <p><code>logger</code>\u200b\u6709\u200b\u4e00\u4e2a\u200b\"\u200b\u6709\u6548\u200b\u7b49\u7ea7\u200b\uff08<code>effective level</code>\uff09\"\u200b\u7684\u200b\u6982\u5ff5\u200b\u3002\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b<code>logger</code>\u200b\u4e0a\u200b\u6ca1\u6709\u200b\u88ab\u200b\u660e\u786e\u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200b<code>level</code>\uff0c\u200b\u90a3\u4e48\u200b\u8be5\u200b<code>logger</code>\u200b\u5c31\u662f\u200b\u4f7f\u7528\u200b\u5b83\u200b<code>parent</code>\u200b\u7684\u200b<code>level</code>;\u200b\u5982\u679c\u200b\u5b83\u200b\u7684\u200b<code>parent</code>\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u660e\u786e\u200b\u8bbe\u7f6e\u200b<code>level</code>\u200b\u5219\u200b\u7ee7\u7eed\u200b\u5411\u4e0a\u200b\u67e5\u627e\u200b<code>parent</code>\u200b\u7684\u200b<code>parent</code>\u200b\u7684\u200b\u6709\u6548\u200b<code>level</code>\uff0c\u200b\u4f9d\u6b21\u200b\u7c7b\u63a8\u200b\uff0c\u200b\u76f4\u5230\u200b\u627e\u5230\u200b\u4e2a\u200b\u4e00\u4e2a\u200b\u660e\u786e\u200b\u8bbe\u7f6e\u200b\u4e86\u200b<code>level</code>\u200b\u7684\u200b\u7956\u5148\u200b\u4e3a\u6b62\u200b\u3002\u200b\u9700\u8981\u200b\u8bf4\u660e\u200b\u7684\u200b\u662f\u200b\uff0c<code>root logger</code>\u200b\u603b\u662f\u200b\u4f1a\u200b\u6709\u200b\u4e00\u4e2a\u200b\u660e\u786e\u200b\u7684\u200b<code>level</code>\u200b\u8bbe\u7f6e\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u4e3a\u200b <code>WARNING</code>\uff09\u3002\u200b\u5f53\u200b\u51b3\u5b9a\u200b\u662f\u5426\u200b\u53bb\u200b\u5904\u7406\u200b\u4e00\u4e2a\u200b\u5df2\u200b\u53d1\u751f\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u65f6\u200b\uff0c<code>logger</code>\u200b\u7684\u200b\u6709\u6548\u200b\u7b49\u7ea7\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u7528\u6765\u200b\u51b3\u5b9a\u200b\u662f\u5426\u200b\u5c06\u200b\u8be5\u200b\u4e8b\u4ef6\u200b\u4f20\u9012\u200b\u7ed9\u200b\u8be5\u200b<code>logger</code>\u200b\u7684\u200b<code>handlers</code>\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\u3002</p> </li> <li> <p><code>child loggers</code>\u200b\u5728\u200b\u5b8c\u6210\u200b\u5bf9\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u7684\u200b\u5904\u7406\u200b\u540e\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4f1a\u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u4f20\u9012\u200b\u7ed9\u4e0e\u200b\u5b83\u4eec\u200b\u7684\u200b\u7956\u5148\u200b<code>loggers</code>\u200b\u76f8\u5173\u200b\u7684\u200b<code>handlers</code>\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u6211\u4eec\u200b\u4e0d\u5fc5\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4e2d\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u6240\u6709\u200b<code>loggers</code>\u200b\u5b9a\u4e49\u200b\u548c\u200b\u914d\u7f6e\u200b<code>handlers</code>\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u9876\u5c42\u200b\u7684\u200b<code>logger</code>\u200b\u914d\u7f6e\u200b<code>handlers</code>\uff0c\u200b\u7136\u540e\u200b\u6309\u7167\u200b\u9700\u8981\u200b\u521b\u5efa\u200b<code>child loggers</code>\u200b\u5c31\u200b\u53ef\u200b\u8db3\u591f\u200b\u4e86\u200b\u3002\u200b\u6211\u4eec\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5c06\u200b\u4e00\u4e2a\u200b<code>logger</code>\u200b\u7684\u200b<code>propagate</code>\u200b\u5c5e\u6027\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b<code>False</code>\u200b\u6765\u200b\u5173\u95ed\u200b\u8fd9\u79cd\u200b\u4f20\u9012\u200b\u673a\u5236\u200b\u3002</p> </li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#33-handler","title":"3.3 Handler\u200b\u7ec4\u4ef6\u200b\u8bf4\u660e","text":"<p><code>Handler</code>\u200b\u5bf9\u8c61\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\uff08\u200b\u57fa\u4e8e\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u7684\u200b<code>level</code>\uff09\u200b\u5c06\u200b\u6d88\u606f\u200b\u5206\u53d1\u200b\u5230\u200b<code>handler</code>\u200b\u6307\u5b9a\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff08\u200b\u6587\u4ef6\u200b\u3001\u200b\u7f51\u7edc\u200b\u3001\u200b\u90ae\u4ef6\u200b\u7b49\u200b\uff09\u3002<code>Logger</code>\u200b\u5bf9\u8c61\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b<code>addHandler()</code>\u200b\u65b9\u6cd5\u200b\u4e3a\u200b\u81ea\u5df1\u200b\u6dfb\u52a0\u200b<code>0</code>\u200b\u4e2a\u200b\u6216\u8005\u200b\u66f4\u200b\u591a\u4e2a\u200b<code>handler</code>\u200b\u5bf9\u8c61\u200b\u3002\u200b\u6bd4\u5982\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u80fd\u200b\u60f3\u8981\u200b\u5b9e\u73b0\u200b\u4ee5\u4e0b\u200b\u51e0\u4e2a\u200b\u65e5\u5fd7\u200b\u9700\u6c42\u200b\uff1a</p> <ul> <li>\u200b\u628a\u200b\u6240\u6709\u200b\u65e5\u5fd7\u200b\u90fd\u200b\u53d1\u9001\u5230\u200b\u4e00\u4e2a\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff1b</li> <li>\u200b\u628a\u200b\u6240\u6709\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b<code>error</code>\u200b\u7684\u200b\u65e5\u5fd7\u200b\u53d1\u9001\u5230\u200b<code>stdout\uff08\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\uff09</code>\uff1b</li> <li>\u200b\u628a\u200b\u6240\u6709\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u4e3a\u200b<code>critical</code>\u200b\u7684\u200b\u65e5\u5fd7\u200b\u53d1\u9001\u5230\u200b\u4e00\u4e2a\u200b<code>email</code>\u200b\u90ae\u4ef6\u5730\u5740\u200b\u3002</li> </ul> <p>\u200b\u8fd9\u79cd\u200b\u573a\u666f\u200b\u5c31\u200b\u9700\u8981\u200b3\u200b\u4e2a\u200b\u4e0d\u540c\u200b\u7684\u200b<code>handlers</code>\uff0c\u200b\u6bcf\u4e2a\u200b<code>handler</code>\u200b\u590d\u6742\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200b\u7279\u5b9a\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u5230\u200b\u4e00\u4e2a\u200b\u7279\u5b9a\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p> <p>\u200b\u4e00\u4e2a\u200b<code>handler</code>\u200b\u4e2d\u200b\u53ea\u6709\u200b\u975e\u5e38\u200b\u5c11\u6570\u200b\u7684\u200b\u65b9\u6cd5\u200b\u662f\u200b\u9700\u8981\u200b\u5e94\u7528\u200b\u5f00\u53d1\u4eba\u5458\u200b\u53bb\u200b\u5173\u5fc3\u200b\u7684\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u4f7f\u7528\u200b\u5185\u200b\u5efa\u200b<code>handler</code>\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5e94\u7528\u200b\u5f00\u53d1\u4eba\u5458\u200b\u6765\u8bf4\u200b\uff0c\u200b\u4f3c\u4e4e\u200b\u552f\u4e00\u200b\u76f8\u5173\u200b\u7684\u200b<code>handler</code>\u200b\u65b9\u6cd5\u200b\u5c31\u662f\u200b\u4e0b\u9762\u200b\u8fd9\u200b\u51e0\u4e2a\u200b\u914d\u7f6e\u200b\u65b9\u6cd5\u200b\uff1a</p> \u200b\u65b9\u6cd5\u200b \u200b\u63cf\u8ff0\u200b Handler.setLevel() \u200b\u8bbe\u7f6e\u200bhandler\u200b\u5c06\u4f1a\u200b\u5904\u7406\u200b\u7684\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u7684\u200b\u6700\u4f4e\u200b\u4e25\u91cd\u200b\u7ea7\u522b\u200b Handler.setFormatter() \u200b\u4e3a\u200bhandler\u200b\u8bbe\u7f6e\u200b\u4e00\u4e2a\u200b\u683c\u5f0f\u200b\u5668\u200b\u5bf9\u8c61\u200b Handler.addFilter() \u200b\u548c\u200b Handler.removeFilter() \u200b\u4e3a\u200bhandler\u200b\u6dfb\u52a0\u200b\u548c\u200b\u5220\u9664\u200b\u4e00\u4e2a\u200b\u8fc7\u6ee4\u5668\u200b\u5bf9\u8c61\u200b <p>\u200b\u9700\u8981\u200b\u8bf4\u660e\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u4e0d\u200b\u5e94\u8be5\u200b\u76f4\u63a5\u200b\u5b9e\u4f8b\u200b\u5316\u200b\u548c\u200b\u4f7f\u7528\u200b<code>Handler</code>\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u56e0\u4e3a\u200b<code>Handler</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u57fa\u7c7b\u200b\u3002\u200b\u4e0b\u9762\u200b\u662f\u200b\u4e00\u4e9b\u200b\u5e38\u7528\u200b\u7684\u200b<code>Handler</code>\uff1a</p> Handler \u200b\u63cf\u8ff0\u200b logging.StreamHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u53d1\u9001\u5230\u200b\u8f93\u51fa\u200b\u5230\u200bStream\uff0c\u200b\u5982\u200bstd.out, std.err\u200b\u6216\u200b\u4efb\u4f55\u200bfile-like\u200b\u5bf9\u8c61\u200b\u3002 logging.FileHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u53d1\u9001\u5230\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u6587\u4ef6\u5927\u5c0f\u200b\u4f1a\u200b\u65e0\u9650\u200b\u589e\u957f\u200b logging.handlers.RotatingFileHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u53d1\u9001\u5230\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5e76\u200b\u652f\u6301\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u6309\u200b\u5927\u5c0f\u200b\u5207\u5272\u200b logging.hanlders.TimedRotatingFileHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u53d1\u9001\u5230\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5e76\u200b\u652f\u6301\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u6309\u200b\u65f6\u95f4\u200b\u5207\u5272\u200b logging.handlers.HTTPHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u4ee5\u200bGET\u200b\u6216\u200bPOST\u200b\u7684\u200b\u65b9\u5f0f\u200b\u53d1\u9001\u7ed9\u200b\u4e00\u4e2a\u200bHTTP\u200b\u670d\u52a1\u5668\u200b logging.handlers.SMTPHandler \u200b\u5c06\u200b\u65e5\u5fd7\u200b\u6d88\u606f\u200b\u53d1\u9001\u7ed9\u200b\u4e00\u4e2a\u200b\u6307\u5b9a\u200b\u7684\u200bemail\u200b\u5730\u5740\u200b logging.NullHandler \u200b\u8be5\u200bHandler\u200b\u5b9e\u4f8b\u200b\u4f1a\u200b\u5ffd\u7565\u200berror messages\uff0c\u200b\u901a\u5e38\u200b\u88ab\u200b\u60f3\u200b\u4f7f\u7528\u200blogging\u200b\u7684\u200blibrary\u200b\u5f00\u53d1\u8005\u200b\u4f7f\u7528\u200b\u6765\u200b\u907f\u514d\u200b'No handlers could be found for logger XXX'\u200b\u4fe1\u606f\u200b\u7684\u200b\u51fa\u73b0\u200b\u3002"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#34-formater","title":"3.4 Formater \u200b\u7ec4\u4ef6\u200b\u8bf4\u660e","text":"<p>Formater\u200b\u5bf9\u8c61\u200b\u7528\u4e8e\u200b\u914d\u7f6e\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\u7684\u200b\u6700\u7ec8\u200b\u987a\u5e8f\u200b\u3001\u200b\u7ed3\u6784\u200b\u548c\u200b\u5185\u5bb9\u200b\u3002\u200b\u4e0e\u200blogging.Handler\u200b\u57fa\u7c7b\u200b\u4e0d\u540c\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5e94\u7528\u200b\u4ee3\u7801\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5b9e\u4f8b\u200b\u5316\u200bFormatter\u200b\u7c7b\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u5982\u679c\u200b\u4f60\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u4e00\u4e9b\u200b\u7279\u6b8a\u200b\u7684\u200b\u5904\u7406\u200b\u884c\u4e3a\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200bFormatter\u200b\u7684\u200b\u5b50\u7c7b\u200b\u6765\u200b\u5b8c\u6210\u200b\u3002</p> <p>Formatter\u200b\u7c7b\u200b\u7684\u200b\u6784\u9020\u65b9\u6cd5\u200b\u5b9a\u4e49\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>logging.Formatter.__init__(fmt=None, datefmt=None, style='%')\n</code></pre> <p>\u200b\u53ef\u89c1\u200b\uff0c\u200b\u8be5\u200b\u6784\u9020\u65b9\u6cd5\u200b\u63a5\u6536\u200b3\u200b\u4e2a\u200b\u53ef\u9009\u200b\u53c2\u6570\u200b\uff1a</p> <ul> <li><code>fmt</code>\uff1a\u200b\u6307\u5b9a\u200b\u6d88\u606f\u200b\u683c\u5f0f\u5316\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u6307\u5b9a\u200b\u8be5\u200b\u53c2\u6570\u200b\u5219\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b<code>message</code>\u200b\u7684\u200b\u539f\u59cb\u200b\u503c\u200b</li> <li><code>datefmt</code>\uff1a\u200b\u6307\u5b9a\u200b\u65e5\u671f\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u6307\u5b9a\u200b\u8be5\u200b\u53c2\u6570\u200b\u5219\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b<code>\"%Y-%m-%d %H:%M:%S\"</code></li> <li><code>style</code>\uff1a<code>Python 3.2</code>\u200b\u65b0\u589e\u200b\u7684\u200b\u53c2\u6570\u200b\uff0c\u200b\u53ef\u200b\u53d6\u503c\u200b\u4e3a\u200b <code>'%'</code>, <code>'{'</code>\u200b\u548c\u200b <code>'$'</code>\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u6307\u5b9a\u200b\u8be5\u200b\u53c2\u6570\u200b\u5219\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b'%'</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#_1","title":"\u56db\u200b\u3001 \u200b\u4f7f\u7528\u200b\u56db\u5927\u200b\u7ec4\u4ef6\u200b\u8bb0\u5f55\u200b\u65e5\u5fd7","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#41","title":"4.1 \u200b\u9700\u6c42","text":"<p>\u200b\u73b0\u5728\u200b\u6709\u200b\u4ee5\u4e0b\u200b\u51e0\u4e2a\u200b\u65e5\u5fd7\u200b\u8bb0\u5f55\u200b\u7684\u200b\u9700\u6c42\u200b\uff1a</p> <ol> <li>\u200b\u8981\u6c42\u200b\u5c06\u200b\u6240\u6709\u200b\u7ea7\u522b\u200b\u7684\u200b\u6240\u6709\u200b\u65e5\u5fd7\u200b\u90fd\u200b\u5199\u5165\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\u4e2d\u200b</li> <li>all.log\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bb0\u5f55\u200b\u6240\u6709\u200b\u7684\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\uff0c\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b\u4e3a\u200b\uff1a\u200b\u65e5\u671f\u200b\u548c\u200b\u65f6\u95f4\u200b - \u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b - \u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b</li> <li>error.log\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5355\u72ec\u200b\u8bb0\u5f55\u200berror\u200b\u53ca\u200b\u4ee5\u4e0a\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b\uff0c\u200b\u65e5\u5fd7\u200b\u683c\u5f0f\u200b\u4e3a\u200b\uff1a\u200b\u65e5\u671f\u200b\u548c\u200b\u65f6\u95f4\u200b - \u200b\u65e5\u5fd7\u200b\u7ea7\u522b\u200b - \u200b\u6587\u4ef6\u540d\u200b[:\u200b\u884c\u53f7\u200b] - \u200b\u65e5\u5fd7\u200b\u4fe1\u606f\u200b</li> <li>\u200b\u8981\u6c42\u200ball.log\u200b\u5728\u200b\u6bcf\u5929\u200b\u51cc\u6668\u200b\u8fdb\u884c\u200b\u65e5\u5fd7\u200b\u5207\u5272\u200b</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/python_logging/#42","title":"4.2 \u200b\u5206\u6790","text":"<ol> <li>\u200b\u8981\u200b\u8bb0\u5f55\u200b\u6240\u6709\u200b\u7ea7\u522b\u200b\u7684\u200b\u65e5\u5fd7\u200b\uff0c\u200b\u56e0\u6b64\u200b\u65e5\u5fd7\u200b\u5668\u200b\u7684\u200b\u6709\u6548\u200blevel\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u6700\u4f4e\u200b\u7ea7\u522b\u200b--DEBUG</li> <li>\u200b\u65e5\u5fd7\u200b\u9700\u8981\u200b\u53d1\u9001\u5230\u200b\u4e24\u4e2a\u200b\u4e0d\u540c\u200b\u7684\u200b\u76ee\u7684\u5730\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u4e24\u4e2a\u200bhandler\uff1b\u200b\u53e6\u5916\u200b\u4e24\u4e2a\u200b\u76ee\u7684\u5730\u200b\u90fd\u200b\u662f\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8fd9\u200b\u4e24\u4e2a\u200bhandler\u200b\u90fd\u200b\u662f\u200b\u4e0e\u200bfilehandler\u200b\u76f8\u5173\u200b\uff1b</li> <li><code>all.log</code>\u200b\u8981\u6c42\u200b\u6309\u7167\u200b\u65f6\u95f4\u200b\u8fdb\u884c\u200b\u65e5\u5fd7\u200b\u5207\u5272\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4ed6\u200b\u9700\u8981\u200b\u7528\u200b<code>logging.handlers.TimedRotatingFileHandler</code>; \u200b\u800c\u200b<code>error.log</code>\u200b\u6ca1\u6709\u200b\u8981\u6c42\u200b\u65e5\u5fd7\u200b\u5207\u5272\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>FileHandler</code>;</li> <li>\u200b\u4e24\u4e2a\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u7684\u200b\u683c\u5f0f\u200b\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u5bf9\u200b\u8fd9\u200b\u4e24\u4e2a\u200b<code>handler</code>\u200b\u5206\u522b\u200b\u8bbe\u7f6e\u200b\u683c\u5f0f\u200b\u5668\u200b\uff1b</li> </ol> <pre><code>import logging\nimport logging.handlers\nimport datetime\nlogger = logging.getLogger('mylogger')\nlogger.setLevel(logging.DEBUG)\n# backup_interval = when * interval\n# backupCount: backup logfile number\nrf_handler = logging.handlers.TimedRotatingFileHandler('all.log', when='midnight', interval=1, backupCount=7, atTime=datetime.time(0, 0, 0, 0))\nrf_handler.setFormatter(logging.Formatter(\"%(asctime)s - %(levelname)s - %(message)s\"))\nf_handler = logging.FileHandler('error.log')\nf_handler.setLevel(logging.ERROR)\nf_handler.setFormatter(logging.Formatter(\"%(asctime)s - %(levelname)s - %(filename)s[:%(lineno)d] - %(message)s\"))\nlogger.addHandler(rf_handler)\nlogger.addHandler(f_handler)\nlogger.debug('debug message')\nlogger.info('info message')\nlogger.warning('warning message')\nlogger.error('error message')\nlogger.critical('critical message')\n</code></pre> <p><code>all.log</code>\u200b\u6587\u4ef6\u200b\u8f93\u51fa\u200b\uff1a</p> <pre><code>2024-01-05 17:05:03,633 - DEBUG - debug message\n2024-01-05 17:05:03,633 - INFO - info message\n2024-01-05 17:05:03,633 - WARNING - warning message\n2024-01-05 17:05:03,633 - ERROR - error message\n2024-01-05 17:05:03,633 - CRITICAL - critical message\n</code></pre> <p><code>error.log</code>\u200b\u6587\u4ef6\u200b\u8f93\u51fa\u200b\uff1a</p> <pre><code>2024-01-05 17:05:03,633 - ERROR - demo.py[:23] - error message\n2024-01-05 17:05:03,633 - CRITICAL - demo.py[:24] - critical message\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/","title":"\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u8fd0\u884c","text":""},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#_2","title":"\u65b9\u6848","text":"<p>\u200b\u955c\u50cf\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u6709\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\uff1a 1. \u200b\u4f7f\u7528\u200b <code>binfmt</code> \u200b\u5b9e\u73b0\u200b\u955c\u50cf\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b 2. \u200b\u4f7f\u7528\u200b <code>qemu-user-static</code> \u200b\u5b9e\u73b0\u200b\u955c\u50cf\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#_3","title":"\u6d89\u53ca\u200b\u955c\u50cf","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u6d89\u53ca\u200b\u5230\u200b\u7684\u200b\u955c\u50cf\u200b\u5217\u8868\u200b\uff1a</p> <ul> <li><code>tonistiigi/binfmt</code></li> <li><code>lcr.loongnix.cn/tonistiigi/binfmt</code></li> <li><code>cr.loongnix.cn/tonistiigi/binfmt</code></li> <li><code>multiarch/qemu-user-static</code></li> <li><code>lcr.loongnix.cn/library/qemu-user-static</code></li> <li><code>cr.loongnix.cn/library/qemu-user-static</code></li> </ul>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#_4","title":"\u4f7f\u7528\u200b\u524d\u200b\u7684\u200b\u51c6\u5907","text":"<p>\u200b\u5b89\u88c5\u200bbuildx\u3002\u200b\u786e\u8ba4\u200bdocker\u200b\u7248\u672c\u200b\u9ad8\u4e8e\u200b 19.03 \u200b\u83b7\u53d6\u200b\u65b9\u5f0f\u200b\uff1a \u200b\u4e8c\u8fdb\u5236\u200b\u7f51\u7ad9\u200b\uff1acloud.loongnix.cn/releases/loongarch64/docker/buildx/ \u200b\u5c06\u200b\u83b7\u53d6\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u653e\u7f6e\u200b\u5230\u200b~/.docker/cli-plugins\u200b\u4e0b\u200b\u5373\u53ef\u200b\u4f7f\u7528\u200b rpm\u200b\u5305\u200b\uff1ahttps://github.com/yzewei/docker-ce-packaging/releases  <pre><code>https://github.com/yzewei/docker-ce-packaging/releases/download/v28.3.0-rc.2/docker-buildx-plugin-0.25.0-1.ocs23.loongarch64.rpm yun install docker-buildx-plugin-0.25.0-1.ocs23.loongarch64.rpm </code></pre></p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#x86-la-abi-20","title":"x86\u200b\u5e73\u53f0\u200b\u4e0b\u200b \u200b\u4eff\u771f\u200b\u8fd0\u884c\u200b\u7f16\u8bd1\u200b LA ABI 2.0","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u4efb\u9009\u200b\u5176\u4e00\u200b\uff1a</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#1-binfmt","title":"1. \u200b\u4f7f\u7528\u200b <code>binfmt</code>\u200b\u63a8\u8350\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u4f7f\u7528","text":"<ol> <li>\u200b\u83b7\u53d6\u200b\u6240\u200b\u9700\u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull tonistiigi/binfmt:master\n</code></pre></li> <li>\u200b\u6ce8\u518c\u200b <code>qemu-loongarch64</code>\uff1a     <pre><code>docker run --rm --privileged tonistiigi/binfmt:master --install loong64\n</code></pre></li> <li>\u200b\u62c9\u53d6\u200b LA \u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull --platform=linux/loong64 lcr.loongnix.cn/library/alpine:latest\n</code></pre></li> <li>\u200b\u6307\u5b9a\u200b LA \u200b\u67b6\u6784\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\uff1a     <pre><code>docker buildx build --load --platform linux/loong64 -t example_image -f example .\n</code></pre></li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#2-qemu-user-static","title":"2. \u200b\u4f7f\u7528\u200b <code>qemu-user-static</code>\u200b\u63a8\u8350\u200b\u8de8\u5e73\u53f0\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f7f\u7528","text":"<ol> <li>\u200b\u83b7\u53d6\u200b\u6240\u200b\u9700\u200b\u955c\u50cf\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\uff1a     <pre><code>//docker pull multiarch/qemu-user-static:latest \u200b\u76ee\u524d\u200b\u6682\u65f6\u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\nwget https://github.com/multiarch/qemu-user-static/releases/download/v7.2.0-1/qemu-loongarch64-static\n</code></pre></li> <li>\u200b\u6ce8\u518c\u200b <code>qemu-loongarch64</code> \u200b\u5e76\u200b\u653e\u7f6e\u200b\u4e8c\u8fdb\u5236\u200b\uff1a     <pre><code>//docker run --rm -it --privileged multiarch/qemu-user-static:latest --reset\nmv qemu-loongarch64-static /usr/bin/qemu-loongarch64-static\n</code></pre></li> <li>\u200b\u62c9\u53d6\u200b LA \u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull --platform=linux/loong64 lcr.loongnix.cn/library/alpine:latest\n</code></pre></li> <li>\u200b\u6307\u5b9a\u200b LA \u200b\u67b6\u6784\u200b\u8fdb\u884c\u200b\u8fd0\u884c\u200b\uff1a     <pre><code>docker buildx build --platform linux/loong64 -t example_image -f example .\ndocker run -it --rm --platform loong64 -v $(pwd)/qemu-loongarch64-static:/usr/bin/qemu-loongarch64-static lcr.loongnix.cn/library/alpine uname -m\n</code></pre></li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#x86-la-abi-10","title":"x86\u200b\u5e73\u53f0\u200b\u4e0b\u200b \u200b\u4eff\u771f\u200b\u8fd0\u884c\u200b\u7f16\u8bd1\u200b LA ABI 1.0","text":"<p>\u200b\u4ee5\u4e0b\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u4efb\u9009\u200b\u5176\u4e00\u200b\uff1a</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#1-binfmt_1","title":"1. \u200b\u4f7f\u7528\u200b <code>binfmt</code> \u200b\u63a8\u8350\u200b\u8de8\u5e73\u53f0\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u4f7f\u7528","text":"<ol> <li>\u200b\u83b7\u53d6\u200b\u6240\u200b\u9700\u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull cr.loongnix.cn/tonistiigi/binfmt:x86_add_loongarch\n</code></pre></li> <li>\u200b\u6ce8\u518c\u200b <code>qemu-loongarch64</code>\uff1a     <pre><code>docker run --rm --privileged cr.loongnix.cn/tonistiigi/binfmt:x86_add_loongarch --install loongarch64\n</code></pre></li> <li>\u200b\u62c9\u53d6\u200b LA \u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull --platform=linux/loong64 cr.loongnix.cn/library/alpine:3.11\n</code></pre></li> <li>\u200b\u6307\u5b9a\u200b LA \u200b\u67b6\u6784\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b\uff1a     <pre><code>docker buildx build --platform linux/loong64 -t example_image -f example .\n</code></pre></li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#2-qemu-user-static_1","title":"2. \u200b\u4f7f\u7528\u200b <code>qemu-user-static</code> \u200b\u63a8\u8350\u200b\u8de8\u5e73\u53f0\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f7f\u7528","text":"<ol> <li>\u200b\u83b7\u53d6\u200b\u6240\u200b\u9700\u200b\u955c\u50cf\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\uff1a     <pre><code>docker pull cr.loongnix.cn/library/qemu-user-static\nwget https://github.com/Loongson-Cloud-Community/qemu-user-static/releases/download/x86_abi1.0/qemu-loongarch64-static\n</code></pre></li> <li>\u200b\u6ce8\u518c\u200b <code>qemu-loongarch64</code> \u200b\u5e76\u200b\u653e\u7f6e\u200b\u4e8c\u8fdb\u5236\u200b\uff1a     <pre><code>docker run --rm -it --privileged zhangguanzhang/qemu-user-static  --reset -p yes\n</code></pre></li> <li>\u200b\u62c9\u53d6\u200b LA \u200b\u955c\u50cf\u200b\uff1a     <pre><code>docker pull --platform=linux/loong64 cr.loongnix.cn/library/debian:buster\n</code></pre></li> <li>\u200b\u6307\u5b9a\u200b LA \u200b\u67b6\u6784\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b\uff1a     <pre><code>docker buildx build --platform linux/loong64 -t example_image -f example .\ndocker run -it --rm cr.loongnix.cn/library/debian:buster uname -a\n</code></pre></li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#_5","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>ABI 1.0 \u200b\u548c\u200b ABI 2.0 \u200b\u4e0d\u200b\u517c\u5bb9\u200b </li> <li>\u200b\u4f7f\u7528\u200b <code>binfmt</code> \u200b\u6216\u200b <code>qemu-user-static</code> \u200b\u4eff\u771f\u200b\u8fd0\u884c\u200b\u65f6\u200b\u9700\u8981\u200b\u660e\u786e\u200b\u533a\u5206\u200b ABI \u200b\u7248\u672c\u200b\u3002</li> <li> <p>\u200b\u5207\u6362\u200b\u7248\u672c\u200b\u65f6\u9700\u200b\u6e05\u7406\u200b\u6ce8\u518c\u200b\u7684\u200b <code>qemu</code> \u200b\u914d\u7f6e\u200b\u3002</p> </li> <li> <p>\u200b\u6e05\u7406\u200b\u5df2\u200b\u6ce8\u518c\u200b\u7684\u200b <code>qemu</code>\uff1a</p> </li> <li>\u200b\u82e5\u200b\u4f7f\u7528\u200b <code>binfmt</code>\uff1a      <pre><code>docker run --rm --privileged xx.loongnix.cn/tonistiigi/binfmt:x86_add_loongarch --uninstall loongarch64\n</code></pre>      \u200b\u6ce8\u610f\u200b\uff1axx\u200b\u4ee3\u8868\u200bcr\u200b\u6216\u200blcr \u200b\u6839\u636e\u200babi 1.0\u200b\u548c\u200b2.0\u200b\u6765\u200b\u9009\u62e9\u200b\u4f7f\u7528\u200b</li> <li>\u200b\u82e5\u200b\u4f7f\u7528\u200b <code>qemu-user-static</code>\uff1a      <pre><code>rm /usr/bin/qemu-loongarch64-static\n</code></pre></li> </ol>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#la-x86","title":"LA \u200b\u4eff\u771f\u200b\u8fd0\u884c\u200b\u7f16\u8bd1\u200b x86","text":"<p>ABI 1.0 \u200b\u548c\u200b ABI 2.0 \u200b\u4e0b\u200b\u7684\u200b\u65b9\u6cd5\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4f46\u200b\u9700\u8981\u200b\u9009\u62e9\u200b\u76f8\u5e94\u200b\u7684\u200b\u955c\u50cf\u200b\u4e0e\u200b\u5de5\u5177\u200b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C/#_6","title":"\u4eff\u771f\u200b\u8fd0\u884c\u200b\u7684\u200b\u955c\u50cf\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u5730\u5740","text":"<ul> <li>ABI 1.0\uff1a<ul> <li>\u200b\u955c\u50cf\u200b\uff1a<code>cr.loongnix.cn/tonistiigi/binfmt:loongarch64_other_arch</code></li> <li>\u200b\u4e8c\u8fdb\u5236\u200b\uff1a\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b <pre><code>docker run --rm --privileged  cr.loongnix.cn/tonistiigi/binfmt:latest --install x86_64\ndocker buildx inspect default --bootstrap\ndocker run -it --platform linux/amd64 --rm quay.io/lib/debian:sid bash\ndocker run -it --rm debian:buster uname -a\n</code></pre></li> </ul> </li> <li>ABI 2.0\uff1a<ul> <li>\u200b\u955c\u50cf\u200b\uff1a<code>lcr.loongnix.cn/tonistiigi/binfmt:qemu-8.0.5</code></li> <li>\u200b\u4e8c\u8fdb\u5236\u200b\uff1a\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b <pre><code>docker run --rm --privileged  lcr.loongnix.cn/tonistiigi/binfmt:latest --install x86_64\ndocker buildx inspect default --bootstrap\ndocker run -it --platform linux/amd64 --rm quay.io/lib/debian:sid bash\ndocker run -it --rm debian:buster uname -a\n</code></pre></li> </ul> </li> </ul>"},{"location":"%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AC%A7%E6%8B%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/faq/","title":"\u6b27\u62c9\u200b\u64cd\u4f5c\u7cfb\u7edf\u200bFAQ","text":""},{"location":"%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%AC%A7%E6%8B%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/faq/#1-openeuler-2203-lts","title":"1. openEuler-22.03-LTS \u200b\u7248\u672c\u200b\u53d1\u5e03\u200b\u5185\u5bb9","text":"<p>\uff081\uff09Standard ISO \u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff082\uff09Everything ISO \u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff083\uff09Network Install ISO \u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff084\uff09\u200b\u865a\u62df\u673a\u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff085\uff09Docker \u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff086\uff09\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b</p>"},{"location":"%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%BE%99%E8%9C%A5%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/faq/","title":"\u9f99\u200b\u8725\u200b\u64cd\u4f5c\u7cfb\u7edf\u200bFAQ","text":""},{"location":"%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%BE%99%E8%9C%A5%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/faq/#1-openanolis88-qu1-loongarch64","title":"1. openAnolis8.8 qu1 LoongArch64 \u200b\u53d1\u5e03\u200b\u5185\u5bb9","text":"<p>\uff081\uff09\u200b\u955c\u50cf\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b \uff082\uff09\u200b\u53d1\u5e03\u200b\u8bf4\u660e\u200b \uff083\uff09\u200b\u6d4b\u8bd5\u62a5\u544a\u200b \uff084\uff09\u200b\u8f6f\u4ef6\u5305\u200b\u5217\u8868\u200b</p> <p>\u200b\u66f4\u200b\u591a\u200b\u793e\u533a\u200b\u7cfb\u7edf\u200b\u53d1\u5e03\u200b \u200b\u6587\u6863\u200b/FAQ \u200b\u8be6\u89c1\u200b\uff1a \u200b\u9f99\u200b\u8725\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff08Anolis OS\uff09\u200b\u7528\u6237\u200b&amp;\u200b\u7ba1\u7406\u5458\u200b\u6587\u6863\u200b \u200b\u793e\u533a\u200b\u5e38\u89c1\u95ee\u9898\u200bFAQ</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/","title":"\u79fb\u690d\u200b\u624b\u518c","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/#_2","title":"\u89c4\u8303","text":"<p>\u200b\u6807\u9898\u200b</p> <p>\u200b\u6807\u9898\u200b\u4ee5\u200b\u4e00\u7ea7\u200b\u6807\u9898\u200b <code># \u200b\u9879\u76ee\u540d\u79f0\u200b</code> \u200b\u8fdb\u884c\u200b\u547d\u540d\u200b\uff0c\u200b\u4f8b\u5982\u200b <code># grpc</code>\u3002</p> <p>\u200b\u7a7a\u884c\u200b</p> <p>\u200b\u6807\u9898\u200b <code>#, ##</code>\uff0c\u200b\u4ee5\u53ca\u200b\u7528\u4e8e\u200b\u6807\u9898\u200b\u7684\u200b\u5f3a\u8c03\u200b <code>__\u200b\u5f3a\u8c03\u200b__</code> \u200b\u540e\u987b\u200b\u8fdb\u884c\u200b\u7a7a\u884c\u200b,\u200b\u4f8b\u5982\u200b:</p> <pre><code>## \u200b\u6807\u9898\u200b\n\n\u200b\u5185\u5bb9\u200b\n\n__\u200b\u5f3a\u8c03\u200b__\n\n\u200b\u5185\u5bb9\u200b\n</code></pre> <p>\u200b\u5217\u8868\u200b</p> <p>\u200b\u65e0\u5e8f\u200b\u5217\u8868\u200b\u7edf\u4e00\u200b\u4f7f\u7528\u200b <code>*</code> \u200b\u53f7\u200b</p> <p>\u200b\u957f\u200b\u6bb5\u843d\u200b\u6362\u884c\u200b</p> <p>\u200b\u5bf9\u4e8e\u200b\u957f\u200b\u6bb5\u843d\u200b\u7684\u200b\u6587\u5b57\u200b\uff0c\u200b\u4e66\u5199\u200b\u65f6\u200b\u6298\u53e0\u200b\u4e00\u5b9a\u200b\u7684\u200b\u957f\u5ea6\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>grpc \u200b\u5bf9\u4e8e\u200b\u7b2c\u4e09\u65b9\u200b\u4f9d\u8d56\u200b\u6709\u200b\u4e24\u79cd\u200b\u7f16\u8bd1\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u4e00\u79cd\u200b\u662f\u200b\u4f9d\u8d56\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u9884\u200b\u5b89\u88c5\u200b\u7684\u200b\u8f6f\u4ef6\u5305\u200b\n\u200b\u53e6\u200b\u4e00\u79cd\u200b\u662f\u4ece\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b,\u200b\u56e0\u4e3a\u200b\u4f4e\u7248\u672c\u200b\u7684\u200b grpc \u200b\u5bf9\u7cfb\u7edf\u200b\u5305\u200b\u8981\u6c42\u200b\u7248\u672c\u200b\u8f83\u200b\u4f4e\u200b\uff0c\u200b\u548c\u200b\u5f53\u524d\u200b\u9f99\u82af\u200b\n\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e0d\u200b\u517c\u5bb9\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u4e0a\u200b\u7f16\u8bd1\u200b grpc \u200b\u5bf9\u4e8e\u200b\u7b2c\u4e09\u65b9\u200b\u5e93\u200b\u9009\u62e9\u200b\u4ece\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b\n</code></pre> Note <ul> <li>\u200b\u8981\u200b\u5728\u200b\u5b8c\u6574\u200b\u7684\u200b\u8bcd\u7ec4\u200b\u540e\u200b\u6362\u884c\u200b\uff0c\u200b\u4f8b\u5982\u200b <code>\u200b\u9f99\u82af\u200b</code> \u200b\u540e\u200b\u53ef\u200b\u6362\u884c\u200b\uff0c\u200b\u800c\u200b <code>\u200b\u9f99\u200b</code> \u200b\u548c\u200b <code>\u200b\u82af\u200b</code> \u200b\u4e24\u5b57\u200b\u4e2d\u95f4\u200b\u4e0d\u80fd\u200b\u6362\u884c\u200b</li> <li>\u200b\u884c\u540e\u200b\u4e0d\u80fd\u200b\u6709\u200b\u7a7a\u683c\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/#_3","title":"\u6a21\u677f","text":"<pre><code># grpc\n\n&lt;!-- note --&gt;\n???+ note\n    * \u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b\n&lt;!-- note end --&gt;\n\n## \u200b\u9879\u76ee\u200b\u4fe1\u606f\u200b\n\n|\u200b\u540d\u79f0\u200b       |\u200b\u63cf\u8ff0\u200b|\n|--         |--|\n|\u200b\u540d\u79f0\u200b       |grpc|\n|\u200b\u7248\u672c\u200b       |1.30.0|\n|\u200b\u9879\u76ee\u200b\u5730\u5740\u200b   |[https://github.com/grpc/grpc](https://github.com/grpc/grpc)|\n|\u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b   |[https://github.com/grpc/grpc/blob/v1.30.0/BUILDING.md](https://github.com/grpc/grpc/blob/v1.30.0/BUILDING.md)|\n\n\n## \u200b\u73af\u5883\u200b\u4fe1\u606f\u200b\n\n|\u200b\u540d\u79f0\u200b       |\u200b\u63cf\u8ff0\u200b|\n|--         |--|\n|CPU        |3A5000|\n|\u200b\u7cfb\u7edf\u200b       |anilos 8.8 \u200b\u5bb9\u5668\u200b|\n\n\n## \u200b\u79fb\u690d\u200b\u8bf4\u660e\u200b\n\n## \u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b\n\n__\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b__\n\n__\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b__\n\n__\u200b\u79fb\u690d\u200b__\n\n__\u200b\u7f16\u8bd1\u200b__\n\n__\u200b\u6d4b\u8bd5\u200b__\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/alluxio/","title":"Alluxio","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/alluxio/#_1","title":"\u4e00\u200b\u3001\u200b\u914d\u7f6e","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/alluxio/#11-maven","title":"1.1 maven \u200b\u914d\u7f6e","text":"<ul> <li><code>/etc/maven/settings.xml</code>\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u9700\u8981\u200b\u5c06\u200b<code>proxy</code>\u200b\u90e8\u5206\u200b\u66ff\u6362\u200b\u4e3a\u200b\u81ea\u5df1\u200b\u7684\u200b<code>IP+PORT</code>\uff1a</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n&lt;pluginGroups&gt;\n&lt;/pluginGroups&gt;\n&lt;proxies&gt;\n&lt;proxy&gt;\n&lt;id&gt;xxx&lt;/id&gt;\n&lt;active&gt;true&lt;/active&gt;\n&lt;protocol&gt;http&lt;/protocol&gt;\n&lt;host&gt;x.x.x.x&lt;/host&gt;\n&lt;port&gt;xxx&lt;/port&gt;\n&lt;nonProxyHosts&gt;*.loongnix.cn|*.aliyun.com&lt;/nonProxyHosts&gt;\n&lt;/proxy&gt;\n&lt;/proxies&gt;\n&lt;servers&gt;\n&lt;/servers&gt;\n&lt;mirrors&gt;\n&lt;mirror&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n&lt;name&gt;Nexus ali&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;/mirror&gt;\n&lt;/mirrors&gt;\n&lt;profiles&gt;\n&lt;profile&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;!-- ali --&gt;\n&lt;profile&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;/profiles&gt;\n&lt;activeProfiles&gt;\n&lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n&lt;!-- \n    &lt;activeProfile&gt;ali&lt;/activeProfile&gt;\n    --&gt;\n&lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/alluxio/#12-npm","title":"1.2 npm \u200b\u914d\u7f6e","text":"<ul> <li><code>~/.npmrc</code></li> </ul> <pre><code>registry=https://registry.loongnix.cn:4873\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/alluxio/#_2","title":"\u4e8c\u200b\u3001\u200b\u6784\u5efa","text":"<pre><code>## \u200b\u542f\u52a8\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\ndocker run -d --name alluxio --hostname alluxio --network host cr.loongnix.cn/loongson/loongnix-server:8.4 bash -c \"while true; do sleep 1;done\"\n## \u200b\u5b89\u88c5\u200b\u76f8\u5173\u200b\u8f6f\u4ef6\u200b\ndnf install /usr/bin/mvn git vim java-1.8.0-openjdk-devel.loongarch64 wget /usr/bin/g++ /usr/bin/node make /usr/bin/python2 /usr/bin/protoc fuse-devel -y\n\n## \u200b\u5b89\u88c5\u200bprotobuf\u200b\u76f8\u5173\u200b\u7ec4\u4ef6\u200b\ndnf install /usr/bin/protoc\nwget https://github.com/Loongson-Cloud-Community/nacos/releases/download/2.0.3/protoc-gen-grpc-java-la64-server.tar.gz\ntar xzvf protoc-gen-grpc-java-la64-server.tar.gz\nmv protoc-gen-grpc-java /usr/bin/\n\n## \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b\ngit clone --branch loong64-v2.5.0 --depth=3 https://github.com/Loongson-Cloud-Community/alluxio.git\n\n## \u200b\u6784\u5efa\u200b\nmvn clean install -DskipTests -Dspotbugs.skip=true\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ambari/","title":"ambari","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ambari/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b ambari \u200b\u7248\u672c\u200b 2.7.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/apache/ambari \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/apache/ambari/tree/release-2.7.6/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ambari/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ambari/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u53ca\u200b\u4f9d\u8d56\u200b 1. java 8 2. maven 3.3.9 \u200b\u53ca\u200b\u4ee5\u4e0b\u200b\u7248\u672c\u200b 3. python 2.7 and later 4. loongnix maven configure \u200b\u9f99\u82af\u200bmaven\u200b\u4ed3\u5e93\u200b\u914d\u7f6e\u200b 5. mysql-connector-java gcc python-devel  python2-devel.loongarch64</p> <p>\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b 1. \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b    <code>git clone -b release-2.7.0 --depth 1 https://github.com/apache/pulsar.git</code> 2. \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u9002\u914d\u200b\u4ee3\u7801\u200b    <code>git clone -b loong64-2.7.0 --depth 1 [https://github.com/apache/pulsar.git](https://github.com/Loongson-Cloud-Community/pulsar.git)</code> 3. \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b    ### \u200b\u4fee\u6539\u200b\u6240\u6709\u200b\u9879\u76ee\u200b\u7684\u200bpom\u200b\u6587\u4ef6\u200b       - \u200b\u9879\u76ee\u200b\u7531\u4e8e\u200b\u5bf9\u200bnode\u200b\u4f9d\u8d56\u200b\u8f83\u200b\u9ad8\u200b(4.x 0.x 8.x)\uff0c\u200b\u9700\u8981\u200b\u4f7f\u7528\u200bnode\u200b\u7f16\u8bd1\u200b\u524d\u7aef\u200b\u754c\u9762\u200b\u53ca\u200b\u8d44\u6e90\u200b\uff0c\u200b\u800c\u200bloongarch\u200b\u7684\u200bnode\u200b\u7248\u672c\u200b\u53ea\u6709\u200b12.0+\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5b9e\u9645\u200b\u7f16\u8bd1\u200b\u53d1\u73b0\u200b\u65e0\u6cd5\u200b\u66ff\u4ee3\u200b\uff0c\u200b\u4e14\u200b\u9700\u8981\u200bnode\u200b\u7cfb\u5217\u200b\u7ec4\u4ef6\u200bphantomjs\u200b\u867d\u7136\u200b\u5b58\u5728\u200b\u4f46\u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u5bf9\u200bambari-admin ambari-web ambari-logsearch/ambari-logsearch-web ambari-views\u200b\u56db\u4e2a\u200b\u5b50\u9879\u76ee\u200b\u7684\u200bpom\u200b\u6587\u4ef6\u200b\u4e2d\u200bnode\u200b\u7f16\u8bd1\u200b\u90e8\u5206\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\uff0c\u200b\u7531\u4e8e\u200b\u524d\u7aef\u200b\u8d44\u6e90\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5c06\u200bx86\u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u76f8\u5173\u200b\u8d44\u6e90\u200b\u8fdb\u884c\u200b\u4e0b\u8f7d\u200b\u89e3\u538b\u200b\u5e76\u200b\u66ff\u4ee3\u200b,\u200b\u66f4\u6539\u200bnode\u200b\u90e8\u5206\u200b\u903b\u8f91\u200b\uff0c\u200b\u5173\u95ed\u200b\u672c\u5730\u200b\u7f16\u8bd1\u200b\u90e8\u5206\u200b\uff0c\u200b\u589e\u52a0\u200b\u4e0b\u8f7d\u200b\u89e3\u538b\u200b\u90e8\u5206\u200b       - \u200b\u5bf9\u200bpom\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u90e8\u5206\u200bmaven\u200b\u63d2\u4ef6\u200b\u7248\u672c\u200b jar\u200b\u4f9d\u8d56\u200b\u7248\u672c\u200b \u200b\u4ee5\u53ca\u200b\u5931\u6548\u200b\u7684\u200b\u4f9d\u8d56\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b       - pom\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u4f7f\u7528\u200brpm-maven-plugin\u200b\u5bf9\u200b\u9879\u76ee\u200b\u8fdb\u884c\u200brpm\u200b\u6253\u5305\u200b\uff0c\u200b\u800c\u200b\u672c\u8eab\u200b2.1.4\u200b\u4e0d\u200b\u652f\u6301\u200bloongarch\uff0c\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7248\u672c\u200b\u4e3a\u200b2.2.0,\u200b\u4e14\u200b\u4fee\u6539\u200b\u5b57\u6bb5\u200b\u7531\u200bnoarch x86_64 \u200b\u5230\u200b loongarch       - ambari-metrics/pom.xml \u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u4e86\u200bhbase hadoop grafana phoenix\uff0c\u200b\u8fdb\u884c\u200b\u66ff\u6362\u200b      \u200b\u6ce8\u610f\u200b\uff1a     (1) \u200b\u5982\u679c\u200b\u662f\u200b\u4f7f\u7528\u200bpatch\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\u7f16\u8bd1\u200b\u7684\u200b\u7528\u6237\u200b\uff0c\u200b\u6700\u597d\u200b\u5c06\u200b\u4e0a\u8ff0\u200b\u56db\u4e2a\u200b\u9879\u76ee\u200b\u7684\u200burl\u200b\u8fdb\u884c\u200b\u66ff\u6362\u200b\uff0c\u200b\u66f4\u200b\u6539\u4e3a\u200b\u5728\u200b\u76ee\u6807\u200b\u5e73\u53f0\u200b\u6784\u5efa\u200b\u597d\u200b\u7684\u200b\u7248\u672c\u200b     (2) ambari\u200b\u539f\u7801\u200b\u5bf9\u200bgrafana\u200b\u7248\u672c\u200b\u4f9d\u8d56\u200b\u662f\u200b2.6.0,\u200b\u4f46\u200b\u7531\u4e8e\u200b\u76ee\u524d\u200b\u7f3a\u5c11\u200b2.6.0\u200b\u7684\u200b\u6784\u5efa\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u4f7f\u7528\u200b\u73b0\u6709\u200b\u7248\u672c\u200b6.4.0\u200b\u4ee3\u66ff\u200b\uff0c\u200b\u540e\u7eed\u200b\u5982\u200b\u6709\u200b\u95ee\u9898\u200b\u53ca\u65f6\u200b\u53cd\u9988\u200b    - \u200b\u6240\u6709\u200b\u9879\u76ee\u200b\u7684\u200bpom\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7248\u672c\u200b\u7531\u200b2.0.0.0-SNAPSHOT \u200b\u6539\u4e3a\u200b 2.7.0.0.0 <p>### \u200b\u4fee\u6539\u200b.py\u200b\u7684\u200bpython\u200b\u4f7f\u7528\u200b\u58f0\u660e\u200b    - \u200b\u6682\u672a\u200b\u6392\u51fa\u200b\u539f\u56e0\u200b\uff0c\u200b\u9700\u8981\u200b\u5c06\u200b#!/usr/bin/env python \u200b\u66f4\u200b\u6539\u4e3a\u200b #!/usr/bin/env python2    - \u200b\u540c\u6837\u200b\u7684\u200b #!/usr/bin/python \u200b\u5230\u200b #!/usr/bin/python2\uff0c\u200b\u6ce8\u610f\u200b\u9879\u76ee\u200b\u4e2d\u200b\u5b58\u5728\u200b\u76f4\u63a5\u200b\u58f0\u660e\u200b#!/usr/bin/python2.6\u200b\u7684\u200b\u65e0\u9700\u200b\u66f4\u6539\u200b</p> <p>### \u200b\u4fee\u6539\u200b\u6e90\u7801\u200b    - ambari-metrics/ambari-metrics-timelineservice/src/test/java/org/apache/ambari/metrics/core/timeline/AbstractMiniHBaseClusterTest.java\u200b\u90e8\u5206\u200b\u4fee\u6539\u200b          tearDownMiniCluster();\u200b\u65b9\u6cd5\u200b\u9700\u8981\u200b\u53c2\u6570\u200b,\u200b\u4fee\u6539\u200b\u4e3a\u200btearDownMiniCluster(1);    - ambari-common/src/main/python/ambari_commons/libs\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u53ea\u6709\u200bppcl64\u200b\u53ca\u200bx86,\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200bloongarch\u200b\u90e8\u5206\u200b\uff0c\u200b\u5176\u4e2d\u200b__init__.py\u200b\u90e8\u5206\u200b\u76f8\u540c\u200b\uff0c\u200b\u6240\u200b\u9700\u200b\u7684\u200b \"posixsubprocess.so\" \u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u7f16\u8bd1\u200b\u66ff\u6362\u200b\uff08\u200b\u600e\u4e48\u200b\u66ff\u6362\u200b\uff1f\uff09    - ambari-common \u200b\u90e8\u5206\u200bos_check.py\u200b\u9700\u8981\u200b\u9002\u914d\u200b\uff0c\u200b\u8be5\u200b\u90e8\u5206\u200b\u5f71\u54cd\u200brpm\u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u5b89\u88c5\u200b\u540e\u200b\u7684\u200b\u4f7f\u7528\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u62a5\u9519\u200b\uff1a     <pre><code>ERROR: Unexpected error Ambari repo file path not set for current OS.\nERROR: Exiting with exit code 1.\nREASON: Failed to create user. Exiting.\n</code></pre>         \u200b\u5177\u4f53\u200b\u539f\u56e0\u200b\u662f\u200b\u7531\u4e8e\u200b\u5728\u200b\u8be5\u200b\u6587\u4ef6\u200b\u5bf9\u200b\u4e0d\u540c\u200bos\u200b\u7684\u200b/etc/{os}-release\u200b\u8fdb\u884c\u200b\u4e86\u200b\u5224\u65ad\u200b\uff0c\u200b\u5206\u4e3a\u200bredhat fedora centos\u200b\u7b49\u200b\uff0c\u200b\u800c\u200banlios loongnix server \u200b\u540c\u200b\u5c5e\u4e8e\u200bcentos\u200b\u7cfb\u200b\uff0c\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u9002\u914d\u200b    - \u200b\u4fee\u6539\u200bambari-server \u200b\u548c\u200b ambari-agent \u200b\u7684\u200bdependencies.properties\uff0c\u200b\u5220\u9664\u200b\u5bf9\u200bpython\u200b\u7684\u200b\u4f9d\u8d56\u200b\u4ee5\u53ca\u200brpm-python\u200b\u7684\u200b\u4f9d\u8d56\u200b</p> <ol> <li>\u200b\u7f16\u8bd1\u200b    \u200b\u7531\u4e8e\u200b\u9879\u76ee\u200b\u9700\u8981\u200b\u4e0b\u8f7d\u200b\u8f83\u200b\u591a\u200b\u4f9d\u8d56\u200b\u8017\u65f6\u200b\u8f83\u957f\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u9996\u5148\u200b\u5728\u200b\u672c\u5730\u200b\u5c06\u200b\u4f9d\u8d56\u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u66f4\u6539\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\u5230\u200b\u672c\u5730\u200b\uff0c\u200b\u5047\u8bbe\u200b\u5b58\u50a8\u200b\u5730\u5740\u200b\u4e3a\u200b/opt/compile-ambari</li> </ol> <p>\u200b\u4e0b\u8f7d\u200bhbase hadoop grafana phoenix  solr \u200b\u4ee5\u53ca\u200b x86\u200b\u7f16\u8bd1\u200b\u597d\u200b\u7684\u200b\u524d\u7aef\u200b\u8d44\u6e90\u200b\u5305\u200b    infra\u200b\u9879\u76ee\u200b\u8fd8\u200b\u9700\u8981\u200blucene \u200b\u548c\u200b commons-fileupload-1.3.3.jar \u200b\u4e5f\u200b\u4e0b\u8f7d\u200b\u5230\u200b/opt /compile-ambari\uff0c\u200b\u63a5\u7740\u200b\u5c06\u200b\u4e0b\u8f7d\u200b\u5230\u200b\u672c\u5730\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5728\u200bpom\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u66ff\u6362\u200b    \u200b\u5728\u200b\u4e3b\u76ee\u5f55\u200b\u6267\u884c\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5148\u200b\u4e0d\u200b\u8fdb\u884c\u200brpm\u200b\u5305\u200b\u6253\u5305\u200b(\u200b\u5220\u6389\u200b\u4ee5\u4e0b\u200b\u6307\u4ee4\u200b\u7684\u200brpm\u200b\u90e8\u5206\u200b)\uff0c\u200b\u8282\u7701\u65f6\u95f4\u200b    <pre><code>mvn -B clean install package rpm:rpm -Drat.skip=true -DnewVersion=2.7.0.0.0 -DbuildNumber=631319b00937a8d04667d93714241d2a0cb17275 -DskipTests -Dpython.ver=\"python &gt;= 2.6\"\n</code></pre>    \u200b\u6dfb\u52a0\u200b-Drat.skip=true\u200b\u662f\u200b\u4e3a\u4e86\u200b\u8df3\u8fc7\u200b\u8bb8\u53ef\u8bc1\u200b\u8fc7\u671f\u200b\u7684\u200b\u95ee\u9898\u200b    \u200b\u7f16\u8bd1\u200b\u5230\u200bambari-metrics\u200b\u90e8\u5206\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u7f16\u8bd1\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u9700\u8981\u200b\u8fdb\u5165\u200bambari-metrics\u200b\u90e8\u5206\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b    <pre><code>mvn clean package install -Dbuild-rpm -DskipTests\n</code></pre>    \u200b\u7f16\u8bd1\u200b\u5230\u200bambari-logsearch\u200b\u90e8\u5206\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u7f16\u8bd1\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u9700\u8981\u200b\u8fdb\u5165\u200bambari-logsearch\u200b\u90e8\u5206\u200b\u7f16\u8bd1\u200b\uff0c    <pre><code>cd ambari-logsearch &amp;&amp; mvn versions:set -DnewVersion=2.7.0.0.0 &amp;&amp; mvn clean install package -P native,rpm -DskipTest\n</code></pre>    \u200b\u7f16\u8bd1\u200b\u7ed3\u675f\u200b\u540e\u200b\u9000\u51fa\u200b\uff0c\u200b\u5bf9\u200binfra\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b    <pre><code>cd ambari-infra &amp;&amp; mvn versions:set -DnewVersion=2.7.0.0.0 &amp;&amp;mvn clean package install -P rpm -DskipTest -Drat.skip=true\n</code></pre>    \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u7684\u200brpm\u200b\u5305\u200b\u4f4d\u4e8e\u200btarget/rpm/..\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0cjar\u200b\u5305\u200b\u4f4d\u4e8e\u200b\u672c\u5730\u200bmaven\u200b\u4ed3\u5e93\u200b    <pre><code> find . -name \"*.rpm\" -exec cp {} path/to/ \\; \u200b\u5c06\u200brpm\u200b\u5305\u200b\u5b58\u653e\u200b\u5230\u200b\u6307\u5b9a\u200b\u4f4d\u7f6e\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bazel/","title":"bazel","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bazel/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b bazel \u200b\u7248\u672c\u200b 3.7.2 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/bazelbuild/bazel \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b Compiling Bazel from source"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bazel/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b debian 10 \u200b\u5bb9\u5668"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bazel/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>bazel\u200b\u7684\u200b\u6784\u5efa\u200b\u65b9\u5f0f\u200b\u6709\u200b\u4e24\u79cd\u200b\uff1a 1. \u200b\u901a\u8fc7\u200b\u5df2\u6709\u200b\u7684\u200bbazel\u200b\u6784\u5efa\u200b 2. \u200b\u4ece\u96f6\u5f00\u59cb\u200b \u200b\u4e0b\u6587\u200b\u7684\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b\u9488\u5bf9\u200b\u5f53\u524d\u200b\u6ca1\u6709\u200bbazel\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u4ece\u96f6\u5f00\u59cb\u200b\u6784\u5efa\u200bbazel\u200b\u4e8c\u8fdb\u5236\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bazel/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b 1. Bash 2. zip,unzip 3. C++ \u200b\u5de5\u5177\u200b\u94fe\u200b  4. JDK8 \u200b\u6216\u200b JDK11 5. Python2 \u200b\u6216\u200b Python3 <pre><code>sudo apt-get install build-essential openjdk-11-jdk python3 zip unzip\n</code></pre></p> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b \u200b\u4ece\u200bbazelbuild/build\u200b\u4ed3\u5e93\u200b\u7684\u200brelease\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u672a\u200b\u79fb\u690d\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff1abazel-3.7.2-dist.zip \u200b\u4ece\u200bLoongson-Cloud-Community/bazel\u200b\u4ed3\u5e93\u200b\u7684\u200brelease\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u5df2\u7ecf\u200b\u79fb\u690d\u200b\u8fc7\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff1abazel-3.7.2-dist.zip \u200b\u5982\u679c\u200b\u60a8\u200b\u4e0b\u8f7d\u200b\u4e86\u200b\u5df2\u7ecf\u200b\u79fb\u690d\u200b\u8fc7\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u8df3\u8fc7\u200b\u4e0b\u6587\u200b\u7684\u200b<code>\u200b\u79fb\u690d\u200b</code>\u200b\u7ae0\u8282\u200b</p> <p>\u200b\u79fb\u690d\u200b \u200b\u5173\u4e8e\u200b\u79fb\u690d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u4ee5\u53ca\u200b\u5982\u4f55\u200b\u4fee\u6539\u200b\u53ef\u4ee5\u200b\u53c2\u8003\u200b217ac55\u200b\u4ee5\u53ca\u200b8617b8c\u200b\u8fd9\u200b\u4e24\u6b21\u200b\u63d0\u4ea4\u200b \u200b\u53e6\u5916\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u5728\u200b<code>platforms/cpu/BUILD</code>\u200b\u6587\u4ef6\u200b\u672b\u5c3e\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>constraint_value(\n    name = \"loongarch64\",\n    constraint_setting = \":cpu\",\n)\n</code></pre></p> <p>\u200b\u7f16\u8bd1\u200b \u200b\u5728\u200b\u786e\u4fdd\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a <pre><code>env EXTRA_BAZEL_ARGS=\"--host_javabase=@local_jdk//:jdk\" bash ./compile.sh\n</code></pre> \u200b\u7f16\u8bd1\u200b\u7ed3\u675f\u200b\u540e\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u653e\u200b\u5728\u200b<code>output</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u7684\u200bbazel\u200b\u4e0d\u200b\u5305\u542b\u200bJDK</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bind9/","title":"Bind9","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bind9/#_1","title":"\u6784\u5efa\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"\u547d\u4ee4\u200b \u200b\u7ed3\u679c\u200b uname -m loongarch64 cat /etc/os-release Anolis OS 8.8"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bind9/#_2","title":"\u9879\u76ee\u200b\u4ee5\u53ca\u200b\u4f9d\u8d56\u200b\u9879\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u5730\u5740\u200b \u200b\u7248\u672c\u200b bind9 https://github.com/Loongson-Cloud-Community/bind9.git loong64-v9.9.4 openssl https://github.com/Loongson-Cloud-Community/openssl.git OpenSSL_1_0_2-stable"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bind9/#openssl","title":"\u6784\u5efa\u200bopenssl","text":"<p>\u200b\u8fd9\u91cc\u200b\u4e00\u5b9a\u200b\u8981\u200b\u4f7f\u7528\u200b<code>OpenSSL_1_0_2-stable</code>\u200b\u7248\u672c\u200b</p> <pre><code>mkdir -p /usr/local/openssl\n./config --prefix=/usr/local/openssl\nmake\nmake install\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u7ed3\u679c\u200b\uff1a</p> <pre><code>$ ls /usr/local/openssl/\nbin/  include/  lib/  ssl/\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bind9/#bind9","title":"\u6784\u5efa\u200bbind9","text":"<p>\u200b\u9884\u5148\u200b\u5b89\u88c5\u200b</p> <pre><code>dnf install diffutils\n</code></pre> <p>\u200b\u6784\u5efa\u200b</p> <pre><code>mkdir -p /usr/local/bind9\n./configure --prefix=/usr/local/bind9 --with-openssl=/usr/local/openssl\nmake\nmake install\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u7ed3\u679c\u200b\uff1a</p> <pre><code>$ ls /usr/local/bind9/\nbin/  etc/  include/  lib/  sbin/  share/  var/\n</code></pre> <p>\u200b\u4e8c\u8fdb\u5236\u200b\u4e3b\u8981\u200b\u5728\u200b<code>bin</code>\u200b\u548c\u200b<code>sbin</code>\u200b\u4e0b\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/binfmt/","title":"binfmt","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/binfmt/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b binfmt \u200b\u7248\u672c\u200b latest \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/tonistiigi/binfmt/tree/master \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/tonistiigi/binfmt/tree/master/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/binfmt/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A6000 \u200b\u7cfb\u7edf\u200b 5.10 kernel"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/binfmt/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u53ca\u200b\u4f9d\u8d56\u200b 1. docker 20.0 + 2. buildx 3. \u200b\u57fa\u7840\u200b\u955c\u50cf\u200b debian alpine golang busybox 4. tonistiigi/xx \u200b\u5bf9\u5e94\u200b\u4e24\u4e2a\u200b\u955c\u50cf\u200b xx bats-assert \u200b\u8be6\u89c1\u200btonistiigi-xx.md 5. buildkit \u200b\u90e8\u5206\u200b\u5185\u5bb9\u200b \uff08binfmt\u200b\u7684\u200bvendor\u200b\u76ee\u5f55\u200b\u4e2d\u200b\u5305\u542b\u200bvendor/github.com/moby/buildkit/util/archutil\uff09 6. qemu\u200b\u6e90\u7801\u200b\u53ca\u200b\u8865\u4e01\u200b</p> <p>\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b</p> <p>\u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b Dockerfile \uff0c\u200b\u6dfb\u52a0\u200b start.sh next.sh crossarch.sh docker-bake.hcl  \u200b\u4ee5\u53ca\u200bconfigure_qemu.sh \u200b\u4e2d\u200bqemu\u200b\u7684\u200b\u7f16\u8bd1\u200b\u53c2\u6570\u200b\u914d\u7f6e\u200b</p> <p>\u200b\u66f4\u65b0\u200bgo.mod  <code>go mod vendor</code></p> <p>\u200b\u6700\u7ec8\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b docker buildx/builder bake -f docker-bake.hcl</p> <p>\u200b\u6d4b\u8bd5\u200b</p> <ol> <li> <p>\u200b\u5b89\u88c5\u200b\u5168\u90e8\u200bqemu\uff0c\u200b\u5206\u522b\u200b\u6d4b\u8bd5\u200b\u4e0d\u540c\u200b\u67b6\u6784\u200b\u5728\u200bloongarch\u200b\u4e0a\u200b\u7684\u200b\u8fd0\u884c\u200b\u60c5\u51b5\u200b(\u200b\u5982\u200briscv64) <pre><code>[yzw@bogon ~]$ docker run -it riscv64/busybox\nWARNING: The requested image's platform (linux/riscv64) does not match the detected host platform (linux/loong64) and no specific platform was requested\n/ # uname -a\nLinux a9596bef3a4f 5.10.134-15.1.an23.loongarch64 #1 SMP Thu Sep 7 02:30:41 UTC 2023 riscv64 GNU/Linux\n</code></pre></p> </li> <li> <p>\u200b\u6d4b\u8bd5\u200b\u8de8\u200b\u67b6\u6784\u200b\u6279\u91cf\u200b\u6784\u5efa\u200b\u60c5\u51b5\u200b <pre><code>hello.go\n\npackage main\nimport (\n    \"fmt\"\n    \"runtime\"\n)\n\nfunc main(){\n    fmt/Printf(\"Hello, %s/%s! \\n\",runtime.GOOS,runtime.GOARCH)\n}\n\ngo.mod \n\nmodule hello\n\ngo 1.21\n\nDockerfile\n\nFROM golang:1.20-alpine AS builder \nWORKDIR /app\nADD . .\nRUN go build hello -o .\n\nFROM alpine:latest\nWORKDIR /app\nCOPY --from=builder /app/hello .\nCMD [\"./hello\"]\n\ndocker-bake.hcl\ntarget \"default\" {\n    args={\n        HTTPS_PROXY= \"http://10.130.0.20:7890\" ,\n    }\n    dockerfile=\"Dockerfile\"\n    tags = [\"lcr.loongnix.cn/library/buildx:hello-go\"]\n    cache-to = [\"type=inline\"]\n}\n\ntarget \"all\" {\n    inherits = [\"default\"]\n    platforms = [\n        \"linux/amd64\",\n        \"linux/arm64\",\n        \"linux/arm/v7\",\n        \"linux/arm/v6\",\n        \"linux/arm/v5\",\n        \"linux/riscv64\"\n    ]\n}\n</code></pre></p> </li> </ol> <p>\u200b\u6267\u884c\u547d\u4ee4\u200b <code>docker buildx bake -f docker-bake.hcl</code> \u200b\u4e0a\u8ff0\u200b\u547d\u4ee4\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u6210\u529f\u200b\uff0c\u200b\u4f7f\u7528\u200b\u9ed8\u8ba4\u200b\u6784\u5efa\u200b\u5668\u65f6\u200b\u6700\u200b\u591a\u200b\u53ef\u200b\u540c\u65f6\u200b\u6784\u5efa\u200b\u4e00\u4e2a\u200b\u8de8\u200b\u673a\u6784\u200b\u955c\u50cf\u200b\uff0c\u200b\u5982\u200b <code>docker buildx build --platform linux/arm64 .</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bitshuffle/","title":"kiyo-masui/bitshuffle","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bitshuffle/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b bitshuffle \u200b\u7248\u672c\u200b 0.5.1 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/kiyo-masui/bitshuffle \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/kiyo-masui/bitshuffle/blob/master/README.rst <p>Bitshuffle\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7528\u4e8e\u200b\u9ad8\u6548\u200b\u538b\u7f29\u200b\u548c\u200b\u89e3\u538b\u7f29\u200bNumpy\u200b\u7684\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u7684\u200b\u5f00\u6e90\u200b\u9879\u76ee\u200b\u3002\u200b\u5b83\u200b\u4f7f\u7528\u200b\u4e86\u200b\u4e00\u79cd\u200b\u57fa\u4e8e\u200b\u4f4d\u64cd\u4f5c\u200b\u7684\u200b\u538b\u7f29\u200b\u6280\u672f\u200b\uff0c\u200b\u53ef\u200b\u5728\u200b\u4fdd\u6301\u6570\u636e\u200b\u51c6\u786e\u6027\u200b\u7684\u200b\u524d\u63d0\u200b\u4e0b\u200b\uff0c\u200b\u663e\u8457\u200b\u51cf\u5c11\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\u548c\u200bI/O\u200b\u5e26\u5bbd\u200b\u9700\u6c42\u200b\u3002</p> <p>Bitshuffle\u200b\u5e93\u200b\u4e13\u95e8\u200b\u4e3a\u200b\u5177\u6709\u200b\u89c4\u5f8b\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\u8bbe\u8ba1\u200b\uff0c\u200b\u4f8b\u5982\u200b\u79d1\u5b66\u8ba1\u7b97\u200b\u3001\u200b\u4f20\u611f\u5668\u200b\u6570\u636e\u200b\u3001\u200b\u9065\u611f\u200b\u6570\u636e\u200b\u7b49\u200b\u3002\u200b\u5b83\u200b\u7279\u522b\u200b\u9002\u7528\u200b\u4e8e\u200b\u5904\u7406\u200b\u5177\u6709\u200b\u8f83\u200b\u9ad8\u200b\u6570\u636e\u200b\u91cd\u590d\u6027\u200b\u548c\u200b\u8f83\u200b\u4f4e\u200b\u4fe1\u606f\u71b5\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u901a\u8fc7\u200b\u4f7f\u7528\u200b\u4f4d\u200b\u91cd\u6392\u200b\u7b97\u6cd5\u200b\uff0cBitshuffle\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u91cd\u590d\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6a21\u5f0f\u200b\u91cd\u65b0\u6392\u5217\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u66f4\u597d\u200b\u5730\u200b\u5229\u7528\u200b\u538b\u7f29\u7b97\u6cd5\u200b\u7684\u200b\u6027\u8d28\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b\u538b\u7f29\u200b\u6bd4\u7387\u200b\u548c\u200b\u66f4\u200b\u5feb\u200b\u7684\u200bI/O\u200b\u901f\u5ea6\u200b\u3002</p> <p>Bitshuffle\u200b\u9879\u76ee\u200b\u5305\u62ec\u200b\u4e24\u4e2a\u200b\u6838\u5fc3\u200b\u5e93\u200b\uff1aBitshuffle\u200b\u548c\u200bBitshuffle-HDF5\u3002Bitshuffle\u200b\u7528\u4e8e\u200b\u538b\u7f29\u200b\u548c\u200b\u89e3\u538b\u7f29\u200bNumpy\u200b\u6570\u7ec4\u200b\uff0c\u200b\u800c\u200bBitshuffle-HDF5\u200b\u5219\u200b\u4e3a\u200bHDF5\u200b\u6587\u4ef6\u683c\u5f0f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u900f\u660e\u200b\u7684\u200b\u538b\u7f29\u200b\u548c\u200b\u89e3\u538b\u7f29\u200b\u529f\u80fd\u200b\uff0c\u200b\u53ef\u200b\u4ece\u200bHDF5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b\u538b\u7f29\u200b\u7684\u200b\u6570\u636e\u200b\u3002</p> <p>Bitshuffle\u200b\u5177\u6709\u200b\u8de8\u5e73\u53f0\u200b\u7684\u200b\u7279\u6027\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5404\u79cd\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e0a\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5305\u62ec\u200bLinux\u3001Windows\u200b\u548c\u200bMac OS\u3002\u200b\u5b83\u200b\u8fd8\u200b\u652f\u6301\u200b\u591a\u79cd\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u5982\u200bPython\u3001C\u200b\u548c\u200bC++\uff0c\u200b\u4e3a\u200b\u7528\u6237\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u65b9\u4fbf\u200b\u7684\u200b\u63a5\u53e3\u200b\u548c\u200b\u6613\u4e8e\u200b\u96c6\u6210\u200b\u7684\u200b\u80fd\u529b\u200b\u3002</p> <p>Bitshuffle\u200b\u9879\u76ee\u200b\u88ab\u200b\u5e7f\u6cdb\u5e94\u7528\u200b\u4e8e\u200b\u79d1\u5b66\u8ba1\u7b97\u200b\u3001\u200b\u5927\u200b\u6570\u636e\u5206\u6790\u200b\u3001\u200b\u5929\u6587\u5b66\u200b\u3001\u200b\u6c14\u5019\u200b\u6a21\u62df\u200b\u7b49\u200b\u9886\u57df\u200b\uff0c\u200b\u4ee5\u200b\u52a0\u5feb\u200b\u6570\u636e\u5904\u7406\u200b\u548c\u200b\u964d\u4f4e\u200b\u5b58\u50a8\u200b\u6210\u672c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bitshuffle/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b Loongnix-Server 4.19.0"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bitshuffle/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<ul> <li>\u200b\u9700\u8981\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b\uff1a     <pre><code>python3.3 or later ,\nHDF5 1.8.4 or later, \nHDF5 for python (h5py), \nNumpy and Cython\n pip3 install Cython\n</code></pre>     \u200b\u53e6\u5916\u200b\uff0chdf5\u200b\u9700\u8981\u200b\u5b89\u88c5\u200bdevel\u200b\u548c\u200bstatic\u200b\u5e93\u200b \u200b\u4e5f\u200b\u901a\u8fc7\u200byum\u200b\u5b89\u88c5\u200b     \u200b\u5bfb\u627e\u200bhdf5\u200b\u7684\u200b\u5b89\u88c5\u200b\u8def\u5f84\u200b rpm -qi/ql hdf5.loongrach64     \u200b\u53d1\u73b0\u200bhdf5\u200b\u7684\u200b\u52a8\u6001\u200b\u5e93\u200b\u548c\u200b\u9759\u6001\u200b\u5e93\u200b\u5728\u200busr/lib64\u200b\u4e0b\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bitshuffle/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b</p> <pre><code>- \u200b\u6267\u884c\u200b\uff1a`python setup.py install --h5plugin --h5plugin-dir=spam --zstd`\n- \u200b\u7f16\u8bd1\u200b\u6267\u884c\u200b\u53ef\u80fd\u200b\u62a5\u9519\u200b\uff1a`Can't find hdf5 with pkg-config fallback to static config`\n- \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u521b\u5efa\u200bhdf5\u200b\u7684\u200bpkg-config\u200b\u6587\u4ef6\u200b\n- \u200b\u4f7f\u7528\u200b\u547d\u4ee4\u200b `pkg-config --variable pc_path pkg-config `\u200b\u67e5\u627e\u200b pkg-config \u200b\u7684\u200b\u641c\u7d22\u200b\u8def\u5f84\u200b\u3002\n- \u200b\u5728\u200bpkg-config\u200b\u7684\u200b\u641c\u7d22\u200b\u8def\u5f84\u200b\u4e0b\u200b\u6dfb\u52a0\u200bhdf5.pc ` sudo vim hdf5.pc `\n   \u200b\u5199\u5165\u200b\n   ```\n   prefix=/usr\n   exec_prefix=${prefix}\n   libdir=${exec_prefix}/lib64\n   includedir=${prefix}/include\n\n   Name: hdf5\n   Description: HDF5 Library\n   Version: 1.10.5\n   Cflags: -I${includedir}\n   Libs: -L${libdir} -lhdf5\n   ```\n- \u200b\u4fdd\u5b58\u200b\u540e\u200b\u7ee7\u7eed\u200b\u8fd0\u884c\u200b\uff0c\u200b\u53ef\u80fd\u200b\u51fa\u73b0\u200b\u7684\u200b\u5176\u4ed6\u200b\u95ee\u9898\u200b\uff1a\n   ```\n   loongarch64-loongson-linux-gnu-gcc: error: unrecognized command line option \u2018-mcpu=native\u2019; did you mean \u2018-march=native\u2019?\n   error: command 'loongarch64-loongson-linux-gnu-gcc' failed with exit status 1  \n   ```\n- \u200b\u89e3\u51b3\u65b9\u6848\u200b\uff1a\u200b\u8fd9\u4e2a\u200b\u9519\u8bef\u200b\u662f\u200b\u7531\u4e8e\u200b\u7f16\u8bd1\u5668\u200b\u4e0d\u200b\u8bc6\u522b\u200b -mcpu=native \u200b\u8fd9\u4e2a\u200b\u53c2\u6570\u200b\u5f15\u8d77\u200b\u7684\u200b\uff0c\u200b\u5b83\u200b\u53ef\u80fd\u200b\u662f\u200b\u7531\u4e8e\u200b\u5e73\u53f0\u200b\u6216\u200b\u7f16\u8bd1\u5668\u200b\u7248\u672c\u200b\u7684\u200b\u4e0d\u540c\u200b\u5bfc\u81f4\u200b\u7684\u200b\u3002\u200b\u4e00\u79cd\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\u662f\u200b\u5c06\u200b -mcpu=native \u200b\u53c2\u6570\u200b\u66ff\u6362\u200b\u4e3a\u200b -march=native\uff0c\u200b\u4e24\u8005\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\n   1.\u200b\u6253\u5f00\u200b setup.py \u200b\u6587\u4ef6\u200b\uff0c\u200b\u5e76\u200b\u627e\u5230\u200b\u4f7f\u7528\u200b -mcpu \u200b\u53c2\u6570\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\n   2.\u200b\u6dfb\u52a0\u200bloongarch64\u200b\u67b6\u6784\u200b\u3002\n   3.\u200b\u4fdd\u5b58\u200b\u6587\u4ef6\u200b\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bookkeeper/","title":"bookkeeper","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bookkeeper/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b bookkeeper \u200b\u7248\u672c\u200b 4.14.1 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/apache/bookkeeper"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/bookkeeper/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b loongnix server 8.4 <p>\u200b\u8bf4\u660e\u200b bookkeeper\u200b\u9879\u76ee\u200b\u4e3b\u8981\u200b\u9002\u914d\u200b\u7684\u200b\u90e8\u5206\u200b\uff1a     1. \u200b\u8df3\u8fc7\u200bloongarch\u200b\u4e0d\u200b\u652f\u6301\u200b\u7684\u200bsse4.2\u200b\u5411\u91cf\u200b\u52a0\u901f\u200b\u6307\u4ee4\u96c6\u200b     2. \u200b\u6dfb\u52a0\u200bloongarch\u200b\u7f16\u8bd1\u200b\u914d\u7f6e\u6587\u4ef6\u200bsrc/loongarch64_aol.properties     3. \u200b\u6392\u9664\u200b\u6253\u5305\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u91cd\u590d\u200b\u7684\u200b\u4f9d\u8d56\u200b\u6587\u4ef6\u200b</p> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b \u200b\u4ece\u200bapache/bookkeeper\u200b\u4ed3\u5e93\u200b\u7684\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u672a\u200b\u79fb\u690d\u200b\u7684\u200b\u6e90\u7801\u200b\uff1ahttps://github.com/apache/bookkeeper \u200b\u4ece\u200bLoongson-Cloud-Community/bazel\u200b\u4ed3\u5e93\u200b\u7684\u200brelease\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u5df2\u7ecf\u200b\u79fb\u690d\u200b\u8fc7\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/bookkeeper \u200b\u5982\u679c\u200b\u60a8\u200b\u4e0b\u8f7d\u200b\u4e86\u200b\u5df2\u7ecf\u200b\u79fb\u690d\u200b\u8fc7\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u8df3\u8fc7\u200b\u4e0b\u6587\u200b\u7684\u200b<code>\u200b\u79fb\u690d\u200b</code>\u200b\u7ae0\u8282\u200b</p> <p>\u200b\u79fb\u690d\u200b \u200b\u5173\u4e8e\u200b\u79fb\u690d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u4ee5\u53ca\u200b\u5982\u4f55\u200b\u4fee\u6539\u200b\u53ef\u4ee5\u200b\u53c2\u8003\u200bdbad884</p> <p>\u200b\u7f16\u8bd1\u200b \u200b\u5728\u200b\u786e\u4fdd\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean package -P loongarch64-linux-nar-aol -DskipTests\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/","title":"brpc","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#1","title":"1.\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"\u547d\u4ee4\u200b \u200b\u7ed3\u679c\u200b uname -m loongarch64 cat /etc/os-release 22.03 LTS"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#2","title":"2.\u200b\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b brpc \u200b\u7248\u672c\u200b 1.6.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/apache/brpc \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/apache/brpc/blob/master/docs/cn/getting_started.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#3","title":"3.\u200b\u6e90\u7801\u200b\u79fb\u690d","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200bhttps://github.com/Loongson-Cloud-Community/brpc/tree/loongarch64-1.6.0-abi2.0\u200b\u7684\u200b git log\u200b\u4fe1\u606f\u200b\uff1a   commit 8e706a34289c2e032612a5363d9359ebc4e8433a\u200b\u53ca\u5176\u200b\u4e4b\u540e\u200b\u4e3a\u200bloongarch64\u200b\u79fb\u690d\u200b\u7684\u200b\u76f8\u5173\u200b\u4ee3\u7801\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#4","title":"4.\u200b\u6784\u5efa\u200b\u547d\u4ee4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#41","title":"4.1 \u200b\u8f6f\u4ef6\u5305\u200b\u4f9d\u8d56\u200b\u5b89\u88c5","text":"<pre><code>$ yum install -y loongnix-release-ceph-nautilus.noarch &amp;&amp; yum makecache \n$ yum install -y leveldb-devel gflags gflags-devel protobuf-devel protobuf gperftools gperftools-devel gtest gtest-devel gcc-c++ gflags gflags-devel leveldb-devel gtest gtest-devel openssl-devel\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#42","title":"4.2 \u200b\u6e90\u7801\u200b\u7f16\u8bd1","text":"<p>\u200b\u5728\u200bbrpc\u200b\u6e90\u7801\u200b\u8def\u5f84\u200b\u4e0b\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>$ sh config_brpc.sh --headers=\"/usr/include\" --libs=\"/usr/lib64 /usr/bin\"\n$ make\n</code></pre> \u200b\u5728\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\u4f1a\u200b\u751f\u6210\u200boutput\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u4e09\u4e2a\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5177\u4f53\u200b\u5982\u4e0b\u200b\uff1a <pre><code>$ cd output\n$ ls\nbin  include  lib\n$ ls lib\nlibbrpc.a  libbrpc.so\n$ ls include/\nbrpc  bthread  butil  bvar  idl_options.pb.h  idl_options.proto  json2pb  mcpack2pb\n$ ls bin/\nprotoc-gen-mcpack\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/brpc/#43","title":"4.3 \u200b\u8fd0\u884c\u200b\u6d4b\u8bd5","text":"<p><pre><code>$ cd test\n$ make\n$ sh run_tests.sh\n</code></pre> \u200b\u5728\u200b\u6267\u884c\u200b\u5b8c\u200bmake\u200b\u4ee5\u540e\u200b\u4f1a\u200b\u5728\u200btest\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u5404\u4e2a\u200b\u6d4b\u8bd5\u200b\u6587\u4ef6\u200b.cpp\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\uff0c\u200b\u82e5\u200b\u8981\u200b\u5355\u72ec\u200b\u6267\u884c\u200b\u67d0\u4e2a\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u5219\u200b\u76f4\u63a5\u200b\u6267\u884c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\u5373\u53ef\u200b\uff0c\u200b\u5982\u200b\uff1a <pre><code>$ ./bthread_fd_unittest\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/","title":"buildah","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>1.29.1</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#2","title":"2.\u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u9f99\u82af\u200bdebian\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u73af\u5883\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/buildah-v1.29.1# cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\nroot@cloud-01:/home/zhaixiaojuan/workspace/buildah-v1.29.1# uname -a\nLinux cloud-01 4.19.0-17-loongson-3 #1 SMP 4.19.190-6.1 Mon Apr 11 13:19:19 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u4e0d\u200b\u9700\u8981\u200b\u9002\u914d\u200b\u6e90\u7801\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u5c06\u200bvendor\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200bbbolt\u200b\u66f4\u65b0\u200b\u4e3a\u200b\u652f\u6301\u200bloong64\u200b\u7684\u200b\u7248\u672c\u200b\u3002      \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u6e90\u7801\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/buildah/tree/loong64-1.29.1 </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#4","title":"4.\u200b\u5b89\u88c5\u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":"<p>(1) \u200b\u8f6f\u4ef6\u200b\u5b89\u88c5\u200b <pre><code>apt -y install bats btrfs-progs git libapparmor-dev libdevmapper-dev libglib2.0-dev libgpgme-dev libseccomp-dev libselinux1-dev  go-md2man golang-1.19\n</code></pre> \uff082\uff09\u200b\u8bbe\u7f6e\u200bgpgme.pc \u200b\u641c\u7d22\u200b/usr\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u662f\u5426\u200b\u5b58\u5728\u200bgpgme.pc\u200b\u6587\u4ef6\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u6dfb\u52a0\u200bgpgme.pc\uff0c\u200b\u5177\u4f53\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/buildah-v1.29.1# cat /usr/lib/loongarch64-linux-gnu/pkgconfig/gpgme.pc\nprefix=/usr\nexec_prefix=/usr\nincludedir=/usr/include\nlibdir=/usr/lib64\napi_version=1\n\nName: gpgme\nDescription: GnuPG Made Easy to access GnuPG\nRequires.private: gpg-error, libassuan\nVersion: 1.12.0\nCflags: -I${includedir}\nLibs: -L${libdir} -lgpgme\nURL: https://www.gnupg.org/software/gpgme/index.html\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#5","title":"5.\u200b\u6784\u5efa","text":"<p><pre><code>make\nmake install\n</code></pre> make\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\u4e8c\u8fdb\u5236\u200b\u4f1a\u200b\u5b58\u50a8\u200b\u5728\u200bbin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5982\u4e0b\u200b\uff1a <pre><code>zhaixiaojuan@cloud-01:~/workspace/buildah-v1.29.1/bin-dynamic$ ls\nbuildah  copy  imgtype  tutorial\n</code></pre></p> <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/buildah-v1.29.1/bin# buildah --version\nbuildah version 1.29.1 (image-spec 1.0.2-dev, runtime-spec 1.0.2-dev)\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#6","title":"6. \u200b\u4e8c\u8fdb\u5236\u200b\u83b7\u53d6","text":"<p>\u200b\u4e8c\u8fdb\u5236\u200b\u83b7\u53d6\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/buildah/releases/download/loong64-v1.29.1/loong64-debian-bin-v1.29.1.tar.gz \u200b\u89e3\u538b\u200b\u8be5\u200btar\u200b\u5305\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200bPATH\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002     \u200b\u6ce8\u610f\u200b\uff1a\u200b\u7531\u4e8e\u200b\u4e8c\u8fdb\u5236\u200b\u6784\u5efa\u200b\u65f6\u200b\u4f7f\u7528\u200b\u5230\u200b\u4e86\u200bcgo,\u200b\u65e0\u6cd5\u200b\u6784\u5efa\u200b\u4e3a\u200b\u9759\u6001\u200b\u4e8c\u8fdb\u5236\u200b\u3002   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#7","title":"7. \u200b\u4f7f\u7528\u200b\u65b9\u6cd5","text":"<p>\u200b\u8be5\u200bbuildah\u200b\u5728\u200b\u4f7f\u7528\u200b\u65f6\u200b\u8fd8\u200b\u4f9d\u8d56\u200bgolang,runc,cni,\u200b\u5177\u4f53\u200b\u4f7f\u7528\u200b\u6b65\u9aa4\u200b\u5982\u4e0b\u200b\uff1a      \uff081\uff09\u200b\u6309\u7167\u200b\u4e0a\u9762\u200b\u7684\u200b3\uff5e5\u200b\u7684\u200b\u6b65\u9aa4\u200b(\u200b\u6216\u8005\u200b\u6b65\u9aa4\u200b6)\u200b\u5c06\u200bbuildah\u200b\u5b89\u88c5\u200b\u5230\u200b\u672c\u5730\u200b\u73af\u5883\u200b\u4e0a\u200b      \uff082\uff09\u200b\u5b89\u88c5\u200bgolang-1.19      (3) runc\u200b\u5b89\u88c5\u200b\uff1a     \u200b\u4e0b\u8f7d\u200b\u4e8c\u8fdb\u5236\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/runc/releases/download/commit-d5be3e26050c-loongarch64/loong64-bin-main-d5be3e26050c.tar.gz  \uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u89e3\u538b\u200b\u5230\u200b\u672c\u5730\u200b/usr/bin/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002    buildah\u200b\u5bf9\u200brunc\u200b\u6709\u200b\u7248\u672c\u200b\u8981\u6c42\u200b\uff0c\u200b\u5f53\u524d\u200b\u7cfb\u7edf\u200b\u81ea\u5e26\u200b\u7684\u200brunc\u200b\u7248\u672c\u200b\u8f83\u200b\u4f4e\u200b\uff0c\u200b\u4e0e\u200bbuildah\u200b\u4e0d\u200b\u914d\u5957\u200b  \uff084\uff09cni\u200b\u6784\u5efa\u200b  <pre><code>git clone https://github.com/containernetworking/plugins    \ncd ./plugins\n./build_linux.sh           //\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200bbin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b\n</code></pre> <pre><code>mkdir -p /opt/cni/bin\ninstall -v ./bin/*  /opt/cni/bin/          //\u200b\u5c06\u200b\u5176\u200b\u5b89\u88c5\u200b\u5230\u200b/opt/cin/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre>  \uff085\uff09\u200b\u914d\u7f6e\u6587\u4ef6\u200b  \u200b\u5728\u200b\u672c\u5730\u200b\u673a\u5668\u200b\u4e0a\u200b\u521b\u5efa\u200b/etc/containers\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u5176\u4e2d\u200b\u52a0\u5165\u200b\u4ee5\u4e0b\u200b\u6587\u4ef6\u200b\uff1a</p> <p>/etc/containers/policy.json\uff1a  ```  {     \"default\": [         {             \"type\": \"insecureAcceptAnything\"         }     ],     \"transports\":         {             \"docker-daemon\":                 {                     \"\": [{\"type\":\"insecureAcceptAnything\"}]                 }         } }  <pre><code>/etc/containers/registries.conf\uff1a\n</code></pre>  # This is a system-wide configuration file used to</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#keep-track-of-registries-for-various-container-backends","title":"keep track of registries for various container backends.","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#it-adheres-to-toml-format-and-does-not-support-recursive","title":"It adheres to TOML format and does not support recursive","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#lists-of-registries","title":"lists of registries.","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#the-default-location-for-this-configuration-file-is-etccontainersregistriesconf","title":"The default location for this configuration file is /etc/containers/registries.conf.","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#the-only-valid-categories-are-registriessearch-registriesinsecure","title":"The only valid categories are: 'registries.search', 'registries.insecure',","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#and-registriesblock","title":"and 'registries.block'.","text":"<p>[registries.search] registries = ['docker.io', 'registry.fedoraproject.org', 'quay.io', 'registry.access.redhat.com', 'registry.centos.org']</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#if-you-need-to-access-insecure-registries-add-the-registrys-fully-qualified-name","title":"If you need to access insecure registries, add the registry's fully-qualified name.","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#an-insecure-registry-is-one-that-does-not-have-a-valid-ssl-certificate-or-only-does-http","title":"An insecure registry is one that does not have a valid SSL certificate or only does HTTP.","text":"<p>[registries.insecure] registries = []</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#if-you-need-to-block-pull-access-from-a-registry-uncomment-the-section-below","title":"If you need to block pull access from a registry, uncomment the section below","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#and-add-the-registries-fully-qualified-name","title":"and add the registries fully-qualified name.","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#_1","title":"buildah","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/buildah/#docker-only","title":"Docker only","text":"<p>[registries.block] registries = []  ```</p> <p>\u200b\u6b64\u65f6\u200bbuildah\u200b\u4e8c\u8fdb\u5236\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/","title":"calico-node","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#caliconode","title":"calico/node \u200b\u955c\u50cf\u200b\u7ec4\u6210","text":"<ul> <li>[x] calico \u200b\u6e90\u7801\u200b<ul> <li>felix<ul> <li>bpf \u200b\u4e8c\u8fdb\u5236\u200b</li> </ul> </li> <li>node<ul> <li>node \u200b\u4e8c\u8fdb\u5236\u200b</li> <li>mounts \u200b\u4e8c\u8fdb\u5236\u200b</li> </ul> </li> </ul> </li> <li>[x] go-build \u200b\u955c\u50cf\u200b</li> <li>[x] bird \u200b\u955c\u50cf\u200b</li> <li>[x] bpftool \u200b\u955c\u50cf\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#_1","title":"\u6784\u5efa\u200b\u5206\u6790","text":"<p>calico \u200b\u6240\u6709\u200b\u7684\u200b\u6784\u5efa\u200b\u90fd\u200b\u5728\u200b go-build \u200b\u955c\u50cf\u200b\u4e2d\u200b\u5b8c\u6210\u200b\uff0cgo-build \u200b\u9ed8\u8ba4\u200b\u91c7\u7528\u200b alpine \u200b\u8fdb\u884c\u200b\u9759\u6001\u200b\u4e8c\u8fdb\u5236\u200b\u7684\u200b\u4ea4\u53c9\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u4f46\u662f\u200b la \u200b\u67b6\u6784\u200b\u7684\u200b\u4ea4\u53c9\u200b\u7f16\u8bd1\u200b\u652f\u6301\u200b\u4e0d\u200b\u5b8c\u6574\u200b\uff0c\u200b\u6240\u4ee5\u200b\u91c7\u7528\u200b debian \u200b\u4f5c\u4e3a\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\uff0c\u200b\u8fdb\u884c\u200b\u672c\u5730\u200b\u6784\u5efa\u200b\u3002\u200b\u6839\u636e\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b\uff0c\u200b\u6784\u5efa\u200b\u987a\u5e8f\u200b\u4e3a\u200b <code>go-build</code> -&gt; <code>bird</code> -&gt; <code>bpftool</code> -&gt; <code>calico/node</code>\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#_2","title":"\u7248\u672c\u200b\u9009\u62e9","text":"<ul> <li>calico 3.24.1</li> <li>go-build 0.73</li> <li>bird 0.3.3</li> <li>bpftool 5.19</li> </ul> <p>\u200b\u8bf4\u660e\u200b bpftool\uff0c\u200b\u56e0\u4e3a\u200b bpftool \u200b\u662f\u200b\u7531\u200b\u5185\u6838\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b\u7684\u200b\uff0c\u200b\u5185\u6838\u200b\u4ece\u200b 5.19 \u200b\u5f00\u59cb\u200b\u6b63\u5f0f\u200b\u652f\u6301\u200b loong64\uff0c\u200b\u6545\u200b\u9009\u62e9\u200b  5.19 \u200b\u7248\u672c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#go-build","title":"go-build \u200b\u955c\u50cf","text":"<p>\u200b\u79fb\u690d\u200b\u6e90\u7801\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/dockerfiles/tree/main/calico/go-build/0.73\uff0c\u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b\u5185\u5bb9\u200b\uff1a - \u200b\u4f7f\u7528\u200b debian \u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\u4ee3\u66ff\u200b alpine - \u200b\u6dfb\u52a0\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u8f6f\u4ef6\u5305\u200b\uff0c\u200b\u4f8b\u5982\u200b clang\uff0czlib1g-dev \u200b\u4ee5\u200b\u652f\u6301\u200b bpf \u200b\u6587\u4ef6\u200b\u7f16\u8bd1\u200b - \u200b\u4f7f\u7528\u200b go get \u200b\u4ee3\u66ff\u200b go install\uff0c\u200b\u624b\u52a8\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b - \u200b\u53d6\u6d88\u200b\u4e00\u4e9b\u200b\u7528\u4e8e\u200b qemu \u200b\u652f\u6301\u200b\u7684\u200b\u8f6f\u4ef6\u200b\uff0c\u200b\u4e0d\u200b\u5f71\u54cd\u200b\u5728\u200b loongarch64 \u200b\u73af\u5883\u200b\u4e0b\u200b\u7f16\u8bd1\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#bird","title":"bird \u200b\u955c\u50cf","text":"<p>\u200b\u79fb\u690d\u200b\u6e90\u7801\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/dockerfiles/tree/main/calico/bird/0.3.3</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#bpftool","title":"bpftool \u200b\u955c\u50cf","text":"<p>\u200b\u79fb\u690d\u200b\u6e90\u7801\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/dockerfiles/blob/main/calico/bpftool/5.19\uff0c\u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b\u5185\u5bb9\u200b\uff1a - \u200b\u589e\u52a0\u200b Dockerfile.loong64 \u200b\u6587\u4ef6\u200b - \u200b\u5fae\u8c03\u200b\u56e0\u4e3a\u200b\u5185\u6838\u200b 5.3 \u200b\u548c\u200b 5.19 bpftool \u200b\u6784\u5efa\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5dee\u5f02\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/calico-node/#calico-node_1","title":"calico node \u200b\u955c\u50cf","text":"<p>\u200b\u79fb\u690d\u200b\u6e90\u7801\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/dockerfiles/tree/main/calico/node/3.24.1\uff0c\u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b\u5185\u5bb9\u200b\uff1a - \u200b\u4f7f\u7528\u200b clang-13 \u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b - \u200b\u589e\u52a0\u200b Dockerfile.loong64 \u200b\u6587\u4ef6\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cilium-envoy/","title":"cilium-envoy","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cilium-envoy/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b proxy \u200b\u7248\u672c\u200b cilium-1.11.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/cilium/proxy"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cilium-envoy/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b debian 10 \u200b\u5bb9\u5668"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cilium-envoy/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>cilium-envoy\u200b\u6240\u5728\u200b\u7684\u200b\u9879\u76ee\u200b<code>cilium/proxy</code>\u200b\u5e76\u200b\u6ca1\u6709\u200b<code>tag</code>,\u200b\u672c\u6587\u200b\u901a\u8fc7\u200b<code>commit</code>\u200b\u6765\u200b\u533a\u5206\u200b\u7248\u672c\u200b\uff0c\u200b\u672c\u6b21\u200b\u79fb\u690d\u200b\u7684\u200b\u7248\u672c\u200b\u4e3a\u200b<code>9b1701da9cc035a1696f3e492ee2526101262e56</code>\uff1b \u200b\u53e6\u5916\u200b\uff0c\u200b\u5982\u679c\u200b\u60a8\u200b\u5728\u200b\u79fb\u690d\u200b\u65f6\u200b\u9047\u5230\u200b\u7c7b\u4f3c\u200b <pre><code>link: warning: package \"github.com/golang/protobuf/ptypes/any\" is provided by more than one rule:\n    @com_github_golang_protobuf//ptypes/any:go_default_library\n    @io_bazel_rules_go//proto/wkt:any_go_proto\n...\n...\nThis will be an error in the future.\nexternal/go_sdk/pkg/tool/linux_loong64/link: fingerprint mismatch: github.com/golang/protobuf/ptypes/duration has 529553fed0b6f344, import from github.com/envoyproxy/protoc-gen-validate/validate expecting df483964545e7b77\nlink: error running subcommand: exit status 2\n</code></pre> \u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u8bf4\u660e\u200b\u60a8\u200b\u79fb\u690d\u200b\u7684\u200b\u7248\u672c\u200b\u4e2d\u200b\uff0cenvoy\u200b\u4f9d\u8d56\u200b\u7684\u200bgolang\u200b\u4f4e\u4e8e\u200b1.15\u200b\u7248\u672c\u200b\uff0c\u200b\u76ee\u524d\u200b\u8fd8\u200b\u6ca1\u6709\u200b\u627e\u5230\u200b\u8be5\u200b\u95ee\u9898\u200b\u7684\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5efa\u8bae\u60a8\u200b\u5347\u200b\u7248\u672c\u200b\uff1b \u200b\u6700\u540e\u200b\uff0c\u200b\u672c\u6b21\u200b\u79fb\u690d\u200b\u5728\u200bproxy\u200b\u9879\u76ee\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u505a\u200b\u4fee\u6539\u200b\uff0c\u200b\u6240\u6709\u200b\u7684\u200b\u4fee\u6539\u200b\u90fd\u200b\u662f\u200b\u5728\u200bbazel\u200b\u7684\u200bcache\u200b\u76ee\u5f55\u200b\u4e2d\u200b\uff0e</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cilium-envoy/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b </p> <pre><code>#  \u200b\u5efa\u8bae\u200b\u5728\u200bdocker\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u6784\u5efa\u200b\ndocker run -it --name cilium-envoy cr.loongnix.cn/library/debian:buster /bin/bash\n\n#  \u200b\u5b89\u88c5\u200b\u7f16\u8bd1\u200b\u5de5\u5177\u200b\napt-get update &amp;&amp; apt-get install \\\n   libtool \\\n   cmake \\\n   automake \\\n   autoconf \\\n   make \\\n   ninja-build \\\n   curl \\\n   unzip \\\n   g++ \\\n   git \\\n   virtualenv\n\n#  \u200b\u5b89\u88c5\u200bJDK\ncd /usr/local\ncurl -OL http://ftp.loongnix.cn/Java/openjdk11/loongson11.4.0-fx-jdk11.0.18_10-linux-loongarch64.tar.gz\ntar -zxf loongson11.4.0-fx-jdk11.0.18_10-linux-loongarch64.tar.gz\nexport JAVA_HOME=/usr/local/jdk-11.0.18\nexport PATH=$JAVA_HOME/bin:$PATH\n\n#  \u200b\u5b89\u88c5\u200bgolang\ncurl -OL http://ftp.loongnix.cn/toolchain/golang/go-1.19/go1.19.linux-loong64.tar.gz\nexport GOROOT=/usr/local/go\nexport PATH=$GOROOT/bin:$PATH\n\n#  \u200b\u5b89\u88c5\u200bbazel\ncurl -o /usr/local/bin/bazel -L https://github.com/Loongson-Cloud-Community/bazel/releases/download/3.7.2/bazel_nojdk-3.7.2-linux-loongarch64\nchmod +x /usr/local/bin/bazel\n</code></pre> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b </p> <pre><code>git clone https://github.com/cilium/proxy.git\ncd proxy\ngit checkout 9b1701da9c\n</code></pre> <p>\u200b\u79fb\u690d\u200b \u200b\u79fb\u690d\u200b\u65f6\u200b\u9700\u8981\u200b\u4fee\u6539\u200bbazel\u200b\u7684\u200bcache\u200b\u76ee\u5f55\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5148\u200b\u6267\u884c\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff0c\u200b\u8ba9\u200bbazel\u200b\u751f\u6210\u200bcache\u200b\u76ee\u5f55\u200b\u5e76\u200b\u4e0b\u8f7d\u200b\u4f9d\u8d56\u200b\u6587\u4ef6\u200b\uff0e <pre><code>#  \u200b\u5728\u200bproxy\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7f16\u8bd1\u200b\nmake cilium-envoy\n</code></pre> \u200b\u7b49\u5230\u200b\u62a5\u9519\u200b\u540e\u200b\uff0c\u200b\u8fdb\u5165\u200b<code>/root/.cache/bazel/_bazel_root/bcca255f98078ff781f83f621a84105c/external</code> \u200b\u76ee\u5f55\u200b\u5f00\u59cb\u200b\u79fb\u690d\u200b\uff0e\u200b\u5982\u679c\u200b\u79fb\u690d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u672a\u627e\u5230\u200b\u4e0b\u8ff0\u200b\u54ea\u4e2a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u4e00\u6b21\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff0c\u200b\u53ef\u80fd\u200b\u662f\u200bbazel\u200b\u8fd8\u200b\u672a\u200b\u6267\u884c\u200b\u5230\u200b\u4e0b\u8f7d\u200b\u8be5\u200b\u6587\u4ef6\u200b \u200b\u5c31\u200b\u5df2\u7ecf\u200b\u51fa\u73b0\u200b\u9519\u8bef\u200b\uff0e <pre><code>#  \u200b\u5728\u200b platforms/cpu/BUILD \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6dfb\u52a0\u200bcpu\u200b\u4fe1\u606f\u200b\nconstraint_value(\n    name = \"loongarch64\",\n    constraint_setting = \":cpu\",\n)\n\n#  \u200b\u4fee\u6539\u200b io_bazel_rules_go/go/private/platforms.bzl\nBAZEL_GOARCH_CONSTRAINTS = {\n    \"386\": \"@platforms//cpu:x86_32\",\n    \"amd64\": \"@platforms//cpu:x86_64\",\n    \"arm\": \"@platforms//cpu:arm\",\n    \"arm64\": \"@platforms//cpu:aarch64\",\n    \"ppc64le\": \"@platforms//cpu:ppc\",\n    \"s390x\": \"@platforms//cpu:s390x\",\n    \"loong64\": \"@platforms//cpu:loongarch64\",\n}\n\nGOOS_GOARCH = (\n    ...\n    (\"linux\", \"386\"),\n    (\"linux\", \"amd64\"),\n    (\"linux\", \"arm\"),\n    (\"linux\", \"arm64\"),\n    (\"linux\", \"mips\"),\n    (\"linux\", \"mips64\"),\n    (\"linux\", \"mips64le\"),\n    (\"linux\", \"mipsle\"),\n    (\"linux\", \"ppc64\"),\n    (\"linux\", \"ppc64le\"),\n    (\"linux\", \"riscv64\"),\n    (\"linux\", \"loong64\"),\n    ...\n)\n\n#  \u200b\u4fee\u6539\u200b io_bazel_rules_go/go/private/sdk.bzl\nres = ctx.execute([\"uname\", \"-m\"])\n        if res.return_code == 0:\n            uname = res.stdout.strip()\n            if uname == \"aarch64\":\n                goarch = \"arm64\"\n            elif uname == \"armv6l\":\n                goarch = \"arm\"\n            elif uname == \"armv7l\":\n                goarch = \"arm\"\n            elif uname == \"ppc64le\":\n                goarch = \"ppc64le\"\n            elif uname == \"loongarch64\":\n                goarch = \"loong64\"\n\n#  \u200b\u4fee\u6539\u200b envoy/bazel/dependency_imports.bzl\ndef envoy_dependency_imports(go_version = GO_VERSION):\n    rules_foreign_cc_dependencies()\n    go_rules_dependencies()\n    go_register_toolchains(go_version=\"host\")\n    rbe_toolchains_config()\n    gazelle_dependencies()\n    apple_rules_dependencies()\n\n#  \u200b\u4fee\u6539\u200b envoy/bazel/repository_locations.bzl\n    bazel_gazelle = dict(\n        project_name = \"Gazelle\",\n        project_desc = \"Bazel BUILD file generator for Go projects\",\n        project_url = \"https://github.com/bazelbuild/bazel-gazelle\",\n        version = \"0.24.0\",\n        sha256 = \"de69a09dc70417580aabf20a28619bb3ef60d038470c7cf8442fafcf627c21cb\",\n        urls = [\"https://github.com/bazelbuild/bazel-gazelle/releases/download/v{version}/bazel-gazelle-v{version}.tar.gz\"],\n        release_date = \"2021-10-11\",\n        use_category = [\"build\"],\n\n...\n\n    com_github_gperftools_gperftools = dict(\n        project_name = \"gperftools\",\n        project_desc = \"tcmalloc and profiling libraries\",\n        project_url = \"https://github.com/gperftools/gperftools\",\n        version = \"2.10\",\n        sha256 = \"83e3bfdd28b8bcf53222c3798d4d395d52dadbbae59e8730c4a6d31a9c3732d8\",\n        strip_prefix = \"gperftools-{version}\",\n        urls = [\"https://github.com/gperftools/gperftools/releases/download/gperftools-{version}/gperftools-{version}.tar.gz\"],\n        release_date = \"2022-05-31\",\n        use_category = [\"dataplane_core\", \"controlplane\"],\n        cpe = \"cpe:2.3:a:gperftools_project:gperftools:*\",\n    ),\n\n...\n\n    com_github_luajit_luajit = dict(\n        project_name = \"LuaJIT\",\n        project_desc = \"Just-In-Time compiler for Lua\",\n        project_url = \"https://luajit.org\",\n        # The last release version, 2.1.0-beta3 has a number of CVEs filed\n        # against it. These may not impact correct non-malicious Lua code, but for prudence we bump.\n        version = \"83b6dffcf4ffea376298f3fac3452841eabd0606\",\n        sha256 = \"a5d211370a1112615a0bb20613ad97e7bcd32902b413a6a53bf23382c3061102\",\n        strip_prefix = \"LuaJIT-{version}\",\n        urls = [\"https://github.com/loongson/LuaJIT/archive/{version}.tar.gz\"],\n        release_date = \"2020-10-12\",\n        use_category = [\"dataplane_ext\"],\n        extensions = [\"envoy.filters.http.lua\"],\n        cpe = \"cpe:2.3:a:luajit:luajit:*\",\n    ),\n\n#  \u200b\u4fee\u6539\u200b envoy/bazel/envoy_internal.bzl\ndef envoy_copts(repository, test = False):\n    posix_options = [\n        \"-Wall\",\n        \"-Wextra\",\n#        \"-Werror\",\n        \"-Wnon-virtual-dtor\",\n        \"-Woverloaded-virtual\",\n        \"-Wold-style-cast\",\n        \"-Wformat\",\n        \"-Wformat-security\",\n        \"-Wvla\",\n        \"-Wno-deprecated-declarations\",\n        \"-Wreturn-type\",\n    ]\n\n#  \u200b\u4fee\u6539\u200b\u3000envoy/bazel/BUILD\nconfig_setting(\n    name = \"linux_s390x\",\n    values = {\"cpu\": \"s390x\"},\n)\n\nconfig_setting(\n    name = \"linux_loongarch64\",\n    values = {\"cpu\": \"loongarch64\"},\n)\n\n...\n\nselects.config_setting_group(\n    name = \"linux\",\n    match_any = [\n        \":linux_aarch64\",\n        \":linux_mips64\",\n        \":linux_ppc\",\n        \":linux_s390x\",\n        \":linux_x86_64\",\n        \":linux_loongarch64\",\n    ],\n)\n\n#  \u200b\u4fee\u6539\u200b boringssl/src/include/openssl/base.h\n#elif defined(__MIPSEL__) &amp;&amp; defined(__LP64__)\n#define OPENSSL_64_BIT\n#define OPENSSL_MIPS64\n#elif defined(__loongarch64)\n#define OPENSSL_64_BIT\n#define OPENSSL_LOONGARCH64\n#elif defined(__pnacl__)\n#define OPENSSL_32_BIT\n#define OPENSSL_PNACL\n\n#  \u200b\u4fee\u6539\u200b boringssl/src/CMakeLists.txt\nelseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL \"loongarch64\")\n  set(ARCH \"generic\")\n\n#  \u200b\u4fee\u6539\u200b boringssl/src/util/generate_build_files.py\nelseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL \"loongarch64\")\n  set(ARCH \"generic\")\n\n#  \u200b\u4fee\u6539\u200b com_googlesource_googleurl/build/build_config.h\n#elif defined(__aarch64__) || defined(_M_ARM64)\n#define ARCH_CPU_ARM_FAMILY 1\n#define ARCH_CPU_ARM64 1\n#define ARCH_CPU_64_BITS 1\n#define ARCH_CPU_LITTLE_ENDIAN 1\n#elif defined(__loongarch64)\n#define ARCH_CPU_LOONG_FAMILY 1\n#define ARCH_CPU_LOONG64 1\n#define ARCH_CPU_64_BITS 1\n#define ARCH_CPU_LITTLE_ENDIAN 1\n</code></pre> \u200b\u81f3\u4e8e\u200b\u5347\u7ea7\u200bgazelle\u200b\u5230\u200b0.24.0\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b\u4e4b\u524d\u200b\u7684\u200bgazelle\u200b\u7248\u672c\u200b\u5728\u200b\u4f7f\u7528\u200bgolang 1.16+\u200b\u7248\u672c\u200b\u65f6\u4f1a\u200b\u51fa\u73b0\u200b\u4ee5\u4e0b\u200b\u95ee\u9898\u200b\uff0c\u200b\u5bfc\u81f4\u200bgo.mod\u200b\u4e2d\u200b\u7684\u200b\u4f9d\u8d56\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u4e0b\u8f7d\u200b\uff0e <pre><code>DEBUG: /tmp/tmp.g1skLo1cY4/external/bazel_gazelle/internal/go_repository.bzl:189:18: com_github_lyft_protoc_gen_star: gazelle: finding module path for import github.com/stretchr/testify/assert: exit status 1: go: malformed module path \"gazelle_remote_cache__\\\\n\": invalid char '\\\\'\ngazelle: finding module path for import github.com/stretchr/testify/require: exit status 1: go: malformed module path \"gazelle_remote_cache__\\\\n\": invalid char '\\\\'\n</code></pre> \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\u6765\u81ea\u200b\u5b98\u65b9\u200b\u7684\u200bPr\uff1a#20394</p> <p>\u200b\u7f16\u8bd1\u200b \u200b\u4e0a\u6587\u200b\u5df2\u7ecf\u200b\u63d0\u5230\u200b\u4e86\u200b\uff0c\u200b\u5728\u200b\u786e\u4fdd\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a <pre><code>make cilium-envoy\n</code></pre> \u200b\u4e4b\u540e\u200b\u5c31\u662f\u200b\u7b49\u5f85\u200b\uff0c\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b16/32\u200b\u6838\u200b\u7684\u200b\u673a\u5668\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u5426\u5219\u200b\u7b49\u5f85\u200b\u7684\u200b\u65f6\u95f4\u200b\u8f83\u957f\u200b\uff0e</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/conscrypt/","title":"conscrypt","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/conscrypt/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b conscrypt \u200b\u7248\u672c\u200b 2.5.2 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/google/conscrypt \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/google/conscrypttree/2.5.2/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/conscrypt/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/conscrypt/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>\u200b\u8be5\u9879\u200b\u76ee\u7684\u200b\u7f16\u8bd1\u200b\u7ed3\u679c\u200b\u4e3a\u200bjar\u200b\u5305\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/conscrypt/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b 1. boringssl  loongarch\u200b\u79fb\u690d\u200b\u7684\u200b\u9879\u76ee\u200b\u5730\u5740\u200bhttps://github.com/Panxuefeng-loongson/boringssl/tree/LoongArch64 \u200b\u65e0\u9700\u200b\u7f16\u8bd1\u200b,\u200b\u914d\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b:<code>export boringsslHome=path/to/boringsslHome</code></p> <p>\u200b\u9002\u914d\u200b \u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u60c5\u51b5\u200b\u89c1\u200b https://github.com/Loongson-Cloud-Community/conscrypt/commit/a4a0b0285deff910e6cd65223530ffce928720e7 \u200b\u7531\u4e8e\u200b\u5728\u200bloongarch\u200b\u5e73\u53f0\u200b\u65e0\u6cd5\u200b\u751f\u6210\u200bconstants\u200b\u5b50\u9879\u76ee\u200b\u4e2d\u200b\u7684\u200bNative.java\u200b\u4ee3\u7801\u200b,\u200b\u9700\u8981\u200b\u5728\u200bx86\u200b\u5e73\u53f0\u200b\u751f\u6210\u200b\u4ee3\u7801\u200b,\u200b\u63a5\u7740\u200b\u653e\u5230\u200b\u76f8\u540c\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200bconsycrypt-constants/src/java/main\u200b\u76ee\u5f55\u200b\u4e0b\u200b https://github.com/Loongson-Cloud-Community/conscrypt/releases/download/v2.5.2/NativeConstants.tar.gz</p> <p>\u200b\u7f16\u8bd1\u200b</p> <p><code>./gradlew conscrypt-openjdk:assemble</code> <code>./gradlew conscrypt-openjdk-uber:assemble</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/","title":"containerd","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>v1.7.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u6784\u5efa\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bserver\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u73af\u5883\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@localhost containerd]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/#3","title":"3. \u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":"<p>\u200b\u5728\u200b\u7f16\u8bd1\u200bcontainerd\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u5148\u200b\u5b89\u88c5\u200bprotobuf 3.x\uff0cgolang&gt;=1.19.x     <pre><code>yum install -y protobuf golang-1.19\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/#4","title":"4. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u4e0d\u200b\u9700\u8981\u200b\u9002\u914d\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u9002\u914d\u200b\u4e00\u4e0b\u200bvendor\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200bebpf\uff0c\u200b\u53ea\u6709\u200b\u4e24\u884c\u200b\u4ee3\u7801\u200b\uff0c\u200b\u9002\u914d\u200b\u7b80\u5355\u200b\uff0c\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/containerd/tree/loong64-v1.7.0 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/containerd/#5","title":"5. \u200b\u6784\u5efa","text":"<p>\u200b\u6784\u5efa\u200b\u52a8\u6001\u200b\u4e8c\u8fdb\u5236\u200b\uff1a <pre><code>make\n</code></pre> \u200b\u6784\u5efa\u200b\u9759\u6001\u200b\u4e8c\u8fdb\u5236\u200b\uff1a <pre><code>make STATIC=1\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/","title":"cri-tools","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/#_1","title":"\u6784\u5efa\u200b\u7248\u672c","text":"<p>v1.20.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/#_2","title":"\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u4f7f\u7528\u200bloongnix server <pre><code>[root@5ab3688f7f77 cri-tools]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre> <pre><code>[root@5ab3688f7f77 cri-tools]# uname -a\nLinux 5ab3688f7f77 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p> <p>golang\u200b\u4f7f\u7528\u200b1.15.6\u200b\u7248\u672c\u200b <pre><code>[root@5ab3688f7f77 cri-tools]# go version\ngo version go1.15.6 linux/loong64\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/#_3","title":"\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/#_4","title":"\u6784\u5efa","text":"<p><pre><code>rm -rf ~/go   //\u200b\u6e05\u695a\u200b\u672c\u5730\u200b\u7f13\u5b58\u200b\nexport GOPROXY=\"http://goproxy.loongnix.cn:3000\"\nexport GOSUMDB=off\nrm -rf go.sum\ngo mod vendor //\u200b\u66f4\u65b0\u200bvendor\u200b\u76ee\u5f55\u200b\n</code></pre> <pre><code>make   //\u200b\u6267\u884c\u200b\u6784\u5efa\u200b\n</code></pre> \u200b\u6784\u5efa\u200b\u6210\u529f\u200b\u540e\u4f1a\u200b\u5728\u200b_output\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200bcrictl critest\u200b\u4e24\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/cri-tools/#_5","title":"\u5907\u6ce8","text":"<p>\u200b\u4e8c\u8fdb\u5236\u200b\u83b7\u53d6\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/cri-tools/releases/download/loong64-v1.20.0/loong64-v1.20.0-bin.tar.gz     \u200b\u6e90\u7801\u200b\u5206\u652f\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/cri-tools/tree/loong64-1.20.0   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/","title":"deepflow","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/#1","title":"1. \u200b\u6e90\u7801\u200b\u79fb\u690d","text":"<p>\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/deepflow/tree/loongarch64-v6.1.4 \u200b\u7684\u200bcommit\u200b\u4fe1\u606f\u200b       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/#2-server","title":"2. server\u200b\u7ec4\u4ef6\u200b\u7f16\u8bd1","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/#21","title":"2.1 \u200b\u73af\u5883\u200b\u51c6\u5907","text":"<p>\u200b\u5728\u200b\u7f16\u8bd1\u200bserver\u200b\u7ec4\u4ef6\u200b\u65f6\u200b\u4f9d\u8d56\u200bgogo/protobuf\u200b\u4e2d\u200b\u7684\u200b\u4e00\u4e9b\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u4e0b\u8f7d\u200b\u4e8c\u8fdb\u5236\u200bhttps://github.com/Loongson-Cloud-Community/gogo-protobuf/releases/download/v1.3.2/gogo-protobuf-1.3.2-bin.tar.gz \uff0c\u200b\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b\u89e3\u538b\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200bPATH\u200b\u8def\u5f84\u200b\u5f53\u4e2d\u200b\u3002      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/#22","title":"2.2 \u200b\u8f6f\u4ef6\u200b\u5b89\u88c5","text":"<pre><code>apt install -y golang-1.20 libpython3.7-dev libpython3.7-stdlib\npip3 install ujson\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/deepflow/#23-server","title":"2.3 server\u200b\u7ec4\u4ef6\u200b\u7f16\u8bd1","text":"<p><pre><code>cd server\nmake\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u4ee5\u540e\u200b\u4f1a\u200b\u751f\u6210\u200bbin/deepflow-server</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/druid/","title":"druid","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/druid/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>0.12.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/druid/#2-sigar","title":"2. \u200b\u4f9d\u8d56\u200b\u9879\u200bsigar","text":"<p>\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u65e0\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u4ee3\u7801\u200b\uff0c\u200b\u4f46\u200b\u4f9d\u8d56\u200bsigar-dist-1.6.5.132\uff0c     \u200b\u5176\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/sigar/releases/download/loongarch64-master-ad47dc3b494e/sigar-dist-1.6.5.132.zip       \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u67e5\u770b\u200b\uff1a https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar.md        </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/druid/#3","title":"3. \u200b\u6784\u5efa","text":"<pre><code>mvn clean install -pl java-util -am -DskipTests    //\u200b\u53ea\u200b\u6784\u5efa\u200bjava-util\u200b\u6a21\u5757\u200b\n</code></pre> <p>\u200b\u82e5\u200b\u8981\u200b\u6784\u5efa\u200b\u6240\u6709\u200b\u6a21\u5757\u200b\uff0c\u200b\u5219\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>mvn clean install -DskipTests\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ebpf/","title":"cilium-ebpf","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ebpf/#_1","title":"\u6784\u5efa\u200b\u7248\u672c","text":"<p>v0.10.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ebpf/#_2","title":"\u6e90\u7801\u200b\u4fee\u6539","text":"<pre><code>diff --git a/cmd/bpf2go/main.go b/cmd/bpf2go/main.go\nindex 03ff1f8..2413336 100644\n--- a/cmd/bpf2go/main.go\n+++ b/cmd/bpf2go/main.go\n@@ -47,6 +47,7 @@ var targetByGoArch = map[string]target{\n        \"amd64p32\":    {\"bpfel\", \"\"},\n        \"arm\":         {\"bpfel\", \"arm\"},\n        \"arm64\":       {\"bpfel\", \"arm64\"},\n+       \"loong64\":     {\"bpfel\", \"\"},\n        \"mipsle\":      {\"bpfel\", \"\"},\n        \"mips64le\":    {\"bpfel\", \"\"},\n        \"mips64p32le\": {\"bpfel\", \"\"},\ndiff --git a/internal/endian_le.go b/internal/endian_le.go\nindex 41a6822..273fad8 100644\n--- a/internal/endian_le.go\n+++ b/internal/endian_le.go\n@@ -1,5 +1,5 @@\n-//go:build 386 || amd64 || amd64p32 || arm || arm64 || mipsle || mips64le || mips64p32le || ppc64le || riscv64\n-// +build 386 amd64 amd64p32 arm arm64 mipsle mips64le mips64p32le ppc64le riscv64\n+//go:build 386 || amd64 || amd64p32 || arm || arm64 || loong64 || mipsle || mips64le || mips64p32le || ppc64le || riscv64\n+// +build 386 amd64 amd64p32 arm arm64 loong64 mipsle mips64le mips64p32le ppc64le riscv64\n\n package internal\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ebpf/#_3","title":"\u6784\u5efa","text":"<p>\u200b\u6267\u884c\u200bmake \u200b\u5728\u200bmake\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\u4f1a\u200b\u81ea\u52a8\u66f4\u65b0\u200b\u6587\u4ef6\u200bcmd/bpf2go/test/test_bpfel.go\u200b\u548c\u200bexamples\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u76f8\u5173\u200b\u6587\u4ef6\u200b</p> <p>\u200b\u5907\u6ce8\u200b\uff1a\u200b\u5177\u4f53\u200b\u9879\u76ee\u200b https://github.com/Loongson-Cloud-Community/ebpf</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ansj/","title":"elasticsearch-analysis-ansj","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ansj/#1","title":"1.\u200b\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>\u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u94fe\u63a5\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/elasticsearch-analysis-ik</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ansj/#2","title":"2.\u200b\u6e90\u7801\u200b\u6784\u5efa","text":"<p>\u200b\u6784\u5efa\u200b\u7248\u672c\u200b\uff1a tag 8.7.0 \u200b\u6784\u5efa\u200b\u5de5\u5177\u200b\u5b89\u88c5\u200b\uff1a <pre><code>yum install -y java-11-openjdk\n......\nexport JAVA_HOME=\"/usr/lib/jvm/java-11-openjdk-11.0.19.0.7-11.6.0.lns8.loongarch64\"\n</code></pre> <pre><code>mvn package\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u751f\u6210\u200btarget/releases/elasticsearch-analysis-ansj-8.7.0.0-release.zip\u3002\u200b\u89e3\u538b\u200b\u8be5\u200bzip\uff0c\u200b\u67e5\u770b\u200b\u5176\u4e2d\u200b\u5e76\u200b\u6ca1\u6709\u200b\u548c\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ik/","title":"elasticsearch-analysis-ik","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ik/#1","title":"1. \u200b\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>\u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u94fe\u63a5\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/elasticsearch-analysis-ik     \u200b\u4ece\u200belasticsearch-analysis-ik\u200b\u5b98\u65b9\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b elasticsearch-analysis-ik-8.7.0.zip \uff0c\u200b\u67e5\u770b\u200b\u8be5\u200bzip\u200b\u662f\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\uff0c\u200b\u76f4\u63a5\u200b\u4ece\u200b\u5b98\u65b9\u200b\u94fe\u63a5\u200b\u4e0b\u8f7d\u200b\u5373\u53ef\u200b\u3002 \u200b\u82e5\u200b\u8981\u200b\u8fdb\u884c\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff0c\u200b\u5219\u200b\u53ef\u200b\u53c2\u8003\u200b\u4e0b\u9762\u200b\u7684\u200b\u201c2. \u200b\u6e90\u7801\u200b\u4fee\u6539\u200b\u201d\u200b\u548c\u200b\u201c3. \u200b\u9879\u76ee\u200b\u6784\u5efa\u200b\u201d\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ik/#2","title":"2. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u6784\u5efa\u200b\u7248\u672c\u200b\uff1atag 8.7.0    \u200b\u5728\u200b\u6784\u5efa\u200b\u6e90\u7801\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u4fee\u6539\u200bpom.xml\u200b\u4e2d\u200belasticsearch\u200b\u7684\u200b\u7248\u672c\u200b\u4fee\u6539\u200b\u4e0e\u200btag\u200b\u7684\u200b\u7248\u672c\u200b\u4e00\u81f4\u200b(\u200b\u8fd9\u91cc\u200b\u4e3a\u200b8.7.0)\uff0c\u200b\u624d\u80fd\u200b\u548c\u200btag\u200b\u5bf9\u5e94\u200b\u7248\u672c\u200b\u7684\u200belasticsearch(\u200b\u8fd9\u91cc\u200b\u4e3a\u200b8.7.0)\u200b\u914d\u5957\u200b\u4f7f\u7528\u200b\u3002 <pre><code>[root@kubernetes-master-1 elasticsearch-analysis-ik]# git diff pom.xml\ndiff --git a/pom.xml b/pom.xml\nindex 6206bd6..e1cca8c 100755\n--- a/pom.xml\n+++ b/pom.xml\n@@ -12,7 +12,7 @@\n     &lt;inceptionYear&gt;2011&lt;/inceptionYear&gt;\n\n     &lt;properties&gt;\n-        &lt;elasticsearch.version&gt;8.4.1&lt;/elasticsearch.version&gt;\n+        &lt;elasticsearch.version&gt;8.7.0&lt;/elasticsearch.version&gt;\n         &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n         &lt;elasticsearch.assembly.descriptor&gt;${project.basedir}/src/main/assemblies/plugin.xml&lt;/elasticsearch.assembly.descriptor&gt;\n         &lt;elasticsearch.plugin.name&gt;analysis-ik&lt;/elasticsearch.plugin.name&gt;\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1apom.xml\u200b\u4e2d\u200b\u8bbe\u5b9a\u200b\u7684\u200belasticsearch\u200b\u7248\u672c\u200b\u548c\u200b\u6e90\u7801\u200b\u7684\u200btag \u200b\u7248\u672c\u200b\u4e0d\u200b\u4e00\u81f4\u200b\uff0c\u200b\u5728\u200belasticsearch-analysis-ik\u200b\u7684\u200b\u5b98\u65b9\u200b\u6709\u200b\u76f8\u5173\u200b\u7684\u200bissue\uff0c\u200b\u53ef\u200b\u67e5\u770b\u200b\uff1a <pre><code>https://github.com/medcl/elasticsearch-analysis-ik/issues/839\nhttps://github.com/medcl/elasticsearch-analysis-ik/issues/857\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-ik/#3","title":"3. \u200b\u9879\u76ee\u200b\u6784\u5efa","text":"<p>\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b\u5b89\u88c5\u200b\uff1a <pre><code>yum install -y java-11-openjdk\n......\nexport JAVA_HOME=\"/usr/lib/jvm/java-11-openjdk-11.0.19.0.7-11.6.0.lns8.loongarch64\"\n</code></pre> \u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff1a  <pre><code>mvn clean\nmvn compile\nmvn package\n</code></pre> \u200b\u5f53\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0czip\u200b\u6587\u4ef6\u200b\u5b58\u50a8\u200b\u5728\u200btarget/release \u200b\u76ee\u5f55\u200b\u4e0b\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-pinyin/","title":"elasticsearch-analysis-pinyin","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch-analysis-pinyin/#_1","title":"\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>\u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u94fe\u63a5\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/elasticsearch-analysis-ik     \u200b\u4ece\u200belasticsearch-analysis-ik\u200b\u5b98\u65b9\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b elasticsearch-analysis-ik-8.7.0.zip \uff0c\u200b\u67e5\u770b\u200b\u8be5\u200bzip\u200b\u662f\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\uff0c\u200b\u76f4\u63a5\u200b\u4ece\u200b\u5b98\u65b9\u200b\u94fe\u63a5\u200b\u4e0b\u8f7d\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/","title":"elasticsearch","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#_1","title":"\u7248\u672c\u200b\u9009\u62e9","text":"<p>\u200b\u9f99\u82af\u200b\u79fb\u690d\u200b\u7248\u672c\u200b\u9009\u62e9\u200b <code>elasticsearch 7.13.0</code>\u3002\u200b\u4e3b\u8981\u200b\u662f\u200b\u51fa\u4e8e\u200b ELK \u200b\u517c\u5bb9\u6027\u200b\u8003\u8651\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#_2","title":"\u9879\u76ee\u5206\u6790","text":"<p>elasticsearch \u200b\u672c\u8eab\u200b\u662f\u200b java \u200b\u9879\u76ee\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b JVM \u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u200b\u8de8\u200b\u67b6\u6784\u200b\u8fd0\u884c\u200b\uff0c\u200b\u4f46\u662f\u200b\u7531\u4e8e\u200b\u5176\u200b\u4f7f\u7528\u200b\u4e86\u200b JNA \u200b\u6280\u672f\u200b\uff0c\u200b\u6240\u4ee5\u200b <code>jna</code> \u200b\u548c\u200b\u5176\u200b\u4e00\u4e2a\u200b c \u200b\u8bed\u8a00\u200b\u6a21\u5757\u200b <code>ml-cpp</code> \u200b\u9700\u8981\u200b\u5728\u200b\u9f99\u82af\u200b\u67b6\u6784\u200b\u4e0a\u200b\u8fdb\u884c\u200b\u4ee3\u7801\u200b\u79fb\u690d\u200b\u548c\u200b\u7f16\u8bd1\u200b\u3002\u200b\u901a\u8fc7\u200b\u6211\u4eec\u200b\u7684\u200b\u5206\u6790\u200b\uff0c\u200b\u5176\u200b java \u200b\u8c03\u7528\u200b ml-cpp \u200b\u90e8\u5206\u200b\u7684\u200b java \u200b\u4ee3\u7801\u200b\u4e5f\u200b\u9700\u8981\u200b\u5728\u200b\u589e\u52a0\u200b\u76f8\u5e94\u200b\u7684\u200b\u67b6\u6784\u200b\u4ee3\u7801\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u9002\u914d\u200b\u7684\u200b\u90e8\u5206\u200b\u4e00\u5171\u200b\u6709\u200b\u4e09\u5904\u200b\u3002 - ml-cpp java \u200b\u90e8\u5206\u200b - ml-cpp c \u200b\u90e8\u5206\u200b - jna</p> <p>\u200b\u4e0b\u9762\u200b\u6309\u7167\u200b jna\uff0cml-cpp c \u200b\u90e8\u5206\u200b\uff0cml-cpp java \u200b\u90e8\u5206\u200b \u200b\u7684\u200b\u987a\u5e8f\u200b\u5206\u6b65\u200b\u8bf4\u660e\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#jna","title":"jna","text":"<p>\u200b\u6839\u636e\u200b elasticsearch 7.13.0 \u200b\u7248\u672c\u200b\u4f9d\u8d56\u200b \u200b\u786e\u5b9a\u200b jna \u200b\u7248\u672c\u200b 5.7.0-1</p> <p>jna \u200b\u6280\u672f\u200b\u5c5e\u4e8e\u200b java \u200b\u8c03\u7528\u200b c \u200b\u7684\u200b\u5916\u90e8\u200b\u51fd\u6570\u8c03\u7528\u200b\uff0c\u200b\u548c\u200b jnr\uff0cjni \u200b\u7b49\u200b\u4e00\u6837\u200b\uff0c\u200b\u5176\u200b\u6838\u5fc3\u200b\u4f9d\u7136\u200b\u662f\u200b libffi\u3002\u200b\u6240\u4ee5\u200b\u7b2c\u4e00\u6b65\u200b\u5c06\u200b <code>native/libffi</code> \u200b\u66ff\u6362\u200b\u4e3a\u200b\u9f99\u82af\u200b\u9002\u914d\u200b\u540e\u200b\u7684\u200b libffi \u200b\u6e90\u7801\u200b\u3002 \u200b\u7b2c\u4e8c\u6b65\u200b\uff0c\u200b\u5728\u200b jna \u200b\u6e90\u7801\u200b\u4e2d\u200b\u589e\u52a0\u200b loongarch64 \u200b\u903b\u8f91\u200b\u3002 <pre><code>[root@916b602ffe1d jna-5.7.0]# git status\nOn branch master\nChanges to be committed:\n  (use \"git restore --staged &lt;file&gt;...\" to unstage)\n    modified:   build.xml\n    modified:   src/com/sun/jna/Native.java\n    modified:   src/com/sun/jna/NativeLibrary.java\n    modified:   src/com/sun/jna/Platform.java\n</code></pre> \u200b\u7136\u540e\u200b\u7f16\u8bd1\u200b jna \u200b\u5373\u53ef\u200b <pre><code>ant native\nant -Drelease=true -Dmaven-release=true clean dist \n</code></pre> \u200b\u751f\u6210\u200b <code>dist/jna.jar</code> \u200b\u4fdd\u5b58\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#ml-cpp-c","title":"ml-cpp c \u200b\u8bed\u8a00\u200b\u90e8\u5206","text":"<p>ml-cpp \u200b\u7248\u672c\u200b\u548c\u200b elasticsearch \u200b\u7248\u672c\u200b\u4fdd\u6301\u4e00\u81f4\u200b\uff0c\u200b\u9009\u62e9\u200b 7.13.0\u3002</p> <p>ml-cpp \u200b\u5b98\u65b9\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b</p> <p>\u200b\u5728\u200b\u5b98\u65b9\u200b\u7684\u200b\u6784\u5efa\u200b\u4e2d\u200b\uff0c\u200b\u4e00\u5171\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200b\u5e76\u200b\u5b89\u88c5\u200b - gcc 7.5 - binutils 2.34 - git 1.8.3+ - libxml2 2.9.4 - boost 1.71.0 - patchelf 0.9 - valgrind 3.15.0</p> <p>\u200b\u7ecf\u8fc7\u200b\u5206\u6790\u200b\uff0cgcc\uff0cbinutils\uff0cgit\uff0cpatchelf\uff0cvalgrind \u200b\u4e0d\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5b89\u88c5\u200b\u6e90\u200b\u4ee3\u66ff\u200b\u3002\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200b\u7684\u200b\u53ea\u662f\u200b libxml2 \u200b\u548c\u200b boost\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#_3","title":"\u51c6\u5907\u200b\u5de5\u4f5c","text":"<pre><code># \u200b\u5b89\u88c5\u200b\u7cfb\u7edf\u200b\u4f9d\u8d56\u200b\nyum install bzip2 gcc-c++ texinfo tzdata unzip zlib-devel java-1.8.0-openjdk autoconf libtool patchelf diffutils\n\n# \u200b\u521b\u5efa\u200b\u9ed8\u8ba4\u200b\u76ee\u5f55\u200b\nmkdir -p /usr/local/gcc75\n\n# \u200b\u914d\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b\nexport LD_LIBRARY_PATH=/usr/local/gcc75/lib64:/usr/local/gcc75/lib:/usr/lib:/lib\nexport PATH=$JAVA_HOME/bin:/usr/local/gcc75/bin:/usr/bin:/bin:/usr/sbin:/sbin:/home/vagrant/bin\n\n# \u200b\u8fd9\u91cc\u200b\u6309\u7167\u200b\u4f60\u200b ml-cpp \u200b\u4e0b\u8f7d\u200b\u7684\u200b\u8def\u5f84\u200b\u5b58\u653e\u200b\nexport CPP_SRC_HOME=$HOME/ml-cpp\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#libxml2","title":"\u6784\u5efa\u200b libxml2","text":"<pre><code>git clone -b v2.9.4 https://gitlab.gnome.org/GNOME/libxml2.git\n./autogen.sh\n./configure --prefix=/usr/local/gcc75 --without-python --without-readline\nmake -j 4\nmake install \n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#boost","title":"\u6784\u5efa\u200b boost","text":"<p>\u200b\u4e0b\u8f7d\u200b\u9f99\u82af\u200b\u9002\u914d\u200b\u7684\u200b\u6e90\u7801\u200b <pre><code># \u200b\u53c2\u7167\u200b\u5b98\u7f51\u200b\u6b65\u9aa4\u200b\u7f16\u8bd1\u200b\u5373\u53ef\u200b\n./bootstrap.sh --without-libraries=context --without-libraries=coroutine --without-libraries=graph_parallel --without-libraries=mpi --without-libraries=python --without-icu\n\n[root@916b602ffe1d boost]# git diff\ndiff --git a/boost/math/tools/config.hpp b/boost/math/tools/config.hpp\nindex 47fdea65c..12e4b52a8 100644\n--- a/boost/math/tools/config.hpp\n+++ b/boost/math/tools/config.hpp\n@@ -377,7 +377,7 @@ struct is_integer_for_rounding\n #  endif\n #endif\n\n-#if ((defined(__linux__) &amp;&amp; !defined(__UCLIBC__) &amp;&amp; !defined(BOOST_MATH_HAVE_FIXED_GLIBC)) || defined(__QNX__) || defined(__IBMCPP__)) &amp;&amp; !defined(BOOST_NO_FENV_H)\n+#if ((!defined(BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS) &amp;&amp; defined(__linux__) &amp;&amp; !defined(__UCLIBC__) &amp;&amp; !defined(BOOST_MATH_HAVE_FIXED_GLIBC)) || defined(__QNX__) || defined(__IBMCPP__)) &amp;&amp; !defined(BOOST_NO_FENV_H)\n //\n // This code was introduced in response to this glibc bug: http://sourceware.org/bugzilla/show_bug.cgi?id=2445\n // Basically powl and expl can return garbage when the result is small and certain exception flags are set\ndiff --git a/boost/unordered/detail/implementation.hpp b/boost/unordered/detail/implementation.hpp\nindex 9dffde159..7c653fee6 100644\n--- a/boost/unordered/detail/implementation.hpp\n+++ b/boost/unordered/detail/implementation.hpp\n@@ -284,7 +284,7 @@ namespace boost {\n\n // clang-format off\n #define BOOST_UNORDERED_PRIMES \\\n-    (17ul)(29ul)(37ul)(53ul)(67ul)(79ul) \\\n+    (3ul)(17ul)(29ul)(37ul)(53ul)(67ul)(79ul) \\\n     (97ul)(131ul)(193ul)(257ul)(389ul)(521ul)(769ul) \\\n     (1031ul)(1543ul)(2053ul)(3079ul)(6151ul)(12289ul)(24593ul) \\\n     (49157ul)(98317ul)(196613ul)(393241ul)(786433ul) \\\n\n./b2 -j6 --layout=versioned --disable-icu pch=off optimization=speed inlining=full define=BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS define=BOOST_LOG_WITHOUT_DEBUG_OUTPUT define=BOOST_LOG_WITHOUT_EVENT_LOG define=BOOST_LOG_WITHOUT_SYSLOG define=BOOST_LOG_WITHOUT_IPC define=_FORTIFY_SOURCE=2 cxxflags=-std=gnu++14 cxxflags=-fstack-protector linkflags=-Wl,-z,relro linkflags=-Wl,-z,now\n\nenv PATH=\"$PATH\" LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH\" ./b2 install --prefix=/usr/local/gcc75 --layout=versioned --disable-icu pch=off optimization=speed inlining=full define=BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS define=BOOST_LOG_WITHOUT_DEBUG_OUTPUT define=BOOST_LOG_WITHOUT_EVENT_LOG define=BOOST_LOG_WITHOUT_SYSLOG define=BOOST_LOG_WITHOUT_IPC define=_FORTIFY_SOURCE=2 cxxflags=-std=gnu++14 cxxflags=-fstack-protector linkflags=-Wl,-z,relro linkflags=-Wl,-z,now\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#ml-cpp","title":"\u6b63\u5f0f\u200b\u6784\u5efa\u200b ml-cpp","text":"<p>\u200b\u9996\u5148\u200b\u4e0b\u8f7d\u200b ml-cpp 7.13.0 \u200b\u7684\u200b\u6e90\u7801\u200b\uff0c\u200b\u7136\u540e\u200b\u5728\u200b <code>3rd_party.sh</code> \u200b\u4e2d\u200b\u6267\u884c\u200b <code>bash pull-eigen.sh</code> \u200b\u547d\u4ee4\u200b \u200b\u53ef\u200b\u9009\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u4e0b\u8f7d\u200b\u5b8c\u200b eigen \u200b\u540e\u200b\uff0c\u200b\u5728\u200b ml-cpp \u200b\u521d\u59cb\u5316\u200b git \u200b\u4ed3\u5e93\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u540e\u7eed\u200b</p> <pre><code># \u200b\u56e0\u4e3a\u200b\u6211\u4eec\u200b\u6ca1\u6709\u200b\u624b\u52a8\u200b\u7f16\u8bd1\u200b gcc \uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u628a\u200b\u9700\u8981\u200b\u7684\u200b\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b /usr/local/gcc75 \u200b\u5bf9\u5e94\u200b\u7684\u200b\u76ee\u5f55\u200b\u4e0b\u200b\nmkdir -pv /usr/local/gcc75/lib64\ncp /lib64/libgcc_s.so.1 /usr/local/gcc75/lib64/\ncp /lib64/libstdc++.so.6 /usr/local/gcc75/lib64/\n\n# \u200b\u56e0\u4e3a\u200b\u6211\u4eec\u200b\u7f16\u8bd1\u200b\u51fa\u6765\u200b\u7684\u200b boost \u200b\u5e93\u200b\u4e0d\u200b\u5305\u542b\u200b\u540e\u7f00\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u811a\u672c\u200b\nsed -i 's/$(BOOSTARCH)-//g' mk/linux.mk\n</code></pre> <p>\u200b\u4fee\u6539\u200b\u4e00\u4e9b\u200b\u7f16\u8bd1\u200b\u6e90\u7801\u200b\u548c\u200b\u914d\u7f6e\u200b <pre><code>[root@916b602ffe1d ml-cpp]# git status\nOn branch master\nChanges not staged for commit:\n  (use \"git add &lt;file&gt;...\" to update what will be committed)\n  (use \"git restore &lt;file&gt;...\" to discard changes in working directory)\n    modified:   3rd_party/3rd_party.sh\n    modified:   3rd_party/rapidjson/include/rapidjson/rapidjson.h\n    modified:   3rd_party/rapidjson/include/rapidjson/writer.h\n    modified:   lib/core/CCrashHandler_Linux.cc\n    modified:   lib/seccomp/CSystemCallFilter_Linux.cc\n    modified:   mk/linux.mk\n    modified:   mk/macosx.mk\n</code></pre></p> <p>\u200b\u751f\u6210\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u5728\u200b <code>build/distribution/platform</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#ml-cpp-java","title":"ml-cpp java \u200b\u90e8\u5206\u200b\u7f16\u8bd1","text":"<p>\u200b\u56e0\u4e3a\u200b java \u200b\u8de8\u5e73\u53f0\u200b\u7684\u200b\u7279\u6027\u200b\u4e14\u200b\u9f99\u82af\u200b\u5f53\u524d\u200b java \u200b\u7248\u672c\u200b\u4e0d\u591f\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4fee\u6539\u200b\u597d\u200b\u4ee3\u7801\u200b\u540e\u200b\u5728\u200b x86 \u200b\u4e0b\u200b\u7f16\u8bd1\u200b\u4e5f\u200b\u662f\u200b\u4e00\u6837\u200b\u7684\u200b\u3002 <pre><code>[root@916b602ffe1d elasticsearch-7.13.0]# git diff --cached\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearningFeatureSet.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearningFeatureSet.java\nindex 1c81dfe5..3a36e5e2 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearningFeatureSet.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/MachineLearningFeatureSet.java\n@@ -76,7 +76,7 @@ public class MachineLearningFeatureSet implements XPackFeatureSet {\n      * List of platforms for which the native processes are available\n      */\n     private static final List&lt;String&gt; mlPlatforms = Collections.unmodifiableList(\n-            Arrays.asList(\"darwin-x86_64\", \"linux-aarch64\", \"linux-x86_64\", \"windows-x86_64\"));\n+            Arrays.asList(\"darwin-x86_64\", \"linux-aarch64\", \"linux-x86_64\", \"windows-x86_64\",\"linux-loongarch64\"));\n\n     private final boolean enabled;\n     private final XPackLicenseState licenseState;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#_4","title":"\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u4e00\u4e9b\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u4ee3\u7801","text":"<pre><code>diff --git a/server/src/main/java/org/elasticsearch/bootstrap/SystemCallFilter.java b/server/src/main/java/org/elasticsearch/bootstrap/SystemCallFilter.java\nindex 4374fc2cad6..f30f62a182c 100644\n--- a/server/src/main/java/org/elasticsearch/bootstrap/SystemCallFilter.java\n+++ b/server/src/main/java/org/elasticsearch/bootstrap/SystemCallFilter.java\n@@ -232,7 +232,8 @@ final class SystemCallFilter {\n         Map&lt;String,Arch&gt; m = new HashMap&lt;&gt;();\n         m.put(\"amd64\", new Arch(0xC000003E, 0x3FFFFFFF, 57, 58, 59, 322, 317));\n         m.put(\"aarch64\",  new Arch(0xC00000B7, 0xFFFFFFFF, 1079, 1071, 221, 281, 277));\n-        ARCHITECTURES = Collections.unmodifiableMap(m);\n+        m.put(\"loongarch64\", new Arch(0xC0000102, 0xFFFFFFFF, 1079, 1071, 221, 281, 277));\n+       ARCHITECTURES = Collections.unmodifiableMap(m);\n     }\n\n     /** invokes prctl() from linux libc library */\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/elasticsearch/#_5","title":"\u6700\u540e\u200b\u6574\u5408","text":"<p>\u200b\u5c06\u200b\u5728\u200b\u9f99\u82af\u200b\u79fb\u690d\u200b\u540e\u200b\u7684\u200b jna.jar, linux-loongarch64 (ml-cpp), ml-cpp.jar \u200b\u548c\u200b jdk \u200b\u66ff\u6362\u200b\u6389\u200b x86 \u200b\u4e0b\u200b\u7f16\u8bd1\u200b\u751f\u6210\u200b\u7684\u200b tar \u200b\u5305\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/envoy/","title":"envoy","text":"<p>\u200b\u7531\u4e8e\u200b envoy \u200b\u7684\u200b\u6784\u5efa\u200b\u4f9d\u8d56\u200b bazel\uff0c\u200b\u76ee\u524d\u200b bazel for loongarch64 \u200b\u7a33\u5b9a\u200b\u7248\u672c\u200b\u4e3a\u200b 3.1.0\u3002\u200b\u6839\u636e\u200b envoy \u200b\u5b98\u65b9\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b\uff0c\u200b\u9009\u62e9\u200b envoy 1.15.0  \u200b\u4f5c\u4e3a\u200b\u76ee\u6807\u200b\u7248\u672c\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\u3002</p> <p>\u200b\u5b98\u65b9\u200b\u6784\u5efa\u200b\u624b\u518c\u200b</p> <p>https://github.com/envoyproxy/envoy/blob/v1.15.0/bazel/README.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/envoy/#_1","title":"\u73af\u5883\u200b\u51c6\u5907","text":"<pre><code># \u200b\u5728\u200b debian:buster \u200b\u4e2d\u200b\u6784\u5efa\u200b\ndocker run -it cr.loongnix.cn/library/debian:buster bash\n\n# \u200b\u5b89\u88c5\u200b\u7f16\u8bd1\u200b\u5de5\u5177\u200b\napt-get install \\\nlibtool \\\ncmake \\\nautomake \\\nautoconf \\\nmake \\\nninja-build \\\ncurl \\\nunzip \\\ng++ \\\nvirtualenv\n\n# \u200b\u56e0\u4e3a\u200b\u7cfb\u7edf\u200b\u5dee\u5f02\u200b\uff0c\u200b\u989d\u5916\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b python \u200b\u8f6f\u200b\u94fe\u63a5\u200b\nln -sf /usr/bin/python3 /usr/bin/python3\n\n# \u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u5b89\u88c5\u200b jdk for loongarch64 \uff08abi2.0\u200b\u4e0b\u8f7d\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5728\u200bdebian\u200b\u4e0b\u200b\u4f7f\u7528\u200bapt\u200b\u5b89\u88c5\u200b\uff09\ncurl -OL http://ftp.loongnix.cn/Java/openjdk11/loongson11.4.0-fx-jdk11.0.18_10-linux-loongarch64.tar.gz\nexport JAVA_HOME=/usr/local/jdk\nexport PATH=$JAVA_HOME/bin:$PATH\n# \u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u5b89\u88c5\u200b golang for loongarch64\uff08abi2.0\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200bhttp://ftp.loongnix.cn/toolchain/golang\u200b\u5b89\u88c5\u200b\uff09\ncurl -OL http://ftp.loongnix.cn/toolchain/golang/go-1.19/go1.19.linux-loong64.tar.gz\nexport GOROOT=/usr/local/go\nexport PATH=$GOROOT/bin:$PATH\n# \u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u5b89\u88c5\u200b bazel for loongarch64\uff08cloud.loongnix.cn\u200b\u4e0b\u62c9\u53d6\u200b\uff09\ncurl -o /usr/bin/bazel -L https://github.com/Loongson-Cloud-Community/bazel/releases/download/3.1.0/bazel-3.1.0-linux-loongarch64\nchmod +x /usr/bin/bazel\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/envoy/#_2","title":"\u6e90\u7801\u200b\u79fb\u690d","text":"<ul> <li>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b\u5e76\u200b\u83b7\u53d6\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b</li> </ul> <pre><code># \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b\uff08\u200b\u5982\u679c\u200b\u7f16\u8bd1\u200b\u7684\u200b\u662f\u200b1.23\u200b\u7248\u672c\u200b\u53ef\u4ee5\u200b\u4ece\u200blcr\u200b\u4e0a\u62c9\u53d6\u200b\u955c\u50cf\u200b build_envoy \u200b\u76f4\u63a5\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u4e5f\u200b\u53ef\u200b\u53c2\u8003\u200b\uff0c\u200b\u4fee\u6539\u200b\u5185\u5bb9\u200b\u5305\u62ec\u200bcache\u200b\u7684\u200bpython\u3001golang\u3001v8\u200b\u90e8\u5206\u200b\uff0c\u200b\u6e90\u7801\u200b\u7684\u200bluajit\u200b\u4e0b\u8f7d\u200b\u94fe\u63a5\u200b\u90e8\u5206\u200b\uff09\ngit clone -b v1.15.0 --depth=1 https://github.com/envoyproxy/envoy.git\n\n# \u200b\u89e3\u6790\u200b\u5e76\u200b\u83b7\u53d6\u200b\u4f9d\u8d56\u200b\u9879\u200b\nroot@1c0331621040:~/envoy# bazel fetch //source/exe:envoy-static\nINFO: All external dependencies fetched successfully.\nLoading: 661 packages loaded\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b bazel cache platforms\uff08bazel cache \u200b\u4f4d\u4e8e\u200b \\~/.cache/bazel\uff09</li> </ul> <pre><code># platforms/cpu/BUILD\nconstraint_value(\nname = \"loongarch64\",\n    constraint_setting = \":cpu\",\n)\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b bazel cache io_bazel_rules_go</li> </ul> <pre><code># go/private/platforms.bzl\nBAZEL_GOARCH_CONSTRAINTS = {\n\"386\": \"@platforms//cpu:x86_32\",\n    \"amd64\": \"@platforms//cpu:x86_64\",\n    \"arm\": \"@platforms//cpu:arm\",\n    \"arm64\": \"@platforms//cpu:aarch64\",\n    \"ppc64le\": \"@platforms//cpu:ppc\",\n    \"s390x\": \"@platforms//cpu:s390x\",\n    \"loong64\": \"@platforms//cpu:loongarch64\",\n}\nGOOS_GOARCH = (\n...\n    (\"linux\", \"386\"),\n    (\"linux\", \"amd64\"),\n    (\"linux\", \"arm\"),\n    (\"linux\", \"arm64\"),\n    (\"linux\", \"mips\"),\n    (\"linux\", \"mips64\"),\n    (\"linux\", \"mips64le\"),\n    (\"linux\", \"mipsle\"),\n    (\"linux\", \"ppc64\"),\n    (\"linux\", \"ppc64le\"),\n    (\"linux\", \"riscv64\"),\n    (\"linux\", \"loong64\"),\n    ...\n)\n# go/private/sdk.bzl\ndef _detect_host_platform(ctx):\n...\n        # uname -p is not working on Aarch64 boards\n# or for ppc64le on some distros\nres = ctx.execute([\"uname\", \"-m\"])\nif res.return_code == 0:\n            uname = res.stdout.strip()\nif uname == \"aarch64\":\n                host = \"linux_arm64\"\nelif uname == \"armv6l\":\n                host = \"linux_arm\"\nelif uname == \"armv7l\":\n                host = \"linux_arm\"\nelif uname == \"ppc64le\":\n                host = \"linux_ppc64le\"\nelif uname == \"loongarch64\":\n                host = \"linux_loong64\"\n...\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b bazel cache boringsll</li> </ul> <p>\u200b\u8fd9\u4e2a\u200b\u4fee\u6539\u200b\u53c2\u7167\u200b mips \u200b\u8fdb\u884c\u200b\uff0c\u200b\u4f7f\u7528\u200b\u901a\u7528\u200b\u52a0\u89e3\u5bc6\u200b\u7b97\u6cd5\u200b</p> <pre><code># src/include/openssl/base.h\n#elif defined(__loongarch64) \n#define OPENSSL_64_BIT\n#define OPENSSL_LOONGARCH64\n# src/CMakeLists.txt\nelseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL \"loongarch64\")\nset(ARCH \"generic\")\n# src/util/generate_build_files.py\nelseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL \"loongarch64\")\nset(ARCH \"generic\")\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b\u672c\u5730\u200bgolang</li> </ul> <pre><code>diff --git a/bazel/dependency_imports.bzl b/bazel/dependency_imports.bzl\nindex 1bcc3a8..66b23d0 100644\n--- a/bazel/dependency_imports.bzl\n+++ b/bazel/dependency_imports.bzl\n@@ -13,7 +13,7 @@ GO_VERSION = \"1.14.4\"\ndef envoy_dependency_imports(go_version = GO_VERSION):\n     rules_foreign_cc_dependencies()\ngo_rules_dependencies()\n-    go_register_toolchains(go_version)\n+    go_register_toolchains(go_version=\"host\")\nrbe_toolchains_config()\ngazelle_dependencies()\napple_rules_dependencies()\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b\u6e90\u7801\u200b\uff0c\u200b\u8c03\u6574\u200b luajit \u200b\u548c\u200b gperftools \u200b\u4e0b\u8f7d\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u4ee5\u200b\u589e\u52a0\u200b loongarch64 \u200b\u652f\u6301\u200b</li> </ul> <pre><code>diff --git a/bazel/repository_locations.bzl b/bazel/repository_locations.bzl\nindex b2501ec..a4ea4cc 100644\n--- a/bazel/repository_locations.bzl\n+++ b/bazel/repository_locations.bzl\n@@ -171,9 +171,9 @@ DEPENDENCY_REPOSITORIES = dict(\n# TODO(cmluciano): Bump to release 2.8\n# The currently used version is specifically chosen to fix ppc64le builds that require inclusion\n# of asm/ptrace.h, and also s390x builds that require special handling of mmap syscall.\n-        sha256 = \"97f0bc2b389c29305f5d1d8cc4d95e9212c33b55827ae65476fc761d78e3ec5d\",\n-        strip_prefix = \"gperftools-gperftools-2.7.90\",\n-        urls = [\"https://github.com/gperftools/gperftools/archive/gperftools-2.7.90.tar.gz\"],\n+        sha256 = \"b0dcfe3aca1a8355955f4b415ede43530e3bb91953b6ffdd75c45891070fe0f1\",\n+        strip_prefix = \"gperftools-gperftools-2.10\",\n+        urls = [\"https://github.com/gperftools/gperftools/archive/gperftools-2.10.tar.gz\"],\n         use_category = [\"test\"],\n     ),\n     com_github_grpc_grpc = dict(\n@@ -187,9 +187,9 @@ DEPENDENCY_REPOSITORIES = dict(\ncpe = \"cpe:2.3:a:grpc:grpc:*\",\n     ),\n     com_github_luajit_luajit = dict(\n-        sha256 = \"409f7fe570d3c16558e594421c47bdd130238323c9d6fd6c83dedd2aaeb082a8\",\n-        strip_prefix = \"LuaJIT-2.1.0-beta3\",\n-        urls = [\"https://github.com/LuaJIT/LuaJIT/archive/v2.1.0-beta3.tar.gz\"],\n+        sha256 = \"a5d211370a1112615a0bb20613ad97e7bcd32902b413a6a53bf23382c3061102\",\n+        strip_prefix = \"LuaJIT-83b6dffcf4ffea376298f3fac3452841eabd0606\",\n+        urls = [\"https://github.com/loongson/LuaJIT/archive/83b6dffcf4ffea376298f3fac3452841eabd0606.tar.gz\"],\n         use_category = [\"dataplane\"],\n         cpe = \"N/A\",\n     ),\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b\u6e90\u7801\u200b\uff0c\u200b\u4fee\u6539\u200b luajit patch \u200b\u4ee5\u200b\u9002\u5e94\u200b\u7248\u672c\u200b\u5dee\u5f02\u200b</li> </ul> <pre><code>diff --git a/bazel/foreign_cc/luajit.patch b/bazel/foreign_cc/luajit.patch\nindex 296d66c..94cc66b 100644\n--- a/bazel/foreign_cc/luajit.patch\n+++ b/bazel/foreign_cc/luajit.patch\n@@ -33,15 +33,6 @@ index f56465d..5d91fa7 100644\n#\n# Disable the JIT compiler, i.e. turn LuaJIT into a pure interpreter.\n#XCFLAGS+= -DLUAJIT_DISABLE_JIT\n-@@ -111,7 +111,7 @@ XCFLAGS=\n- #XCFLAGS+= -DLUAJIT_NUMMODE=2\n- #\n- # Enable GC64 mode for x64.\n--#XCFLAGS+= -DLUAJIT_ENABLE_GC64\n-+XCFLAGS+= -DLUAJIT_ENABLE_GC64\n- #\n- ##############################################################################\n-\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b\u6e90\u7801\u200b\uff0c\u200b\u5173\u95ed\u200b Werror \u200b\u7f16\u8bd1\u200b\u9009\u9879\u200b\u4ee5\u200b\u8df3\u200b\u8fc7\u200b\u7f16\u8bd1\u200b\u8b66\u544a\u200b</li> </ul> <pre><code>diff --git a/bazel/envoy_internal.bzl b/bazel/envoy_internal.bzl\nindex 6c9d125..8be256a 100644\n--- a/bazel/envoy_internal.bzl\n+++ b/bazel/envoy_internal.bzl\n@@ -7,7 +7,6 @@ def envoy_copts(repository, test = False):\n     posix_options = [\n\"-Wall\",\n         \"-Wextra\",\n-        \"-Werror\",\n         \"-Wnon-virtual-dtor\",\n         \"-Woverloaded-virtual\",\n         \"-Wold-style-cast\",\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/envoy/#_3","title":"\u7f16\u8bd1","text":"<pre><code>bazel build -c opt //source/exe:envoy-static\n\n\u200b\u65b0\u200b\u7248\u672c\u200bbazel\u200b\u7684\u200bfission\u200b\u7279\u6027\u200b\u9700\u8981\u200b\u8c03\u7528\u200bgcc\u200b\u7684\u200b--gdb-index\u200b\u547d\u4ee4\u200b\uff0cla\u200b\u67b6\u6784\u200b\u4e0d\u200b\u652f\u6301\u200b\uff0c\u200b\u9700\u8981\u200b\u7981\u7528\u200b\ntcmalloc\u200b\u53ef\u80fd\u200b\u5bfc\u81f4\u200b\u62a5\u9519\u200b\uff0c\u200b\u4e5f\u200b\u7981\u7528\u200b\nbazel build  --fission=no --compilation_mode=opt --verbose_failures -s envoy --define tcmalloc=disabled\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/","title":"etcd","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#etcd_1","title":"etcd \u200b\u79fb\u690d","text":"<p>\u200b\u79fb\u690d\u200b\u7684\u200b\u73af\u5883\u200b\u4e3a\u200b cr.loongnix.cn/library/golang:1.19-alpine \u200b\u955c\u50cf\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#etcd-355","title":"\u62c9\u53d6\u200b etcd \u200b\u6e90\u7801\u200b\u5e76\u200b\u5207\u6362\u200b\u5230\u200b 3.5.5 \u200b\u7248\u672c","text":"<pre><code>git clone https://github.com/etcd-io/etcd.git\ngit checkout v3.5.5\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_1","title":"\u4fee\u6539\u200b\u811a\u672c\u200b\u548c\u200b\u6e90\u7801","text":"<pre><code>diff --git a/scripts/build-binary b/scripts/build-binary\nindex b819a3e57..8021192b9 100755\n--- a/scripts/build-binary\n+++ b/scripts/build-binary\n@@ -77,6 +77,7 @@ function main {\n       TARGET_ARCHS+=(\"arm64\")\n       TARGET_ARCHS+=(\"ppc64le\")\n       TARGET_ARCHS+=(\"s390x\")\n+      TARGET_ARCHS+=(\"loong64\")\n     fi\n\n     if [ ${GOOS} == \"darwin\" ]; then\ndiff --git a/server/etcdmain/etcd.go b/server/etcdmain/etcd.go\nindex 470eb83be..9ed379b50 100644\n--- a/server/etcdmain/etcd.go\n+++ b/server/etcdmain/etcd.go\n@@ -471,6 +471,7 @@ func checkSupportArch() {\n        // to add a new platform, check https://github.com/etcd-io/website/blob/main/content/en/docs/next/op-guide/supported-platform.md\n        if runtime.GOARCH == \"amd64\" ||\n                runtime.GOARCH == \"arm64\" ||\n+               runtime.GOARCH == \"loong64\" ||\n                runtime.GOARCH == \"ppc64le\" ||\n                runtime.GOARCH == \"s390x\" {\n                return\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#golang-env","title":"\u5bf9\u200b golang env \u200b\u8fdb\u884c\u200b\u4fee\u6539","text":"<pre><code>go env -w GOSUMDB=off\ngo env -w GOPROXY=https://goproxy.cn,direct\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_2","title":"\u7f16\u8bd1","text":"<p><pre><code>cd server\ngo mod vendor\n</code></pre> \u200b\u53e6\u8d77\u200b\u4e00\u4e2a\u200b\u5bb9\u5668\u200b\uff0c\u200b\u914d\u7f6e\u200b\uff1a <pre><code>go env -w GOPROXY=http://goproxy.loongnix.cn\n</code></pre> \u200b\u6309\u7167\u200b\u540c\u6837\u200b\u7684\u200b\u6d41\u7a0b\u200b go mod vendor\uff0c\u200b\u4f7f\u7528\u200b vendor/golang.org/x \u200b\u66ff\u6362\u200b\u5f85\u200b\u7f16\u8bd1\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u7684\u200b vendor/golang/x\uff0c\u200b\u5728\u200b vendor/go.etcd.io/bbolt/\u200b\u4e0b\u200b \u200b\u6dfb\u52a0\u200b bolt_loong64.go\uff0c\u200b\u5728\u200b etcdctl \u200b\u4ee5\u53ca\u200b etcdutl \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u4e5f\u200b\u8fdb\u884c\u200b\u4e0a\u8ff0\u200b\u66ff\u6362\u200b\u548c\u200b\u6dfb\u52a0\u200b\u64cd\u4f5c\u200b\u3002 \u200b\u6700\u540e\u200b\u5728\u200b etcd \u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a<code>make / make build</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_3","title":"\u5192\u70df\u200b\u6d4b\u8bd5","text":"<pre><code>./bin/etcd --version\n./bin/etcdctl version\n./bin/etcdutl version\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#rpm","title":"rpm \u200b\u5305\u200b\u5236\u4f5c","text":"<p>\u200b\u5236\u4f5c\u200b rpm \u200b\u5305\u200b\u7684\u200b\u73af\u5883\u200b\u4e3a\u200b cr.loongnix.cn/loongson/loongnix-server:8.4.0 \u200b\u955c\u50cf\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#x86_64-rpm","title":"\u5728\u200b x86_64 \u200b\u673a\u5668\u200b\u4e0a\u62c9\u53d6\u200b\u540c\u200b\u7248\u672c\u200b rpm \u200b\u5305","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#x86_64-rpm-sepc","title":"\u5728\u200b x86_64 \u200b\u673a\u5668\u200b\u4e0a\u200b\u89e3\u538b\u200b rpm \u200b\u5305\u200b\u7684\u200b .sepc \u200b\u6587\u4ef6\u200b\u4ee5\u53ca\u200b\u6e90\u6587\u4ef6","text":"<p><pre><code>yum install rpm-build rpmrebuild rpm cpio\nrpmrebuild -e -p --notest-install etcd-3.5.5-2.fc37.x86_64.rpm\n</code></pre> \u200b\u4fdd\u5b58\u200b .spec\u200b\u6587\u4ef6\u200b\u4e3a\u200b etcd.spec\uff0c\u200b\u63d0\u53d6\u200b\u6e90\u6587\u4ef6\u200b\uff1a <pre><code>rpm2cpio etcd-3.5.5-2.fc37.x86_64.rpm | cpio -div\n</code></pre> \u200b\u5c06\u200b etcd.spec \u200b\u4ee5\u53ca\u200b\u6e90\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b\u5236\u4f5c\u200b rpm \u200b\u7684\u200b\u73af\u5883\u200b\u4e2d\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_4","title":"\u6784\u5efa\u200b\u6253\u5305\u200b\u6587\u4ef6","text":"<p>\u200b\u4f7f\u7528\u200b\u4e4b\u524d\u200b\u7f16\u8bd1\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\u66ff\u6362\u200b\u6e90\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\u540e\u200b\u521b\u5efa\u200b\u6253\u5305\u200b\u76ee\u5f55\u200b\uff1a <pre><code>[root@ec3237ae9ac7 rpmbuild]# tree -L 1\n.\n\u251c\u2500\u2500 BUILD\n\u251c\u2500\u2500 BUILDROOT\n\u251c\u2500\u2500 RPMS\n\u251c\u2500\u2500 SOURCES\n\u251c\u2500\u2500 SPECS\n\u2514\u2500\u2500 SRPMS\n</code></pre> \u200b\u4fee\u6539\u200b etcd.sepc \u200b\u6587\u4ef6\u200b\uff0c\u200b\u66f4\u6539\u200b\u67b6\u6784\u200b\u540d\u79f0\u200b\uff0c\u200b\u5220\u9664\u200b\u52a8\u6001\u200b\u5e93\u200b\u7684\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u4fee\u6539\u200b release \u200b\u7248\u672c\u200b\u3002\u200b\u5c06\u200b\u4fee\u6539\u200b\u540e\u200b\u7684\u200b\u6587\u4ef6\u200b\u79fb\u52a8\u200b\u5230\u200b SPECS \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5c06\u200b\u6e90\u6587\u4ef6\u200b\u6309\u7167\u200b etcd.sepc \u200b\u4e2d\u200b\u7684\u200b\u540d\u79f0\u200b\u547d\u540d\u200b\uff08Name-Version-Release.BuildArch\uff09\uff0c\u200b\u5982\u200b\uff1aetcd-3.5.5-2.loongarch64\uff0c\u200b\u5e76\u200b\u79fb\u52a8\u200b\u5230\u200b BUILDROOT \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_5","title":"\u6253\u5305","text":"<p><pre><code>rpmbuild -bb SPECS/etcd.spec\n</code></pre> \u200b\u751f\u6210\u200b\u7684\u200b rpm \u200b\u5305\u200b\u5728\u200b RPMS/loongarch64/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_6","title":"\u5b89\u88c5","text":"<pre><code>yum install etcd-3.5.5-2.loongarch64.rpm\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/etcd/#_7","title":"\u5378\u8f7d","text":"<pre><code>yum remove etcd-3.5.5-2.loongarch64.rpm\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flink/","title":"flink","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flink/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>release-1.14.6    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flink/#2","title":"2.\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u89c1\u200b\u8865\u4e01\u200b: https://github.com/Loongson-Cloud-Community/flink/releases/download/release-1.14.6/loongarch64-1.14.6.patch</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flink/#3maven","title":"3.\u200b\u4fee\u6539\u200bmaven\u200b\u6e90","text":"<p>\u200b\u5c06\u200bmaven\u200b\u6e90\u200b\u4fee\u6539\u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\u3002 \u200b\u5728\u200b\u6587\u4ef6\u200b/etc/maven/settings.xml \u200b\u548c\u200b ~/.m2/settings.xml \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a     <pre><code>        &lt;profile&gt;\n        &lt;id&gt;loongson&lt;/id&gt;\n        &lt;repositories&gt;\n        &lt;repository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;/repositories&gt;\n        &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n</code></pre> <pre><code>  &lt;activeProfiles&gt;\n        &lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flink/#4","title":"4.\u200b\u6784\u5efa","text":"<pre><code>mvn clean package -DskipTests\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flume/","title":"Flume","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flume/#_1","title":"\u4e00\u200b\u3001\u200b\u914d\u7f6e","text":"<ul> <li><code>/etc/maven/settings.xml</code>\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u9700\u8981\u200b\u5c06\u200b<code>proxy</code>\u200b\u90e8\u5206\u200b\u66ff\u6362\u200b\u4e3a\u200b\u81ea\u5df1\u200b\u7684\u200b<code>IP+PORT</code>\uff1a</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n&lt;pluginGroups&gt;\n&lt;/pluginGroups&gt;\n&lt;proxies&gt;\n&lt;proxy&gt;\n&lt;id&gt;xxx&lt;/id&gt;\n&lt;active&gt;true&lt;/active&gt;\n&lt;protocol&gt;http&lt;/protocol&gt;\n&lt;host&gt;x.x.x.x&lt;/host&gt;\n&lt;port&gt;xxx&lt;/port&gt;\n&lt;nonProxyHosts&gt;*.loongnix.cn|*.aliyun.com&lt;/nonProxyHosts&gt;\n&lt;/proxy&gt;\n&lt;/proxies&gt;\n&lt;servers&gt;\n&lt;/servers&gt;\n&lt;mirrors&gt;\n&lt;mirror&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n&lt;name&gt;Nexus ali&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;/mirror&gt;\n&lt;/mirrors&gt;\n&lt;profiles&gt;\n&lt;profile&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;!-- ali --&gt;\n&lt;profile&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;/profiles&gt;\n&lt;activeProfiles&gt;\n&lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n&lt;!-- \n    &lt;activeProfile&gt;ali&lt;/activeProfile&gt;\n    --&gt;\n&lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flume/#_2","title":"\u4e8c\u200b\u3001\u200b\u6784\u5efa","text":"<pre><code>## \u200b\u542f\u52a8\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\ndocker run -d --name flume --hostname flume --network host cr.loongnix.cn/openanolis/anolisos:8.8 bash -c \"while true; do sleep 1;done\"\n## \u200b\u5b89\u88c5\u200b\u76f8\u5173\u200b\u8f6f\u4ef6\u200b\ndnf install /usr/bin/mvn git vim java-1.8.0-openjdk-devel.loongarch64 -y\n\n## \u200b\u5c06\u200bmaven\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u66ff\u6362\u200b\u4e3a\u200b\u4e0a\u8ff0\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n## \u200b\u62c9\u53d6\u200b\u9002\u914d\u200b\u4e86\u200b\u9f99\u82af\u200b\u67b6\u6784\u200b\u7684\u200b\u6e90\u7801\u200b\u4fe1\u606f\u200b\ngit clone --branch loong64-1.11.0 https://github.com/Loongson-Cloud-Community/flume.git\n\n## \u200b\u6784\u5efa\u200b\nmvn clean install -DskipTests -Dspotbugs.skip=true\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/","title":"flux","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u5b98\u65b9\u200b\u5730\u5740\u200b https://github.com/influxdata/flux \u200b\u7248\u672c\u200b v0.161.0"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/#_2","title":"\u6784\u5efa\u200b\u73af\u5883","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u673a\u5668\u200b loongarch64 \u200b\u7cfb\u7edf\u200b loongnix-server"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u8f6f\u4ef6\u200b\u9884\u88c5\u200b</p> <pre><code>dnf install golang-1.20 make git cargo\n</code></pre> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b</p> <pre><code>git clone --depth=1 --branch v0.161.0 https://github.com/influxdata/flux.git\n</code></pre> <p>\u200b\u5b89\u88c5\u200bgolang\u200b\u4e8c\u8fdb\u5236\u200b\u4f9d\u8d56\u200b</p> <pre><code>go install github.com/influxdata/pkg-config@latest\n# \u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u540e\u200b\u5c06\u200bGOPATH/bin\u200b\u52a0\u5165\u200b\u73af\u5883\u53d8\u91cf\u200b\n</code></pre> <p>\u200b\u67e5\u770b\u200bpkg-config</p> <pre><code>root@influxdb-doc /# which -a pkg-config /root/go/bin/pkg-config\n/usr/bin/pkg-config\n/bin/pkg-config\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/#rust","title":"\u6784\u5efa\u200brust\u200b\u76f8\u5173\u200b\u4f9d\u8d56","text":"<pre><code>cd libflux/\n# \u200b\u9700\u8981\u200b\u914d\u7f6e\u200bloongson cargo\u200b\u4ed3\u5e93\u200b\uff1a http://docs.loongnix.cn/rust/rust.html\n# \u200b\u5220\u9664\u200b\u539f\u6765\u200b\u7684\u200bCargo.lock\nrm -rf Cargo.lock\ncargo build\n</code></pre> <p>\u200b\u4f9d\u8d56\u200b\u76f8\u5173\u200b\u62a5\u9519\u200b</p> <pre><code>error: package `log v0.4.19` cannot be built because it requires rustc 1.60.0 or newer, while the currently active rustc version is 1.58.1\n</code></pre> <p>\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>diff --git a/libflux/flux-core/Cargo.toml b/libflux/flux-core/Cargo.toml\nindex 6a5aa98..43598e2 100644\n--- a/libflux/flux-core/Cargo.toml\n+++ b/libflux/flux-core/Cargo.toml\n@@ -49,7 +49,7 @@ maplit = \"1.0.2\"\nflatbuffers = \"2.0.0\"\n derivative = \"2.1.1\"\n walkdir = \"2.2.9\"\n-log = \"0.4\"\n+log = \"=0.4.8\"\nlsp-types = { version = \"0.92\", optional = true }\n pulldown-cmark = { version = \"0.8\", default-features = false }\n structopt = \"0.3\"\n</code></pre> <p>\u200b\u6240\u6709\u200b\u4f9d\u8d56\u200b\u9879\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b</p> <pre><code>diff --git a/libflux/flux-core/Cargo.toml b/libflux/flux-core/Cargo.toml\nindex 6a5aa98..096296b 100644\n--- a/libflux/flux-core/Cargo.toml\n+++ b/libflux/flux-core/Cargo.toml\n@@ -26,6 +26,7 @@ lsp = [\"lsp-types\"]\ndoc = [\"rayon\"]\n\n[dependencies]\n+bumpalo = \"=3.12.0\"\nanyhow = \"1\"\n ena = \"0.14\"\n env_logger = \"0.9\"\n@@ -42,22 +43,22 @@ serde = { version = \"^1.0.59\", features = [\"rc\"] }\nserde_derive = \"^1.0.59\"\n serde_json = \"1.0\"\n serde-aux = \"0.6.1\"\n-wasm-bindgen = { version = \"0.2.62\", features = [\"serde-serialize\"] }\n+wasm-bindgen = { version = \"=0.2.62\", features = [\"serde-serialize\"] }\nchrono = { version = \"0.4\", features = [\"serde\"] }\n regex = \"1\"\n maplit = \"1.0.2\"\n flatbuffers = \"2.0.0\"\n derivative = \"2.1.1\"\n walkdir = \"2.2.9\"\n-log = \"0.4\"\n+log = \"=0.4.8\"\nlsp-types = { version = \"0.92\", optional = true }\n pulldown-cmark = { version = \"0.8\", default-features = false }\n structopt = \"0.3\"\n-libflate = \"1\"\n+libflate = \"=1.2.0\"\nonce_cell = \"1\"\n-csv = \"1.1\"\n+csv = \"=1.1.0\"\npad = \"0.1.6\"\n-tempfile = \"3\"\n+tempfile = \"=3.1.0\"\n[dev-dependencies]\n env_logger = \"0.9\"\n</code></pre> <p>\u200b\u8fd9\u91cc\u200b<code>=</code>\u200b\u8868\u793a\u200b\u4f7f\u7528\u200b\u7edd\u5bf9\u200b\u7684\u200b\u7248\u672c\u53f7\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/flux/#golang","title":"\u6784\u5efa\u200bgolang\u200b\u9879\u76ee","text":"<pre><code># \u200b\u8fdb\u5165\u200b\u6839\u76ee\u5f55\u200b\ngo get golang.org/x/net@6960703597adf5b8919a13c3c0ce585a274fd405\ngo get golang.org/x/sys@00d8004a14487f8c7b7fdfe44b95e9f6c4590f5f\ngo mod tidy\n\ngo build ./cmd/flux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/","title":"grafana","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_1","title":"\u6784\u5efa\u200b\u7248\u672c","text":"<p>v6.7.4</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_2","title":"\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u9f99\u82af\u200bserver\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u73af\u5883\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[loongson@bogon grafana]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n[loongson@bogon grafana]# uname -a\nLinux bogon 4.19.190-6.5.lns8.loongarch64 #1 SMP Thu Sep 8 16:01:34 CST 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_3","title":"\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u8be5\u200b\u7248\u672c\u200b\u53ea\u200b\u9700\u8981\u200b\u5c06\u200bvendor\u200b\u76ee\u5f55\u200b\u4e0b\u200bsys\u200b\u9879\u76ee\u200b\u66ff\u6362\u200b\u4e3a\u200b\u652f\u6301\u200bLoongArch64\u200b\u7684\u200b\u7248\u672c\u200b\u5373\u53ef\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_4","title":"\u5b89\u88c5\u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":"<p><pre><code>wget http://ftp.loongnix.cn/nodejs/LoongArch/dist/v12.19.1/node-v12.19.1-linux-loong64.tar.gz\uff08\u200b\u9700\u8981\u200bnode&gt;=12 &amp;&amp; &lt;13\u200b\u7684\u200b\u7248\u672c\u200b\uff1a\uff09\nexport PATH=/pagure/zhaixiaojuan/cloud-github/ceph-project/node-v12.19.1-linux-loong64/bin:$PATH\nyum install -y python2 python3 phantomjs\n</code></pre> \u200b\u5728\u200b~/.bashrc\u200b\u4e2d\u200b\u52a0\u5165\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff08\u200b\u56e0\u4e3a\u200b\u5728\u200bgrafana\u200b\u9879\u76ee\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u540d\u79f0\u200b\u662f\u200bpython\uff09 <pre><code>alias python3='/usr/bin/python3'\nalias python=python3\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_5","title":"\u6784\u5efa\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#1","title":"\uff081\uff09\u200b\u6784\u5efa\u200b\u524d\u7aef","text":"<p><pre><code>npm install -g yarn\nyarn install --pure-lockfile   \nnpx browserslist@latest --update-db    //\u200b\u66f4\u65b0\u200bbrowserslist\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u56e0\u4e3a\u200b\u7248\u672c\u200b\u8f83\u200b\u4f4e\u200b\u800c\u200b\u62a5\u9519\u200b   \nnpm run watch    //\u200b\u7b49\u540c\u4e8e\u200byarn start\u200b\u547d\u4ee4\u200b\n\n//\u200b\u8fd9\u91cc\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u6253\u5f00\u200b\u4e00\u4e2a\u200bterminal, \u200b\u56e0\u4e3a\u200b\u4e0a\u9762\u200b\u7684\u200bwatch\u200b\u4f1a\u200b\u542f\u52a8\u200b\u4e00\u4e2a\u200b\u76d1\u89c6\u200b\u8fdb\u7a0b\u200b\nnpm run build    //\u200b\u8fd9\u200b\u4e00\u6b65\u200b\u5bf9\u200b\u673a\u5668\u200b\u7684\u200b\u6027\u80fd\u200b\u8981\u6c42\u200b\u8f83\u200b\u9ad8\u200b\uff0c\u200b\u666e\u901a\u200b\u7684\u200bPC\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5361\u6b7b\u200b\uff0c\u200b\u6700\u597d\u200b\u4f7f\u7528\u200b\u670d\u52a1\u5668\u200b\n</code></pre> \u200b\u6ce8\u610f\u200b\uff1a \u200b\u5728\u200b\u8fd0\u884c\u200bnpm run watch\u200b\u6216\u8005\u200byarn start\u200b\u547d\u4ee4\u200b\u540e\u200b,\u200b\u4f1a\u200b\u5728\u200b\u672c\u5730\u200b\u542f\u52a8\u200b\u4e00\u4e2a\u200b\u76d1\u89c6\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u4f1a\u200b\u76d1\u63a7\u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\u6587\u4ef6\u200b\uff0c\u200b\u53ea\u8981\u200b\u4efb\u4f55\u200b\u6587\u4ef6\u200b\u53d1\u751f\u53d8\u5316\u200b\uff0c\u200b\u4fbf\u4f1a\u200b\u91cd\u65b0\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#2","title":"\uff082\uff09\u200b\u6784\u5efa\u200b\u540e\u200b\u7aef","text":"<p><pre><code>go run build.go build \n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200bbin/linux-loong64\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u76f8\u5e94\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\uff1a <pre><code>[loongson@bogon linux-loong64]$ ls\ngrafana-cli  grafana-cli.md5  grafana-server  grafana-server.md5\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#3debrpm","title":"\uff083\uff09\u200b\u6784\u5efa\u200bdeb\u200b\u548c\u200brpm\u200b\u5305","text":"<p><pre><code>go run build.go package-only\n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200bdist\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u76f8\u5e94\u200b\u7684\u200btar\u200b\u5305\u200b\uff0cdeb\u200b\u5305\u200b\u548c\u200brpm\u200b\u5305\u200b\uff1a <pre><code>[loongson@bogon dist]$ ls\ngrafana-6.7.4-1679366822.linux-loong64.tar.gz  grafana_6.7.4-1679366822_loong64.deb  grafana-6.7.4-1679366822.loong64.rpm\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grafana/#_6","title":"\u5907\u6ce8","text":"<p>\u200b\u5728\u200b\u6784\u5efa\u200b\u524d\u7aef\u200b\u65f6\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200bssh\u200b\u8fdc\u7a0b\u200b\u767b\u5f55\u200b\u673a\u5668\u200b\u6784\u5efa\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5728\u200b\u672c\u200b\u673a\u4e0a\u200b\u6784\u5efa\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u4f1a\u200b\u7528\u5230\u200bphantomjs\u200b\u8fd9\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u8be5\u200b\u4e8c\u8fdb\u5236\u200b\u5728\u200b\u4f7f\u7528\u200b\u65f6\u200b\uff0c\u200b\u8fdc\u7a0b\u200bssh\u200b\u65e0\u6cd5\u200b\u8fd4\u56de\u200b\u56fe\u5f62\u200b\u7ed3\u679c\u200b\u4ece\u800c\u200b\u5bfc\u81f4\u200b\u62a5\u9519\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/","title":"grpc-java","text":"<p>grpc-java\u200b\u6784\u5efa\u200b\u6307\u5bfc\u200b      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<pre><code>grpc-java:1.26.0\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>cat /etc/os-release\nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>uname -a\nLinux node1 4.19.0-19-loongson-3 #1 SMP pkg_lnd10_4.19.190-7.6 Wed Nov 16 11:12:41 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#2_1","title":"2. \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305","text":"<pre><code>apt install apt install openjdk-11-jdk\uff0clibprotoc-dev\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#3","title":"3. \u200b\u7ec4\u4ef6\u200b\u51c6\u5907","text":"<p>\u200b\u7531\u4e8e\u200bgrpc 1.26.0\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u200b\u4f9d\u8d56\u200b\u5176\u4ed6\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u9879\u76ee\u200b\uff1a        </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#31-protobuf-3110","title":"3.1 protobuf 3.11.0","text":"<p>\u200b\u4e0b\u8f7d\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/protobuf/releases/download/v3.11.0/protobuf-3.11.0-loongarch64.tar.gz     \u200b\u89e3\u538b\u200bprotobuf\u200b\u7684\u200b\u538b\u7f29\u5305\u200b\uff0c\u200b\u5c06\u200bprotoc\u200b\u4e8c\u8fdb\u5236\u200b\u62f7\u8d1d\u5230\u200b/usr/bin/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5e76\u200b\u6839\u636e\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200bprotoc\u200b\u5e93\u200b\u7684\u200b\u67e5\u627e\u200b\u8def\u5f84\u200b\uff0c\u200b\u5c06\u5e93\u200b\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b\u5bf9\u5e94\u200b\u7684\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff08\u200b\u6839\u636e\u200b\u4e0b\u9762\u200b\u7684\u200b\u7ed3\u6784\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u5c06\u5e93\u200b\u6587\u4ef6\u200b\u62f7\u8d1d\u5230\u200b/lib/loongarch64-linux-gnu\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff09\u3002        <pre><code>ldd /usr/bin/protoc \n    linux-vdso.so.1 (0x000000ffffc70000)\n    libprotobuf.so.22 =&gt; /lib/loongarch64-linux-gnu/libprotobuf.so.22 (0x000000fff65f4000)\n    libprotoc.so.22 =&gt; /lib/loongarch64-linux-gnu/libprotoc.so.22 (0x000000fff632c000)\n    libz.so.1 =&gt; /lib/loongarch64-linux-gnu/libz.so.1 (0x000000fff6304000)\n    libstdc++.so.6 =&gt; /lib/loongarch64-linux-gnu/libstdc++.so.6 (0x000000fff6128000)\n    libm.so.6 =&gt; /lib/loongarch64-linux-gnu/libm.so.6 (0x000000fff605c000)\n    libgcc_s.so.1 =&gt; /lib/loongarch64-linux-gnu/libgcc_s.so.1 (0x000000fff5ff8000)\n    libpthread.so.0 =&gt; /lib/loongarch64-linux-gnu/libpthread.so.0 (0x000000fff5fc4000)\n    libc.so.6 =&gt; /lib/loongarch64-linux-gnu/libc.so.6 (0x000000fff5e20000)\n    /lib64/ld.so.1 (0x000000fff693ac68)\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#32-gradle","title":"3.2 .gradle\u200b\u76ee\u5f55","text":"<p>\u200b\u5728\u200b\u4f7f\u7528\u200bgradle\u200b\u6784\u5efa\u200b\u65f6\u200b\uff0c\u200b\u4f9d\u8d56\u200b\u5e93\u200b\u7684\u200b\u5b58\u653e\u200b\u8def\u5f84\u200b\uff5e/.gradle\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200bloongarch64\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4ee3\u7801\u200b \u200b\u4e0b\u8f7d\u200bgradle\u200b\u538b\u7f29\u5305\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/grpc-java/releases/download/loong64-v1.26.0/loong64-grpc-java-1.26.0-gradle.tar.gz\uff0c      \u200b\u5c06\u200b\u5176\u200b\u89e3\u538b\u200b\u5230\u200b\uff5e/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#33-m2","title":"3.3 .m2\u200b\u76ee\u5f55","text":"<p>maven\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u5c06\u200b\u4f9d\u8d56\u200b\u9ed8\u8ba4\u200b\u4e0b\u8f7d\u200b\u5230\u200b\uff5e/.m2\u200b\u7684\u200b\u8def\u5f84\u200b\u4e0b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200bloongarch64\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4ee3\u7801\u200b\u3002 \u200b\u4e0b\u8f7d\u200bm2\u200b\u538b\u7f29\u5305\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/grpc-java/releases/download/loong64-v1.26.0/loong64-grpc-java-1.26.0-m2.tar.gz\uff0c      \u200b\u5c06\u200b\u5176\u200b\u89e3\u538b\u200b\u5230\u200b\uff5e/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#4","title":"4.  \u200b\u6e90\u7801\u200b\u9002\u914d","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#41","title":"4.1 \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<pre><code>diff --git a/build.gradle b/build.gradle\nindex db7be15f4..023b47b22 100644\n--- a/build.gradle\n+++ b/build.gradle\n@@ -27,6 +27,7 @@ subprojects {\n     }\n\n     tasks.withType(JavaCompile) {\n+        it.options.errorprone.disableAllChecks=true\n         it.options.compilerArgs += [\n             \"-Xlint:all\",\n             \"-Xlint:-options\",\ndiff --git a/compiler/build.gradle b/compiler/build.gradle\nindex 098f48c30..8799da3f9 100644\n--- a/compiler/build.gradle\n+++ b/compiler/build.gradle\n@@ -56,6 +56,7 @@ model {\n                 linker.executable = 'aarch64-linux-gnu-g++'\n             }\n             target(\"s390_64\")\n+            target(\"loongarch_64\")\n         }\n         clang(Clang) {\n         }\n@@ -67,6 +68,7 @@ model {\n         ppcle_64 { architecture \"ppcle_64\" }\n         aarch_64 { architecture \"aarch_64\" }\n         s390_64 { architecture \"s390_64\" }\n+        loongarch_64 { architecture \"loongarch_64\" }\n     }\n\n     components {\n@@ -76,7 +78,8 @@ model {\n                 'x86_64',\n                 'ppcle_64',\n                 'aarch_64',\n-                's390_64'\n+                's390_64',\n+                'loongarch_64'\n             ]) {\n                 // If arch is not within the defined platforms, we do not specify the\n                 // targetPlatform so that Gradle will choose what is appropriate.\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#42","title":"4.2 \u200b\u6dfb\u52a0\u200b\u914d\u7f6e\u6587\u4ef6","text":"<p>\u200b\u5728\u200bgrpc-java\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b\u521b\u5efa\u200b\u6587\u4ef6\u200bgradle.properties\uff0c\u200b\u5e76\u200b\u5199\u5165\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u7528\u4e8e\u200b\u6307\u5b9a\u200b\u4f7f\u7528\u200b\u672c\u5730\u200b\u7684\u200bprotoc\uff0c\u200b\u800c\u200b\u4e0d\u4f1a\u200b\u518d\u200b\u53bb\u200bgoogle\u200b\u4ed3\u5e93\u200b\u4e2d\u200b\u4e0b\u8f7d\u200b\u3002    <pre><code>cat gradle.properties \nprotoc=/usr/bin/protoc\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#5","title":"5. \u200b\u6784\u5efa","text":"<p>\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff1a     <pre><code>./gradlew  build -x test  \n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a \u201d-x test\u201c\u200b\u8868\u793a\u200b\u5ffd\u7565\u200b\u6d4b\u8bd5\u200b \u200b\u6784\u5efa\u200b\u6210\u529f\u200b\u540e\u200b\u5728\u200b./compiler/build/exe/java_plugin/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200bprotoc-gen-grpc-java\uff0c\u200b\u5e76\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u5b50\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u5bf9\u5e94\u200b\u7684\u200bjar\u200b\u5305\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#6","title":"6. \u200b\u8bf4\u660e","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#61-gradle","title":"6.1 .gradle\u200b\u76ee\u5f55","text":"<p>~/.gradle\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u5b58\u50a8\u200b\u4e86\u200b\u4e0e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4f9d\u8d56\u200b\u9879\u200b\uff0c\u200b\u5305\u542b\u200b\u9002\u914d\u200bloongarch64\u200b\u7684\u200bjar\u200b\u5305\u200b\uff1a    \u200b\u9700\u8981\u200b\u5728\u200bos-maven-plugin 1.7.-0\u200b\u4e2d\u200b\u6dfb\u52a0\u200bLA\u200b\u67b6\u6784\u200b\u9002\u914d\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u751f\u6210\u200bjar\u200b\u5305\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u62f7\u8d1d\u5230\u200b\u201d\uff5e/.gradle/caches/modules-2/files-2.1/kr.motd.maven/os-maven-plugin/1.7.0/c50a6b3cb49e24d96b1252619a3c600c08796193\u201c\u200b\u8def\u5f84\u200b\u4e0b\u200b\u3002      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#62-m2","title":"6.2 .m2\u200b\u76ee\u5f55","text":"<p>.m2\u200b\u8def\u5f84\u200b\u5b58\u50a8\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u548c\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305\u200b\uff1a    1\uff09netty-tcnative 2.0.26     \u200b\u4e0b\u8f7d\u200b\u5176\u200b\u6e90\u7801\u200b\u5e76\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff0c\u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u89c1\u200b\uff1a https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative.md      </p> <p>2\uff09netty 4.1.42 \u200b\u4e0b\u8f7d\u200b\u5176\u200b\u6e90\u7801\u200b\u5e76\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff0c\u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u89c1\u200b\uff1a   https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty.md     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java/#7","title":"7 \u200b\u5907\u6ce8","text":"<p>\u200b\u6b65\u9aa4\u200b6\u200b\u4e3b\u8981\u200b\u662f\u200b\u5bf9\u200b.m2\u200b\u548c\u200b.gradle\u200b\u4e2d\u200b\u9002\u914d\u200bLA\u200b\u67b6\u6784\u200b\u7684\u200b\u9879\u76ee\u200b\u8fdb\u884c\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u89e3\u91ca\u200b\uff0c\u200b\u6309\u7167\u200b\u6b65\u9aa4\u200b3\u200b\u4e2d\u200b\u62f7\u8d1d\u200b .gradle\u200b\u548c\u200b.m2\u200b\u7684\u200b\u76ee\u5f55\u200b\u540e\u200b\uff0c\u200b\u6b65\u9aa4\u200b6\u200b\u53ef\u200b\u5b8c\u5168\u200b\u5ffd\u7565\u200b\u3002      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc/","title":"grpc","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b grpc \u200b\u7248\u672c\u200b 1.30.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/grpc/grpc \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/grpc/grpc/blob/v1.30.0/BUILDING.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b anilos 8.8 \u200b\u5bb9\u5668"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<ul> <li>grpc \u200b\u9ad8\u200b\u7248\u672c\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u65e0\u9700\u200b\u79fb\u690d\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u5728\u200b LoongArch64 \u200b\u5e73\u53f0\u200b\u4e0a\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b</li> <li>grpc \u200b\u4f4e\u7248\u672c\u200b\u672c\u8eab\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u4f46\u662f\u200b\u5f15\u5165\u200b\u4e86\u200b\u7b2c\u4e09\u65b9\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4f9d\u8d56\u200b boringssl\uff0cabseil-cpp  \u200b\u5bfc\u81f4\u200b\u5728\u200b LoongArch64 \u200b\u5e73\u53f0\u200b\u4e0a\u200b\u65e0\u6cd5\u200b\u987a\u5229\u200b\u7f16\u8bd1\u200b\u9700\u8981\u200b\u79fb\u690d\u200b</li> <li>grpc \u200b\u5bf9\u4e8e\u200b\u7b2c\u4e09\u65b9\u200b\u4f9d\u8d56\u200b\u6709\u200b\u4e24\u79cd\u200b\u7f16\u8bd1\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u4e00\u79cd\u200b\u662f\u200b\u4f9d\u8d56\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u9884\u200b\u5b89\u88c5\u200b\u7684\u200b\u8f6f\u4ef6\u5305\u200b \u200b\u53e6\u200b\u4e00\u79cd\u200b\u662f\u4ece\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b,\u200b\u56e0\u4e3a\u200b\u4f4e\u7248\u672c\u200b\u7684\u200b grpc \u200b\u5bf9\u7cfb\u7edf\u200b\u5305\u200b\u8981\u6c42\u200b\u7248\u672c\u200b\u8f83\u200b\u4f4e\u200b\uff0c\u200b\u548c\u200b\u5f53\u524d\u200b\u9f99\u82af\u200b \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e0d\u200b\u517c\u5bb9\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u4e0a\u200b\u7f16\u8bd1\u200b grpc \u200b\u5bf9\u4e8e\u200b\u7b2c\u4e09\u65b9\u200b\u5e93\u200b\u9009\u62e9\u200b\u4ece\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b</p> <pre><code>docker run -it --rm cr.loongnix.cn/openanolis/anolis:8.8 yum install -y vim git cmake gcc gcc-c++ openssl-devel\n</code></pre> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b</p> <p><pre><code>git clone -b v1.30.0 --depth=1 https://github.com/grpc/grpc.git\ncd grpc\ngit submodule update --init\n</code></pre> \u200b\u79fb\u690d\u200b</p> <p>grpc \u200b\u672c\u8eab\u200b\u65e0\u9700\u200b\u79fb\u690d\u200b\uff0c\u200b\u4f46\u200b\u9700\u8981\u200b\u5bf9\u200b <code>third_part</code> \u200b\u4e0b\u200b\u7684\u200b\u7b2c\u4e09\u65b9\u200b\u4f9d\u8d56\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\u3002</p> <ul> <li><code>abseil-cpp</code> - \u200b\u53c2\u8003\u200b https://github.com/abseil/abseil-cpp/pull/1110/files</li> <li><code>boringssl-with-bazel</code> - \u200b\u53c2\u8003\u200b https://github.com/Loongson-Cloud-Community/boringssl/commit/97c4cc76c8f63af242023484fec27615e3691aec</li> </ul> <p>\u200b\u5176\u4e2d\u200b boringssl-with-bazel \u200b\u662f\u200b boringssl \u200b\u7684\u200b\u4e00\u4e2a\u200b\u7279\u6b8a\u200b\u5206\u652f\u200b\uff0cboringssl-with-bazel \u200b\u5728\u200b boringssl \u200b\u6e90\u7801\u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u200b\u5c01\u88c5\u200b\u4e86\u200b\u4e00\u5c42\u200b bazel \u200b\u6784\u5efa\u200b\uff0c\u200b\u5c06\u200b boringssl \u200b\u6e90\u7801\u200b \u200b\u7f6e\u4e8e\u200b <code>src</code> \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fdb\u884c\u200b\u4ee3\u7801\u200b\u79fb\u690d\u200b\u65f6\u200b\u6ce8\u610f\u200b\u76ee\u5f55\u200b\u5173\u7cfb\u200b\u3002\u200b\u7279\u522b\u200b\u7684\u200b\uff0c\u200b\u8fd8\u200b\u9700\u8981\u200b\u5bf9\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b <code>CMakeList.txt</code> \u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\u3002</p> <p>\u200b\u7f16\u8bd1\u200b</p> <pre><code>mkdir build\npushd build\ncmake -DgRPC_INSTALL=ON -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON ..\nmake -j`nproc`\nmake install\npopd\n</code></pre> <p>grpc \u200b\u53ca\u200b\u76f8\u5173\u200b\u4f9d\u8d56\u200b\u5c06\u200b\u88ab\u200b\u5b89\u88c5\u200b\u5230\u200b <code>/usr/lib</code> \u200b\u6216\u200b <code>/usr/lib64</code> \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p> <p>\u200b\u6d4b\u8bd5\u200b</p> <p>\u200b\u9009\u62e9\u200b <code>examples/cpp/helloworld</code> \u200b\u8fdb\u884c\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u5728\u200b\u6d4b\u8bd5\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u4fdd\u8bc1\u200b\u7cfb\u7edf\u914d\u7f6e\u200b\u6b63\u786e\u200b\u3002</p> <pre><code>$ echo $PKG_CONFIG_PATH\n/usr/local/lib64/pkgconfig:/usr/local/lib/pkgconfig\n\n$ cat /etc/ld.so.conf\n...\n/usr/local/lib/\n/usr/local/lib64/\n</code></pre> <pre><code>pushd test/cpp/helloworld\nmake\n\n# terminal 1\n$ ./greeter_server\nServer listening on 0.0.0.0:50051\n\n# terminal 2\n$ ./greeter_client Greeter received: Hello world\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/","title":"hadoop","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>hadoop-3.3.4</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#2","title":"2. \u200b\u5feb\u901f\u200b\u4e0b\u8f7d","text":"<p>https://github.com/Loongson-Cloud-Community/hadoop/releases/download/untagged-d8735871897e8e2f1b0c/hadoop-3.3.4.tar.gz</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#3","title":"3. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u6784\u5efa\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bserver\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@5cef9fb1156f /]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre></p> <pre><code>[root@5cef9fb1156f /]# uname -a\nLinux 5cef9fb1156f 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#4","title":"4. \u200b\u8f6f\u4ef6\u200b\u5b89\u88c5","text":"<p><pre><code>yum install -y maven autoconf automake libtool cmake zlib-devel \u00a0lzo-devel svn ncurses-devel openssl-devel make cmake  protobuf cyrus-sasl-lib cyrus-sasl-devel fuse-devel git\nyum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel java-1.8.0-openjdk-javadoc\nyum install -y libstdc++ libstdc++-devel libstdc++-static gcc gcc-c++ \nyum install -y devtoolset-10-gcc devtoolset-10-gcc-c++ devtoolset-10-libgcc devtoolset-10-libstdc++\n</code></pre> <pre><code>export PATH=/opt/rh/devtoolset-10/root/bin:$PATH\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#5","title":"5. \u200b\u6784\u5efa\u200b\u51c6\u5907","text":"<pre><code>\u200b\u5728\u200b\u6784\u5efa\u200bhadoop-3.3.4\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u5148\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200bprotobuf3.7\uff0c\u200b\u4ece\u200bgithub\u200b\u5b98\u65b9\u200b\u83b7\u53d6\u200b\u6e90\u7801\u200b\uff0c\u200b\u6784\u5efa\u200b\u6b65\u9aa4\u200b\u5982\u4e0b\u200b\uff1a\n./autogen.sh  \n./configure \uff08\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\uff1a./configure --enable-static\uff09\nmake \uff08\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b make LDFLAGS=-all-static\uff09\nsudo make install\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#6","title":"6. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200bhttps://github.com/Loongson-Cloud-Community/hadoop/tree/loong64-3.3.4 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#7","title":"7. \u200b\u6784\u5efa\u200b\u547d\u4ee4","text":"<p>\u200b\u83b7\u53d6\u200b.m2\u200b\u538b\u7f29\u5305\u200b\uff08https://github.com/Loongson-Cloud-Community/hadoop/releases/download/untagged-d8735871897e8e2f1b0c/hadoop-m2-3.3.4.tar.gz\uff09 \uff0c\u200b\u5c06\u200b\u5176\u200b\u62f7\u8d1d\u5230\u200b\uff5e/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5e76\u200b\u8fdb\u884c\u200b\u89e3\u538b\u200b\u3002 \u200b\u5728\u200b\u6e90\u7801\u200b\u4e2d\u200b\u6267\u884c\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff1a <pre><code>mvn package -Pdist,native -DskipTests -Dtar\n</code></pre> \u200b\u6784\u5efa\u200b\u6210\u529f\u200b\u540e\u4f1a\u200b\u5728\u200bhadoop-dist/target\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200btar\u200b\u5305\u200bhadoop-3.3.4.tar.gz</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#8","title":"8. \u200b\u4f7f\u7528","text":"<p>\u200b\u5728\u200b\u4f7f\u7528\u200bhadoop\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u672c\u5730\u200b\u73af\u5883\u200b\u73af\u5883\u53d8\u91cf\u200bJAVA_HOME\uff0c\u200b\u5982\u200b\uff1a <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.372.b07-4.0.2.an8.loongarch64/jre\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#9","title":"9. \u200b\u5907\u6ce8","text":"<p>.m2\u200b\u8def\u5f84\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u4e0e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u5305\u200b\uff1a</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#node-v12191","title":"node-v12.19.1","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/com/github/eirslett/node/12.19.1/node-v12.19.1-linux-loongarch64.tar.gz           \u200b\u8be5\u200btar\u200b\u5305\u200b\u7684\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\uff1ahttp://ftp.loongnix.cn/nodejs/LoongArch/dist/</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#grpc-java-1260","title":"grpc-java-1.26.0","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/io/grpc/protoc-gen-grpc-java/1.26.0/protoc-gen-grpc-java-1.26.0-linux-loongarch_64.exe     \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/grpc-java.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#protobuf-371","title":"protobuf-3.7.1","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/com/google/protobuf/protoc/3.7.1/protoc-3.7.1-linux-loongarch_64.exe      \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u67e5\u770b\u200b\u4e0a\u9762\u200b\u7684\u200b\u201c5.\u200b\u6784\u5efa\u200b\u51c6\u5907\u200b\u201d\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#protobuf-250","title":"protobuf-2.5.0","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u5177\u4f53\u4f4d\u7f6e\u200b\uff1a~/.m2/repository/com/google/protobuf/protoc/2.5.0/protoc-2.5.0-linux-loongarch_64.exe       \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf.md </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#netty-4177","title":"netty-4.1.77","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/io/netty/netty-transport-native-epoll/4.1.77.Final/netty-transport-native-epoll-4.1.77.Final-linux-loongarch64.jar          \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty.md     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#zstd-jni-149-1","title":"zstd-jni-1.4.9-1","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/com/github/luben/zstd-jni/1.4.9-1/zstd-jni-1.4.9-1.jar        \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni.md    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#snappy-java-1182","title":"snappy-java-1.1.8.2","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/org/xerial/snappy/snappy-java/1.1.8.2/snappy-java-1.1.8.2.jar       \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\uff1ahttps://github.com/xerial/snappy-java/blob/master/BUILD.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#lz4-java-171","title":"lz4-java-1.7.1","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/org/lz4/lz4-java/1.7.1/lz4-java-1.7.1.jar      \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\uff1ahttps://github.com/lz4/lz4-java</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#wildfly-openssl-107","title":"wildfly-openssl-1.0.7","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u5177\u4f53\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/org/wildfly/openssl/wildfly-openssl/1.0.7.Final/wildfly-openssl-1.0.7.Final.jar              \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl.md </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#jna-520","title":"jna-5.2.0","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/net/java/dev/jna/jna/5.2.0/jna-5.2.0.jar   \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#leveldbjni-all","title":"leveldbjni-all","text":"<p>\u200b\u5728\u200b.m2\u200b\u4e2d\u200b\u7684\u200b\u8def\u5f84\u200b\uff1a~/.m2/repository/org/fusesource/leveldbjni/leveldbjni-all/1.8/leveldbjni-all-1.8.jar             \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\uff1ahttps://github.com/fusesource/leveldbjni/blob/leveldbjni-1.8/readme.md#building </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hadoop/#netty-all","title":"netty-all","text":"<p>\u200b\u5728\u200bnetty-all\u200b\u6587\u4ef6\u200bnetty-all-4.1.77.Final.pom\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4e86\u200bLA\u200b\u67b6\u6784\u200b\uff0c\u200b\u5177\u4f53\u200b\u6dfb\u52a0\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a     ~/.m2/repository/io/netty/netty-all/4.1.77.Final/netty-all-4.1.77.Final.pom\uff1a      <pre><code>861     &lt;dependency&gt;\n 862       &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 863       &lt;artifactId&gt;netty-transport-native-epoll&lt;/artifactId&gt;\n 864       &lt;version&gt;4.1.77.Final&lt;/version&gt;\n 865       &lt;classifier&gt;linux-loongarch64&lt;/classifier&gt;\n 866       &lt;scope&gt;runtime&lt;/scope&gt;\n 867       &lt;exclusions&gt;\n 868         &lt;exclusion&gt;\n 869           &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 870           &lt;artifactId&gt;netty-common&lt;/artifactId&gt;\n 871         &lt;/exclusion&gt;\n 872         &lt;exclusion&gt;\n 873           &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 874           &lt;artifactId&gt;netty-buffer&lt;/artifactId&gt;\n 875         &lt;/exclusion&gt;\n 876         &lt;exclusion&gt;\n 877           &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 878           &lt;artifactId&gt;netty-transport&lt;/artifactId&gt;\n 879         &lt;/exclusion&gt;\n 880         &lt;exclusion&gt;\n 881           &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 882           &lt;artifactId&gt;netty-transport-native-unix-common&lt;/artifactId&gt;\n 883         &lt;/exclusion&gt;\n 884         &lt;exclusion&gt;\n 885           &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 886           &lt;artifactId&gt;netty-transport-classes-epoll&lt;/artifactId&gt;\n 887         &lt;/exclusion&gt;\n 888       &lt;/exclusions&gt;\n 889       &lt;optional&gt;false&lt;/optional&gt;\n 890     &lt;/dependency&gt;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/","title":"harbor-operator","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#1","title":"1. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bdebian-10\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u73af\u5883\u53c2\u6570\u200b\u5982\u4e0b\u200b\uff1a <pre><code>root@cloud-01:/homeworkspace/cloud/harbor-operator-project/harbor-operator/bin# cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>root@cloud-01:/home/workspace/cloud/harbor-operator-project/harbor-operator/bin# uname -a\nLinux cloud-01 4.19.0-17-loongson-3 #1 SMP 4.19.190-6.1 Mon Apr 11 13:19:19 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#2","title":"2. \u200b\u8f6f\u4ef6\u200b\u5b89\u88c5","text":"<p>\u200b\u5b89\u88c5\u200bgolang-1.19   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#3","title":"3. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u66f4\u65b0\u200b\u4e00\u4e0b\u200b\u4f9d\u8d56\u200b\u7684\u200bsys\u200b\u5e93\u200b\u548c\u200bstringer\u200b\u7248\u672c\u200b\uff0c\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u67e5\u770b\u200bhttps://github.com/Loongson-Cloud-Community/harbor-operator/tree/loong64-release-1.2.0 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002  \u200b\u66f4\u65b0\u200bsys\u200b\u7684\u200b\u7248\u672c\u200b\u547d\u4ee4\u200b\uff1a <pre><code>go get  -d golang.org/x/sys@bc2c85ada10aa9b6aa9607e9ac9ad0761b95cf1d\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#4","title":"4. \u200b\u6784\u5efa","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#41","title":"4.1 \u200b\u4e8c\u8fdb\u5236\u200b\u6784\u5efa","text":"<p><pre><code>make all\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a \u200b\u5df2\u200b\u5b8c\u6210\u200b\u6784\u5efa\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/harbor-operator/releases/download/loong64-release-v1.2.0/loong64-bin-release-1.2.0.tar.gz </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/harbor-operator/#42","title":"4.2 \u200b\u955c\u50cf\u200b\u6784\u5efa","text":"<pre><code>make docker-build\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/","title":"hbase","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_1","title":"\u5feb\u901f\u200b\u5f00\u59cb","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200bApache HBase 2.4.16\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#hbase_1","title":"hbase\u200b\u6784\u5efa","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_2","title":"\u7248\u672c","text":"<p>2.4.16</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_3","title":"\u73af\u5883\u200b\u4f9d\u8d56","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_4","title":"\u79fb\u690d\u200b\u73af\u5883","text":"<p><pre><code>NAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre> <pre><code>Linux b79f3dc579f0 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_5","title":"\u8f6f\u4ef6\u200b\u4f9d\u8d56","text":"<p><pre><code>yum install -y maven wget diffutils\n</code></pre> \u200b\u9664\u4e86\u200b\u4e0a\u8ff0\u200b\u76f4\u63a5\u200b\u901a\u8fc7\u200byum\u200b\u5b89\u88c5\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u5916\u200b\uff0c\u200b\u8fd8\u200b\u9700\u8981\u200b\u5b89\u88c5\u200b<code>protobuf-3.21.12</code>\u200b\u4ee5\u53ca\u200b<code>protobuf-2.5.0</code>\uff1a \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200b<code>protobuf-3.21.12</code>\u200b\u6e90\u7801\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200b<code>protobuf-2.5.0</code>\u200b\u6e90\u7801\u200b\u3002 \u200b\u5b89\u88c5\u200b\u6b65\u9aa4\u200b\u5982\u4e0b\u200b\uff1a <pre><code>yum install -y autoconf automake libtool curl make gcc-c++ unzip\ntar -zxf protobuf-2.5.0-linux-loong64.tar.gz\ntar -zxf protobuf-3.21.12-linux-loong64.tar.gz\ncd protobuf-3.21.12\n./autogen.sh\n./configure --prefix=/usr --libdir=/usr/lib64\nmake\nmake install\ncd ../protobuf-2.5.0\n./autogen.sh\n./configure --libdir=/usr/local/lib64\nmake\nmake install\nmv /usr/local/bin/protoc /usr/local/bin/protoc-2.5.0\n</code></pre> \u200b\u6d4b\u8bd5\u200b\u662f\u5426\u200b\u5b89\u88c5\u200b\u6210\u529f\u200b\uff1a <pre><code>protoc --version\n&gt;&gt; libprotoc 3.21.12\nprotoc-2.5.0 --version\n&gt;&gt; libprotoc 2.5.0\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_6","title":"\u73af\u5883\u53d8\u91cf","text":"<p><pre><code>export JAVA_HOME=\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-8.1.10.lns8.loongarch64\"\nexport M2_HOME=\"/usr/share/maven\"\nexport PATH=$PATH:$JAVA_HOME/bin:$M2_HOME/bin:$JAVA_HOME/jre/bin\n</code></pre> \u200b\u6ce8\u610f\u200bopenjdk\u200b\u7684\u200b\u7248\u672c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_7","title":"\u5feb\u901f\u200b\u6784\u5efa","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#maven","title":"maven\u200b\u672c\u5730\u200b\u4ed3\u5e93","text":"<p>\u200b\u5728\u200b<code>/usr/share/maven/conf/settings.xml</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bbe\u7f6e\u200bmaven\u200b\u672c\u5730\u200b\u4ed3\u5e93\u200b\u76ee\u5f55\u200b\uff1a <pre><code>&lt;localRepository&gt;/data/local_repo&lt;/localRepository&gt;\n</code></pre> \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200bmaven\u200b\u672c\u5730\u200b\u4ed3\u5e93\u200b\uff0c\u200b\u89e3\u538b\u200b\u81f3\u200b<code>/data</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#hbase_2","title":"hbase\u200b\u6e90\u7801","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200bhbase\u200b\u6e90\u7801\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_8","title":"\u7f16\u8bd1","text":"<p><pre><code>mvn -Dhadoop.profile=3.0 -Dhadoop-three.version=3.3.4 clean package -DskipTests assembly:single\n</code></pre> \u200b\u7f16\u8bd1\u200b\u4fe1\u606f\u200b\u7684\u200b\u542b\u4e49\u200b\u53c2\u8003\u200b\u8fd9\u91cc\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#_9","title":"\u8be6\u7ec6\u200b\u6784\u5efa","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200bhbase 2.4.16\u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\u3002 \u200b\u53c2\u8003\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b\u7ae0\u8282\u200b\u5b8c\u6210\u200b\u591a\u200b\u7248\u672c\u200b<code>protoc</code>\u200b\u7684\u200b\u5b89\u88c5\u200b\u3002maven\u200b\u672c\u5730\u200b\u4ed3\u5e93\u200b\u8def\u5f84\u200b\u7684\u200b\u4fee\u6539\u200b\u4e0e\u5426\u200b\u4e0d\u4f1a\u200b\u5f71\u54cd\u200b\u5230\u200b\u540e\u7eed\u200b\u7684\u200b\u6784\u5efa\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#hbase_3","title":"hbase\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u5bf9\u200b<code>hbase-2.4.16</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b<code>pom.xml</code>\u200b\u4ee5\u53ca\u200b<code>hbase-protocol-shaded/pom.xml</code>\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\uff1a <pre><code>diff --git a/pom.xml b/pom.xml\nindex 11680c4..18a26f1 100755\n--- a/pom.xml\n+++ b/pom.xml\n@@ -1697,7 +1697,7 @@\n           &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n           &lt;version&gt;${protobuf.plugin.version}&lt;/version&gt;\n           &lt;configuration&gt;\n-            &lt;protocArtifact&gt;${external.protobuf.groupid}:protoc:${external.protoc.version}:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\n+            &lt;protocExecutable&gt;/usr/local/bin/protoc-2.5.0&lt;/protocExecutable&gt;      \n             &lt;protoSourceRoot&gt;${basedir}/src/main/protobuf/&lt;/protoSourceRoot&gt;\n             &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;\n             &lt;checkStaleness&gt;true&lt;/checkStaleness&gt;\n\ndiff --git a/hbase-protocol-shaded/pom.xml b/hbase-protocol-shaded/pom.xml\nindex be67445..30ca69c 100644\n--- a/hbase-protocol-shaded/pom.xml\n+++ b/hbase-protocol-shaded/pom.xml\n@@ -95,8 +95,8 @@\n               &lt;goal&gt;compile&lt;/goal&gt;\n             &lt;/goals&gt;\n             &lt;phase&gt;generate-sources&lt;/phase&gt;\n             &lt;configuration&gt;\n-              &lt;protocArtifact&gt;com.google.protobuf:protoc:${internal.protobuf.version}:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\n+              &lt;protocExecutable&gt;/usr/bin/protoc&lt;/protocExecutable&gt;\n               &lt;checkStaleness&gt;true&lt;/checkStaleness&gt;\n             &lt;/configuration&gt;\n           &lt;/execution&gt;\n</code></pre> xml\u200b\u6587\u4ef6\u200b\u7684\u200b\u4fee\u6539\u200b\uff0c\u200b\u53c2\u8003\u200b\u8fd9\u91cc\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jar","title":"\u5bfb\u627e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305","text":"<p>\u200b\u5173\u4e8e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200bjar\u200b\u5305\u200b\u7684\u200b\u5bfb\u627e\u200b\u6709\u200b\u4e24\u4e2a\u200b\u65b9\u6848\u200b\uff1a \u200b\u65b9\u6848\u200b\u4e00\u200b\uff0c\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u5176\u4ed6\u200b\u67b6\u6784\u200b\u7684\u200b<code>hbase-2.4.16-bin.tar.gz</code>\u200b\u6587\u4ef6\u200b\uff0c\u200b\u89e3\u538b\u200b\u540e\u200b\u5728\u200b<code>lib</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u67e5\u627e\u200b\u542b\u6709\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u7684\u200bjar\u200b\u5305\u200b\uff0c\u200b\u9010\u4e2a\u200b\u9002\u914d\u200b\uff1b\u200b\u65b9\u6848\u200b\u4e8c\u200b\uff0c\u200b\u76f4\u63a5\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u9047\u5230\u200b\u963b\u585e\u200b\u7684\u200bjar\u200b\u5305\u200b\u8fdb\u884c\u200b\u9002\u914d\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\u5728\u200bmaven\u200b\u672c\u5730\u200b\u4ed3\u5e93\u200b\u4e2d\u200b\u67e5\u627e\u200b\u542b\u6709\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u7684\u200bjar\u200b\u5305\u200b\uff0c\u200b\u9010\u4e2a\u200b\u9002\u914d\u200b\u3002 \u200b\u65b9\u6848\u200b\u4e00\u200b\u9002\u7528\u200b\u4e8e\u200b<code>lib</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305\u200b\u6765\u6e90\u4e8e\u200b\u72ec\u7acb\u200b\u7684\u200b\u9879\u76ee\u200b\u4e0e\u200b\u672c\u200b\u9879\u76ee\u200b\u65e0\u5173\u200b\uff0c\u200b\u5982\u200b\u53ea\u200b\u5305\u542b\u200b<code>jna.jar</code>\u3002 \u200b\u65b9\u6848\u200b\u4e8c\u200b\u9002\u7528\u200b\u4e8e\u200b<code>lib</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305\u662f\u200b\u672c\u200b\u9879\u76ee\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u65e0\u8bba\u200b\u5176\u4e2d\u200b\u7684\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u6765\u6e90\u200b\u4e0e\u200b\u9879\u76ee\u200b\u81ea\u8eab\u200b\u7f16\u8bd1\u200b\u4ea7\u751f\u200b\u7684\u200b\u6216\u662f\u200b\u89e3\u538b\u200b\u7b2c\u4e09\u65b9\u200bjar\u200b\u5305\u200b\u5f97\u5230\u200b\u7684\u200b\uff0c\u200b\u5982\u672c\u200b\u9879\u76ee\u200b<code>hbase-2.4.16/lib</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b<code>shaded-clients/hbase-shaded-mapreduce-2.4.16.jar</code>\u200b\u7b49\u200b\u3002 \u200b\u91c7\u7528\u200b\u65b9\u6848\u200b\u4e8c\u200b\u7edf\u8ba1\u200b\u51fa\u200b\u9700\u8981\u200b\u9002\u914d\u200b\u7684\u200bjar\u200b\u5305\u6709\u200b\uff1a <pre><code>os-maven-plugin 1.5.0.final.jar\nsnappy-java-1.1.8.2.jar\njruby-complete-9.2.13.0.jar\nhbase-shaded-netty-4.1.4.jar\ncommons-crypto-1.0.0.jar\nleveldbjni-all-1.8.jar\njline-2.11.jar\njffi-1.2.16-native.jar\njna-5.2.0.jar\n</code></pre> \u200b\u5176\u4e2d\u200b\uff0c<code>os-maven-plugin 1.5.0.final.jar</code>\u200b\u662f\u200bhbase\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u9700\u8981\u200b\u7684\u200bjar\u200b\u5305\u200b\uff0c\u200b\u4ece\u200b<code>1.7.1</code>\u200b\u7248\u672c\u200b\u5f00\u59cb\u200b\u652f\u6301\u200bloongarch\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#os-maven-plugin-150finaljar","title":"\u9002\u914d\u200bos-maven-plugin 1.5.0.final.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>os-maven-plugin</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u4fee\u6539\u200b\u540e\u200b\u6267\u884c\u200b: <pre><code>mvn clean package\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#snappy-java-1182jar","title":"\u9002\u914d\u200bsnappy-java-1.1.8.2.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>snappy-java</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u5982\u4f55\u200b\u7f16\u8bd1\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jruby-complete-92130jar","title":"\u9002\u914d\u200bjruby-complete-9.2.13.0.jar","text":"<p>\u200b\u5728\u200b\u9002\u914d\u200b<code>jruby-complete-9.2.13.0.jar</code>\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u5148\u200b\u9002\u914d\u200b\u4ee5\u4e0b\u200b\u9879\u76ee\u200b\uff0c\u200b\u5426\u5219\u200bhbase\u200b\u5728\u200b\u8c03\u7528\u200b\u8be5\u200bjar\u200b\u5305\u200b\u65f6\u4f1a\u200b\u51fa\u9519\u200b\uff1a <pre><code>jffi 1.2.23\njnr-ffi 2.1.12\njnr-constants 0.9.15\njnr-posix 3.0.54\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jffi","title":"jffi","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jffi</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u5982\u4f55\u200b\u7f16\u8bd1\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jnr-ffi","title":"jnr-ffi","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jnr-ffi</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u4fee\u6539\u200b\u540e\u200b\u6267\u884c\u200b\uff1a <pre><code>./mvnw install -DskipTests=true\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jnr-constants","title":"jnr-constants","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jnr-constants</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u5982\u4f55\u200b\u7f16\u8bd1\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jnr-posix","title":"jnr-posix","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jnr-posix</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u4fee\u6539\u200b\u540e\u200b\u6267\u884c\u200b\uff1a <pre><code>mvn package -DskipTests=true\nmvn install -DskipTests=true\n</code></pre> \u200b\u4ee5\u4e0a\u200b4\u200b\u4e2a\u200b\u9879\u76ee\u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u5f00\u59cb\u200b\u6784\u5efa\u200b<code>jruby</code>\uff1a \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jruby</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u5982\u4f55\u200b\u7f16\u8bd1\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#hbase-shaded-netty-414jar","title":"hbase-shaded-netty-4.1.4.jar","text":"<p><code>hbase-shaded-netty-4.1.4.jar</code>\u200b\u4e2d\u200b\u7684\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u6765\u6e90\u4e8e\u200b<code>netty-transport-native-epoll-4.1.87.Final-linux-loongarch.jar</code>\u3002\u200b\u800c\u200b\u5728\u200b\u7f16\u8bd1\u200b<code>netty-transport-native-epoll-4.1.87.Final-linux-loongarch.jar</code>\u200b\u524d\u200b\u9700\u8981\u200b\u5148\u200b\u7f16\u8bd1\u200b<code>netty-tcnative-linux-loongarch_64-2.0.56.Final.jar</code>\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#netty-tcnative-linux-loongarch_64-2056finaljar","title":"netty-tcnative-linux-loongarch_64-2.0.56.Final.jar","text":"<p>\u200b\u53c2\u8003\u200bnetty-tcnative\u200b\u79fb\u690d\u200b\u624b\u518c\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#netty-transport-native-epoll-4187final-linux-loongarchjar","title":"netty-transport-native-epoll-4.1.87.Final-linux-loongarch.jar","text":"<p>\u200b\u53c2\u8003\u200bnetty\u200b\u79fb\u690d\u200b\u624b\u518c\u200b\u3002 \u200b\u5b89\u88c5\u200b\u4e0a\u8ff0\u200b\u4e24\u4e2a\u200bjar\u200b\u5305\u540e\u200b\u5f00\u59cb\u200b\u7f16\u8bd1\u200b<code>hbase-shaded-netty-4.1.4.jar</code>\u3002\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>hbase-thirdparty</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#commons-crypto-100jar","title":"commons-crypto-1.0.0.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>commons-crypto</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u5378\u8f7d\u200b\u9ad8\u200b\u7248\u672c\u200b\u7684\u200bopenssl-devel\uff0c\u200b\u5b89\u88c5\u200b1.0.2\u200b\u7248\u672c\u200bopenssl-devel: <pre><code>yum install compat-openssl10-devel\n</code></pre> \u200b\u5b89\u88c5\u200b\u540e\u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean package\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#leveldbjni-all-18jar","title":"leveldbjni-all-1.8.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>leveldbjni</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u5982\u4f55\u200b\u7f16\u8bd1\u200b\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jline-211jar","title":"jline-2.11.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jline2</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u6765\u6e90\u4e8e\u200bmaven\u200b\u4ed3\u5e93\u200b\u4e2d\u200b\u7684\u200b<code>jansi-1.11.jar</code>\u3002\u200b\u800c\u200b<code>jansi-1.11.jar</code>\u200b\u4e2d\u200b\u7684\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u6765\u6e90\u4e8e\u200b<code>jansi-native-1.5-linux64.jar</code>\u3002  </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jansi-native-15-linux64jar","title":"jansi-native-1.5-linux64.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jansi-native</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean package\n</code></pre> \u200b\u4e00\u822c\u200b\u4f1a\u200b\u51fa\u73b0\u200bautotools\u200b\u76f8\u5173\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u5982\u679c\u200b\u51fa\u73b0\u200b\uff1a <pre><code>config.status: error: cannot find input file: `Makefile.in'\n</code></pre> \u200b\u8fdb\u5165\u200b\u62a5\u9519\u200b\u7684\u200b<code>configure.ac</code>\u200b\u6587\u4ef6\u200b\u6240\u5728\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u6267\u884c\u200b\uff1a <pre><code>aclocal\nautoconf\nautoheader\nautomake --add-missing\n</code></pre> \u200b\u751f\u6210\u200b<code>Makefile.in</code>\u200b\u540e\u200b\u91cd\u65b0\u200b\u5728\u200b\u6839\u76ee\u5f55\u200b\u6267\u884c\u547d\u4ee4\u200b: <pre><code>mvn clean package\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jansi-111jar","title":"jansi-1.11.jar","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u8df3\u8f6c\u200b\u5230\u200b<code>jansi</code>\u200b\u9879\u76ee\u200b\u3002 \u200b\u5728\u200b<code>jansi/jansi</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean package\nmvn install\n</code></pre> \u200b\u4e0a\u8ff0\u200b\u7684\u200bjar\u200b\u5305\u200b\u5b89\u88c5\u200b\u5230\u200b\u672c\u5730\u200b\u4ed3\u5e93\u200b\u540e\u200b\uff0c\u200b\u5728\u200bjline2\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b\uff1a <pre><code>mvn clean package\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jffi-1216-nativejar","title":"jffi-1.2.16-native.jar","text":"<p>\u200b\u53c2\u8003\u200b\u4e0a\u6587\u200bjffi\u200b\u9879\u76ee\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#jna-520jar","title":"jna-5.2.0.jar","text":"<p>\u200b\u53c2\u8003\u200bjna\u200b\u79fb\u690d\u200b\u624b\u518c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hbase/#hbase_4","title":"hbase\u200b\u7f16\u8bd1","text":"<pre><code>mvn -Dhadoop.profile=3.0 -Dhadoop-three.version=3.3.4 clean package -DskipTests assembly:single\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/","title":"hive","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>rel/release-3.1.2</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u6784\u5efa\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bdebian\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u9700\u8981\u200b\u5148\u200b\u5b89\u88c5\u200bjava-8: <pre><code>apt install -y openjdk-8-jdk\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\nexport JRE_HOME=$JAVA_HOME/jre\nexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH\nexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#3","title":"3. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u65e0\u9700\u200b\u9002\u914d\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#4maven","title":"\u6b65\u9aa4\u200b4\u200b\u5f53\u524d\u200b\u5df2\u7ecf\u200b\u65e0\u9700\u200b\u6267\u884c\u200b\uff0c\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200b\u5b98\u65b9\u200bmaven\u200b\u4ed3\u5e93\u200b\u5373\u53ef\u200b\uff0c\u200b\u4f7f\u7528\u200b\u6559\u7a0b","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#4","title":"4. \u200b\u4f9d\u8d56\u200b\u9879\u200b\u51c6\u5907","text":"<p>hive\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u4f9d\u8d56\u200b\u4e00\u4e9b\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305\u200b\uff0c\u200b\u9700\u8981\u200b\u63d0\u524d\u200b\u6784\u5efa\u200bloongarch64\u200b\u67b6\u6784\u200b\u7684\u200bjar\u200b\u5305\u200b\uff0c\u200b\u5177\u4f53\u200b\u5982\u4e0b\u200b\uff1a</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#41-protoc-jar-3511-jar","title":"4.1 protoc-jar-3.5.1.1 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b: \u200b\u5c06\u200bprotoc-jar-3.5.1.1.jar (https://github.com/Loongson-Cloud-Community/protoc-jar/releases/download/loongarch64-v3.5.1.1/protoc-jar-3.5.1.1.jar)\u200b\u5b58\u653e\u200b\u7f6e\u200b\uff5e/.m2/repository/com/github/os72/protoc-jar/3.5.1.1/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002      2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b\uff1a https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protoc-java.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#42-protoc-jar-maven-plugin-3511-jar","title":"4.2 protoc-jar-maven-plugin-3.5.1.1 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u5c06\u200bprotoc-jar-maven-plugin-3.5.1.1.jar(https://github.com/Loongson-Cloud-Community/protoc-jar-maven-plugin/releases/download/v3.5.1.1/protoc-jar-maven-plugin-3.5.1.1.jar)\u200b\u5b58\u653e\u200b\u7f6e\u200b \uff5e/.m2/repository/com/github/os72/protoc-jar-maven-plugin/3.5.1.1/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b\uff1a \u200b\u8be5\u200b\u9879\u76ee\u200b\u662f\u200b\u5bf9\u200b4.1\u200b\u4e2d\u200bprotoc-jar-3.5.1.1\u200b\u7684\u200b\u5c01\u88c5\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u200b\u9700\u8981\u200b\u5148\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b\u5b89\u88c5\u200b\uff1b \u200b\u5728\u200bprotoc-jar-maven-plugin\u200b\u9879\u76ee\u200b\u4e2d\u200b\u6267\u884c\u200b\uff1amvn clean install -DskipTests\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#43-protoc-250","title":"4.3 protoc-2.5.0 \u200b\u4e8c\u8fdb\u5236","text":"<p>1) \u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a  \u200b\u4e0b\u8f7d\u200bprotoc\u200b\u4e8c\u8fdb\u5236\u200b(https://github.com/Loongson-Cloud-Community/protobuf/releases/download/v2.5.0/protoc), \u200b\u5c06\u200b\u5176\u200b\u91cd\u547d\u540d\u200b\u4e3a\u200bprotoc-2.5.0-linux-loongarch_64.exe, \u200b\u5c06\u200b\u5176\u200b\u62f7\u8d1d\u5230\u200b\uff5e/.m2/repository/com/google/protobuf/protoc/2.5.0/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b 2) \u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u5177\u4f53\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf.md </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#44-lz4-java-130-jar","title":"4.4 lz4-java-1.3.0 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u5c06\u200blz4-java-1.3.0-jar.tar.gz(https://github.com/Loongson-Cloud-Community/lz4-java/releases/download/1.3.0/lz4-java-1.3.0-jar.tar.gz)\u200b\u5b58\u653e\u200b\u7f6e\u200b\uff5e/.m2/repository/net/jpountz/lz4/lz4/1.3.0/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b \u200b\u5177\u4f53\u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lz4-java.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#45-snappy-java-114-jar","title":"4.5 snappy-java-1.1.4 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u5c06\u200bsnappy-java-1.1.4.jar(https://github.com/Loongson-Cloud-Community/snappy-java/releases/download/loongarch64-v1.1.4/snappy-java-1.1.4.jar)\u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/org/xerial/snappy/snappy-java/1.1.4/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b; 2) \u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b\uff1a \u200b\u8be5\u200b\u9879\u76ee\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u4ece\u200b\u5b98\u65b9\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b(https://github.com/xerial/snappy-java)\uff0c\u200b\u6267\u884c\u200bmake\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#46-jansi-native-15-jar","title":"4.6 jansi-native-1.5 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u5c06\u200bjansi-linux64-1.5.jar(\u200b\u89e3\u538b\u200bhttps://github.com/Loongson-Cloud-Community/jansi-native/releases/download/loong64-jansi-native-v1.5/loongarch64-jansi-native-1.5-jar.tar.gz \uff0c \u200b\u83b7\u53d6\u200b\u5176\u4e2d\u200b\u7684\u200bansi-linux64-1.5.jar)\u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/org/fusesource/jansi/jansi-native/1.5 \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b    2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b\uff1a \u200b\u5177\u4f53\u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jansi-native.md </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#47-jansi-111-jar","title":"4.7 jansi-1.11 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u4e0b\u8f7d\u200bhttps://github.com/Loongson-Cloud-Community/jansi/releases/download/jansi-project-1.11/jansi-1.11-jar.tar.gz \u200b\u4ece\u4e2d\u200b\u83b7\u53d6\u200bjansi-1.11.jar\u200b\u5305\u200b\uff0c\u200b\u5c06\u200b\u5176\u200b\u5b58\u653e\u200b\u5230\u200b\uff5e/.m2/repository/org/fusesource/jansi/jansi/1.11\uff1b    2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u5b89\u88c5\u200b\uff1a \u200b\u4ece\u200b\u5b98\u65b9\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b(https://github.com/fusesource/jansi), \u200b\u6267\u884c\u547d\u4ee4\u200b\u201cmvn install -DskipTests\u201d</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#48-sigar-dist-165132zip","title":"4.8 sigar-dist-1.6.5.132.zip","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u83b7\u53d6\u200bhttps://github.com/Loongson-Cloud-Community/sigar/releases/download/loongarch64-master-ad47dc3b494e/sigar-dist-1.6.5.132.zip \uff0c \u200b\u5c06\u200b\u5176\u200b\u62f7\u8d1d\u5230\u200b\uff5e/.m2/repository/org/hyperic/sigar-dist/1.6.5.132\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b    2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar.md </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#49-java-util-132-jar","title":"4.9 java-util-1.3.2 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u4e0b\u8f7d\u200b https://github.com/Loongson-Cloud-Community/java-util/releases/download/java-util-1.3.2/java-util-1.3.2.jar  \u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/com/metamx/java-util/1.3.2/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u4ece\u200b\u5b98\u65b9\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b(https://github.com/metamx/java-util.git), \u200b\u6267\u884c\u547d\u4ee4\u200b\u201cmvn install -DskipTests\u201d</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#410-druid-0120-jar","title":"4.10 druid-0.12.0 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u4e0b\u8f7d\u200b https://github.com/Loongson-Cloud-Community/druid/releases/download/druid-0.12.0/java-util-0.12.0.jar \u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/io/druid/java-util/0.12.0/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1b 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u4ece\u200b\u5b98\u65b9\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b(https://github.com/apache/druid.git), \u200b\u6267\u884c\u547d\u4ee4\u200b\u201cmvn clean install -pl java-util -am -DskipTests\u201d \u200b\u53ea\u200b\u6784\u5efa\u200bjava-util\u200b\u6a21\u5757\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#411-netty-4117-jar","title":"4.11 netty-4.1.17 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u4e0b\u8f7d\u200b https://github.com/Loongson-Cloud-Community/netty/releases/download/loong64-netty-4.1.17.Final/netty-4.1.17-jar.tar.gz \u200b\u4ece\u4e2d\u200b\u83b7\u53d6\u200bnetty-transport-4.1.17.Final.jar\u200b\u5c06\u200b\u5176\u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/io/netty/netty-transport/4.1.17.Final/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u53c2\u8003\u200b\uff1a https://github.com/Loongson-Cloud-Community/netty/tree/loong64-netty-4.1.17.Final      https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty.md      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#412-netty-4052-jar","title":"4.12 netty-4.0.52 jar\u200b\u5305","text":"<p>1\uff09\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\uff1a \u200b\u4e0b\u8f7d\u200b https://github.com/Loongson-Cloud-Community/netty/releases/download/loong64-netty-4.0.52.Final/loong64-netty-4.0.52-jar.tar.gz \u200b\u4ece\u4e2d\u200b\u83b7\u53d6\u200bnetty-transport-4.0.52.Final.jar\u200b\u5c06\u200b\u5176\u200b\u5b58\u653e\u200b\u7f6e\u200b~/.m2/repository/io/netty/netty-transport/4.0.52.Final/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002 2\uff09\u200b\u6216\u8005\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff1a \u200b\u53c2\u8003\u200b\uff1a https://github.com/Loongson-Cloud-Community/netty/tree/loong64-netty-4.0.52.Final          https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty.md        </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#5-pom","title":"5. pom\u200b\u6587\u4ef6\u200b\u4fee\u6539","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#50-51","title":"5.0 \u200b\u5bf9\u200b5.1\u200b\u7684\u200b\u8865\u5145\u200b\u8bf4\u660e","text":"<p>\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5728\u200bmaven\u200b\u4ed3\u5e93\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ed3\u5e93\u200b\u914d\u7f6e\u200b vim $MAVEN_HOME/conf/settings.xml,\u200b\u914d\u7f6e\u200b\u8be5\u9879\u200b\u540e\u200b\u65e0\u9700\u200b\u6267\u884c\u200b5.1 <pre><code>    &lt;mirror&gt;\n      &lt;id&gt;conjars&lt;/id&gt;\n      &lt;name&gt;conjars&lt;/name&gt;\n      &lt;url&gt;https://maven.aliyun.com/repository/spring&lt;&lt;/url&gt;\n      &lt;mirrorOf&gt;conjars&lt;/mirrorOf&gt;\n    &lt;/mirror&gt;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#51-calcite-1100pom","title":"5.1 calcite-1.10.0.pom","text":"<p>\u200b\u5728\u200b\uff5e/.m2/repository/org/apache/calcite/calcite/1.10.0/calcite-1.10.0.pom\u200b\u4e2d\u200b\u4fee\u6539\u200bpentaho-aggdesigner-algorithm\u200b\u7684\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\uff0c\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff0c\u200b\u5373\u7528\u200b785\uff5e789\u200b\u884c\u200b\u7684\u200b\u4ee3\u7801\u200b\u66ff\u6362\u200b791\uff5e801\u200b\u884c\u200b\u7684\u200b\u4ee3\u7801\u200b\uff1a <pre><code>108     &lt;pentaho-aggdesigner.version&gt;5.1.5-jhyde&lt;/pentaho-aggdesigner.version&gt;\n......\n360       &lt;dependency&gt;\n361         &lt;groupId&gt;org.pentaho&lt;/groupId&gt;\n362         &lt;artifactId&gt;pentaho-aggdesigner-algorithm&lt;/artifactId&gt;\n363         &lt;version&gt;${pentaho-aggdesigner.version}&lt;/version&gt;\n364       &lt;/dependency&gt;\n......\n776   &lt;repositories&gt;\n777     &lt;repository&gt;\n778       &lt;id&gt;central&lt;/id&gt;\n779       &lt;name&gt;Central Repository&lt;/name&gt;\n780       &lt;url&gt;http://repo.maven.apache.org/maven2&lt;/url&gt;\n781       &lt;layout&gt;default&lt;/layout&gt;\n782       &lt;snapshots&gt;\n783         &lt;enabled&gt;false&lt;/enabled&gt;\n784       &lt;/snapshots&gt;\n785     &lt;/repository&gt;\n786         &lt;repository&gt;\n787         &lt;id&gt;spring&lt;/id&gt;\n788         &lt;url&gt;https://maven.aliyun.com/repository/spring&lt;/url&gt;\n789     &lt;/repository&gt;\n790     &lt;!--\n791     &lt;repository&gt;\n792       &lt;releases&gt;\n793         &lt;enabled&gt;true&lt;/enabled&gt;\n794         &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n795         &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;\n796       &lt;/releases&gt;\n797       &lt;id&gt;conjars&lt;/id&gt;\n798       &lt;name&gt;Conjars&lt;/name&gt;\n799       &lt;url&gt;http://conjars.org/repo&lt;/url&gt;\n800       &lt;layout&gt;default&lt;/layout&gt;\n801     &lt;/repository&gt;\n802     --&gt;\n803   &lt;/repositories&gt;\n</code></pre> \u200b\u8fd9\u91cc\u200b\u4e4b\u6240\u4ee5\u200b\u4fee\u6539\u200bpentaho-aggdesigner-algorithm\u200b\u7684\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\uff0c\u200b\u662f\u56e0\u4e3a\u200b791\uff5e801\u200b\u884c\u200b\u7684\u200b\u4ee3\u7801\u200b\u8bbe\u7f6e\u200b\u7684\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\u5df2\u7ecf\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u76ee\u524d\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b\u5df2\u7ecf\u200b\u66f4\u65b0\u200b\u4e3a\u200bhttps://maven.aliyun.com/repository/spring ,  \u200b\u82e5\u200b\u4e0d\u200b\u66ff\u6362\u200b\u5219\u200b\u4f1a\u200b\u62a5\u200b\u4ee5\u4e0b\u200b\u9519\u8bef\u200b\uff1a <pre><code>[INFO] -----------------&lt; org.apache.hive:hive-upgrade-acid &gt;------------------\n[INFO] Building Hive Upgrade Acid 3.1.2                                  [1/42]\n[INFO] --------------------------------[ jar ]---------------------------------\nDownloading from conjars: http://conjars.org/repo/org/pentaho/pentaho-aggdesigner-algorithm/5.1.5-jhyde/pentaho-aggdesigner-algorithm-5.1.5-jhyde.pom\n......\n[ERROR] Failed to execute goal on project hive-upgrade-acid: Could not resolve dependencies for project org.apache.hive:hive-upgrade-acid:jar:3.1.2: Failed to collect dependencies at org.apache.hive:hive-exec:jar:2.3.3 -&gt; org.apache.calcite:calcite-core:jar:1.10.0 -&gt; org.pentaho:pentaho-aggdesigner-algorithm:jar:5.1.5-jhyde: Failed to read artifact descriptor for org.pentaho:pentaho-aggdesigner-algorithm:jar:5.1.5-jhyde: Could not transfer artifact org.pentaho:pentaho-aggdesigner-algorithm:pom:5.1.5-jhyde from/to conjars (http://conjars.org/repo): Connect to conjars.org:80 [conjars.org/54.235.127.59] failed: \u200b\u8fde\u63a5\u200b\u8d85\u65f6\u200b (Connection timed out) -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#52-async-http-client-2037pom","title":"5.2 async-http-client-2.0.37.pom","text":"<p>\u200b\u9700\u8981\u200b\u5728\u200b\uff5e/.m2/repository/org/asynchttpclient/async-http-client/2.0.37/async-http-client-2.0.37.pom\u200b\u4e2d\u200b\u505a\u200b\u4ee5\u4e0b\u200b\u4fee\u6539\u200b\uff1a    \uff08\u200b\u5373\u5c06\u200b44\u200b\u884c\u200b\u539f\u672c\u200b\u7684\u200blinux-x86_64\u200b\u4fee\u6539\u200b\u4e3a\u200blinux-loongarch_64\uff09   <pre><code>27         &lt;dependencies&gt;\n 28                 &lt;dependency&gt;\n 29                         &lt;groupId&gt;org.asynchttpclient&lt;/groupId&gt;\n 30                         &lt;artifactId&gt;async-http-client-netty-utils&lt;/artifactId&gt;\n 31                         &lt;version&gt;${project.version}&lt;/version&gt;\n 32                 &lt;/dependency&gt;\n 33                 &lt;dependency&gt;\n 34                         &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 35                         &lt;artifactId&gt;netty-codec-http&lt;/artifactId&gt;\n 36                 &lt;/dependency&gt;\n 37                 &lt;dependency&gt;\n 38                         &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 39                         &lt;artifactId&gt;netty-handler&lt;/artifactId&gt;\n 40                 &lt;/dependency&gt;\n 41                 &lt;dependency&gt;\n 42                         &lt;groupId&gt;io.netty&lt;/groupId&gt;\n 43                         &lt;artifactId&gt;netty-transport-native-epoll&lt;/artifactId&gt;\n 44                         &lt;classifier&gt;linux-loongarch_64&lt;/classifier&gt;\n 45                 &lt;/dependency&gt;\n</code></pre> \u200b\u8fd9\u91cc\u200b\u4e4b\u6240\u4ee5\u200b\u8fd9\u6837\u200b\u4fee\u6539\u200b\uff0c\u200b\u662f\u56e0\u4e3a\u200b\u5728\u200b\uff5e/.m2/repository/org/asynchttpclient/async-http-client/2.0.37/async-http-client-2.0.37.pom\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u5bf9\u200bnetty-transport-native-epoll\u200b\u7684\u200b\u67b6\u6784\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u4fee\u6539\u200b\uff0c\u200b\u6700\u540e\u200b\u751f\u6210\u200b\u7684\u200b hive-druid-handler-3.1.2.jar\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u5c06\u200b\u662f\u200bx86\u200b\u67b6\u6784\u200b\u7684\u200b.so\u200b\u6587\u4ef6\u200b\uff08libnetty_transport_native_epoll_x86_64.so\uff09\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/hive/#6","title":"6. \u200b\u6784\u5efa\u200b\u6307\u4ee4","text":"<pre><code>mvn clean install -Pdist -DskipTests -Dmaven.javadoc.skip=true \n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/incus/","title":"incus","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/incus/#1","title":"1.\u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>a. \u200b\u4f7f\u7528\u200b\u7cfb\u7edf\u200b\uff1aloongnix-server 8.4 \nb. \u200b\u5b89\u88c5\u200b go 1.20 //\u200b\u4e0d\u540c\u200b\u7684\u200b\u7248\u672c\u200b\u4f9d\u8d56\u200b\u7684\u200bgo\u200b\u7248\u672c\u200b\u53ef\u80fd\u200b\u4e0d\u540c\u200b\uff0c\u200b\u6309\u7167\u200b\u62a5\u9519\u200b\u63d0\u793a\u200b\u8bbe\u7f6e\u200b\u5bf9\u5e94\u200b\u7684\u200bgo\u200b\u5373\u53ef\u200b\nc. \u200b\u8bbe\u7f6e\u200bPKG_CONFIG_PATH=lxc.pc\u200b\u6240\u5728\u200b\u7684\u200b\u8def\u5f84\u200b\n\u200b\u9700\u8981\u200b\u63d0\u524d\u200b\u5b89\u88c5\u200blxc\uff0c\u200b\u8be5\u200b\u7248\u672c\u200b\u7684\u200bincus\u200b\u8981\u6c42\u200blxc\u200b\u7248\u672c\u200b&gt;=3.1.0\uff0c \u200b\u8fd9\u4e2a\u200b\u901a\u8fc7\u200b\u4f7f\u7528\u200blxc\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b3.1.0\u200b\u7248\u672c\u200b\u5e76\u200b\u5b89\u88c5\u200b\uff0c\u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u540e\u200blxc.pc\u200b\u4f4d\u4e8e\u200b\u8def\u5f84\u200b/usr/local/lib/pkgconfig/lxc.pc\uff0c\u200b\u6545\u200b\u8fd9\u91cc\u200b\u8bbe\u7f6e\u200b:\nexport PKG_CONFIG_PATH=/usr/local/lib/pkgconfig\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/incus/#2","title":"2. \u200b\u4f9d\u8d56\u200b\u68c0\u67e5","text":"<p><pre><code>make deps\n</code></pre> \u200b\u5728\u200b\u6267\u884c\u200b\u5b8c\u8be5\u200b\u547d\u4ee4\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u751f\u6210\u200b$GOPATH/deps\u200b\u8def\u5f84\u200b\u4e0b\u200b\u751f\u6210\u200b\u6587\u4ef6\u5939\u200bcowsql\u200b\u548c\u200braft\u3002 \u200b\u5e76\u200b\u6309\u7167\u200b\u63d0\u793a\u200b\u8bbe\u7f6e\u200b\u4ee5\u4e0b\u200b\u73af\u5883\u53d8\u91cf\u200b\uff1a <pre><code>export CGO_CFLAGS=\"-I/root/go/deps/raft/include/ -I/root/go/deps/cowsql/include/\" \nexport CGO_LDFLAGS=\"-L/root/go/deps/raft/.libs -L/root/go/deps/cowsql/.libs/\" \nexport LD_LIBRARY_PATH=\"/root/go/deps/raft/.libs/:/root/go/deps/cowsql/.libs/\" \nexport CGO_LDFLAGS_ALLOW=\"(-Wl,-wrap,pthread_create)|(-Wl,-z,now)\"\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/incus/#3","title":"3. \u200b\u7f16\u8bd1","text":"<p><pre><code>make\n</code></pre> \u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bmake\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u8c03\u7528\u200bcgo\u200b\u7684\u200b\u4ee3\u7801\u200b\u7f16\u8bd1\u200b\u51fa\u6765\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u9ed8\u8ba4\u200b\u662f\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u5b89\u88c5\u200b\u5728\u200b$GOPATH/bin\u200b\u8def\u5f84\u200b\u4e0b\u200b\u3002     </p> <p>\u200b\u901a\u8fc7\u200b\u201cmake -n\u201d\u200b\u67e5\u770b\u200b\u6267\u884c\u200b\u7684\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff1a     <pre><code>[root@kubernetes-master-1 incus]# make -n\nCC=\"cc\" CGO_LDFLAGS_ALLOW=\"(-Wl,-wrap,pthread_create)|(-Wl,-z,now)\" go install -v -tags \"libsqlite3\"  ./...\nCGO_ENABLED=0 go install -v -tags netgo ./cmd/incus-migrate\nCGO_ENABLED=0 go install -v -tags agent,netgo ./cmd/incus-agent\ncd cmd/lxd-to-incus &amp;&amp; CC=\"cc\" CGO_LDFLAGS_ALLOW=\"(-Wl,-wrap,pthread_create)|(-Wl,-z,now)\" go install -v ./\necho \"Incus built successfully\"\n</code></pre> CGO_ENABLED=0\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u9ed8\u8ba4\u200b\u662f\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u6545\u200b\u53ea\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u7b2c\u4e00\u4e2a\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\u4e3a\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\u5373\u53ef\u200b\uff0c\u200b\u6dfb\u52a0\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\u53c2\u6570\u200b\uff1a\u201c-ldflags '-extldflags \"-static -fpic\"' \u201d\uff1a <pre><code>CC=\"cc\" CGO_LDFLAGS_ALLOW=\"(-Wl,-wrap,pthread_create)|(-Wl,-z,now)\" go install -ldflags '-extldflags \"-static -fpic\"' -v -tags \"libsqlite3\"  ./...\n</code></pre> \u200b\u4f46\u662f\u200b\u7531\u4e8e\u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u7f3a\u5c11\u200budev,acl,sqlite3,cap\u200b\u9759\u6001\u200b\u5e93\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u4ee5\u4e0b\u200b\u4e8c\u8fdb\u5236\u200b\u65e0\u6cd5\u200b\u7f16\u8bd1\u6210\u200b\u9759\u6001\u200b\u4e8c\u8fdb\u5236\u200b\uff1a    <pre><code>fuidshift  incusd lxc-to-incus lxd-to-incus\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jansi-native/","title":"jansi-native","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jansi-native/#1","title":"1. \u200b\u591f\u200b\u5c06\u200b\u7248\u672c","text":"<p>1.5</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jansi-native/#2","title":"2. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u4f46\u200b\u7531\u4e8e\u200b\u5e93\u200b\u7684\u200b\u8def\u5f84\u200b\u6539\u53d8\u200b\u9700\u8981\u200b\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\uff0c\u200b\u5177\u4f53\u200b\u67e5\u770b\u200bhttps://github.com/Loongson-Cloud-Community/jansi-native/tree/loong64-jansi-native-1.5 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jansi-native/#3","title":"3. \u200b\u6784\u5efa\u200b\u5b89\u88c5","text":"<pre><code>mvn -DskipTests -Dplatform=linux64 install \n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/","title":"jffi","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/#_1","title":"\u79fb\u690d\u200b\u7248\u672c","text":"<p>jffi-1.2.23</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/#_2","title":"\u79fb\u690d\u200b\u73af\u5883","text":"<p><pre><code>NAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre> \u200b\u5185\u6838\u200b\u7248\u672c\u200b <pre><code>4.19.190-2.1.lns8.loongarch64\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/#_3","title":"\u73af\u5883\u200b\u4f9d\u8d56","text":"<p>\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b <pre><code>yum -y ant maven texinfo gcc\n</code></pre> \u200b\u73af\u5883\u53d8\u91cf\u200b <pre><code>export JAVA_HOME=\"/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-8.1.10.lns8.loongarch64\"\nexport M2_HOME=\"/usr/share/maven\"\nexport PATH=$PATH:$JAVA_HOME/bin:$M2_HOME/bin:$JAVA_HOME/jre/bin\n</code></pre> \u200b\u6ce8\u610f\u200bJDK\u200b\u7248\u672c\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/#_4","title":"\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u4fee\u6539\u200b\u3002 \u200b\u53e6\u5916\u200b\uff0c\u200b\u7528\u200b\u9f99\u82af\u200b\u9002\u914d\u200b\u7684\u200blibffi\u200b\u66ff\u6362\u200b\u6e90\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200blibffi\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jffi/#_5","title":"\u7f16\u8bd1","text":"<pre><code>ant jar &amp;&amp; ant archive-platform-jar &amp;&amp; mvn package\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna/","title":"jna","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna/#_1","title":"\u6784\u5efa\u200b\u7248\u672c","text":"<p>5.2.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna/#_2","title":"\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u6784\u5efa\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bdebian\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u7cfb\u7edf\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/cloud/jna-5.2.0# cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/cloud/jna-5.2.0# uname -a\nLinux cloud-01 4.19.0-17-loongson-3 #1 SMP 4.19.190-6.1 Mon Apr 11 13:19:19 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna/#_3","title":"\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/jna/tree/loong64-5.2.0  \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b \u200b\u79fb\u690d\u200b\u540e\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u7684\u200b\u95ee\u9898\u200b: <pre><code>/usr/local/jdk-11.0.19/bin/java: symbol lookup error: /home/yzw/.cache/JNA/temp/jna2144651195920714260.tmp: undefined symbol: ALIGN\n/usr/local/jdk-11.0.19/bin/java: symbol lookup error: /home/yzw/.cache/JNA/temp/jna2144651195920714260.tmp: undefined symbol: ffi_prep_cif_machdep_var\n</code></pre> \u200b\u95ee\u9898\u200b\u539f\u56e0\u200b\uff1a libffi\u200b\u5e93\u200b\u6ca1\u6709\u200b\u5b8c\u5168\u200b\u9002\u914d\u200b \u200b\u89e3\u51b3\u65b9\u6848\u200b\uff1a \u200b\u4ece\u200bloongson/jna\u200b\u5e93\u4e2d\u200b\u83b7\u53d6\u200b\u76f8\u5e94\u200b\u7248\u672c\u200b\u6216\u200b\u76f8\u8fd1\u200b\u7248\u672c\u200b\u7684\u200blibffi\u200b\u5e93\u200b\uff0c\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b(\u200b\u6ce8\u610f\u200blibffi\u200b\u5e93\u4e2d\u200b\u7684\u200bautogen.sh\u200b\u811a\u672c\u200b\u9700\u8981\u200b\u4ece\u200bjna\u200b\u6e90\u7801\u5e93\u200b\u4e2d\u200b\u83b7\u53d6\u200b)</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/jna/#_4","title":"\u6784\u5efa","text":"<p><pre><code>ant dist\n</code></pre> \u200b\u6784\u5efa\u200b\u5176\u4ed6\u200b\u53c2\u6570\u200b\uff0c\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/java-native-access/jna/blob/master/www/ReleasingJNA.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/","title":"kapacitor","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b kapacitor \u200b\u7248\u672c\u200b 1.6.6 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/influxdata/kapacitor \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/influxdata/kapacitor/blob/v1.6.6/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b Loongnix-Server Linux 8"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>kapacitor\u200b\u4f5c\u4e3a\u200binflux\u200b\u9879\u76ee\u200b\u4e0b\u200b \u200b\u79fb\u690d\u200b1.6.6\u200b\u5bf9\u5e94\u200bflux\u200b\u7248\u672c\u200b\u4e3a\u200b0.171 \u200b\u4fee\u6539\u200bflux\u200b\u4e2d\u200b\u7684\u200blibflux/flux-core/Cargo.toml\u200b\u6587\u4ef6\u200b\u8981\u200b\u548c\u200brust1.58\u200b\u7248\u672c\u200b\u5bf9\u5e94\u200b bumpalo = \"=3.12.0\" log = \"=0.4.8\" libflate = \"=1.2.0\" csv = \"=1.1.0\" tempfile = \"=3.1.0\"</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b - \u200b\u9700\u8981\u200b\u7684\u200b\u8f6f\u4ef6\u200b\uff1a<code>golang-1.19 make rust cmake clang catgo git</code> - \u200b\u9700\u8981\u200b\u7684\u200blib\u200b\u5e93\u200b(yum\u200b\u6e90\u4e2d\u200b\u6ca1\u6709\u200b\u7684\u200b) <code>libflux</code> </p> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b - \u200b\u4e0b\u8f7d\u200bflux\u200b\u6e90\u7801\u200b https://github.com/influxdata/flux <code>git clone --depth=1 --branch v0.171.0 https://github.com/influxdata/flux.git</code> - \u200b\u4e0b\u8f7d\u200bkapacitor\u200b\u6e90\u7801\u200b <code>git clone --depth=1 --branch v1.6.6 https://github.com/influxdata/kapacitor.git</code></p> <p>\u200b\u5b89\u88c5\u200bgolang\u200b\u4e8c\u8fdb\u5236\u200b\u4f9d\u8d56\u200b\u5e76\u200b\u914d\u7f6e\u200b <code>go install github.com/influxdata/pkg-config@latest</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#gopathbin","title":"\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u540e\u200b\u5c06\u200bGOPATH/bin\u200b\u52a0\u5165\u200b\u73af\u5883\u53d8\u91cf","text":"<p><code>export PATH=${GOPATH}/bin:${PATH}</code></p> <p>\u200b\u67e5\u770b\u200bpkg-config <pre><code>yzw@kube /# which -a pkg-config \n/root/go/bin/pkg-config\n/usr/bin/pkg-config\n/bin/pkg-config\n</code></pre> \u200b\u6784\u5efa\u200blibflux\u200b\u52a8\u6001\u200b\u5e93\u200b <pre><code>cd libflux/\n# \u200b\u5fc5\u987b\u200b\u914d\u7f6e\u200bloongsonrust\u200b\u6e90\u200b\u7684\u200bcargo\uff1a http://docs.loongnix.cn/rust/rust.html\n# \u200b\u5220\u9664\u200b\u539f\u6709\u200bCargo.lock\nrm -rf Cargo.lock\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#cargotoml","title":"\u4fee\u6539\u200bCargo.toml\u200b\u6587\u4ef6","text":"<p>\u200b\u5c06\u200b\u539f\u6709\u200blibflux/flux-core/Cargo.toml\u200b\u5907\u4efd\u200b\u5e76\u200b\u5220\u9664\u200b\uff0c\u200b\u66ff\u6362\u200b\u4e3a\u200b\u5982\u4e0b\u200b\u5185\u5bb9\u200b\u7684\u200bCargo.toml mv Cargo.toml Cargo.toml.bak vim Cargo.toml <pre><code>version = \"0.154.0\"\nauthors = [\"Flux Team &lt;flux-developers@influxdata.com&gt;\"]\nedition = \"2021\"\n\n[lib]\nname = \"fluxcore\"\ncrate-type = [\"rlib\"]\n\n[[bin]]\nname = \"fluxdoc\"\ntest = false\nbench = false\nrequired-features = [\"doc\"]\n\n[[bin]]\nname = \"fluxc\"\ntest = false\nbench = false\n\n[features]\ndefault = [\"strict\"]\nstrict = []\nlsp = [\"lsp-types\"]\ndoc = [\"rayon\"]\n\n[dependencies]\nbumpalo = \"=3.12.0\"\nanyhow = \"1\"\nena = \"0.14\"\nenv_logger = \"0.9\"\nthiserror = \"1\"\ncodespan-reporting = \"0.11\"\ncomrak = \"0.10.1\"\nfnv = \"1.0.7\"\nderive_more = { version = \"0.99.17\", default-features = false, features = [\n    \"display\",\n    \"from\"\n] }\npretty = \"0.11.2\"\nrayon = { version = \"1\", optional = true }\nserde = { version = \"^1.0.59\", features = [\"rc\"] }\nserde_derive = \"^1.0.59\"\nserde_json = \"1.0\"\nserde-aux = \"0.6.1\"\nwasm-bindgen = { version = \"=0.2.62\", features = [\"serde-serialize\"] }\nchrono = { version = \"0.4\", features = [\"serde\"] }\nregex = \"1\"\nmaplit = \"1.0.2\"\nflatbuffers = \"2.0.0\"\nderivative = \"2.1.1\"\nwalkdir = \"2.2.9\"\nlog = \"=0.4.8\"\nlsp-types = { version = \"0.92\", optional = true }\npulldown-cmark = { version = \"0.8\", default-features = false }\nstructopt = \"0.3\"\nlibflate = \"=1.2.0\"\nonce_cell = \"1\"\ncsv = \"=1.1.0\"\npad = \"0.1.6\"\ntempfile = \"=3.1.0\"\n\n[dev-dependencies]\nenv_logger = \"0.9\"\ncolored = \"1.8\"\npretty_assertions = \"1\"\ncriterion = \"0.3.3\"\nexpect-test = \"1.1.0\"\n\n[[bench]]\nname = \"scanner\"\nharness = false\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#build","title":"\u6267\u884c\u200bbuild\u200b\u547d\u4ee4","text":"<pre><code>make libflux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#flux","title":"\u751f\u6210\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200bflux","text":"<pre><code>make\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#fluxlibfluxsousr","title":"\u914d\u7f6e\u200b\u5bf9\u5e94\u200bflux\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u548c\u200blibflux.so\u200b\u914d\u7f6e\u200b\u5230\u200b/usr\u200b\u76ee\u5f55\u200b\u4e0b","text":"<p><pre><code>\u200b\u914d\u7f6e\u200bexport LD_LIBRARY_PATH=/usr/local/lib\ncp flux /usr/local/bin\ncp libflux.so /usr/local/lib/\n</code></pre> - \u200b\u53ef\u80fd\u200b\u62a5\u9519\u200b1\uff1a [yzw@kubernetes-master-1 flux]$ sudo go build ./cmd/flux/ pkg-config --cflags -- flux Package flux was not found in the pkg-config search path. Perhaps you should add the directory containing `flux.pc' to the PKG_CONFIG_PATH environment variable Package 'flux', required by 'virtual:world', not found pkg-config: exit status 1 \u200b\u6309\u7167\u200b\u5982\u4e0b\u200b\u6b65\u9aa4\u200b\u89e3\u51b3\u200b <pre><code>export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig/\"\n\u200b\u67e5\u770b\u200b\u5f53\u524d\u200bpkg-config\n[yzw@kubernetes-master-1 kapacitor]$ pkg-config --variable pc_path pkg-config\n/usr/lib64/pkgconfig:/usr/share/pkgconfig```\n# \u200b\u624b\u52a8\u200b\u521b\u5efa\u200bflux.pc\nsudo vim /usrlib/pkgconfig/flux.pc\nprefix=/usr/local/\nexec_prefix=${prefix}\nlibdir=${prefix}/lib\nincludedir=${prefix}/include\n\nName: flux\nDescription: A description of flux\nVersion: 0.171.0\nLibs: -L${libdir} -lflux\nCflags: -I${includedir}\n\n:wq\u200b\u4fdd\u5b58\u200b\u9000\u51fa\u200b\n</code></pre> - \u200b\u53ef\u80fd\u200b\u62a5\u9519\u200b2\uff1a <pre><code>\u200b\u627e\u200b\u4e0d\u5230\u200bflux.h\u200b\u5934\u6587\u4ef6\u200b\ncd ~/flux/\nfind -name flux.h\nexport CGO_CFLAGS=\"-I/path/flux/libflux/include\"\nexport CGO_LDFLAGS=\"-L/usr/local/lib/libflux.so\"\nexport LD_LIBRARY_PATH=\"/usr/local/lib/\"\n</code></pre></p> <p>\u200b\u7f16\u8bd1\u200b \u200b\u8fdb\u5165\u200bkapacitor\u200b\u76ee\u5f55\u200b \u200b\u4f9d\u6b21\u200b\u6267\u884c\u200b <pre><code>cd kapacitor\ngo build ./cmd/kapacitor/main.go\nmv main kapacitor\ngo build ./cmd/kapacitord/main.go\nmv main kapacitord\ngo build ./tick/cmd/tickfmt/main.go\nmv main tickfmt\n</code></pre></p> <p>\u200b\u6d4b\u8bd5\u200b ./kapacirtord &amp; [yzw@kubernetes-master-1 kapacitor]$ ./kapacitord  | head -n 20</p> <p>2023/08/04 16:10:34 No configuration provided, using default settings '##:::'##::::'###::::'########:::::'###:::::'######::'####:'########::'#######::'########::  ##::'##::::'## ##::: ##.... ##:::'## ##:::'##... ##:. ##::... ##..::'##.... ##: ##.... ##:  ##:'##::::'##:. ##:: ##:::: ##::'##:. ##:: ##:::..::: ##::::: ##:::: ##:::: ##: ##:::: ##:  #####::::'##:::. ##: ########::'##:::. ##: ##:::::::: ##::::: ##:::: ##:::: ##: ########::  ##. ##::: #########: ##.....::: #########: ##:::::::: ##::::: ##:::: ##:::: ##: ##.. ##:::  ##:. ##:: ##.... ##: ##:::::::: ##.... ##: ##::: ##:: ##::::: ##:::: ##:::: ##: ##::. ##::  ##::. ##: ##:::: ##: ##:::::::: ##:::: ##:. ######::'####:::: ##::::. #######:: ##:::. ##: ..::::..::..:::::..::..:::::::::..:::::..:::......:::....:::::..::::::.......:::..:::::..::</p> <p>ts=2023-08-04T16:10:34.384+08:00 lvl=info msg=\"kapacitor starting\" service=run version= branch=unknown commit=unknown ts=2023-08-04T16:10:34.384+08:00 lvl=info msg=\"go version\" service=run version=go1.19.7 ts=2023-08-04T16:10:34.418+08:00 lvl=info msg=\"listing Kapacitor hostname\" source=srv hostname=localhost ts=2023-08-04T16:10:34.418+08:00 lvl=info msg=\"listing ClusterID and ServerID\" source=srv cluster_id=3c588d2e-8e42-493b-8f35-8080e8fb6c53 server_id=b37b6d2b-9cdb-43f6-8087-309104bb848b ts=2023-08-04T16:10:34.418+08:00 lvl=info msg=\"opened task master\" service=kapacitor task_master=main</p> <p>\u200b\u6253\u200brpm\u200b\u5305\u200b\u4ee5\u53ca\u200b\u5236\u4f5c\u200b\u955c\u50cf\u200b - \u200b\u4e3b\u8981\u200b\u5173\u6ce8\u200bkapacitor/Dockerfile_build_ubuntu64\u3001build.py\u3001build.sh\u200b\u4ee5\u53ca\u200bscripts\u200b\u6587\u4ef6\u5939\u200b\u4e0b\u200b\u7684\u200bpost-install.sh\u200b\u6587\u4ef6\u200b - \u200b\u6e90\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\u6765\u81ea\u200bhttps://quay.io/repository/influxdb/cross-builder?tab=tags - \u200b\u53c2\u8003\u200bhttps://quay.io/repository/influxdb/cross-builder/manifest/sha256:0c8131d50d527501580ae1e1c22f80f7645dd29bc444b34f6346ed7392b97b1c\u200b\u5236\u4f5c\u200b - \u200b\u6839\u636e\u200b\u5bf9\u5e94\u200b\u7684\u200b\u955c\u50cf\u200b\u53ef\u77e5\u200b\u5236\u4f5c\u200b\u8be5\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\u7684\u200b\u6b65\u9aa4\u200b\uff0c\u200b\u6210\u529f\u200b\u6784\u5efa\u200b\u7684\u200b\u9f99\u82af\u200bcross-build\u200b\u955c\u50cf\u200b\u548c\u6e90\u200b\u955c\u50cf\u200b\u533a\u522b\u200b\uff1a\u200b\u672a\u200b\u914d\u7f6e\u200bmingw64 musl osxcross gotestsum \uff08\u200b\u6ca1\u6709\u200b\u5f71\u54cd\u200b\uff09 - \u200b\u5b89\u88c5\u200bprotoc-python    protobuf\u200b\u9700\u8981\u200b\u6574\u4f53\u200b\u6253\u5305\u200b\u4e3a\u200bprotobuf-3.  .tar.gz  \u200b\u5e76\u4e14\u200b\u5728\u200b\u6253\u5305\u200b\u524d\u200b\u9700\u8981\u200b\u6784\u5efa\u200b\u4e0e\u200b\u955c\u50cf\u200b\u540c\u200b\u7248\u672c\u200b\u7684\u200bprotoc\uff0c\u200b\u5fc5\u987b\u200b\u662f\u200b\u52a8\u6001\u200b\u7f16\u8bd1\u200b \u200b\u9ed8\u8ba4\u200b   ./autogen.sh    ./configure   make    make install\u200b\u5f97\u5230\u200bso\u200b\u5e93\u200b\u6587\u4ef6\u200b   \u200b\u6253\u5305\u200b\u5230\u200bgit\u200b\u540e\u200b\u5728\u200bkapacitor\u200b\u6587\u4ef6\u5939\u200b\u7684\u200bDocker\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b     <pre><code>diff --git a/Dockerfile_build_ubuntu64 b/Dockerfile_build_ubuntu64\nindex 35eba67..30868a6 100644\n--- a/Dockerfile_build_ubuntu64\n+++ b/Dockerfile_build_ubuntu64\n@@ -1,9 +1,10 @@\n-FROM quay.io/influxdb/cross-builder:go1.19.4-cb1343dd74ecba8ec07fe810195530a0b9055aa9\n-\n+#FROM quay.io/influxdb/cross-builder:go1.19.4-cb1343dd74ecba8ec07fe810195530a0b9055aa9\n+FROM cr.loongnix.cn/influxdb/cross-builder:go1.19.7-main\n+#FROM cr.loongnix.cn/library/golang\n # This dockerfile is capabable of performing all\n # build/test/package/deploy actions needed for Kapacitor.\n\n-MAINTAINER support@influxdb.com\n+MAINTAINER yangzewei@loongson.cn\n\n RUN apt-get -qq update &amp;&amp; apt-get -qq install -y \\\n     software-properties-common \\\n@@ -24,25 +25,56 @@ RUN apt-get -qq update &amp;&amp; apt-get -qq install -y \\\n     libtool\n\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 10\n-\n+#RUN apt-get install golang-1.19\n RUN gem install fpm\n+ENV GOPROXY=\"https://goproxy.cn,direct\"\n+ENV GOPATH /go\n+ENV PATH $GOPATH/bin:/usr/local/go/bin:$PATH\n+#RUN go install github.com/influxdata/pkg-config@latest\n+#RUN go install github.com/influxdata/flux@v0.171.0\n\n # Install protobuf3 python library\n # NOTE: PROTO_VERSION env var is inherited from the cross-builder image.\n-RUN wget -q https://github.com/google/protobuf/releases/download/v${PROTO_VERSION}/protobuf-python-${PROTO_VERSION}.tar.gz \\\n-    &amp;&amp; tar -xf protobuf-python-${PROTO_VERSION}.tar.gz \\\n-    &amp;&amp; cd protobuf-${PROTO_VERSION}/python \\\n+# PROTOBUF_VERSION 3.17.3\n+# RUN wget -q https://github.com/google/protobuf/releases/download/v${PROTO_VERSION}/protobuf-python-${PROTO_VERSION}.tar.gz \\\n+ENV http_proxy=http://10.130.0.20:7890\n+ENV https_proxy=http://10.130.0.20:7890\n+\n+RUN wget -q https://github.com/yzewei/protobuf/releases/download/v3.17.3/protobuf-3.17.3.tar.gz \\\n+    &amp;&amp; tar -xf protobuf-3.17.3.tar.gz \\\n+    &amp;&amp; cd protobuf/python \\\n     &amp;&amp; python2 setup.py install \\\n     &amp;&amp; python3 setup.py install \\\n     &amp;&amp; cd ../../ \\\n-    &amp;&amp; rm -rf /protobuf-${PROTO_VERSION} protobuf-python-${PROTO_VERSION}.tar.gz\n+    &amp;&amp; rm -rf /protobuf protobuf-3.17.3.tar.gz\n+\n+ENV PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig/\"\n+ENV CGO_CFLAGS=\"-I/go/pkg/mod/github.com/influxdata/flux@v0.171.0/libflux/include\"\n+ENV CGO_LDFLAGS=\"-L/usr/local/lib/libflux.so\"\n+ENV LD_LIBRARY_PATH=\"/usr/local/lib/\"\n+RUN which -a pkg-config\n+RUN unset http_proxy\n+RUN unset https_proxy\n\n ENV PROJECT_DIR /kapacitor\n RUN mkdir -p $PROJECT_DIR\n WORKDIR $PROJECT_DIR\n\n+\n # Configure local git\n RUN git config --global user.email \"support@influxdb.com\"\n RUN git config --global user.Name \"Docker Builder\"\n-\n+ENV PATH=/usr/lib/go-1.19/bin:$PATH\n ENTRYPOINT [ \"/kapacitor/build.py\" ]\n</code></pre> \u200b\u5176\u4e2d\u200b\u5e94\u8be5\u200b\u6ce8\u610f\u200b\u5230\u200bgo\u200b\u7684\u200b\u8def\u5f84\u200b\u8bbe\u7f6e\u200b\u4ee5\u200bkapacitor\u200b\u6784\u5efa\u200b\u65f6\u200b\u673a\u5668\u200b\u7684\u200bgo\u200b\u8def\u5f84\u200b\u4e3a\u51c6\u200b</p> <ul> <li>\u200b\u63a5\u4e0b\u6765\u200b\u4fee\u6539\u200bbuild.py\u3001build.sh\u200b\u76f8\u5173\u200b\u5185\u5bb9\u200b\uff0c\u200b\u7531\u4e8e\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b\u4f9d\u8d56\u200b\u7684\u200bso\u200b\u5e93\u200b\u3001\u200b\u5728\u200bpost-install.sh\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u914d\u7f6e\u200b\u8bc6\u522b\u200bso\u200b\u5e93\u200b\u7684\u200b\u73af\u5883\u53d8\u91cf\u200b</li> </ul> <p>build.py\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b\uff1a     <pre><code>diff --git a/build.py b/build.py\nindex 50019d1..7ff3a39 100755\n--- a/build.py\n+++ b/build.py\n@@ -26,6 +26,10 @@ INSTALL_ROOT_DIR = \"/usr/bin\"\n LOG_DIR = \"/var/log/kapacitor\"\n DATA_DIR = \"/var/lib/kapacitor\"\n SCRIPT_DIR = \"/usr/lib/kapacitor/scripts\"\n+LIB_DIR=\"/usr/local/lib\"\n+LIB64_DIR=\"/usr/local/lib64\"\n+DEF_LIB_DIR=\"/usr/lib\"\n+FLUX_DIR=\"/usr/local/bin\"\n\n INIT_SCRIPT = \"scripts/init.sh\"\n SYSTEMD_SCRIPT = \"scripts/kapacitor.service\"\n@@ -78,6 +82,10 @@ fpm_common_args = \"-f -s dir --log error \\\n                          LOG_DIR[1:],\n                          DATA_DIR[1:],\n                          SCRIPT_DIR[1:],\n+                         LIB_DIR[1:],\n+                         LIB64_DIR[1:],\n+                         DEF_LIB_DIR[1:],\n+                         os.path.dirname(DEF_LIB_DIR[1:]),\n                          os.path.dirname(SCRIPT_DIR[1:]),\n                          os.path.dirname(DEFAULT_CONFIG),\n                     ]),\n@@ -93,7 +101,7 @@ targets = {\n\n supported_builds = {\n     'darwin': [ \"amd64\" ],\n-    'linux': [ \"arm64\", \"amd64\" ],\n+    'linux': [ \"arm64\", \"amd64\",\"loongarch64\" ],\n     'windows': [ \"amd64\" ]\n }\n\n@@ -132,6 +140,10 @@ def create_package_fs(build_root):\n     os.makedirs(os.path.join(build_root, LOG_DIR[1:]))\n     os.makedirs(os.path.join(build_root, DATA_DIR[1:]))\n     os.makedirs(os.path.join(build_root, SCRIPT_DIR[1:]))\n+    os.makedirs(os.path.join(build_root, FLUX_DIR[1:]))\n+    #os.makedirs(os.path.join(build_root, DEF_LIB_DIR[1:]))\n+    os.makedirs(os.path.join(build_root, LIB_DIR[1:]))\n+    os.makedirs(os.path.join(build_root, LIB64_DIR[1:]))\n     os.makedirs(os.path.join(build_root, os.path.dirname(DEFAULT_CONFIG)))\n     os.makedirs(os.path.join(build_root, os.path.dirname(LOGROTATE_CONFIG)))\n     os.makedirs(os.path.join(build_root, os.path.dirname(BASH_COMPLETION_SH)))\n@@ -377,6 +389,8 @@ def get_system_arch():\n         arch = \"amd64\"\n     elif arch == \"aarch64\":\n         arch = \"arm64\"\n+    elif arch == \"loongarch64\":\n+        arch = \"loongarch64\"\n     elif 'arm' in arch:\n         # Prevent uname from reporting full ARM arch (eg 'armv7l')\n         arch = \"arm64\"\n@@ -488,70 +502,70 @@ def build(version=None,\n         logging.info(\"Using build tags: {}\".format(','.join(tags)))\n\n     logging.info(\"Sending build output to: {}\".format(outdir))\n-    if not os.path.exists(outdir):\n-        os.makedirs(outdir)\n-    elif clean and outdir != '/' and outdir != \".\":\n-        logging.info(\"Cleaning build directory '{}' before building.\".format(outdir))\n-        shutil.rmtree(outdir)\n-        os.makedirs(outdir)\n+    #if not os.path.exists(outdir):\n+    #    os.makedirs(outdir)\n+    #elif clean and outdir != '/' and outdir != \".\":\n+    #    logging.info(\"Cleaning build directory '{}' before building.\".format(outdir))\n+    #    shutil.rmtree(outdir)\n+    #    os.makedirs(outdir)\n\n     logging.info(\"Using version '{}' for build.\".format(version))\n\n-    tmp_build_dir = create_temp_dir()\n-    for target, path in targets.items():\n-        logging.info(\"Building target: {}\".format(target))\n-        build_command = \". /root/.cargo/env &amp;&amp; \"\n+    #tmp_build_dir = create_temp_dir()\n+    #for target, path in targets.items():\n+    #logging.info(\"Building target: {}\".format(target))\n+    #    build_command = \". /root/.cargo/env &amp;&amp; \"\n\n-        build_command += \"CGO_ENABLED=1 \"\n+    #    build_command += \"CGO_ENABLED=1 \"\n\n         # Handle variations in architecture output\n-        fullarch = arch\n-        if  arch == \"aarch64\" or arch == \"arm64\":\n-            arch = \"arm64\"\n-\n-        if platform == \"linux\":\n-            if arch == \"amd64\":\n-                tags += [\"netgo\", \"osusergo\", \"static_build\"]\n-            if arch == \"arm64\":\n-                cc = \"/musl/aarch64/bin/musl-gcc\"\n-                tags += [\"netgo\", \"osusergo\", \"static_build\", \"noasm\"]\n-        elif platform == \"darwin\" and arch == \"amd64\":\n-            cc = \"x86_64-apple-darwin18-clang\"\n-            tags += [ \"netgo\", \"osusergo\"]\n-        elif  platform == \"windows\" and arch == \"amd64\":\n-            cc = \"x86_64-w64-mingw32-gcc\"\n-        build_command += \"CC={} GOOS={} GOARCH={} \".format(cc, platform, arch)\n-\n-        if \"arm\" in fullarch:\n-            if  fullarch != \"arm64\":\n-                logging.error(\"Invalid ARM architecture specified: {} only arm64 is supported\".format(arch))\n-                return False\n-        if platform == 'windows':\n-            target = target + '.exe'\n-            build_command += \"go build -buildmode=exe -o {} \".format(os.path.join(outdir, target))\n-        else:\n-            build_command += \"go build -o {} \".format(os.path.join(outdir, target))\n-        if race:\n-            build_command += \"-race \"\n-        if len(tags) &gt; 0:\n-            build_command += \"-tags \\\"{}\\\" \".format(' '.join(tags))\n+    #    fullarch = arch\n+    #    if  arch == \"aarch64\" or arch == \"arm64\":\n+    #        arch = \"arm64\"\n+    #    elif arch == \"loongarch64\":\n+    #        arch = \"loong64\" \n+    #    if platform == \"linux\":\n+    #        if arch == \"amd64\":\n+    #            tags += [\"netgo\", \"osusergo\", \"static_build\"]\n+    #        if arch == \"arm64\":\n+    #            cc = \"/musl/aarch64/bin/musl-gcc\"\n+    #            tags += [\"netgo\", \"osusergo\", \"static_build\", \"noasm\"]\n+    #    elif platform == \"darwin\" and arch == \"amd64\":\n+    #        cc = \"x86_64-apple-darwin18-clang\"\n+    #        tags += [ \"netgo\", \"osusergo\"]\n+    #    elif  platform == \"windows\" and arch == \"amd64\":\n+    #        cc = \"x86_64-w64-mingw32-gcc\"\n+    #    build_command += \"CC={} GOOS={} GOARCH={} \".format(cc, platform, arch)\n+#\n+    #    if \"arm\" in fullarch:\n+    #        if  fullarch != \"arm64\":\n+    #            logging.error(\"Invalid ARM architecture specified: {} only arm64 is supported\".format(arch))\n+    #           return False\n+    #   if platform == 'windows':\n+    #        target = target + '.exe'\n+    #       build_command += \"go build -buildmode=exe -o {} \".format(os.path.join(outdir, target))\n+    #    else:\n+    #        build_command += \"go build -o {} \".format(os.path.join(outdir, target))\n+    #    if race:\n+    #        build_command += \"-race \"\n+    #    if len(tags) &gt; 0:\n+    #        build_command += \"-tags \\\"{}\\\" \".format(' '.join(tags))\n\n             # Starting with Go 1.5, the linker flag arguments changed to 'name=value' from 'name value'\n-        build_command += \"-ldflags=\\\"\"\n-        if static:\n-            build_command +=\"-s \"\n-        if platform == \"linux\":\n-            build_command += r'-extldflags \\\"-fno-PIC -Wl,-z,stack-size=8388608\\\"  '\n-        build_command += '-X main.version={} -X main.branch={} -X main.commit={} -X main.platform=OSS\" '.format(version,\n-                                                                                                            get_current_branch(),\n-                                                                                                            get_current_commit())\n-        if static:\n-            build_command += \"-a -installsuffix cgo \"\n-        build_command += path\n-        start_time = datetime.utcnow()\n-        run(build_command, shell=True)\n-        end_time = datetime.utcnow()\n-        logging.info(\"Time taken: {}s\".format((end_time - start_time).total_seconds()))\n+    #   build_command += \"-ldflags=\\\"\"\n+    #   if static:\n+    #        build_command +=\"-s \"\n+    #    if platform == \"linux\":\n+    #        build_command += r'-extldflags \\\"-fno-PIC -Wl,-z,stack-size=8388608\\\"  '\n+    #    build_command += '-X main.version={} -X main.branch={} -X main.commit={} -X main.platform=OSS\" '.format(version,\n+    #get_current_branch(),get_current_commit())\n+    #    if static:\n+    #        build_command += \"-a -installsuffix cgo \"\n+    #    build_command += path\n+    start_time = datetime.utcnow()\n+    #    run(build_command, shell=True)\n+    end_time = datetime.utcnow()\n+    logging.info(\"Time taken: {}s\".format((end_time - start_time).total_seconds()))\n     return True\n\n def generate_sha256_from_file(path):\n@@ -583,23 +597,26 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n     outfiles = []\n     tmp_build_dir = create_temp_dir()\n     logging.debug(\"Packaging for build output: {}\".format(build_output))\n     logging.info(\"Using temporary directory: {}\".format(tmp_build_dir))\n     try:\n         for platform in build_output:\n             # Create top-level folder displaying which platform (linux, etc)\n             os.makedirs(os.path.join(tmp_build_dir, platform))\n             for arch in build_output[platform]:\n                 logging.info(\"Creating packages for {}/{}\".format(platform, arch))\n                 # Create second-level directory displaying the architecture (amd64, etc)\n                 current_location = build_output[platform][arch]\n                 # Create directory tree to mimic file system of package\n                 build_root = os.path.join(tmp_build_dir,\n                                           platform,\n                                           arch,\n                                           '{}-{}-{}'.format(PACKAGE_NAME, version, iteration))\n                 os.makedirs(build_root)\n                 # Copy packaging scripts to build directory\n                 if platform == \"windows\" or static or \"static_\" in arch:\n                     # For windows and static builds, just copy\n@@ -609,7 +626,7 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n                 else:\n                     create_package_fs(build_root)\n                     package_scripts(build_root)\n-\n+                \n                 for binary in targets:\n                     # Copy newly-built binaries to packaging directory\n                     if platform == 'windows':\n@@ -624,7 +641,26 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n                         fr = os.path.join(current_location, binary)\n                         # Where the binary should go in the package filesystem\n                         to = os.path.join(build_root, INSTALL_ROOT_DIR[1:], binary)\n+                        logging.info(\"fr={} to= {}\".format(fr,to))\n                     shutil.copy(fr, to)\n+                #\u200b\u5c06\u200b\u4f9d\u8d56\u200b\u8f6f\u4ef6\u200bfluxc\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u590d\u5236\u200b\n+                #fr = os.path.join(\"/\",FLUX_DIR[1:], \"fluxc\")\n+                #to = os.path.join(build_root, FLUX_DIR[1:], \"fluxc\")\n+                #logging.info(\"fr={},to= {}\".format(fr,to))\n+                #shutil.copy(fr, to)\n+                #\u200b\u5c06\u200b\u4f9d\u8d56\u200b\u5e93\u200b\u6587\u4ef6\u200blibflux.so\u200b\u590d\u5236\u200b\n+                fr = os.path.join(\"/\",LIB_DIR[1:], \"libflux.so\")\n+                to = os.path.join(build_root, DEF_LIB_DIR[1:], \"libflux.so\")\n+                #to = os.path.join(build_root, LIB_DIR[1:], \"libflux.so\")\n+                logging.info(\"fr={},to= {}\".format(fr,to))\n+                shutil.copy(fr, to)\n+                \n+                to = os.path.join(build_root, LIB_DIR[1:], \"libflux.so\")\n+                logging.info(\"fr={},to= {}\".format(fr,to))\n+                shutil.copy(fr, to)\n+                \n+                to = os.path.join(build_root, LIB64_DIR[1:], \"libflux.so\")\n+                shutil.copy(fr, to)\n\n                 for package_type in supported_packages[platform]:\n                     # Package the directory structure for each package type for the platform\n@@ -672,6 +708,7 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n                                                             platform,\n                                                             package_arch)\n                         current_location = os.path.join(os.getcwd(), current_location)\n                         if package_type == 'tar':\n                             tar_command = \"cd {} &amp;&amp; tar -cvzf {}.tar.gz --owner=root --group=root ./*\".format(package_build_root, name)\n                             run(tar_command, shell=True)\n@@ -697,7 +734,8 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n                             package_build_root,\n                             current_location)\n                         if package_type == \"rpm\":\n-                            fpm_command += \"--depends coreutils --depends shadow-utils --rpm-posttrans {}\".format(POSTINST_SCRIPT)\n+                            fpm_command += \" --depends coreutils --depends shadow-utils --rpm-posttrans {}\".format(POSTINST_SCRIPT)\n                         out = run(fpm_command, shell=True)\n                         matches = re.search(':path=&gt;\"(.*)\"', out)\n                         outfile = None\n@@ -720,7 +758,7 @@ def package(build_output, pkg_name, version, nightly=False, iteration=1, static=\n\n def main(args):\n     global PACKAGE_NAME\n     if args.release and args.nightly:\n         logging.error(\"Cannot be both a nightly and a release.\")\n         return 1\n@@ -785,13 +823,14 @@ def main(args):\n\n     for platform in platforms:\n         build_output.update( { platform : {} } )\n         archs = []\n         if args.arch == \"all\":\n             single_build = False\n             archs = supported_builds.get(platform)\n         else:\n             archs = [args.arch]\n         for arch in archs:\n             od = args.outdir\n             if not single_build:\n@@ -807,12 +846,15 @@ def main(args):\n                          static=args.static):\n                 return 1\n             build_output.get(platform).update( { arch : od } )\n-\n     # Build packages\n     if args.package:\n         if not check_path_for(\"fpm\"):\n             logging.error(\"FPM ruby gem required for packaging. Stopping.\")\n             return 1\n         packages = package(build_output,\n                            args.name,\n                            args.version,\n@@ -820,7 +862,7 @@ def main(args):\n                            iteration=args.iteration,\n                            static=args.static,\n                            release=args.release)\n         if args.package_udfs:\n             packages += package_udfs(args.version, args.outdir)\n\n@@ -869,7 +911,7 @@ if __name__ == '__main__':\n     log_format = '[%(levelname)s] %(funcName)s: %(message)s'\n     logging.basicConfig(level=LOG_LEVEL,\n                         format=log_format)\n     parser = argparse.ArgumentParser(description='InfluxDB build and packaging script.')\n     parser.add_argument('--verbose','-v','--debug',\n                         action='store_true',\n@@ -885,15 +927,17 @@ if __name__ == '__main__':\n                         type=str,\n                         help='Name to use for package name (when package is specified)')\n     parser.add_argument('--arch',\n-                        metavar='&lt;amd64|arm64|all&gt;',\n+                        metavar='&lt;amd64|arm64|loongarch64|all&gt;',\n                         type=str,\n                         default=get_system_arch(),\n                         help='Target architecture for build output')\n     parser.add_argument('--platform',\n                         metavar='&lt;linux|darwin|windows|all&gt;',\n                         type=str,\n                         default=get_system_platform(),\n                         help='Target platform for build output')\n     parser.add_argument('--branch',\n                         metavar='&lt;branch&gt;',\n                         type=str,\n@@ -988,4 +1032,5 @@ if __name__ == '__main__':\n                         help='Timeout for tests before failing')\n     args = parser.parse_args()\n     print_banner()\n+    #package(\"\",pkg_name=\"kapacitor-1.6.6\", version=\"1.6.6\")\n     sys.exit(main(args))\n</code></pre> build.sh\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b:     <pre><code>diff --git a/build.sh b/build.sh\nindex bb5e012..66b6f8a 100755\n--- a/build.sh\n+++ b/build.sh\n@@ -1,7 +1,7 @@\n #!/bin/bash\n # Run the build utility via Docker\n\n-set -e\n+set -eux\n\n # Make sure our working dir is the dir of the script\n DIR=$(cd $(dirname ${BASH_SOURCE[0]}) &amp;&amp; pwd)\n@@ -22,7 +22,9 @@ echo \"Running build.py\"\n docker run \\\n     --rm \\\n     -v \"$DIR:/kapacitor\" \\\n-    -e AWS_ACCESS_KEY_ID=\"$AWS_ACCESS_KEY_ID\" \\\n-    -e AWS_SECRET_ACCESS_KEY=\"$AWS_SECRET_ACCESS_KEY\" \\\n-    $imagename \\\n-    \"$@\"\n+     $imagename \\\n+     \"$@\"\n+    #-e AWS_ACCESS_KEY_ID=\"$AWS_ACCESS_KEY_ID\" \\\n+    #-e AWS_SECRET_ACCESS_KEY=\"$AWS_SECRET_ACCESS_KEY\" \\\n+    # $imagename \\\n+    # \"$@\"\n</code></pre> scripts/post-install.sh\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b\uff1a     <pre><code>diff --git a/scripts/post-install.sh b/scripts/post-install.sh\nindex 6d0bd15..a2228d4 100644\n--- a/scripts/post-install.sh\n+++ b/scripts/post-install.sh\n@@ -4,6 +4,9 @@ BIN_DIR=/usr/bin\n DATA_DIR=/var/lib/kapacitor\n LOG_DIR=/var/log/kapacitor\n SCRIPT_DIR=/usr/lib/kapacitor/scripts\n+echo \"export LD_LIBRARY_PATH=/usr/lib\" &gt;&gt; /etc/profile\n+source /etc/profile\n+\n\n function install_init {\n     cp -f $SCRIPT_DIR/init.sh /etc/init.d/kapacitor\n</code></pre> \u200b\u5728\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\u540e\u200b\uff0c\u200b\u6267\u884c\u200bbuild\u200b\u7684\u200bshell\u200b\u811a\u672c\u200b<code>./build.sh --package</code> \u200b\u8fdb\u884c\u200b\u81ea\u52a8\u200b\u6253\u5305\u200b\u53ca\u200b\u955c\u50cf\u200b\u6784\u5efa\u200b\uff0c\u200b\u9700\u200b\u7b49\u5f85\u200b\u8f83\u957f\u65f6\u95f4\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_5","title":"\u6d4b\u8bd5","text":"<p>\u200b\u66f4\u6362\u200b\u4e3b\u673a\u200b\uff0c\u200b\u90e8\u7f72\u200b\u6253\u5305\u200b\u597d\u200b\u7684\u200bdeb\u200b\u5305\u200b\u548c\u200brpm\u200b\u5305\u200b <code>sudo rpm -ivh --force kapacitor-1.6.6~7989708-0.loongarch64.rpm</code> <pre><code>[wwj@node01 tmp]$ kapacitord\n\n'##:::'##::::'###::::'########:::::'###:::::'######::'####:'########::'#######::'########::\n ##::'##::::'## ##::: ##.... ##:::'## ##:::'##... ##:. ##::... ##..::'##.... ##: ##.... ##:\n ##:'##::::'##:. ##:: ##:::: ##::'##:. ##:: ##:::..::: ##::::: ##:::: ##:::: ##: ##:::: ##:\n #####::::'##:::. ##: ########::'##:::. ##: ##:::::::: ##::::: ##:::: ##:::: ##: ########::\n ##. ##::: #########: ##.....::: #########: ##:::::::: ##::::: ##:::: ##:::: ##: ##.. ##:::\n ##:. ##:: ##.... ##: ##:::::::: ##.... ##: ##::: ##:: ##::::: ##:::: ##:::: ##: ##::. ##::\n ##::. ##: ##:::: ##: ##:::::::: ##:::: ##:. ######::'####:::: ##::::. #######:: ##:::. ##:\n..::::..::..:::::..::..:::::::::..:::::..:::......:::....:::::..::::::.......:::..:::::..::\n\n2023/08/08 14:37:16 Using configuration at: /etc/kapacitor/kapacitor.conf\n</code></pre></p> <p><code>sudo dpkg -i  kapacitor_1.6.6~7989708-0_loongarch64.deb</code> <pre><code>[wwj@node01 tmp]$ kapacitord\n\n'##:::'##::::'###::::'########:::::'###:::::'######::'####:'########::'#######::'########::\n ##::'##::::'## ##::: ##.... ##:::'## ##:::'##... ##:. ##::... ##..::'##.... ##: ##.... ##:\n ##:'##::::'##:. ##:: ##:::: ##::'##:. ##:: ##:::..::: ##::::: ##:::: ##:::: ##: ##:::: ##:\n #####::::'##:::. ##: ########::'##:::. ##: ##:::::::: ##::::: ##:::: ##:::: ##: ########::\n ##. ##::: #########: ##.....::: #########: ##:::::::: ##::::: ##:::: ##:::: ##: ##.. ##:::\n ##:. ##:: ##.... ##: ##:::::::: ##.... ##: ##::: ##:: ##::::: ##:::: ##:::: ##: ##::. ##::\n ##::. ##: ##:::: ##: ##:::::::: ##:::: ##:. ######::'####:::: ##::::. #######:: ##:::. ##:\n..::::..::..:::::..::..:::::::::..:::::..:::......:::....:::::..::::::.......:::..:::::..::\n\n2023/08/08 14:27:28 Using configuration at: /etc/kapacitor/kapacitor.conf\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kapacitor/#_6","title":"\u9644\u5f55","text":"<p>\u200b\u5269\u4f59\u200bgo.mod\u200b\u548c\u200bgo.sum\u200b\u90e8\u5206\u200b\u53d8\u66f4\u200b\u5982\u4e0b\u200b\uff1a     <pre><code>diff --git a/go.mod b/go.mod\nindex e1a6e79..f5ded55 100644\n--- a/go.mod\n+++ b/go.mod\n@@ -21,6 +21,7 @@ require (\n        github.com/google/go-cmp v0.5.7\n        github.com/google/uuid v1.3.0\n        github.com/gorhill/cronexpr v0.0.0-20180427100037-88b0669f7d75\n+       github.com/h2non/gock v1.2.0\n        github.com/influxdata/cron v0.0.0-20201006132531-4bb0a200dcbe\n        github.com/influxdata/flux v0.171.0\n        github.com/influxdata/httprouter v1.3.1-0.20191122104820-ee83e2772f69\n@@ -45,12 +46,12 @@ require (\n        github.com/serenize/snaker v0.0.0-20161123064335-543781d2b79b\n        github.com/shurcooL/markdownfmt v0.0.0-20170214213350-10aae0a270ab\n        github.com/spaolacci/murmur3 v0.0.0-20180118202830-f09979ecbc72\n-       github.com/stretchr/testify v1.7.0\n+       github.com/stretchr/testify v1.8.1\n        github.com/uber/jaeger-client-go v2.28.0+incompatible\n        github.com/urfave/cli/v2 v2.3.0\n        github.com/xdg/scram v0.0.0-20180814205039-7eeb5667e42c\n        github.com/zeebo/mwc v0.0.4\n-       go.etcd.io/bbolt v1.3.5\n+       go.etcd.io/bbolt v1.3.7\n        go.uber.org/zap v1.16.0\n        golang.org/x/crypto v0.0.0-20220214200702-86341886e292\n        golang.org/x/tools v0.1.11-0.20220513221640-090b14e8501f\n@@ -143,7 +144,6 @@ require (\n        github.com/googleapis/gax-go/v2 v2.0.5 // indirect\n        github.com/googleapis/gnostic v0.4.1 // indirect\n        github.com/gophercloud/gophercloud v0.17.0 // indirect\n-       github.com/h2non/gock v1.2.0 // indirect\n        github.com/h2non/parth v0.0.0-20190131123155-b4df798d6542 // indirect\n        github.com/hashicorp/consul/api v1.8.1 // indirect\n        github.com/hashicorp/errwrap v1.0.0 // indirect\n@@ -232,7 +232,7 @@ require (\n        golang.org/x/net v0.0.0-20220520000938-2e3eb7b945c2 // indirect\n        golang.org/x/oauth2 v0.0.0-20210514164344-f6687ab2804c // indirect\n        golang.org/x/sync v0.0.0-20210220032951-036812b2e83c // indirect\n-       golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e // indirect\n+       golang.org/x/sys v0.10.0 // indirect\n        golang.org/x/term v0.0.0-20210927222741-03fcf44c2211 // indirect\n        golang.org/x/text v0.3.7 // indirect\n        golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba // indirect\ndiff --git a/go.sum b/go.sum\nindex eb605ef..281944e 100644\n--- a/go.sum\n+++ b/go.sum\n@@ -1038,6 +1038,7 @@ github.com/nats-io/nkeys v0.1.3/go.mod h1:xpnFELMwJABBLVhffcfd1MZx6VsNRFpEugbxzi\n github.com/nats-io/nuid v1.0.0/go.mod h1:19wcPz3Ph3q0Jbyiqsd0kePYG7A95tJPxeL+1OSON2c=\n github.com/nats-io/nuid v1.0.1 h1:5iA8DT8V7q8WK2EScv2padNa/rTESc1KdnPw4TC2paw=\n github.com/nats-io/nuid v1.0.1/go.mod h1:19wcPz3Ph3q0Jbyiqsd0kePYG7A95tJPxeL+1OSON2c=\n+github.com/nbio/st v0.0.0-20140626010706-e9e8d9816f32 h1:W6apQkHrMkS0Muv8G/TipAy/FJl/rCYT0+EuS8+Z0z4=\n github.com/nbio/st v0.0.0-20140626010706-e9e8d9816f32/go.mod h1:9wM+0iRr9ahx58uYLpLIr5fm8diHn0JbqRycJi6w0Ms=\n github.com/niemeyer/pretty v0.0.0-20200227124842-a10e7caefd8e/go.mod h1:zD1mROLANZcx1PVRCS0qkT7pwLkGfwJo4zjcN/Tysno=\n github.com/nxadm/tail v1.4.4 h1:DQuhQpB1tVlglWS2hLQ5OV6B5r8aGxSrPc5Qo6uTN78=\n@@ -1261,8 +1262,10 @@ github.com/streadway/amqp v0.0.0-20190827072141-edfb9018d271/go.mod h1:AZpEONHx3\n github.com/streadway/handy v0.0.0-20190108123426-d5acb3125c2a/go.mod h1:qNTQ5P5JnDBl6z3cMAg/SywNDC5ABu5ApDIw6lUbRmI=\n github.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\n github.com/stretchr/objx v0.1.1/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=\n-github.com/stretchr/objx v0.2.0 h1:Hbg2NidpLE8veEBkEZTL3CvlkUIVzuU9jDplZO54c48=\n github.com/stretchr/objx v0.2.0/go.mod h1:qt09Ya8vawLte6SNmTgCsAVtYtaKzEcn8ATUoHMkEqE=\n+github.com/stretchr/objx v0.4.0/go.mod h1:YvHI0jy2hoMjB+UWwv71VJQ9isScKT/TqJzVSSt89Yw=\n+github.com/stretchr/objx v0.5.0 h1:1zr/of2m5FGMsad5YfcqgdqdWrIhu+EBEJRhR1U7z/c=\n+github.com/stretchr/objx v0.5.0/go.mod h1:Yh+to48EsGEfYuaHDzXPcE3xhTkx73EhmCGUpEOglKo=\n github.com/stretchr/testify v1.2.0/go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=\n github.com/stretchr/testify v1.2.1/go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=\n github.com/stretchr/testify v1.2.2/go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=\n@@ -1270,8 +1273,11 @@ github.com/stretchr/testify v1.3.0/go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UV\n github.com/stretchr/testify v1.4.0/go.mod h1:j7eGeouHqKxXV5pUuKE4zz7dFj8WfuZ+81PSLYec5m4=\n github.com/stretchr/testify v1.5.1/go.mod h1:5W2xD1RspED5o8YsWQXVCued0rvSQ+mT+I5cxcmMvtA=\n github.com/stretchr/testify v1.6.1/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=\n-github.com/stretchr/testify v1.7.0 h1:nwc3DEeHmmLAfoZucVR881uASk0Mfjw8xYJ99tb5CcY=\n github.com/stretchr/testify v1.7.0/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=\n+github.com/stretchr/testify v1.7.1/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=\n+github.com/stretchr/testify v1.8.0/go.mod h1:yNjHg4UonilssWZ8iaSj1OCr/vHnekPRkoO+kdMU+MU=\n+github.com/stretchr/testify v1.8.1 h1:w7B6lhMri9wdJUVmEZPGGhZzrYTPvgJArz7wNPgYKsk=\n+github.com/stretchr/testify v1.8.1/go.mod h1:w2LPCIKwWwSfY2zedu0+kehJoqGctiVI29o6fzry7u4=\n github.com/subosito/gotenv v1.2.0 h1:Slr1R9HxAlEKefgq5jn9U+DnETlIUa6HfgEzj0g5d7s=\n github.com/subosito/gotenv v1.2.0/go.mod h1:N0PQaV/YGNqwC0u51sEeR/aUtSLEXKX9iv69rRypqCw=\n github.com/tcnksm/go-input v0.0.0-20180404061846-548a7d7a8ee8/go.mod h1:IlWNj9v/13q7xFbaK4mbyzMNwrZLaWSHx/aibKIZuIg=\n@@ -1348,8 +1354,9 @@ github.com/zeebo/mwc v0.0.4/go.mod h1:qNHfgp/ZCpQNcJHwKcO5EP3VgaBrW6DPohsK4Qfyxx\n github.com/zeebo/xxh3 v0.13.0/go.mod h1:AQY73TOrhF3jNsdiM9zZOb8MThrYbZONHj7ryDBaLpg=\n go.etcd.io/bbolt v1.3.2/go.mod h1:IbVyRI1SCnLcuJnV2u8VeU0CEYM7e686BmAb1XKL+uU=\n go.etcd.io/bbolt v1.3.3/go.mod h1:IbVyRI1SCnLcuJnV2u8VeU0CEYM7e686BmAb1XKL+uU=\n-go.etcd.io/bbolt v1.3.5 h1:XAzx9gjCb0Rxj7EoqcClPD1d5ZBxZJk0jbuoPHenBt0=\n go.etcd.io/bbolt v1.3.5/go.mod h1:G5EMThwa9y8QZGBClrRx5EY+Yw9kAhnjy3bSjsnlVTQ=\n+go.etcd.io/bbolt v1.3.7 h1:j+zJOnnEjF/kyHlDDgGnVL/AIqIJPq8UoB2GSNfkUfQ=\n+go.etcd.io/bbolt v1.3.7/go.mod h1:N9Mkw9X8x5fupy0IKsmuqVtoGDyxsaDlbk4Rd05IAQw=\n go.etcd.io/etcd v0.0.0-20191023171146-3cf2f69b5738/go.mod h1:dnLIgRNXwCJa5e+c6mIZCrds/GIG4ncV9HhK5PX7jPg=\n go.mongodb.org/mongo-driver v1.0.3/go.mod h1:u7ryQJ+DOzQmeO7zB6MHyr8jkEQvC8vH7qLUO4lqsUM=\n go.mongodb.org/mongo-driver v1.1.1/go.mod h1:u7ryQJ+DOzQmeO7zB6MHyr8jkEQvC8vH7qLUO4lqsUM=\n@@ -1679,8 +1686,9 @@ golang.org/x/sys v0.0.0-20210616045830-e2b7044e8c71/go.mod h1:oPkhp1MJrh7nUepCBc\n golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\n golang.org/x/sys v0.0.0-20211025201205-69cdffdb9359/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\n golang.org/x/sys v0.0.0-20211117180635-dee7805ff2e1/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\n-golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e h1:fLOSk5Q00efkSvAm+4xcoXD+RRmLmmulPn5I3Y9F2EM=\n golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\n+golang.org/x/sys v0.10.0 h1:SqMFp9UcQJZa+pmYuAKjd9xq1f0j5rLcDIk0mj4qAsA=\n+golang.org/x/sys v0.10.0/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=\n golang.org/x/term v0.0.0-20201117132131-f5c789dd3221/go.mod h1:Nr5EML6q2oocZ2LXRh80K7BxOlk5/8JxuGnuhpl+muw=\n golang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1/go.mod h1:bj7SfCRtBDWHUb9snDiAeCFNEtKQo2Wmx5Cou7ajbmo=\n golang.org/x/term v0.0.0-20210927222741-03fcf44c2211 h1:JGgROgKl9N8DuW20oFS5gxc+lE67/N3FcwmBPMe7ArY=\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/","title":"kiali","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_1","title":"\u73af\u5883\u200b\u51c6\u5907","text":"<ul> <li>loongson loongarch64\u200b\u67b6\u6784\u200b\u7cfb\u7edf\u200b</li> <li>\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b golang(&gt;=1.14), git, docker,NPM, make</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_2","title":"\u9879\u76ee\u5206\u6790","text":"<p>kiali\u200b\u662f\u200b\u4e00\u6b3e\u200bistio\u200b\u670d\u52a1\u200b\u7f51\u683c\u200b\u53ef\u89c6\u5316\u200b\u5de5\u5177\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u670d\u52a1\u200b\u62d3\u6251\u56fe\u200b\u3001\u200b\u5168\u200b\u94fe\u8def\u200b\u8ddf\u8e2a\u200b\u3001\u200b\u6307\u6807\u200b\u8981\u6d4b\u200b\u3001\u200b\u914d\u7f6e\u200b\u6821\u9a8c\u200b\u3001\u200b\u5065\u5eb7\u68c0\u67e5\u200b\u7b49\u200b\u529f\u80fd\u200b\u3002kiali\u200b\u6e90\u7801\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_3","title":"\u7248\u672c\u4fe1\u606f","text":"<ul> <li>v1.26.0 -\u200b\u5176\u4ed6\u200b\u7248\u672c\u200b\u79fb\u690d\u200b\u53c2\u8003\u200b\u8fd9\u91cc\u200b\u7684\u200b\u4fee\u6539\u200b\u5373\u53ef\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_4","title":"\u7f16\u8bd1\u200b\u51c6\u5907","text":"<pre><code>export GOPATH=/source/kiali/kiali \nmkdir -p $GOPATH\ncd $GOPATH\nmkdir -p src/github.com/kiali\ncd src/github.com/kiali\ngit clone git@github.com:kiali/kiali\ngit clone git@github.com:kiali/kiali-operator kiali/operator\ngit clone git@github.com:kiali/helm-charts kiali/helm-charts\nexport PATH=${PATH}:${GOPATH}/bin\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_5","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u5171\u200b\u4fee\u6539\u200b\u4e09\u4e2a\u200b\u6587\u4ef6\u200b\uff1ago.sum, Makefile,deploy/docker/Dockerfile-ubi8-minimal\u3002 \uff081\uff09\u200b\u5220\u9664\u200b go.sum\u200b\u6587\u4ef6\u200b \uff082\uff09Makefile\u200b\u4fee\u6539\u200b <pre><code>--- a/Makefile\n+++ b/Makefile\n@@ -40,7 +40,8 @@ CONTAINER_VERSION ?= dev\n\n # These two vars allow Jenkins to override values.\n QUAY_NAME ?= quay.io/${CONTAINER_NAME}\n-QUAY_TAG = ${QUAY_NAME}:${CONTAINER_VERSION}\n+#QUAY_TAG = ${QUAY_NAME}:${CONTAINER_VERSION}\n+QUAY_TAG = harbor.loongnix.cn/cncf-oa/kiali:v1.26.0 \n</code></pre> \uff083\uff09deploy/docker/Dockerfile-ubi8-minimal\u200b\u4fee\u6539\u200b <pre><code>--- a/deploy/docker/Dockerfile-ubi8-minimal\n+++ b/deploy/docker/Dockerfile-ubi8-minimal\n@@ -1,4 +1,4 @@\n-FROM registry.access.redhat.com/ubi8-minimal\n+FROM harbor.loongnix.cn/mirrorloongsoncontainers/loongnix-server:20-beta11\n\n LABEL maintainer=\"kiali-dev@googlegroups.com\"\n\n@@ -7,8 +7,8 @@ ENV KIALI_HOME=/opt/kiali \\\n\n WORKDIR $KIALI_HOME\n\n-RUN microdnf install -y shadow-utils &amp;&amp; \\\n-    microdnf clean all &amp;&amp; \\\n+RUN dnf install -y shadow-utils &amp;&amp; \\\n+    dnf clean all &amp;&amp; \\\n     rm -rf /var/cache/yum &amp;&amp; \\\n     adduser --uid 1000 kiali\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_6","title":"\u7f16\u8bd1","text":"<pre><code>export GOPROXY=http://goproxy.loongson.cn:3000\ngo env -w GOSUMDB=off\ncd ${GOPATH}/src/github.com/kiali/kiali\nmake build\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kiali/#_7","title":"\u955c\u50cf\u200b\u5236\u4f5c","text":"<pre><code>cd ${GOPATH} /src/github.com/kiali/kiali \nmake container-build\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/","title":"kibana\u200b\u79fb\u690d\u200b\u6587\u6863","text":"<p>kibana\u200b\u4e8c\u8fdb\u5236\u200b\u672c\u8eab\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u53ea\u662f\u200btar\u200b\u5305\u4e2d\u200b\u4f9d\u8d56\u200b\u7684\u200bnode\u200b\u662f\u200b\u7279\u5b9a\u200b\u4e8e\u200b\u67b6\u6784\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fd9\u91cc\u200b\u662f\u200b\u4e0b\u8f7d\u200bx86\u200b\u7684\u200bkibana\u200b\u7684\u200btar\u200b\u5305\u200b\uff0c\u200b\u7136\u540e\u200b\u66ff\u6362\u200b\u5176\u4e2d\u200bnode\u200b\u4e3a\u200bloongarch64\u200b\u67b6\u6784\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#1","title":"1. \u200b\u79fb\u690d\u200b\u7248\u672c","text":"<p>7.10.2</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#2","title":"2. \u200b\u79fb\u690d\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#17102-x86-kibana","title":"\uff081\uff09\u200b\u4e0b\u8f7d\u200b7.10.2 x86 kibana\u200b\u7248\u672c\u200b\uff1a","text":"<p><pre><code>curl -OL https://artifacts.elastic.co/downloads/kibana/kibana-7.10.2-linux-x86_64.tar.gz\n</code></pre> \u200b\u4e0b\u8f7d\u200b\u5b8c\u540e\u200b\u89e3\u538b\u200b     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#210241nodejs","title":"\uff082\uff09\u200b\u4e0b\u8f7d\u200b10.24.1nodejs","text":"<p>\u200b\u67e5\u770b\u200bkibana 7.10.2\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bnode 10.23.1\u200b\u7248\u672c\u200b\uff0c\u200b\u5728\u200bloongarch64\u200b\u67b6\u6784\u200b\u4e0a\u200b\u6ca1\u6709\u200b\u8be5\u200b\u7248\u672c\u200b\uff0c\u200b\u6545\u200b\u4e0b\u8f7d\u200b10.24.1\u200b\u7248\u672c\u200bnode:  http://ftp.loongnix.cn/nodejs/LoongArch/dist/v10.24.1/node-v10.24.1-linux-loong64.tar.gz   \u200b\u5e76\u200b\u89e3\u538b\u200b       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#3node","title":"\uff083\uff09\u200b\u66ff\u6362\u200bnode","text":"<p>\u200b\u5c06\u200b\uff082\uff09\u200b\u4e2d\u200b\u89e3\u538b\u200b\u7684\u200bnode-v10.24.1-linux-loong64 \u200b\u91cd\u547d\u540d\u200b\u4e3a\u200b node\uff0c\u200b\u5e76\u200b\u66ff\u6362\u200bkibana-7.10.2-linux-x86_64 \u200b\u4e2d\u200b\u7684\u200b node \u200b\u76ee\u5f55\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#4packagejson","title":"\uff084\uff09\u200b\u4fee\u6539\u200bpackage.json","text":"<p>\u200b\u5c06\u200b\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200bnode\u200b\u7684\u200b\u7248\u672c\u200b10.23.1\u200b\u4fee\u6539\u200b\u4e3a\u200b10.24.1 </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#5-re2node","title":"\uff085\uff09 \u200b\u4fee\u6539\u200bre2.node\u200b\u4e8c\u8fdb\u5236","text":"<p>\u200b\u8be5\u200b\u4e8c\u8fdb\u5236\u200b\u662f\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\uff0c\u200b\u7f16\u8bd1\u200bLA\u200b\u67b6\u6784\u200b\u7684\u200bre2.node\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u66ff\u6362\u200b/node_modules/re2/build/Release/re2.node\u3002 re2.node\u200b\u7f16\u8bd1\u200b\u65b9\u6cd5\u200b\u89c1\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/node-re2.md</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kibana/#6tar","title":"\uff086\uff09\u200b\u538b\u7f29\u200btar\u200b\u5305","text":"<p>\u200b\u4fee\u6539\u200bkibana-7.10.2-linux-x86_64\u200b\u4e3a\u200bkibana-7.10.2-linux-loongarch64\uff0c\u200b\u5e76\u200b\u538b\u7f29\u200btar\u200b\u5305\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/","title":"kubernetes","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#_1","title":"\u57fa\u672c\u200b\u4fe1\u606f","text":"<p>\u200b\u4ee5\u200b kubernetes 1.20.15 \u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u8fdb\u884c\u200b kubernetes on loongarch64 \u200b\u79fb\u690d\u200b\u5de5\u4f5c\u200b\u3002 \u200b\u79fb\u690d\u200b\u540e\u200b\u7684\u200b\u4ee3\u7801\u200b\u5730\u5740\u200b<code>https://github.com/Loongson-Cloud-Community/kubernetes/tree/1.20.15-loong64</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#_2","title":"\u4e0b\u8f7d\u200b\u4ee3\u7801","text":"<p>\u200b\u4e0b\u8f7d\u200b kubernetes \u200b\u6e90\u4ee3\u7801\u200b\u81f3\u200b <code>$GOPATH/src/k8s.io</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#golangorgxsys-golangorgxnet","title":"\u624b\u52a8\u200b\u66f4\u65b0\u200b golang.org/x/sys \u200b\u548c\u200b golang.org/x/net","text":"<p>\u200b\u56e0\u4e3a\u200b kubernetes vendor \u200b\u4e0b\u200b sys \u200b\u548c\u200b net \u200b\u7248\u672c\u200b\u8fc7\u4f4e\u200b\uff0c\u200b\u5347\u7ea7\u200b\u5230\u200b\u9ad8\u200b\u7248\u672c\u200b\u4ee5\u200b\u652f\u6301\u200b loong64\u3002 <pre><code>curl -OL https://github.com/golang/sys/archive/refs/tags/v0.5.0.zip\ncurl -OL https://github.com/golang/net/archive/refs/tags/v0.5.0.zip\n\nhttps://github.com/Loongson-Cloud-Community/kubernetes/commit/f44a834fe82a6a0399542ea76053eb858c378db0\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#vendor-mod-loong64","title":"\u589e\u52a0\u200b vendor \u200b\u4e0b\u200b\u5176\u4ed6\u200b mod \u200b\u5305\u200b loong64 \u200b\u652f\u6301","text":"<p>\u200b\u53c2\u8003\u200b <code>https://github.com/Loongson-Cloud-Community/kubernetes/commit/acd571fb7d45ff5ad21109f57e1ea2ec2d51ab7c</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#loong64","title":"\u4e3a\u200b\u6784\u5efa\u200b\u811a\u672c\u200b\u589e\u52a0\u200b loong64 \u200b\u652f\u6301","text":"<p>\u200b\u53c2\u8003\u200b<code>https://github.com/Loongson-Cloud-Community/kubernetes/commit/71abd129499fc280fed276d4929b7e35617738ff</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubernetes/#_3","title":"\u7f16\u8bd1","text":"<ol> <li>kubernetes \u200b\u9700\u8981\u200b\u5c06\u200b\u6e90\u7801\u200b\u79fb\u52a8\u200b\u5230\u200b $GOPATH/src/k8s.io \u200b\u76ee\u5f55\u200b\u4e0b\u200b</li> <li>\u200b\u6267\u884c\u200b <code>sudo KUBE_BUILD_PLATFORMS=linux/loong64 KUBE_GIT_TREE_STATE=\"clean\" make release</code> \u200b\u5728\u200b _output \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b</li> <li>\u200b\u6267\u884c\u200b <code>sudo KUBE_BUILD_PLATFORMS=linux/loong64 KUBE_GIT_TREE_STATE=\"clean\" KUBE_BUILD_CONFORMANCE=n KUBE_BUILD_HYPERKUBE=n make release-images</code> \u200b\u5728\u200b _output \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u955c\u50cf\u200b tar \u200b\u5305\u200b</li> </ol>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/","title":"kubevirt","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_1","title":"\u79fb\u690d\u200b\u7248\u672c","text":"<pre><code>v0.35.0\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_2","title":"\u79fb\u690d\u200b\u73af\u5883","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_3","title":"\u7cfb\u7edf\u200b\u4fe1\u606f","text":"<pre><code>ID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_4","title":"\u5185\u6838\u200b\u4fe1\u606f","text":"<pre><code>4.19.190-2.1.lns8.loongarch64\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_5","title":"\u7f16\u8bd1\u5668","text":"<pre><code>go version 1.19\ngcc version 8.3.0\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_6","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_7","title":"\u5b89\u88c5\u200b\u4f9d\u8d56\u200b\u9879","text":"<pre><code>yum install -y make golang-1.19 git glibc-static libvirt-devel rsync\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_8","title":"\u6e90\u7801\u200b\u9002\u914d","text":"<p>kubevirt\u200b\u6e90\u7801\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u7ec4\u4ef6\u200b\u548c\u200b\u5de5\u5177\u200b\u8f83\u200b\u591a\u200b\uff0c\u200b\u672c\u6b21\u200b\u9002\u914d\u200b\u4ee5\u200b\u5236\u4f5c\u200bkubevirt\u200b\u90e8\u5206\u200b\u5bb9\u5668\u200b\u955c\u50cf\u200b\u4e3a\u200b\u76ee\u7684\u200b\uff0c\u200b\u5177\u4f53\u200b\u4e3a\u200b<code>virt-api</code>\uff0c<code>virt-operator</code>\uff0c<code>virt-handler</code>\uff0c<code>virt-controller</code>\uff0c<code>virt-launcher</code>\uff0c\u200b\u6240\u4ee5\u200b\u76ee\u524d\u200b\u9002\u914d\u200b\u540e\u200b\u7684\u200b\u4ee3\u7801\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u80fd\u200b\u6784\u5efa\u200b\u6240\u6709\u200b\u7684\u200b\u7ec4\u4ef6\u200b\u548c\u200b\u5de5\u5177\u200b\u3002 <pre><code>diff --git a/pkg/virt-config/virt-config.go b/pkg/virt-config/virt-config.go\nindex ef241d4df..74dfa1ac3 100644\n--- a/pkg/virt-config/virt-config.go\n+++ b/pkg/virt-config/virt-config.go\n@@ -42,10 +42,12 @@ const (\n        MigrationCompletionTimeoutPerGiB         int64  = 800\n        DefaultAMD64MachineType                         = \"q35\"\n        DefaultPPC64LEMachineType                       = \"pseries\"\n+       DefaultLOONG64MachineType                       = \"loongson7a_v1.0\"\n        DefaultCPURequest                               = \"100m\"\n        DefaultMemoryOvercommit                         = 100\n        DefaultAMD64EmulatedMachines                    = \"q35*,pc-q35*\"\n        DefaultPPC64LEEmulatedMachines                  = \"pseries*\"\n+       DefaultLOONG64EmulatedMachines                  = \"loongson7a*\"\n        DefaultLessPVCSpaceToleration                   = 10\n        DefaultNodeSelectors                            = \"\"\n        DefaultNetworkInterface                         = \"bridge\"\n@@ -69,6 +71,9 @@ func getDefaultMachinesForArch() (string, string) {\n        if runtime.GOARCH == \"ppc64le\" {\n                return DefaultPPC64LEMachineType, DefaultPPC64LEEmulatedMachines\n        }\n+       if runtime.GOARCH == \"loong64\" || runtime.GOARCH == \"loongarch64\" {\n+               return DefaultLOONG64MachineType, DefaultLOONG64EmulatedMachines\n+       }\n        return DefaultAMD64MachineType, DefaultAMD64EmulatedMachines\n }\n</code></pre> <pre><code>diff --git a/pkg/virt-launcher/virtwrap/api/converter.go b/pkg/virt-launcher/virtwrap/api/converter.go\nindex 12fbf987c..b06df9a5e 100644\n--- a/pkg/virt-launcher/virtwrap/api/converter.go\n+++ b/pkg/virt-launcher/virtwrap/api/converter.go\n@@ -739,31 +739,44 @@ func Convert_v1_VirtualMachine_To_api_Domain(vmi *v1.VirtualMachineInstance, dom\n                                Value: string(vmi.Spec.Domain.Firmware.UUID),\n                        },\n                }\n+               if vmi.Spec.Domain.Firmware.Bootloader != nil &amp;&amp; vmi.Spec.Domain.Firmware.Bootloader.BIOS != nil {\n+                       domain.Spec.OS.BootLoader = &amp;Loader{\n+                               Path:     \"/usr/share/qemu-kvm/loongarch_bios.bin\",\n+                               ReadOnly: \"yes\",\n+                               Secure:   \"no\",\n+                               Type:     \"rom\",\n+                       }\n+\n+                       domain.Spec.OS.NVRam = &amp;NVRam{\n+                               NVRam:    filepath.Join(\"/tmp\", domain.Spec.Name),\n+                               Template: \"/usr/share/qemu-kvm/loongarch_bios.bin\",\n+                       }\n+               }\n\n                if vmi.Spec.Domain.Firmware.Bootloader != nil &amp;&amp; vmi.Spec.Domain.Firmware.Bootloader.EFI != nil {\n</code></pre> <pre><code>diff --git a/pkg/virt-launcher/virtwrap/api/defaults.go b/pkg/virt-launcher/virtwrap/api/defaults.go\nindex fbd30ac25..d6043a0b5 100644\n--- a/pkg/virt-launcher/virtwrap/api/defaults.go\n+++ b/pkg/virt-launcher/virtwrap/api/defaults.go\n@@ -26,8 +26,10 @@ func (d *Defaulter) SetDefaults_OSType(ostype *OSType) {\n        if ostype.Arch == \"\" {\n                if d.Architecture == \"ppc64le\" {\n                        ostype.Arch = \"ppc64le\"\n-               } else {\n+               } else if d.Architecture == \"amd64\"{\n                        ostype.Arch = \"x86_64\"\n+               } else {\n+                       ostype.Arch = \"loongarch64\"\n                }\n        }\n\n@@ -36,7 +38,11 @@ func (d *Defaulter) SetDefaults_OSType(ostype *OSType) {\n        if ostype.Machine == \"\" {\n                if d.Architecture == \"ppc64le\" {\n                        ostype.Machine = \"pseries\"\n-               } else {\n+               }else if d.Architecture == \"loong64\" {\n+                       ostype.Machine = \"loongson7a_v1.0\"\n+               }else if d.Architecture == \"loongarch64\" {\n+                       ostype.Machine = \"loongson7a_v1.0\"\n+               }else {\n                        ostype.Machine = \"q35\"\n                }\n        }\n</code></pre> \u200b\u4e0b\u8f7d\u200b\u5b8c\u6574\u200b\u7684\u200b\u4ee3\u7801\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_9","title":"\u6784\u5efa","text":"<p>\u200b\u5728\u200b<code>kubevirt</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b<code>make go-build</code>\uff0c<code>cmd</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6240\u6709\u200b\u7f16\u8bd1\u200b\u751f\u6210\u200b\u7684\u200b\u6587\u4ef6\u200b\u5b58\u653e\u200b\u5728\u200b<code>_out</code>\u200b\u76ee\u5f55\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u5236\u4f5c\u200b\u955c\u50cf\u200b\u65f6\u200b\u9700\u8981\u200b\u7528\u5230\u200b<code>csv-generator</code>\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u5728\u200b<code>tool/csv-generator</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5b83\u200b\u7684\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\u4e3a\u200b\uff1a <pre><code>GOPROXY=off GOFLAGS=-mod=vendor CGO_ENABLED=0 go build\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_10","title":"\u955c\u50cf\u200b\u5236\u4f5c","text":"<p>\u200b\u53c2\u8003\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/dockerfiles/tree/main/kubevirt          \u200b\u5176\u4e2d\u200b\u5728\u200b\u5236\u4f5c\u200bvirt-launcher\u200b\u955c\u50cf\u200b\u65f6\u200b\u4f9d\u8d56\u200b\u5230\u200b\u4e86\u200blibvirt rpm\u200b\u5305\u200b\uff0c\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b\u65b9\u6cd5\u200b\u5982\u4e0b\u200b\uff1a cmd/virt-launcher/BUILD.bazel(\u200b\u7528\u6765\u200b\u5236\u4f5c\u200b\u955c\u50cf\u200b): <pre><code>container_image(\n    name = \"version-container\",\n    directory = \"/\",\n    files = [\"//:get-version\"],\n    tars = select({\n        \"@io_bazel_rules_go//go/platform:linux_arm64\": [\n            \":libvirt-config\",\n            \":passwd-tar\",\n            \":nsswitch-tar\",\n            \":qemu-kvm-modules-dir-tar\",\n            \"//rpm:launcherbase_aarch64\",       # \u200b\u6307\u5b9a\u200b\u4f9d\u8d56\u200b\u5230\u200b\u4e86\u200brpm\u200b\u4e2d\u200blauncherbase_aarch64,\u200b\u5728\u200brpm/BUILD.bazel\u200b\u6587\u4ef6\u200b\u4e2d\u6709\u200b\u5b9a\u4e49\u200b\n        ],\n  .......\n    }),\n)\n\ncontainer_image(\n    name = \"virt-launcher-image\",\n    architecture = select({\n        \"@io_bazel_rules_go//go/platform:linux_arm64\": \"arm64\",\n        \"//conditions:default\": \"amd64\",\n    }),\n    base = \":version-container\",\n    entrypoint = [\"/usr/bin/virt-launcher\"],\n    tars = [\":setcaps\"],\n    visibility = [\"//visibility:public\"],\n)\n</code></pre></p> <p>rpm/BUILD.bazel\uff1a      <pre><code>rpmtree(\n    name = \"launcherbase_aarch64\",\n    capabilities = {\n        \"/usr/libexec/qemu-kvm\": [\n            \"cap_net_bind_service\",\n        ],\n    },\n.......\n        \"@libvirt-client-0__8.0.0-2.module_el8.6.0__plus__1087__plus__b42c8331.aarch64//rpm\",\n        \"@libvirt-daemon-0__8.0.0-2.module_el8.6.0__plus__1087__plus__b42c8331.aarch64//rpm\",\n        \"@libvirt-daemon-driver-qemu-0__8.0.0-2.module_el8.6.0__plus__1087__plus__b42c8331.aarch64//rpm\",\n        \"@libvirt-libs-0__8.0.0-2.module_el8.6.0__plus__1087__plus__b42c8331.aarch64//rpm\",\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/kubevirt/#_11","title":"\u90e8\u7f72","text":"<p>kubevirt\u200b\u5355\u200b\u8282\u70b9\u200b\u90e8\u7f72\u200b\u6587\u6863\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/","title":"logstash","text":"<p>\u200b\u672c\u6587\u200b\u4ee5\u200b\u6784\u5efa\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b logstash 7.13.0 \u200b\u955c\u50cf\u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u8bf4\u660e\u200b logstash 7.13.0 \u200b\u5728\u200b\u9f99\u82af\u200b\u5e73\u53f0\u200b\u4e0a\u200b\u7684\u200b\u79fb\u690d\u200b\u601d\u8def\u200b\u53ca\u200b\u8be6\u7ec6\u200b\u8fc7\u7a0b\u200b\u8bb0\u5f55\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#_1","title":"\u79fb\u690d\u200b\u601d\u8def","text":"<p>\u200b\u9996\u5148\u200b\u627e\u5230\u200b Dockerfile https://github.com/elastic/dockerfiles/blob/v7.13.0/logstash/Dockerfile \u200b\u6574\u4e2a\u200b Dockerfile \u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u5c31\u662f\u200b\u4e0b\u8f7d\u200b\u4e00\u4e2a\u200b\u5bf9\u5e94\u200b ARCH \u200b\u7248\u672c\u200b\u7684\u200b logstash release tar \u200b\u5305\u200b\u3002 <pre><code># Add Logstash itself.\nRUN curl -Lo - https://artifacts.elastic.co/downloads/logstash/logstash-7.13.0-linux-$(arch).tar.gz | \\\n    tar zxf - -C /usr/share &amp;&amp; \\\n    mv /usr/share/logstash-7.13.0 /usr/share/logstash &amp;&amp; \\\n    chown --recursive logstash:logstash /usr/share/logstash/ &amp;&amp; \\\n    chown -R logstash:root /usr/share/logstash &amp;&amp; \\\n    chmod -R g=u /usr/share/logstash &amp;&amp; \\\n    mkdir /licenses/ &amp;&amp; \\\n    mv /usr/share/logstash/NOTICE.TXT /licenses/NOTICE.TXT &amp;&amp; \\\n    mv /usr/share/logstash/LICENSE.txt /licenses/LICENSE.txt &amp;&amp; \\\n    find /usr/share/logstash -type d -exec chmod g+s {} \\; &amp;&amp; \\\n    ln -s /usr/share/logstash /opt/logstash                                                                                                                                                                                                                                                                                                                                                                    \n</code></pre></p> <p>\u200b\u8fd9\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b tar \u200b\u5305\u662f\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6784\u5efa\u200b\u7684\u200b <pre><code>./gradlew assembleTarDistribution\n./gradlew assembleZipDistribution\n</code></pre> https://github.com/elastic/logstash/tree/v7.13.0#building-artifacts</p> <p>\u200b\u8fd9\u91cc\u200b\u5e76\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u7684\u200b\u65b9\u5f0f\u200b\u76f4\u63a5\u200b\u6784\u5efa\u200b logstash\u3002\u200b\u56e0\u4e3a\u200b logstash \u200b\u662f\u200b\u89e3\u91ca\u6027\u200b\u8bed\u8a00\u200b\uff0c\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u4f1a\u200b\u4e0b\u8f7d\u200b\u7f16\u8bd1\u200b\u597d\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u6587\u4ef6\u200b\u6211\u4eec\u200b\u65e0\u6cd5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\uff0c\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u529e\u6cd5\u200b\u66ff\u6362\u200b\u3002\u200b\u6240\u4ee5\u200b\uff0c\u200b\u8003\u8651\u200b logstash \u200b\u7684\u200b\u8fd0\u884c\u200b\u539f\u7406\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u57fa\u4e8e\u200bx86 \u200b\u7248\u672c\u200b\u7684\u200b logstash release tar \u200b\u5305\u200b\uff0c\u200b\u66ff\u6362\u200b\u6389\u200b\u5176\u4e2d\u200b\u7684\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u6587\u4ef6\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#_2","title":"\u54ea\u4e9b\u200b\u662f\u200b\u67b6\u6784\u200b\u76f8\u5173","text":"<p>\u200b\u6839\u636e\u200b logstash \u200b\u7ed3\u6784\u200b\uff0clogstash \u200b\u662f\u200b\u7531\u200b jruby \u200b\u9a71\u52a8\u200b\uff0cjruby \u200b\u7531\u200b java \u200b\u9a71\u52a8\u200b\u3002\u200b\u9664\u6b64\u4e4b\u5916\u200b\uff0cjruby \u200b\u4f7f\u7528\u200b\u4e86\u200b jnr \u200b\u6280\u672f\u200b\u8c03\u7528\u200b c \u200b\u5e93\u4ee5\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b\u4e00\u4e9b\u200b\u7cfb\u7edf\u200b\u529f\u80fd\u200b\u3002\u200b\u6211\u4eec\u200b\u80fd\u200b\u5224\u65ad\u200b\u51fa\u200b\u81f3\u5c11\u200b jruby \u200b\u548c\u200b jnr \u200b\u90e8\u5206\u200b\u662f\u200b\u9700\u8981\u200b\u79fb\u690d\u200b\u7684\u200b\uff0c\u200b\u5176\u200b\u5173\u7cfb\u200b\u56fe\u200b\u5982\u4e0b\u200b\u3002\u200b\u57fa\u4e8e\u200b\u8fd9\u4e2a\u200b\u5173\u7cfb\u200b\u56fe\u200b\uff0c\u200b\u6211\u4eec\u200b\u5e94\u8be5\u200b<code>\u200b\u4ece\u200b\u4e0b\u200b\u5f80\u200b\u4e0a\u200b</code>\u200b\u4f9d\u6b21\u200b\u7f16\u8bd1\u200b\u79fb\u690d\u200b\u3002\u200b\u5176\u4e2d\u200b jnr \u200b\u53ea\u662f\u200b\u4e00\u4e2a\u200b\u6982\u5ff5\u200b\uff0c\u200b\u4e0d\u662f\u200b\u4e00\u4e2a\u200b\u5177\u4f53\u200b\u7684\u200b\u9879\u76ee\u200b\u3002                                                                              </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#_3","title":"\u7248\u672c\u4fe1\u606f","text":"<p>logstash https://github.com/elastic/logstash/blob/v7.13.0/versions.yml#L15 jruby https://github.com/jruby/jruby/blob/9.2.16.0/core/pom.rb#L46 https://github.com/jruby/jruby/blob/master/pom.xml#L116 \u200b\u6839\u636e\u200b\u4ee5\u4e0a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u786e\u8ba4\u200b\u9700\u8981\u200b\u79fb\u690d\u200b\u7684\u200b\u7ec4\u4ef6\u200b\u7248\u672c\u200b\uff0c\u200b\u7136\u540e\u200b\u79fb\u690d\u200b\u5404\u4e2a\u200b\u7ec4\u4ef6\u200b - jffi 1.3.1 - jnr-ffi 2.2.1 - jnr-constants 0.10.1 - jnr-posix 3.1.4 - jruby 9.2.16.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#jffi","title":"jffi","text":"<p>https://github.com/jnr/jffi/tree/jffi-1.3.1 \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <code>git clone -b jffi-1.3.1 --depth=1 https://github.com/jnr/jffi.git</code></p> <p>jffi \u200b\u662f\u200b\u4ee5\u200b libffi \u200b\u4e3a\u200b\u57fa\u7840\u200b\u5c01\u88c5\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9996\u5148\u200b\u9700\u8981\u200b\u66ff\u6362\u200b\u9f99\u82af\u200b\u9002\u914d\u200b\u7684\u200b libffi\u3002\u200b\u7136\u540e\u200b\u518d\u200b\u505a\u200b\u4e00\u4e9b\u200b\u5c0f\u200b\u7684\u200b\u4fee\u6539\u200b\u5373\u53ef\u200b\u3002 \u200b\u5177\u4f53\u200b\u53c2\u8003\u200b https://gitee.com/merore/jffi/commit/9987e94ce56612acd8cfeb0c3cec5adefb905c1c</p> <p>\u200b\u51c6\u5907\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b <pre><code>yum install  ant ant-junit java gcc gcc-c++ make diffutils rpmdevtools automake texinfo maven\n</code></pre></p> <p>\u200b\u8fd0\u884c\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u5168\u90e8\u200b\u901a\u8fc7\u200b <pre><code>ant test\n</code></pre></p> <p>\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff08maven\u200b\u7ec4\u7ec7\u200b\u5f62\u5f0f\u200b\uff09 <pre><code>ant jar\nant archive-platform-jar\nmvn pacakge\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#jnr-constant","title":"jnr-constant","text":"<p>jnr-constant \u200b\u591a\u200b\u67b6\u6784\u200b\uff08\u200b\u5305\u62ec\u200bLoongArch64\uff09\u200b\u8865\u4e01\u200b\u5df2\u5408\u5165\u200b\u4e0a\u6e38\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u6f14\u793a\u200b\u9488\u5bf9\u200b\u67d0\u4e00\u200b\u7248\u672c\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b\u3002 \u200b\u4e0b\u8f7d\u200b 0.10.1 \u200b\u7248\u672c\u200b\u7684\u200b\u6e90\u7801\u200b\uff0c\u200b\u8be5\u200b\u7248\u672c\u200b\u5c1a\u200b\u4e0d\u200b\u652f\u6301\u200bLoongArch\u3002 <pre><code>git clone -b jnr-constants-0.10.1 --depth=1 https://github.com/jnr/jnr-constants.git\n</code></pre> \u200b\u9996\u5148\u200b\u6839\u636e\u200b\u8fd9\u4e2a\u200b\u8865\u4e01\u200b\uff0c\u200b\u4fee\u6539\u200b Rakefile \u200b\u6587\u4ef6\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u652f\u6301\u200b\u751f\u6210\u200b\u5f53\u524d\u200b\u5e73\u53f0\u200b\u8865\u4e01\u200b\u7684\u200b\u529f\u80fd\u200b\u3002 https://github.com/jnr/jnr-constants/pull/98/commits/39bae9852bc1dbb6a9024d35a2474b5e5a932be5</p> <p>\u200b\u7136\u540e\u200b\u6267\u884c\u547d\u4ee4\u200b\u751f\u6210\u200b\u672c\u5730\u200b <pre><code>yum install ruby ruby-devel rake libffi-devel\ngem install ffi\nrake generate:lplatform\n</code></pre> \u200b\u7136\u540e\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\u5373\u53ef\u200b <pre><code>mvn package\nmvn install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#jnr-ffi","title":"jnr-ffi","text":"<p>\u200b\u4e0b\u8f7d\u200b\u5bf9\u5e94\u200b\u7248\u672c\u200b\u7684\u200b\u6e90\u7801\u200b <pre><code>git clone -b jnr-ffi-2.2.1 --depth=1 https://github.com/jnr/jnr-ffi.git\n</code></pre> \u200b\u53c2\u7167\u200b\u8be5\u200b\u8865\u4e01\u200b\u79fb\u690d\u200b https://gitee.com/merore/jnr-ffi/commit/12d471b09bb8b99e62c1ea23d0a3b58a18f28d7c</p> <p>\u200b\u8fd0\u884c\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u5168\u90e8\u200b\u901a\u8fc7\u200b <pre><code>./mvnw test\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff08\u200b\u4fdd\u8bc1\u200b\u524d\u8fb9\u200b\u7684\u200b\u5df2\u7ecf\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\uff09 <pre><code>./mvnw package\n./mvnw install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#jnr-posix","title":"jnr-posix","text":"<p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <pre><code>git clone -b jnr-posix-3.1.4 --depth=1 https://github.com/jnr/jnr-posix.git\n</code></pre> \u200b\u53c2\u7167\u200b\u8be5\u200b\u8865\u4e01\u200b\u79fb\u690d\u200b https://gitee.com/merore/jnr-posix/commit/64ae42bfff1105843ac18e0ddac5506ef3b390ca</p> <p>\u200b\u6267\u884c\u200b\u6d4b\u8bd5\u200b \u200b\u8fd9\u91cc\u200b\u6d4b\u8bd5\u200b\u4e0d\u80fd\u200b\u8fc7\u200b\uff0c\u200b\u4e00\u822c\u200b\u60c5\u51b5\u200b\u4e0b\u4ec5\u200b\u6709\u200b\u8fd9\u200b6\u200b\u4e2a\u200b\u6d4b\u8bd5\u200b\u4e0d\u200b\u901a\u8fc7\u200b\u3002 <pre><code>mvn test\n\nResults :\n\nFailed tests: \n  FileTest.accessTest:509 access /tmp/jnr-posix-access-test4690482981282283296tmp for write:  expected:&lt;-1&gt; but was:&lt;0&gt;\n  IOTest.testSendRecvMsg_WithControl:204 null\n  LinuxPOSIXTest.testMessageHdrMultipleControl:139 Error with sendmsg: Invalid argument\n  ProcessTest.testGetRLimit:49 Bad soft limit for number of processes\n  ProcessTest.testGetRLimitPointer:83 Bad soft limit for number of processes\n  ProcessTest.testGetRLimitPreallocatedRlimit:66 Bad soft limit for number of processes\n\nTests run: 100, Failures: 6, Errors: 0, Skipped: 0\n</code></pre> \u200b\u4ee5\u200b\u8df3\u200b\u8fc7\u200b\u6d4b\u8bd5\u200b\u7684\u200b\u65b9\u5f0f\u200b\u6253\u5305\u200b\u5b89\u88c5\u200b <pre><code>mvn package -DskipTests=true\nmvn install -DskipTests=true\n</code></pre> \u200b\u81f3\u6b64\u200b\uff0cjnr \u200b\u7cfb\u5217\u200b\u5df2\u200b\u5168\u90e8\u200b\u79fb\u690d\u200b\u5e76\u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#jruby","title":"jruby","text":"<p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <pre><code>git clone -b 9.2.16.0 --depth=1 https://github.com/jruby/jruby.git\n</code></pre> \u200b\u53c2\u7167\u200b\u8be5\u200b\u8865\u4e01\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b https://gitee.com/merore/jruby/commit/3442e306e9e594ee39a98669912cda7854a49ce3</p> <p>\u200b\u7f16\u8bd1\u200b\u6253\u5305\u200b <pre><code>./mvnw\n./mvnw -Pdist\n./mvnw -Pcomplete\n</code></pre> \u200b\u5176\u4e2d\u200b\u7f16\u8bd1\u200b\u51fa\u200b\u540e\u7eed\u200b\u9700\u8981\u200b\u7684\u200b\u6587\u4ef6\u200b<code>maven/jruby-dist/target/jruby-dist-9.2.16.0-bin.tar.gz</code>\uff0c<code>maven/jruby-complete/target/jruby-complete-9.2.16.0.jar</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#logstash-jruby","title":"\u66ff\u6362\u200b logstash \u200b\u4e2d\u200b\u7684\u200b jruby","text":"<p>x86 logstash release \u200b\u5305\u4e2d\u200b\u9700\u8981\u200b\u66ff\u6362\u200b\u4e09\u5904\u200b\uff0c<code>jdk</code>,<code>vendor/jruby</code>\uff0c<code>logstash-core/lib/jars/jruby-complete-9.2.16.0.jar</code>\uff0c </p> <p>\u200b\u5176\u4e2d\u200b <code>vendor/jruby</code> \u200b\u4f7f\u7528\u200b jruby-dist \u200b\u89e3\u538b\u200b\u66ff\u6362\u200b\u3002jdk \u200b\u4f7f\u7528\u200b\u9f99\u82af\u200b jdk \u200b\u66ff\u6362\u200b\u5373\u53ef\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#java","title":"java\u200b\u7248\u672c\u200b\u9009\u62e9","text":"<p>tar \u200b\u5305\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e2a\u200b x86 \u200b\u7248\u672c\u200b\u7684\u200bjdk\u3002\u200b\u67e5\u770b\u200b\u8fd9\u4e2a\u200b jdk \u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u662f\u200b java 11 \u200b\u7248\u672c\u200b\u3002\u200b\u76ee\u524d\u200b\u6211\u200b\u62ff\u200b\u4e0d\u5230\u200b java11\u3002\u200b\u4f46\u200b\u6211\u4eec\u200b\u5e76\u4e0d\u4e00\u5b9a\u200b\u4e5f\u200b\u9700\u8981\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7248\u672c\u200b\uff0c\u200b\u56e0\u4e3a\u200b class \u200b\u6587\u4ef6\u200b\u662f\u200b\u865a\u62df\u673a\u200b\u89e3\u91ca\u200b\u6267\u884c\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b class \u200b\u6587\u4ef6\u200b\u7248\u672c\u200b\u548c\u200bjava\u200b\u865a\u62df\u673a\u200b\u7248\u672c\u200b\u80fd\u200b\u517c\u5bb9\u200b\u5373\u53ef\u200b\u3002 <pre><code>wget https://artifacts.elastic.co/downloads/logstash/logstash-7.13.0-linux-x86_64.tar.gz\n\n[root@9aa709805e36 logstash-7.13.0]# ls\nbin  config  CONTRIBUTORS  data  Gemfile  Gemfile.lock  jdk  lib  LICENSE.txt  logstash-core  logstash-core-plugin-api  modules  NOTICE.TXT  tools  vendor  x-pack\n\n[root@9aa709805e36 jdk]# cat release \nIMPLEMENTOR=\"AdoptOpenJDK\"\nIMPLEMENTOR_VERSION=\"AdoptOpenJDK\"\nJAVA_VERSION=\"11.0.10\"\nJAVA_VERSION_DATE=\"2021-01-19\"\nMODULES=\"java.base java.compiler java.datatransfer java.xml java.prefs java.desktop java.instrument java.logging java.management java.security.sasl java.naming java.rmi java.management.rmi java.net.http java.scripting java.security.jgss java.transaction.xa java.sql java.sql.rowset java.xml.crypto java.se java.smartcardio jdk.accessibility jdk.internal.vm.ci jdk.management jdk.unsupported jdk.internal.vm.compiler jdk.aot jdk.internal.jvmstat jdk.attach jdk.charsets jdk.compiler jdk.crypto.ec jdk.crypto.cryptoki jdk.dynalink jdk.internal.ed jdk.editpad jdk.hotspot.agent jdk.httpserver jdk.internal.le jdk.internal.opt jdk.internal.vm.compiler.management jdk.jartool jdk.javadoc jdk.jcmd jdk.management.agent jdk.jconsole jdk.jdeps jdk.jdwp.agent jdk.jdi jdk.jfr jdk.jlink jdk.jshell jdk.jsobject jdk.jstatd jdk.localedata jdk.management.jfr jdk.naming.dns jdk.naming.ldap jdk.naming.rmi jdk.net jdk.pack jdk.rmic jdk.scripting.nashorn jdk.scripting.nashorn.shell jdk.sctp jdk.security.auth jdk.security.jgss jdk.unsupported.desktop jdk.xml.dom jdk.zipfs\"\nOS_ARCH=\"x86_64\"\nOS_NAME=\"Linux\"\nSOURCE=\".:git:f16a065dd6d5\"\nBUILD_SOURCE=\"git:10223734\"\nFULL_VERSION=\"11.0.10+9\"\nSEMANTIC_VERSION=\"11.0.10+9\"\nBUILD_INFO=\"OS: Linux Version: 4.15.0-1103-azure\"\nJVM_VARIANT=\"Hotspot\"\nJVM_VERSION=\"11.0.10+9\"\nIMAGE_TYPE=\"JDK\"\n</code></pre> \u200b\u89e3\u538b\u200b\u4e00\u4e2a\u200b logstash tar \u200b\u5305\u4e2d\u200b\u539f\u6765\u200b\u7684\u200b jar \u200b\u5305\u200b\u3002\u200b\u6bd4\u5982\u200b <code>logstash-core/lib/jars/jruby-complete-9.2.16.0.jar</code>\u3002\u200b\u4f7f\u7528\u200b javap \u200b\u67e5\u770b\u200b\u7f16\u8bd1\u200b\u7684\u200b\u76ee\u6807\u200b\u7248\u672c\u200b\uff0c52 \u200b\u5bf9\u5e94\u200b\u7684\u200b\u5c31\u662f\u200b java8\u3002\u200b\u4e5f\u5c31\u662f\u8bf4\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u81f3\u5c11\u200b java8 \u200b\u6765\u200b\u8fd0\u884c\u200b\u8fd9\u4e2a\u200b jar \u200b\u5305\u200b\uff0c\u200b\u4e5f\u200b\u5f53\u7136\u200b\u53ef\u4ee5\u200b\u8fd0\u884c\u200b\u8fd9\u4e2a\u200b\u9879\u76ee\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u5c31\u200b\u9009\u62e9\u200b java8 \u200b\u8fdb\u884c\u200b jdk \u200b\u7684\u200b\u66ff\u6362\u200b\u3002 <pre><code>jar -xf jruby-complete-9.2.16.0.jar\n[root@9aa709805e36 tmp]# javap -verbose org/jruby/Ruby\\$1.class | grep major\n  major version: 52\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/logstash/#_4","title":"\u6d4b\u8bd5\u200b\u548c\u200b\u6253\u5305","text":"<p>\u200b\u5148\u200b\u6253\u5305\u200b\u66ff\u6362\u200b\u5b8c\u6210\u200b\u7684\u200b logstash \u200b\u4e8c\u8fdb\u5236\u200b\u5305\u200b\uff0c\u200b\u9075\u5b88\u200b\u547d\u4ee4\u200b\u89c4\u8303\u200b\u3002 <pre><code>tar -zcvf logstash-7.13.0-linux-loongarch64.tar.gz logstash-7.13.0\n</code></pre> \u200b\u7136\u540e\u200b\u6267\u884c\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u6267\u884c\u200b\u6d4b\u8bd5\u200b\u540e\u4f1a\u200b\u5728\u200b\u76ee\u5f55\u200b\u751f\u6210\u200b\u4e00\u4e9b\u200b\u4f7f\u7528\u200b\u4fe1\u606f\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5148\u200b\u6267\u884c\u200b\u4e86\u200b\u6253\u5305\u200b\u505a\u200b\u5907\u4efd\u200b\u3002 \u200b\u6267\u884c\u547d\u4ee4\u200b\u540e\u200b\u6309\u200b\u56de\u8f66\u952e\u200b\uff0c\u200b\u8f93\u51fa\u200b\u4fe1\u606f\u200b\u5373\u53ef\u200b\u3002 <pre><code>bin/logstash -e 'input { stdin{} } output { stdout{} }'\n\n[root@9aa709805e36 logstash-7.13.0]#  bin/logstash -e 'input { stdin{} } output { stdout{} }'\nUsing bundled JDK: /root/logstash-7.13.0/jdk\nOpenJDK 64-Bit Server VM warning: You have loaded library /tmp/jffi3206126205232206230.so which might have disabled stack guard. The VM will try to fix the stack guard now.\nIt's highly recommended that you fix the library with 'execstack -c &lt;libfile&gt;', or link it with '-z noexecstack'.\n Sending Logstash logs to /root/logstash-7.13.0/logs which is now configured via log4j2.properties\n[2021-10-28T07:03:59,244][INFO ][logstash.runner          ] Log4j configuration path used is: /root/logstash-7.13.0/config/log4j2.properties\n[2021-10-28T07:03:59,268][INFO ][logstash.runner          ] Starting Logstash {\"logstash.version\"=&gt;\"7.13.0\", \"jruby.version\"=&gt;\"jruby 9.2.16.0 (2.5.7) 2021-10-26 0ff666f71a OpenJDK 64-Bit Server VM 25.302-b08 on 1.8.0_302-b08 +indy +jit [linux-loongarch64]\"}\n[2021-10-28T07:03:59,305][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=&gt;\"path.queue\", :path=&gt;\"/root/logstash-7.13.0/data/queue\"}\n[2021-10-28T07:03:59,324][INFO ][logstash.setting.writabledirectory] Creating directory {:setting=&gt;\"path.dead_letter_queue\", :path=&gt;\"/root/logstash-7.13.0/data/dead_letter_queue\"}\n[2021-10-28T07:03:59,811][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified\n[2021-10-28T07:03:59,861][INFO ][logstash.agent           ] No persistent UUID file found. Generating new UUID {:uuid=&gt;\"869bb54b-3538-414c-9d01-7a0284077576\", :path=&gt;\"/root/logstash-7.13.0/data/uuid\"}\n[2021-10-28T07:04:01,181][INFO ][logstash.agent           ] Successfully started Logstash API endpoint {:port=&gt;9600}\n[2021-10-28T07:04:01,584][INFO ][org.reflections.Reflections] Reflections took 73 ms to scan 1 urls, producing 24 keys and 48 values \n[2021-10-28T07:04:04,615][INFO ][logstash.javapipeline    ][main] Starting pipeline {:pipeline_id=&gt;\"main\", \"pipeline.workers\"=&gt;4, \"pipeline.batch.size\"=&gt;125, \"pipeline.batch.delay\"=&gt;50, \"pipeline.max_inflight\"=&gt;500, \"pipeline.sources\"=&gt;[\"config string\"], :thread=&gt;\"#&lt;Thread:0x54f267cd run&gt;\"}\n[2021-10-28T07:04:05,873][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time {\"seconds\"=&gt;1.25}\n[2021-10-28T07:04:05,941][INFO ][logstash.javapipeline    ][main] Pipeline started {\"pipeline.id\"=&gt;\"main\"}\nThe stdin plugin is now waiting for input:\n[2021-10-28T07:04:06,018][INFO ][logstash.agent           ] Pipelines running {:count=&gt;1, :running_pipelines=&gt;[:main], :non_running_pipelines=&gt;[]}\n\n{\n    \"@timestamp\" =&gt; 2021-10-28T07:06:22.560Z,\n       \"message\" =&gt; \" \",\n      \"@version\" =&gt; \"1\",\n          \"host\" =&gt; \"9aa709805e36\"\n}\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/","title":"loki","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b loki \u200b\u7248\u672c\u200b 2.9.2 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/grafana/loki \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/grafana/loki/tree/2.9.2/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A6000 OS Anolis 23 \u200b\u7cfb\u7edf\u200b 5.10.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>\u200b\u8be5\u9879\u200b\u76ee\u7684\u200b\u7f16\u8bd1\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b \u200b\u9700\u8981\u200b\u5c06\u200b\u9879\u76ee\u200b\u653e\u7f6e\u200b\u5230\u200b$GOPATH/src/github.com/grafana/\u200b\u4e0b\u200b</p> <p>\u200b\u9002\u914d\u200b \u200b\u7f16\u8bd1\u200b\u65f6\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u62a5\u9519\u200b\uff1apkg/storage/stores/shipper/index/table.go:113:20: cannot use db.Stats().TxStats.Write (value of type int64) as int value in assignment \u200b\u4fee\u6539\u200b./pkg/storage/stores/shipper/index/table.go \u200b\u7b2c\u200b113\u200b\u884c\u200b\uff1a int(db.Stats().TxStats.Write)</p> <p>\u200b\u7f16\u8bd1\u200b</p> <p><code>go build ./cmd/loki</code> './loki -config.file=./cmd/loki/loki-local/config.yaml'</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/loki/#_5","title":"loki","text":"<p>\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\uff0c\u200b\u5982\u679c\u200b\u8981\u200b\u542f\u52a8\u200bLinux\u200b\u7684\u200bjournal\u200b\u65e5\u5fd7\u200b\u670d\u52a1\u200b\uff0c\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200bpromatil\u200b\u5934\u200b <code>go build --tags=promtail_journal_enabled ./clients/cmd/promtail</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/","title":"lxc &amp; lxc-templates","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#1","title":"1.\u200b\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc \u200b\u7248\u672c\u200b 5.0.3 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc \u200b\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc-templates \u200b\u7248\u672c\u200b 3.0.3 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc-templates"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#2","title":"2.\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u7cfb\u7edf\u200b loongnix alpine"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#3","title":"3.\u200b\u8f6f\u4ef6\u5305\u200b\u5b89\u88c5","text":"<pre><code>apk add lxc-templates\napk add lxc-templates-legacy\napk add lxc-templates-legacy-alpine\napk add lxc\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#4","title":"4. \u200b\u73af\u5883\u200b\u51c6\u5907","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#41-cgroup","title":"4.1 \u200b\u5f00\u542f\u200bcgroup\u200b\u670d\u52a1","text":"<p>\u200b\u9700\u8981\u200b\u542f\u52a8\u200bcgroup\u200b\u670d\u52a1\u200b\uff0c\u200b\u786e\u4fdd\u200b/proc/1/cgroup \u200b\u6587\u4ef6\u200b\u4e0d\u4e3a\u200b\u7a7a\u200b\uff1a <pre><code>/home/lxc-alpine-package/lxc-templates-legacy # rc-service cgroups start\n * Caching service dependencies ...                                                                                                                                                     [ ok ]\n/home/lxc-alpine-package/lxc-templates-legacy # rc-update add cgroups\n * service cgroups added to runlevel default\n</code></pre></p> <pre><code>/home/lxc-alpine-package/lxc-templates-legacy # cat /proc/1/cgroup \n0::/\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#5lxc-alpine","title":"5.\u200b\u4f7f\u7528\u200blxc-alpine\u200b\u6a21\u677f\u200b\u521b\u5efa\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u542f\u52a8","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#51","title":"5.1 \u200b\u5bb9\u5668\u200b\u521b\u5efa","text":"<p><pre><code>lxc-create -n test -t alpine //-n\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u521b\u5efa\u200b\u7684\u200b\u5bb9\u5668\u200b\u540d\u79f0\u200b\uff0c-t\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\n......\n==&gt; Container's rootfs and config have been created\nEdit the config file /var/lib/lxc/test/config to check/enable networking setup.\nThe installed system is preconfigured for a loopback and single network\ninterface configured via DHCP.\n\nTo start the container, run \"lxc-start -n test\".\nThe root password is not set; to enter the container run \"lxc-attach -n test\".\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a -t\u200b\u540e\u9762\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8ddf\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u7684\u200b\u5168\u200b\u8def\u5f84\u200b /usr/share/lxc/templates/lxc-alpine</p> <p>\u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200btest\u200b\u5df2\u7ecf\u200b\u521b\u5efa\u200b\uff1a <pre><code>/home/alpine/alpine/lxc-templates-legacy # lxc-ls\ntest \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#52","title":"5.2 \u200b\u5bb9\u5668\u200b\u542f\u52a8","text":"<p>\u200b\u6b64\u65f6\u200b\u76f4\u63a5\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\u4f1a\u200b\u62a5\u9519\u200b\uff0c\u200b\u5982\u4e0b\u200b\uff1a <pre><code>/home/alpine/alpine/lxc-templates-legacy # lxc-start -n test --logfile=aaa\nlxc-start: test: ../src/lxc/lxccontainer.c: wait_on_daemonized_start: 878 Received container state \"ABORTING\" instead of \"RUNNING\"\nlxc-start: test: ../src/lxc/tools/lxc_start.c: main: 306 The container failed to start\nlxc-start: test: ../src/lxc/tools/lxc_start.c: main: 309 To get more details, run the container in foreground mode\nlxc-start: test: ../src/lxc/tools/lxc_start.c: main: 311 Additional information can be obtained by setting the --logfile and --logpriority options\n/home/alpine/alpine/lxc-templates-legacy # cat aaa\nlxc-start test 20240312083640.836 ERROR    network - ../src/lxc/network.c:netdev_configure_server_veth:711 - No such file or directory - Failed to attach \"veth6KwNcs\" to bridge \"lxclxcbr0\", bridge interface doesn't exist\nlxc-start test 20240312083640.924 ERROR    network - ../src/lxc/network.c:lxc_create_network_priv:3427 - No such file or directory - Failed to create network device\nlxc-start test 20240312083640.924 ERROR    start - ../src/lxc/start.c:lxc_spawn:1840 - Failed to create the network\nlxc-start test 20240312083640.924 ERROR    lxccontainer - ../src/lxc/lxccontainer.c:wait_on_daemonized_start:878 - Received container state \"ABORTING\" instead of \"RUNNING\"\nlxc-start test 20240312083640.924 ERROR    lxc_start - ../src/lxc/tools/lxc_start.c:main:306 - The container failed to start\nlxc-start test 20240312083640.924 ERROR    lxc_start - ../src/lxc/tools/lxc_start.c:main:309 - To get more details, run the container in foreground mode\nlxc-start test 20240312083640.924 ERROR    lxc_start - ../src/lxc/tools/lxc_start.c:main:311 - Additional information can be obtained by setting the --logfile and --logpriority options\nlxc-start test 20240312083640.924 ERROR    start - ../src/lxc/start.c:__lxc_start:2107 - Failed to spawn container \"test\"\n</code></pre> \u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5bb9\u5668\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b/var/lib/lxc/test/config \u200b\u4e2d\u200b\u7b2c\u200b11\u200b\u884c\u200b\u9ed8\u8ba4\u8bbe\u7f6e\u200b\u4e86\u200b\u5bb9\u5668\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u5230\u200b\u7f51\u6865\u200blxcbr0\uff0c\u200b\u800c\u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u4e0d\u200b\u5b58\u5728\u200b\u8be5\u200b\u7f51\u6865\u200b\u6240\u4ee5\u200b\u62a5\u9519\u200b: <pre><code> 10 lxc.net.0.type = veth\n 11 lxc.net.0.link = lxcbr0\n 12 lxc.net.0.flags = up\n 13 lxc.net.0.hwaddr = 00:16:3e:82:db:3a\n 14 lxc.rootfs.path = dir:/var/lib/lxc/test/rootfs\n</code></pre></p> <p>\u200b\u82e5\u200b\u60f3\u8981\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\uff0c\u200b\u53ef\u200b\u5c06\u200b\u6587\u4ef6\u200b/var/lib/lxc/test/config\u200b\u7684\u200b\u7b2c\u200b11\u200b\u884c\u200b\u4ee3\u7801\u200b\u6682\u65f6\u200b\u6ce8\u91ca\u200b: <pre><code> 10 lxc.net.0.type = veth\n 11 #lxc.net.0.link = lxcbr0\n 12 lxc.net.0.flags = up\n 13 lxc.net.0.hwaddr = 00:16:3e:82:db:3a\n 14 lxc.rootfs.path = dir:/var/lib/lxc/test/rootfs\n</code></pre> \u200b\u6b64\u65f6\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\uff0c\u200b\u5e76\u200b\u8fdb\u5165\u200b\u5bb9\u5668\u200b\uff0c\u200b\u4f46\u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u7f51\u7edc\u200b\u4e0d\u901a\u200b <pre><code>/home/alpine/alpine/lxc-templates-legacy # lxc-start test\n/home/alpine/alpine/lxc-templates-legacy # lxc-attach test\n/ # pwd\n/\n/ # ls\nbin    dev    etc    home   lib    media  mnt    opt    proc   root   run    sbin   srv    sys    tmp    usr    var\n/ # cd /home\n/home #\n\n/home # ping baidu.com\n^C\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#6","title":"6.\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e","text":"<p>\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e\u200b\u6709\u200b\u4e24\u79cd\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4e00\u79cd\u200b\u662f\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200balpine\u200b\u81ea\u5e26\u200b\u7684\u200b\u8f6f\u4ef6\u5305\u200bdnsmasq\uff0c\u200b\u53e6\u5916\u200b\u4e00\u79cd\u200b\u901a\u8fc7\u200b\u624b\u52a8\u200b\u8bbe\u7f6e\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#61-dnsmasq","title":"6.1 \u200b\u4f7f\u7528\u200bdnsmasq","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#611-dnsmasq","title":"6.1.1 \u200b\u5b89\u88c5\u200bdnsmasq","text":"<pre><code>apk add dnsmasq\nln -s /etc/init.d/dnsmasq /etc/init.d/dnsmasq.lxcbr0\n/etc/init.d/dnsmasq.lxcbr0 start\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#612-lxcbr0","title":"6.1.2 \u200b\u8bbe\u7f6e\u200b\u5bb9\u5668\u200b\u901a\u8fc7\u200b\u7f51\u6865\u200blxcbr0\u200b\u901a\u4fe1","text":"<p>\u200b\u5c06\u200b\u5bb9\u5668\u200b\u914d\u7f6e\u6587\u4ef6\u200b/var/lib/test/config\u200b\u4e2d\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u901a\u8fc7\u200blxcbr0\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\uff1a <pre><code>lxc.net.0.type = veth\nlxc.net.0.link = lxcbr0\nlxc.net.0.flags = up\nlxc.net.0.hwaddr = 00:16:3e:e0:d6:08\nlxc.rootfs.path = dir:/var/lib/lxc/test/rootfs\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#613","title":"6.1.3 \u200b\u91cd\u65b0\u542f\u52a8\u200b\u5bb9\u5668","text":"<p><pre><code>lxc-stop -n test\nlxc-start -n test\n</code></pre> \u200b\u6b64\u65f6\u200b\u8fdb\u5165\u200b\u5bb9\u5668\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff0c\u200b\u5bb9\u5668\u200b\u5df2\u7ecf\u200b\u83b7\u53d6\u200b\u5230\u200b\u4e86\u200bip\u200b\u5730\u5740\u200b\uff0c\u200b\u5e76\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u8def\u7531\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b\u767e\u5ea6\u200b <pre><code># lxc-attach -n test\n\n/ # ip add\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop state DOWN qlen 1000\n    link/sit 0.0.0.0 brd 0.0.0.0\n3: eth0@if71: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether 00:16:3e:13:79:4c brd ff:ff:ff:ff:ff:ff\n    inet 10.0.3.7/24 brd 10.0.3.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::216:3eff:fe13:794c/64 scope link \n       valid_lft forever preferred_lft forever\n\n/ # route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.0.3.1        0.0.0.0         UG    203    0        0 eth0\n10.0.3.0        0.0.0.0         255.255.255.0   U     0      0        0 eth0\n</code></pre> \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200bping\u200b\u767e\u5ea6\u200b\uff1a <pre><code>/ # ping baidu.com -c 3\nPING baidu.com (110.242.68.66): 56 data bytes\n64 bytes from 110.242.68.66: seq=0 ttl=53 time=20.565 ms\n64 bytes from 110.242.68.66: seq=1 ttl=53 time=20.479 ms\n64 bytes from 110.242.68.66: seq=2 ttl=53 time=20.454 ms\n\n--- baidu.com ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 20.454/20.499/20.565 ms\n</code></pre> \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200bping \u200b\u4e0e\u200b\u4e3b\u673a\u200b\u76f8\u540c\u200b\u7684\u200b\u540c\u200b\u7f51\u6bb5\u200b\u7684\u200b\u5176\u4ed6\u200bip\u200b\u5730\u5740\u200b\uff1a <pre><code>/ # ping 10.130.0.184 -c 3\nPING 10.130.0.184 (10.130.0.184): 56 data bytes\n64 bytes from 10.130.0.184: seq=0 ttl=63 time=0.506 ms\n64 bytes from 10.130.0.184: seq=1 ttl=63 time=0.469 ms\n64 bytes from 10.130.0.184: seq=2 ttl=63 time=0.491 ms\n\n--- 10.130.0.184 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 0.469/0.488/0.506 ms\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#62","title":"6.2 \u200b\u624b\u52a8\u200b\u8bbe\u7f6e","text":"<p>\u200b\u8fd9\u91cc\u200b\u901a\u8fc7\u200b\u7f51\u6865\u200b\u548c\u200b\u8def\u7531\u200b\u7684\u200b\u65b9\u5f0f\u200b\u6765\u200b\u914d\u7f6e\u200b\u5bb9\u5668\u200b\u7f51\u7edc\u200b\uff0c\u200b\u5c06\u8981\u200b\u521b\u5efa\u200b\u7684\u200b\u7f51\u7edc\u200b\u540d\u79f0\u200b\u662f\u200blxcbr0\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#621-ip","title":"6.2.1 \u200b\u5f00\u542f\u200bip\u200b\u8f6c\u53d1\u200b\u529f\u80fd","text":"<p>\u200b\u53ea\u6709\u200b\u4fdd\u8bc1\u200bip\u200b\u8f6c\u53d1\u200b\u529f\u80fd\u200b\u5f00\u542f\u200b\uff0c\u200b\u624d\u200b\u53ef\u4ee5\u200b\u4fdd\u8bc1\u200b\u914d\u7f6e\u200b\u7684\u200b\u8def\u7531\u200b\u53ef\u4ee5\u200b\u751f\u6548\u200b <pre><code>/home/alpine # sysctl net.ipv4.ip_forward\nnet.ipv4.ip_forward = 0\n</code></pre> 0\u200b\u8868\u793a\u200b\u672a\u200b\u5f00\u542f\u200bip\u200b\u8f6c\u53d1\u200b\u529f\u80fd\u200b\uff0c\u200b\u6216\u8005\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u67e5\u770b\u200b\u6587\u4ef6\u200b/proc/sys/net/ipv4/ip_forward\uff0c\u200b\u4f7f\u7528\u200b\u4e0b\u200b\u547d\u4ee4\u200b\u5f00\u542f\u200bip\u200b\u8f6c\u53d1\u200b\u529f\u80fd\u200b <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\n   \u200b\u4ee5\u4e0a\u200b\u53ea\u662f\u200b\u4e34\u65f6\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u82e5\u200b\u8981\u200b\u957f\u4e45\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u53ef\u200b\u5728\u200b\u6587\u4ef6\u200b/etc/sysctl.conf\u200b\u4e2d\u200b\u5199\u5165\u200b\uff1a\nvim /etc/sysctl.conf\nnet.ipv4.ip_forward=1\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#622-lxcbr0","title":"6.2.2 \u200b\u4fee\u6539\u200b\u5bb9\u5668\u200b\u7f51\u7edc\u200b\u901a\u8fc7\u200b\u7f51\u6865\u200blxcbr0\u200b\u8fdb\u884c\u200b\u901a\u4fe1","text":"<p>\u200b\u9996\u5148\u200b\u5c06\u200b\u5bb9\u5668\u200b\u914d\u7f6e\u6587\u4ef6\u200b/var/lib/test/config\u200b\u4e2d\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u901a\u8fc7\u200blxcbr0\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\uff1a <pre><code>lxc.net.0.type = veth\nlxc.net.0.link = lxcbr0\nlxc.net.0.flags = up\nlxc.net.0.hwaddr = 00:16:3e:e0:d6:08\nlxc.rootfs.path = dir:/var/lib/lxc/test/rootfs\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#623-lxcbr0","title":"6.2.3 \u200b\u5728\u200b\u5bbf\u4e3b\u673a\u200b\u4e0a\u200b\u521b\u5efa\u200b\u7f51\u6865\u200blxcbr0","text":"<p><pre><code>/home/alpine # brctl addbr lxcbr0\n/home/alpine # brctl show\nbridge name bridge id       STP enabled interfaces\nlxcbr0      8000.000000000000   no\n/home/alpine # ip add\n11: lxcbr0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN qlen 1000\n    link/ether fe:c8:e8:4c:79:15 brd ff:ff:ff:ff:ff:ff\n</code></pre> \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u7f51\u6865\u200blxcbr0\u200b\u521b\u5efa\u200b\u6210\u529f\u200b\uff0cinterfaces\u200b\u4e3a\u7a7a\u200b\u662f\u56e0\u4e3a\u200b\u8fd8\u200b\u6ca1\u6709\u200b\u63a5\u53e3\u200b\u8fde\u63a5\u200b\u8be5\u200b\u7f51\u6865\u200b\u4e0a\u200b\u3002\u200b\u5f53\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\u540e\u200b\uff0c\u200b\u6b64\u65f6\u200b\u518d\u200b\u67e5\u770b\u200b\u7f51\u6865\u200blxcbr0: <pre><code>/home/alpine # lxc-start test\n/home/alpine # brctl show\nbridge name bridge id       STP enabled interfaces\nlxcbr0      8000.fec8e84c7915   no      vethc7wLS1\n</code></pre> \u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5728\u200b6.1\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u5bb9\u5668\u200b\u901a\u8fc7\u200blxcbr0\u200b\u901a\u4fe1\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#624-lxcbr0ip","title":"6.2.4 \u200b\u7ed9\u200b\u7f51\u6865\u200blxcbr0\u200b\u5206\u914d\u200bip","text":"<p>\u200b\u4e3a\u4e86\u200b\u5b9e\u73b0\u200b\u7f51\u6865\u200b\u6240\u5728\u200b\u7684\u200b\u4e3b\u673a\u200b\u548c\u200b\u7f51\u6865\u200b\u6240\u200b\u6865\u63a5\u200b\u7684\u200b\u5bb9\u5668\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\uff0c\u200b\u9700\u8981\u200b\u7ed9\u200b\u7f51\u6865\u200b\u548c\u200b\u5bb9\u5668\u200b\u5206\u914d\u200b\u540c\u4e00\u200b\u7f51\u6bb5\u200b\u7684\u200bip\u200b\u5730\u5740\u200b\u3002 \u200b\u4e3b\u673a\u200b\u4e0a\u200b\u6709\u200b\u4e24\u4e2a\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\uff0ceth2,eth3\uff0c\u200b\u7f51\u6bb5\u200b\u5206\u522b\u200b\u4e3a\u200b10.130.0.xxx\u200b\u548c\u200b192.168.0.xxx\uff0c\u200b\u4e3a\u4e86\u200b\u9632\u6b62\u200bip\u200b\u51b2\u7a81\u200b\uff0c\u200b\u6545\u7ed9\u200blxcbr0\u200b\u8bbe\u7f6e\u200b\u5728\u200b192.168.200.xxx\u200b\u7684\u200b\u7f51\u6bb5\u200b <pre><code>5: eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000\n    link/ether 00:26:f8:90:10:4a brd ff:ff:ff:ff:ff:ff\n    inet 10.130.0.143/24 brd 10.130.0.255 scope global eth2\n       valid_lft forever preferred_lft forever\n    inet6 fe80::226:f8ff:fe90:104a/64 scope link \n       valid_lft forever preferred_lft forever\n6: sit0@NONE: &lt;NOARP,UP,LOWER_UP&gt; mtu 1480 qdisc noqueue state UNKNOWN qlen 1000\n    link/sit 0.0.0.0 brd 0.0.0.0\n    inet6 ::c0a8:314/96 scope global \n       valid_lft forever preferred_lft forever\n    inet6 ::a82:8f/96 scope global \n       valid_lft forever preferred_lft forever\n    inet6 ::7f00:1/96 scope host \n       valid_lft forever preferred_lft forever\n7: eth3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000\n    link/ether 48:72:65:65:6e:01 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.3.20/24 scope global eth3\n       valid_lft forever preferred_lft forever\n    inet6 fe80::4a72:65ff:fe65:6e01/64 scope link \n       valid_lft forever preferred_lft forever\n</code></pre></p> <p>\u200b\u7ed9\u200blxcbr0\u200b\u8bbe\u7f6e\u200bip\u200b\u5730\u5740\u200b\uff1a <pre><code>/home/alpine # ip addr add 192.168.200.11/24 dev lxcbr0\n/home/alpine # ip add\n......\n11: lxcbr0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN qlen 1000\n    link/ether fe:c8:e8:4c:79:15 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.200.11/24 scope global lxcbr0\n       valid_lft forever preferred_lft forever\n.......\n</code></pre> \u200b\u6ce8\u610f\u200b\uff1alxcbr0\u200b\u7684\u200bip\u200b\u5730\u5740\u200b\u4e0d\u80fd\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u540c\u4e00\u4e2a\u200b\u7f51\u6bb5\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8def\u7531\u200b\u51fa\u9519\u200b\uff0c\u200b\u5982\u5f53\u200b\u5c06\u200blxcbr0\u200b\u7684\u200bip\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b10.130.0.xxx\u200b\u65f6\u200b\uff0clxcbr0\u200b\u7684\u200b\u8def\u7531\u200b\u4f1a\u200b\u4e0e\u200beth2\u200b\u4e00\u6837\u200b\uff1a <pre><code>/home/alpine/alpine/lxc-templates-legacy # route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.130.0.1      0.0.0.0         UG    205    0        0 eth2\n10.130.0.0      0.0.0.0         255.255.255.0   U     0      0        0 eth2\n10.130.0.0      0.0.0.0         255.255.255.0   U     0      0        0 lxcbr0\n192.168.3.0     0.0.0.0         255.255.255.0   U     0      0        0 eth3\n</code></pre></p> <p>\u200b\u542f\u52a8\u200blxcbr0: <pre><code>/home/alpine # ifconfig lxcbr0 up\n/home/alpine # ifconfig\n......\nlxcbr0       Link encap:Ethernet  HWaddr FE:C8:E8:4C:79:15  \n          inet addr:192.168.200.11  Bcast:0.0.0.0  Mask:255.255.255.0\n          inet6 addr: fe80::fcc8:e8ff:fe4c:7915/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:10 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:844 (844.0 B)\n......\n</code></pre> \u200b\u6b64\u65f6\u200b\u4e3b\u673a\u200b\u8def\u7531\u200b\uff1a <pre><code>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.130.0.1      0.0.0.0         UG    205    0        0 eth2\n10.130.0.0      0.0.0.0         255.255.255.0   U     0      0        0 eth2\n192.168.3.0     0.0.0.0         255.255.255.0   U     0      0        0 eth3\n192.168.200.0   0.0.0.0         255.255.255.0   U     0      0        0 lxcbr0\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#625-ip","title":"6.2.5 \u200b\u7ed9\u200b\u5bb9\u5668\u200b\u5206\u914d\u200bip\u200b\u5730\u5740","text":"<p>\u200b\u8fd9\u91cc\u200b\u540c\u6837\u200b\u4f7f\u7528\u200b\u56fa\u5b9a\u200b\u5206\u914d\u200bip\u200b\u7684\u200b\u65b9\u5f0f\u200b \u200b\u67e5\u770b\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\uff0c\u200b\u5982\u4e0b\u200b\uff0c\u200b\u5171\u6709\u200b2\u200b\u4e2a\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0clo\u200b\u662f\u200b\u56de\u73af\u200b\u7f51\u5361\u200b\u901a\u5e38\u200b\u7528\u4e8e\u200b\u6d4b\u8bd5\u200b\u6570\u636e\u5305\u200b\u548c\u200b\u8f6f\u4ef6\u200b\u914d\u7f6e\u200b\u662f\u5426\u200b\u6b63\u5e38\u200b\u3002\u200b\u6545\u200b\u8fd9\u91cc\u200b\u4f7f\u7528\u200beth0\uff1a <pre><code>/ # ifconfig\neth0      Link encap:Ethernet  HWaddr 00:16:3E:E0:D6:08  \n          inet6 addr: fe80::216:3eff:fee0:d608/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:12 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:25 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:1016 (1016.0 B)  TX bytes:5926 (5.7 KiB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n</code></pre></p> <p>\u200b\u7ed9\u200b\u7f51\u5361\u200beth0\u200b\u8bbe\u7f6e\u200bip\u200b\u5730\u5740\u200b\uff0c\u200b\u7f51\u6bb5\u200b\u9700\u8981\u200b\u4e0e\u200blxcbr0\u200b\u4e00\u81f4\u200b\uff1a <pre><code>/ # ip addr add 192.168.200.12/24 dev eth0\n/ # ip add\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop state DOWN qlen 1000\n    link/sit 0.0.0.0 brd 0.0.0.0\n3: eth0@if14: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether 00:16:3e:e0:d6:08 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.200.12/24 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::216:3eff:fee0:d608/64 scope link \n       valid_lft forever preferred_lft forever\n</code></pre> \u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u5185\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b192.168.200.11\uff0c\u200b\u4f46\u662f\u200b\u6ca1\u6709\u200b\u529e\u6cd5\u200bping\u200b\u901a\u200b\u4e3b\u673a\u200bip 10.130.0.143: <pre><code>/ # ping 192.168.200.11\nPING 192.168.200.11 (192.168.200.11): 56 data bytes\n64 bytes from 192.168.200.11: seq=0 ttl=64 time=0.213 ms\n64 bytes from 192.168.200.11: seq=1 ttl=64 time=0.023 ms\n^C\n/ # ping 10.130.0.143\nPING 10.130.0.143 (10.130.0.143): 56 data bytes\nping: sendto: Network unreachable\n</code></pre> \u200b\u4f46\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b192.168.200.12/11\uff0c\u200b\u8fd9\u200b\u8bf4\u660e\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u4ece\u200b10.130.0.143\u200b\u5230\u200b192.168.200.12/11\u200b\u7684\u200b\u8def\u7531\u200b\u6ca1\u6709\u200b\u95ee\u9898\u200b\uff0c\u200b\u800c\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u8def\u7531\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#626","title":"6.2.6 \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u200b\u6dfb\u52a0\u200b\u5230\u200b\u4e3b\u673a\u200b\u7684\u200b\u8def\u7531","text":"<p>\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u8868\u793a\u200b\u5bb9\u5668\u200b(192.168.200.12)\u200b\u53d1\u9001\u7ed9\u200b10.130.0.0\u200b\u7f51\u6bb5\u200b\u7684\u200b\u5305\u200b\uff0c\u200b\u5c06\u200b\u901a\u8fc7\u200b192.168.200.11\u200b\u8f6c\u53d1\u200b\u51fa\u53bb\u200b\u3002 <pre><code>/ # route add -net 10.130.0.0/24 gw 192.168.200.11 dev eth0 \n/ # route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.130.0.0      192.168.200.11  0.0.0.0         UG    0      0        0 eth0\n192.168.200.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n/ # ping 10.130.0.143\nPING 10.130.0.143 (10.130.0.143): 56 data bytes\n64 bytes from 10.130.0.143: seq=0 ttl=64 time=0.100 ms\n64 bytes from 10.130.0.143: seq=1 ttl=64 time=0.032 ms\n^X^C\n--- 10.130.0.143 ping statistics ---\n/ # ping 10.130.0.20\nPING 10.130.0.20 (10.130.0.20): 56 data bytes\n^C^C\n--- 10.130.0.20 ping statistics ---\n3 packets transmitted, 0 packets received, 100% packet loss\n/ # ping baidu.com\n^C\n</code></pre> \u200b\u6b64\u65f6\u200b\u867d\u7136\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b\u4e3b\u673a\u200b143\uff0c\u200b\u4f46\u662f\u200b\u6ca1\u6709\u200b\u529e\u6cd5\u200bping\u200b\u901a\u4e0e\u200b10.130.0.xxx\u200b\u7f51\u6bb5\u200b\u7684\u200b\u5176\u4ed6\u200b\u673a\u5668\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5176\u4ed6\u200b\u673a\u5668\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u6dfb\u52a0\u200b\u5230\u200b192.168.200.xxx\u200b\u7684\u200b\u8def\u7531\u200b\uff0c \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u4ed6\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u901a\u8fc7\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u6dfb\u52a0\u200b\u5230\u200b192.168.200.xxx\u200b\u7684\u200b\u8def\u7531\u200b\u89c4\u5219\u200b\uff0c\u200b\u4f46\u200b\u8fd9\u6837\u200b\u6bd4\u8f83\u200b\u9ebb\u70e6\u200b\uff0c\u200b\u9700\u8981\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u4e3b\u673a\u200b\u90fd\u200b\u5355\u72ec\u200b\u6dfb\u52a0\u200b\u8def\u7531\u200b\uff0c\u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b6.6\u200b\u4e2d\u200b\u7684\u200bnat\u200b\u89c4\u5219\u200b\u6765\u200b\u8fdb\u884c\u200b\u8bbe\u7f6e\u200b <pre><code>route add -net 192.168.200.0/24 gw 10.130.0.143 dev enp0s3f0\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#626-nat","title":"6.2.6 \u200b\u6dfb\u52a0\u200bnat\u200b\u89c4\u5219","text":"<p>nat\u200b\u89c4\u5219\u200b\u53ea\u200b\u9700\u8981\u200b\u5728\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\u7684\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u8bbe\u7f6e\u200b \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200bnat\u200b\u89c4\u5219\u200b\uff0c\u200b\u4e3a\u7a7a\u200b\uff1a <pre><code>/home/alpine # iptables -nvL --line-number   //\u200b\u67e5\u770b\u200bnat\u200b\u89c4\u5219\u200b\n/home/alpine # iptables -nvL -t nat --line-numbers\nChain PREROUTING (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain POSTROUTING (policy ACCEPT 320 packets, 23842 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination     \n</code></pre></p> <p>\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u8bbe\u7f6e\u200bnat\u200b\u89c4\u5219\u200b\uff1a <pre><code>iptables -t nat -A POSTROUTING -s 192.168.200.12 -j SNAT --to-source 10.130.0.143\n</code></pre> \u200b\u8fd9\u200b\u6761\u200b\u89c4\u5219\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u5c06\u200b\u5bb9\u5668\u200b192.168.200.12\u200b\u53d1\u9001\u200b\u7684\u200b\u5305\u4e2d\u200b\u7684\u200bip\u200b\u5730\u5740\u200b\u5168\u90e8\u200b\u6539\u6210\u200bip 10.130.0.143\uff0c\u200b\u6545\u200b\u5bf9\u4e8e\u200b\u5176\u4ed6\u200b\u673a\u5668\u200b\u800c\u8a00\u200b\u8bc6\u522b\u200b\u5230\u200b\u7684\u200b\u662f\u200b\u4e3b\u673a\u200b10.130.0.143\u200b\u53d1\u9001\u200b\u7684\u200b\u5305\u200b\uff08\u200b\u5b9e\u9645\u200b\u662f\u200b\u5bb9\u5668\u200b192.168.200.12\u200b\u53d1\u9001\u200b\u7684\u200b\u5305\u200b\uff09\u3002 \u200b\u6545\u200b\u6b64\u65f6\u200b\u4e3b\u673a\u200b\u6240\u200b\u62e5\u6709\u200b\u7684\u200b\u7f51\u7edc\u901a\u4fe1\u200b\uff0c\u200b\u5bb9\u5668\u200b192.168.200.12\u200b\u4e5f\u200b\u5168\u90e8\u200b\u62e5\u6709\u200b\u3002\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u4e0e\u200b10.130.0.xxx\u200b\u7f51\u6bb5\u200b\u5176\u4ed6\u200bip\u200b\u4e4b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b\uff0c\u200b\u4ee5\u53ca\u200bping\u200b\u901a\u200b\u767e\u5ea6\u200b(\u200b\u524d\u63d0\u200b\u662f\u200b\u4e3b\u673a\u200b10.130.0.143\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b\u767e\u5ea6\u200b)\u3002 <pre><code>/home/alpine/alpine/lxc-templates-legacy # iptables -nvL -t nat --line-numbers\nChain PREROUTING (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n\nChain POSTROUTING (policy ACCEPT 1 packets, 136 bytes)\nnum   pkts bytes target     prot opt in     out     source               destination         \n1        0     0 SNAT       0    --  *      *       192.168.200.12       0.0.0.0/0            to:10.130.0.143\n/home/alpine/alpine/lxc-templates-legacy # iptables -t nat -D POSTROUTING 1  //\u200b\u5220\u9664\u200bnat\u200b\u89c4\u5219\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u7684\u200b1\u200b\u6307\u5411\u200b\u7684\u200b\u662f\u200b\u4e0a\u9762\u200b\u7684\u200bnum 1\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#627-forward","title":"6.2.7 \u200b\u8bbe\u7f6e\u200bFORWARD \u200b\u94fe","text":"<p>\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u4e3b\u673a\u200b\u4e4b\u95f4\u200b\u7684\u200b\u901a\u4fe1\u200b\u662f\u200b\u901a\u8fc7\u200bFORWARD\u200b\u94fe\u200b\u8fdb\u884c\u200b\u8f6c\u53d1\u200b\u7684\u200b\uff0c\u200b\u9700\u8981\u200b\u786e\u8ba4\u200biptables\u200b\u4e2d\u200b\u7684\u200bFORWARD\u200b\u94fe\u200b\u662f\u5426\u200b\u6253\u5f00\u200b\uff0c\u200b\u4f7f\u7528\u200b\u547d\u4ee4\u200b\u201ciptables -nvL\u201d\u200b\u67e5\u770b\u200bFORWARD\u200b\u94fe\u200b\u662f\u5426\u200b\u6253\u5f00\u200b\uff1a <pre><code>alpine-3:~# iptables -nvL\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)     //ACCEPT\u200b\u8868\u793a\u200b\u6253\u5f00\u200b\n pkts bytes target     prot opt in     out     source               destination         \n\nChain OUTPUT (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination  \n</code></pre> \u200b\u5f53\u200bFORWARD\u200b\u7684\u200b\u72b6\u6001\u200b\u662f\u200bACCEPT\uff0c\u200b\u5219\u200b\u8868\u793a\u200b\u6253\u5f00\u200b\uff0c\u200b\u6b64\u65f6\u200b\u6240\u6709\u200b\u7ecf\u8fc7\u200b\u9632\u706b\u5899\u200b\u7684\u200b\u6570\u636e\u5305\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5141\u8bb8\u200b\u8f6c\u53d1\u200b\uff0c\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u4e3b\u673a\u200b\u4e4b\u95f4\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\uff0c\u200b\u6b64\u65f6\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e\u200b\u5230\u200b\u8fd9\u91cc\u200b\u5df2\u7ecf\u200b\u7ed3\u675f\u200b\u4e86\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u518d\u200b\u8fdb\u884c\u200b\u989d\u5916\u200b\u7684\u200b\u8bbe\u7f6e\u200b\u3002</p> <p>\u200b\u82e5\u200bFORWARD\u200b\u7684\u200b\u72b6\u6001\u200b\u662f\u200bDROP\uff0c\u200b\u5219\u200b\u8868\u793a\u200b\u5173\u95ed\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u6dfb\u52a0\u200b\u89c4\u5219\u200b\uff0c\u200b\u5219\u200b\u610f\u5473\u7740\u200b\u9632\u706b\u5899\u200b\u5c06\u200b\u62d2\u7edd\u200b\u6240\u6709\u200b\u7ecf\u8fc7\u200b\u5b83\u200b\u7684\u200b\u8f6c\u53d1\u200b\u6570\u636e\u5305\u200b\uff1a <pre><code>alpine-3:~# iptables -nvL\n......\nChain FORWARD (policy DROP 109 packets, 9156 bytes) //DROP\u200b\u8868\u793a\u200b\u62d2\u7edd\u200b\u6240\u6709\u200b\u5305\u200b\uff0c\u200b\u540e\u9762\u200b\u7684\u200b\u6570\u5b57\u200b\u8868\u793a\u200b\u4e00\u5171\u200b\u62d2\u7edd\u200b\u4e86\u200b109\u200b\u4e2a\u200b\u5305\u200b\uff0c\u200b\u4e00\u5171\u200b\u6709\u200b9156\u200b\u4e2a\u200b\u5b57\u8282\u200b\n pkts bytes target     prot opt in     out     source               destination \n</code></pre> \u200b\u6b64\u65f6\u200b\u9700\u8981\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u4e24\u6761\u200b\u547d\u4ee4\u200b\uff1a <pre><code>iptables -w -I FORWARD -o lxcbr0  -j ACCEPT\niptables -w -I FORWARD -i lxcbr0  -j ACCEPT\n</code></pre> \u200b\u7b2c\u4e00\u6761\u200b\u547d\u4ee4\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u5141\u8bb8\u200b\u6240\u6709\u200b\u4f20\u51fa\u200b\u5230\u200blxcbr0\u200b\u7684\u200b\u6570\u636e\u5305\u200b\u901a\u8fc7\u200b\uff0c\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u8fc7\u6ee4\u200b\u6216\u200b\u963b\u6b62\u200b\uff1b \u200b\u7b2c\u4e8c\u6761\u200b\u547d\u4ee4\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u5141\u8bb8\u200b\u6240\u6709\u200b\u4f20\u5165\u200b\u5230\u200blxcbr0\u200b\u7684\u200b\u6570\u636e\u5305\u200b\u901a\u8fc7\u200b\uff0c\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u8fc7\u6ee4\u200b\u6216\u200b\u963b\u6b62\u200b\uff1b \u200b\u901a\u8fc7\u200b\u8fd9\u200b\u4e24\u6761\u200b\u547d\u4ee4\u200b\u6765\u200b\u5141\u8bb8\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u4e3b\u673a\u200b\u7684\u200b\u901a\u4fe1\u200b\uff0c\u200b\u6b64\u65f6\u200b\u518d\u200b\u67e5\u770b\u200bChain FORWARD\u200b\u7684\u200b\u72b6\u6001\u200b\uff1a <pre><code># iptables -nvL\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain FORWARD (policy DROP 987 packets, 81732 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    8   672 ACCEPT     0    --  lxcbr0 *       0.0.0.0/0            0.0.0.0/0           \n    8   672 ACCEPT     0    --  *      lxcbr0  0.0.0.0/0            0.0.0.0/0      \n</code></pre> \u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\u4fbf\u200b\u53ef\u4ee5\u200bping\u200b\u901a\u200b\u767e\u5ea6\u200b\u548c\u200b\u4e3b\u673a\u200b\u540c\u200b\u7f51\u6bb5\u200b\u7684\u200bip: \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200bping\u200b\u767e\u5ea6\u200b\uff1a <pre><code>/ # ping baidu.com -c 3\nPING baidu.com (110.242.68.66): 56 data bytes\n64 bytes from 110.242.68.66: seq=0 ttl=53 time=20.565 ms\n64 bytes from 110.242.68.66: seq=1 ttl=53 time=20.479 ms\n64 bytes from 110.242.68.66: seq=2 ttl=53 time=20.454 ms\n\n--- baidu.com ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 20.454/20.499/20.565 ms\n</code></pre> \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200bping \u200b\u4e0e\u200b\u4e3b\u673a\u200b\u76f8\u540c\u200b\u7684\u200b\u540c\u200b\u7f51\u6bb5\u200b\u7684\u200b\u5176\u4ed6\u200bip\u200b\u5730\u5740\u200b\uff1a <pre><code>/ # ping 10.130.0.184 -c 3\nPING 10.130.0.184 (10.130.0.184): 56 data bytes\n64 bytes from 10.130.0.184: seq=0 ttl=63 time=0.506 ms\n64 bytes from 10.130.0.184: seq=1 ttl=63 time=0.469 ms\n64 bytes from 10.130.0.184: seq=2 ttl=63 time=0.491 ms\n\n--- 10.130.0.184 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 0.469/0.488/0.506 ms\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#7-lxc-lxc-templates","title":"7. \u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200blxc &amp; lxc-templates","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#71-lxc","title":"7.1 lxc","text":"<p>\u200b\u6e90\u7801\u200b\u4fee\u6539\u200b\uff1a\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/lxc/tree/loongarch64-lxc-5.0.2\u200b\u7684\u200b\u8865\u4e01\u200b \u200b\u4f9d\u8d56\u200b\u5305\u200b\u5b89\u88c5\u200b\uff1a <pre><code>apk add build-base docbook2x libapparmor-dev libcap-dev libcap-static libseccomp-dev linux-headers linux-pam-dev meson\napk add automake autoconf libmagic file  libstdc++-dev musl-dev g++ fortify-headers build-base linux-headers  binutils\n</code></pre> \u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b <pre><code>abuild-meson -Db_lto= -Ddistrosysconfdir=/etc/default -Dpam-cgroup=true -Dtests=true -Dinit-script=[]  . output   //\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u4f1a\u200b\u5728\u200b\u5f53\u524d\u76ee\u5f55\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200boutput\u200b\u76ee\u5f55\u200b\uff0c\u200b\u7528\u6765\u200b\u5b58\u50a8\u200b\u6784\u5efa\u200b\u7ed3\u679c\u200b\nmeson compile -C output\nmeson install --no-rebuild -C output  //\u200b\u82e5\u200b\u8fd9\u91cc\u200b\u6ca1\u6709\u200b-C output\u200b\u5219\u200b\u9ed8\u8ba4\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/bin\u200b\u6216\u8005\u200b/usr/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre> \u200b\u5907\u6ce8\u200b: abuild-meson\u200b\u547d\u4ee4\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u66ff\u6362\u200b\u4e3a\u200bmeson\u200b\u547d\u4ee4\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-alpine/#72-lxc-templates","title":"7.2 lxc-templates","text":"<p>\u200b\u6e90\u7801\u200b\u4fee\u6539\u200b\uff1a\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/lxc-templates/commits/loongarch64-lxc-templates-3.0.4/\u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u201cModify alpine to support loongarch64\u201d \u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff1a <pre><code>./configure --build=loongarch64-alpine-linux-musl  --host=loongarch64-alpine-linux-musl --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --localstatedir=/var\nmake\nmake install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/","title":"lxc &amp; lxc-templates","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#1","title":"1.\u200b\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc \u200b\u7248\u672c\u200b 3.1.0 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc \u200b\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc-templates \u200b\u7248\u672c\u200b 3.0.4 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc-templates"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#2","title":"2.\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b loongnix debian10"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>lxc\uff1a \u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/lxc/tree/loongarch64-lxc-3.1.0 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b     lxc-templates: \u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/lxc-templates/tree/loongarch64-lxc-templates-3.0.4 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#4","title":"4.\u200b\u6784\u5efa\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#41-lxc","title":"4.1 lxc\u200b\u4e8c\u8fdb\u5236\u200b\u6784\u5efa","text":"<p>\u200b\u8fdb\u5165\u200b\u5230\u200blxc\u200b\u6e90\u7801\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\u540e\u200b\uff0c\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>apt install -y libcap-dev  //\u200b\u907f\u514d\u200b\u95ee\u9898\u200b1\u200b\u7684\u200b\u51fa\u73b0\u200b\n./autogen.sh\n./configure\nmake  //make\u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\u4f1a\u200b\u751f\u6210\u200b\u5728\u200bsrc/lxc/.libs\u200b\u76ee\u524d\u200b\uff0c\u200b\u751f\u6210\u200b\u7684\u200blxc-create/lxc-start\u200b\u7b49\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u50a8\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u76ee\u5f55\u200b\u5f53\u4e2d\u200b\nmake install  //make install\u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#42-lxc-templates","title":"4.2 lxc-templates\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u6784\u5efa","text":"<p>\u200b\u8fdb\u5165\u200b\u5230\u200b\u6e90\u7801\u200b\u6839\u76ee\u5f55\u200b\u540e\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>./autogen.sh\n./configure\nmake install  //make install \u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\uff0c\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u5c06\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/share/lxc/templates/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#5lxc-loongnixdebian","title":"5.\u200b\u4f7f\u7528\u200blxc-loongnixdebian\u200b\u6a21\u677f\u200b\u521b\u5efa\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u542f\u52a8","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#51","title":"5.1 \u200b\u5bb9\u5668\u200b\u521b\u5efa","text":"<p><pre><code>lxc-create -n loongnixdebian10-test -t loongnixdebian //-n\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u521b\u5efa\u200b\u7684\u200b\u5bb9\u5668\u200b\u540d\u79f0\u200b\uff0c-t\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a -t\u200b\u540e\u9762\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8ddf\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u7684\u200b\u5168\u200b\u8def\u5f84\u200b /usr/local/share/lxc/templates/lxc-loongnixdebian <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# lxc-create -n loongnixdebian10-test -t loongnixdebian |&amp;tee create-1023.log\ndebootstrap \u200b\u662f\u200b /usr/sbin/debootstrap\nChecking cache download in /usr/local/var/cache/lxc/debian/rootfs-DaoXiangHu-stable-loongarch64 ... \n\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\nDownloading debian minimal ...\nI: Retrieving InRelease \nI: Checking Release signature\n......\nGeneration complete.\nupdate-rc.d: error: cannot find a LSB script for checkroot.sh\nupdate-rc.d: error: cannot find a LSB script for umountfs\nFailed to disable unit, unit hwclock.sh.service does not exist.\nupdate-rc.d: error: cannot find a LSB script for hwclockfirst.sh\nCreating SSH2 RSA key; this may take some time ...\n2048 SHA256:42wm3HO77t8nvgLxq4vaZhxAFtZFCKXJ4Tni7ASlbm8 root@zhaixiaojuan-pc (RSA)\nCreating SSH2 ECDSA key; this may take some time ...\n256 SHA256:2kmxe8IDk925tk6HX8jNGDHnSjybhCclmDLRKAj10Kk root@zhaixiaojuan-pc (ECDSA)\nCreating SSH2 ED25519 key; this may take some time ...\n256 SHA256:ACeocHsJsB+oVroRsHryt93MasbzXA24u+NvDt58wXg root@zhaixiaojuan-pc (ED25519)\ninvoke-rc.d: could not determine current runlevel\ninvoke-rc.d: policy-rc.d denied execution of start.\n\nCurrent default time zone: 'Etc/UTC'\nLocal time is now:      2023\u200b\u5e74\u200b 10\u200b\u6708\u200b 23\u200b\u65e5\u200b \u200b\u661f\u671f\u4e00\u200b 02:10:32 UTC.\nUniversal Time is now:  Mon Oct 23 02:10:32 UTC 2023.\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#52","title":"5.2 \u200b\u5bb9\u5668\u200b\u542f\u52a8","text":"<p><pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# lxc-start -n loongnixdebian10-test\nroot@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# lxc-attach -n loongnixdebian10-test\nroot@loongnixdebian10-test:/# ls\nbin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  selinux  srv  sys  tmp  usr  var\nroot@loongnixdebian10-test:/# cat /etc/apt/sources.list\ndeb https://pkg.loongnix.cn/loongnix          DaoXiangHu-stable         main\n</code></pre> \u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u53ef\u4ee5\u200b\u542f\u52a8\u200b\uff0c\u200b\u4f46\u662f\u200b\u5bb9\u5668\u200b\u5185\u200b\u65e0\u6cd5\u8bbf\u95ee\u200b\u5916\u90e8\u200b\u7f51\u7edc\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#6","title":"6.\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e","text":"<p>\u200b\u8fd9\u91cc\u200b\u4e3b\u8981\u200b\u4ecb\u7ecd\u200b\u4e24\u79cd\u200b\u7f51\u7edc\u200b\u65b9\u6cd5\u200b\uff1a \u200b\u65b9\u6cd5\u200b1\uff1a\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0\uff0c\u200b\u5c06\u200b\u5176\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u4e0a\u200b     \u200b\u65b9\u6cd5\u200b2\uff1a\u200b\u4f7f\u7528\u200bvirbr0/docker0\u200b\u7f51\u6865\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#61-virbr0docker0","title":"6.1 \u200b\u4f7f\u7528\u200bvirbr0/docker0\u200b\u7f51\u6865","text":"<p>\u200b\u5176\u200b\u539f\u7406\u200b\u5c31\u662f\u200b\u4f7f\u7528\u200b\u7f51\u6865\u200bvirbr0/docker0\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u7f51\u6865\u200b\u5c06\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7f51\u7edc\u200b\u4e0a\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u200b\u5bb9\u5668\u200b\u5185\u4f7f\u200b\u5176\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u5916\u200b\u7f51\u200b\u3002 \u200b\u8fd9\u91cc\u200b\u4ecb\u7ecd\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200bvirbr0\u200b\u7f51\u6865\u200b   (1) \u200b\u5b89\u88c5\u200blibvirt0 <pre><code>apt install -y libvirt0\n</code></pre> \u200b\u5728\u200b\u5b89\u88c5\u200b\u5b8c\u200blibvirt0\u200b\u8f6f\u4ef6\u200b\u540e\u200b\uff0c\u200b\u4f7f\u7528\u200bifconfig\u200b\u547d\u4ee4\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u5230\u200b\u865a\u62df\u200b\u7f51\u5361\u200bvirbr0: <pre><code>virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500\n        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255\n        ether 52:54:00:6b:17:ed  txqueuelen 1000  (Ethernet)\n        RX packets 598  bytes 37039 (36.1 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 751  bytes 980279 (957.3 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre></p> <p>(2) \u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u914d\u7f6e\u200b\u5bb9\u5668\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\u8fde\u63a5\u200b\u5230\u200bvirbr0 <pre><code>/usr/local/var/lib/lxc/loongnixdebian10-test/config\uff1a\nlxc.net.0.type = veth  //\u200b\u8981\u200b\u5c06\u200b\u4e4b\u524d\u200b\u7684\u200blxc.net.0.type\u200b\u914d\u7f6e\u200b\u5220\u6389\u200b\nlxc.net.0.link = virbr0\nlxc.net.0.flags = up\nlxc.net.0.hwaddr = fe:b0:82:ca:33:00  //\u200b\u6ce8\u610f\u200b\u8fd9\u91cc\u200b\u7684\u200bMAC\u200b\u5730\u5740\u200b\u662f\u200b\u968f\u673a\u200b\u7684\u200b\uff0c\u200b\u53ea\u8981\u200b\u4e0d\u200b\u548c\u200b\u4e3b\u673a\u200b\u7684\u200bMAC\u200b\u5730\u5740\u200b\u76f8\u540c\u200b\u5373\u53ef\u200b\n</code></pre></p> <p>\uff083\uff09\u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\u6dfb\u52a0\u200b\u865a\u62df\u200b\u7f51\u5361\u200b \u200b\u5728\u200b/etc/network/interfaces\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>auto  eth0 //\u200b\u5728\u200b\u5bb9\u5668\u200b\u542f\u52a8\u200b\u65f6\u200b\u81ea\u52a8\u200b\u542f\u52a8\u200b\u8be5\u200b\u63a5\u53e3\u200b\niface eth0 inet dhcp //\u200b\u521b\u5efa\u200bIPv4\u200b\u7c7b\u578b\u200b\u7684\u200b\u63a5\u53e3\u200beth0, \u200b\u8be5\u200b\u63a5\u53e3\u200b\u901a\u8fc7\u200bdhcp\u200b\u81ea\u52a8\u200b\u83b7\u53d6\u200bIP\u200b\u5730\u5740\u200b\n</code></pre></p> <p>\uff084\uff09\u200b\u91cd\u542f\u200b\u5bb9\u5668\u200b\u4f7f\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b <pre><code>lxc-stop -n loongnixdebian10-test\nlxc-start -n loongnixdebian10-test\nlxc-attach -n loongnixdebian10-test\n</code></pre> \u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u5bb9\u5668\u200b\u5185\u200beth0\u200b\u7684\u200b\u7f51\u7edc\u200bIP\u200b\u548c\u200b\u4e3b\u673a\u200b\u4e0a\u200bvirbr0\u200b\u5728\u200b\u540c\u4e00\u200b\u7f51\u6bb5\u200b\u4e0a\u200b\uff1a <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# lxc-attach -n loongnixdebian10-test\nroot@loongnixdebian10-test:/# ifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.122.78  netmask 255.255.255.0  broadcast 192.168.122.255\n        inet6 fe80::fcb0:82ff:feca:3300  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether fe:b0:82:ca:33:00  txqueuelen 1000  (Ethernet)\n        RX packets 31  bytes 2159 (2.1 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 15  bytes 1878 (1.8 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> \u200b\u5bb9\u5668\u200b\u5185\u200b\u5df2\u7ecf\u200b\u53ef\u4ee5\u200b\u6b63\u5e38\u200b\u548c\u200b\u5916\u90e8\u200b\u901a\u4fe1\u200b\u4e86\u200b\uff1a <pre><code>root@loongnixdebian10-test:/# ping baidu.com\nPING baidu.com (39.156.66.10) 56(84) bytes of data.\n64 bytes from 39.156.66.10: icmp_seq=1 ttl=50 time=24.7 ms\n64 bytes from 39.156.66.10: icmp_seq=2 ttl=50 time=28.1 ms\n64 bytes from 39.156.66.10: icmp_seq=3 ttl=50 time=24.5 ms\n^C\n--- baidu.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 5ms\nrtt min/avg/max/mdev = 24.531/25.798/28.122/1.655 ms\nroot@loongnixdebian10-test:/# apt update\n\u200b\u547d\u4e2d\u200b:1 https://pkg.loongnix.cn/loongnix DaoXiangHu-stable InRelease\n\u200b\u6b63\u5728\u200b\u8bfb\u53d6\u200b\u8f6f\u4ef6\u5305\u200b\u5217\u8868\u200b... \u200b\u5b8c\u6210\u200b\n\u200b\u6b63\u5728\u200b\u5206\u6790\u200b\u8f6f\u4ef6\u5305\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b\u6811\u200b... \u200b\u5b8c\u6210\u200b\n\u200b\u6240\u6709\u200b\u8f6f\u4ef6\u5305\u200b\u5747\u200b\u4e3a\u200b\u6700\u65b0\u200b\u3002\n</code></pre></p> <p>\u200b\u5907\u6ce8\u200b\uff1a\u200b\u82e5\u200b\u8981\u200b\u4f7f\u7528\u200bdocker0\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u5148\u200b\u5728\u200b\u673a\u5668\u200b\u4e0a\u200b\u5b89\u88c5\u200bdocker, \u200b\u7136\u540e\u200b\u5c06\u200b/usr/local/var/lib/lxc/loongnixdebian10-test/config\u200b\u4e2d\u200b\u7684\u200blxc.net.0.link = virbr0 \u200b\u4fee\u6539\u200b\u4e3a\u200blxc.net.0.link = docker0\u200b\u5373\u53ef\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u4e0d\u518d\u200b\u5177\u4f53\u200b\u5c55\u793a\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixdebian/#62-br0","title":"6.2 \u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0\uff0c\u200b\u5c06\u200b\u5176\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u4e0a","text":"<p>\u200b\u5176\u200b\u57fa\u672c\u539f\u7406\u200b\u5c31\u662f\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u7f51\u6865\u200bbr0\uff0cbr0\u200b\u7684\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200b\u4e0a\u200b\uff0c\u200b\u53e6\u5916\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u5bb9\u5668\u200b\u4e0a\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u5f97\u200b\u5bb9\u5668\u200b\u83b7\u53d6\u200b\u4e0e\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200b\u76f8\u540c\u200b\u7684\u200b\u7f51\u7edc\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u3002     \uff081\uff09\u200b\u786e\u8ba4\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u7269\u7406\u200b\u7f51\u5361\u200b   \u200b\u901a\u8fc7\u200bifconfig\u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u6240\u6709\u200b\u7f51\u5361\u200b(\u200b\u5305\u62ec\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\u548c\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\uff09    <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/buildx# ifconfig\nenp0s3f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.184  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::4ad:d779:cf0d:108b  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 38:f7:cd:c4:2c:67  txqueuelen 1000  (Ethernet)\n        RX packets 17370450  bytes 11557378838 (10.7 GiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 11381411  bytes 1028843109 (981.1 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 47  \n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 838  bytes 46188 (45.1 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 838  bytes 46188 (45.1 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> /sys/devices/virtual/net/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u5b58\u50a8\u200b\u7684\u200b\u662f\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\uff1a <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# ls /sys/devices/virtual/net/\nlo\n</code></pre> \u200b\u6545\u200b\u53ef\u4ee5\u200b\u77e5\u9053\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u662f\u200benp0s3f0     \uff082\uff09\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0,\u200b\u5c06\u200b\u7f51\u6865\u200b\u7684\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7684\u200b\u7f51\u5361\u200b\u4e0a\u200b     \u200b\u5728\u200b\u4e3b\u673a\u200b/etc/network/interfaces\u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u52a0\u5165\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a    <pre><code>auto br0  //\u200b\u5728\u200b\u673a\u5668\u200b\u542f\u52a8\u200b\u65f6\u200b\u81ea\u52a8\u200b\u542f\u52a8\u200b\u8be5\u200b\u63a5\u53e3\u200b\niface br0 inet dhcp  //inet\u200b\u8868\u793a\u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200bIPv4\u200b\u7684\u200b\u63a5\u53e3\u200b\uff0cdhcp\u200b\u8868\u793a\u200b\u901a\u8fc7\u200bdhcp\u200b\u52a8\u6001\u200b\u83b7\u53d6\u200bIP\u200b\u5730\u5740\u200b     \n        bridge_ports enp0s3f0  //\u200b\u5c06\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200benp0s3f0\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7f51\u6865\u200bbr0\u200b\u4e0a\u200b    \n        bridge_fd 0\n        bridge_maxwait 0\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a \u200b\u5176\u4e2d\u200bbr0\u200b\u8981\u200b\u4e0e\u200b\u4e0b\u9762\u200b(4)\u200b\u4e2d\u200b\u7684\u200b\u914d\u7f6e\u200b\u7f51\u7edc\u200b\u540d\u79f0\u200b\u4e00\u81f4\u200b\uff0c enp0s3f0\u200b\u662f\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200b\u7684\u200b\u540d\u79f0\u200b     \uff083\uff09\u200b\u91cd\u542f\u200b\u4e3b\u673a\u200b\u7f51\u7edc\u670d\u52a1\u200b\uff0c\u200b\u4f7f\u200b\u7f51\u7edc\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b \u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u7684\u200b\u547d\u4ee4\u200b\u91cd\u542f\u200b\u7f51\u7edc\u670d\u52a1\u200b       <pre><code>/etc/init.d/networking restart   //\u200b\u91cd\u542f\u200b\u7f51\u7edc\u670d\u52a1\u200b\n</code></pre></p> <p>\u200b\u6b64\u65f6\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u4e3b\u673a\u200b\u7684\u200b\u7f51\u7edc\u200b\u4e2d\u200b\u51fa\u73b0\u200b\u4e86\u200b\u865a\u62df\u200b\u7f51\u7edc\u200bbr0\uff0c\u200b\u800c\u4e14\u200b\u7f51\u7edc\u200benp0s3f0\u200b\u7684\u200bip\u200b\u5730\u5740\u200b\u8d4b\u503c\u200b\u7ed9\u200b\u4e86\u200bbr0\uff1a      <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# ifconfig\nbr0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.184  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::3af7:cdff:fec4:2c67  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 38:f7:cd:c4:2c:67  txqueuelen 1000  (Ethernet)\n        RX packets 2166198  bytes 1039014791 (990.8 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 706798  bytes 81873829 (78.0 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nenp0s3f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        ether 38:f7:cd:c4:2c:67  txqueuelen 1000  (Ethernet)\n        RX packets 2275039  bytes 1104326714 (1.0 GiB)\n        RX errors 0  dropped 1  overruns 0  frame 0\n        TX packets 713886  bytes 82435827 (78.6 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 47  \n</code></pre></p> <p>\u200b\u4f7f\u7528\u200bbrctl show\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200benp0s3f0\u200b\u5df2\u7ecf\u200b\u7ed1\u5b9a\u200b\u4e86\u200bbr0\u200b\u4e0a\u200b\uff1a    <pre><code>root@zhaixiaojuan-pc:/home/zhaixiaojuan/workspace/lxc-project# brctl show\nbridge name bridge id       STP enabled interfaces\nbr0     8000.38f7cdc42c67   no      enp0s3f0\n</code></pre> \uff084\uff09\u200b\u4fee\u6539\u200b\u5bb9\u5668\u200b\u914d\u7f6e\u200b \u200b\u8be5\u200b\u6b65\u9aa4\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u5c06\u200b\u7f51\u6865\u200bbr0\u200b\u7684\u200b\u53e6\u5916\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u5bb9\u5668\u200b\u4e0a\u200b    1) \u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u4fee\u6539\u200b\u5bb9\u5668\u200b\u914d\u7f6e\u6587\u4ef6\u200b \u200b\u5728\u200b/usr/local/var/lib/lxc/loongnixdebian10-test/config\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>  lxc.net.0.type = veth  //\u200b\u6ce8\u610f\u200b\u8981\u200b\u5220\u9664\u200b\u4e4b\u524d\u200b\u7684\u200blxc.net.0.type\n  lxc.net.0.flags = up\n  ## that's the interface defined above in host's interfaces file\n  lxc.net.0.link = br0\n  lxc.net.0.hwaddr = 00:FF:AA:00:00:01\n</code></pre> 2\uff09\u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\u8bbe\u7f6e\u200b\u865a\u62df\u200b\u7f51\u7edc\u200beth0 \u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b/etc/network/interfaces\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>auto  eth0 //\u200b\u5728\u200b\u5bb9\u5668\u200b\u542f\u52a8\u200b\u65f6\u200b\u81ea\u52a8\u200b\u542f\u52a8\u200b\u8be5\u200b\u63a5\u53e3\u200b\niface eth0 inet dhcp //\u200b\u521b\u5efa\u200bIPv4\u200b\u7c7b\u578b\u200b\u7684\u200b\u63a5\u53e3\u200beth0, \u200b\u8be5\u200b\u63a5\u53e3\u200b\u901a\u8fc7\u200bdhcp\u200b\u81ea\u52a8\u200b\u83b7\u53d6\u200bIP\u200b\u5730\u5740\u200b\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a1\uff09\u200b\u548c\u200b 2\uff09\u200b\u7684\u200b\u4f5c\u7528\u200b\u5c06\u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\u521b\u5efa\u200b\u865a\u62df\u200b\u7f51\u7edc\u200beth0\uff0c\u200b\u53ea\u6709\u200b\u5728\u200b1\u200b\u4e2d\u5c06\u200btype\u200b\u7c7b\u578b\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bveth\uff0c\u200b\u624d\u80fd\u200b\u5728\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u6309\u7167\u200b2\uff09\u200b\u7684\u200b\u914d\u7f6e\u200b\u521b\u5efa\u200b\u7f51\u7edc\u200beth0\u3002      (5) \u200b\u91cd\u542f\u200b\u7f51\u7edc\u200b \u200b\u4fee\u6539\u200b\u5b8c\u200b\u7f51\u7edc\u200b\u914d\u7f6e\u200b\u540e\u200b\uff0c\u200b\u5fc5\u987b\u200b\u91cd\u542f\u200b\u5bb9\u5668\u200b\u624d\u80fd\u200b\u751f\u6548\u200b\uff1a <pre><code>lxc-stop -n loongnixdebian10-test\nlxc-start -n loongnixdebian10-test\nlxc-attach -n loongnixdebian10-test\n</code></pre></p> <pre><code>root@loongnixdebian10-test:/# ifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.69  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::fcb0:82ff:feca:3300  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether fe:b0:82:ca:33:00  txqueuelen 1000  (Ethernet)\n        RX packets 18978  bytes 2497376 (2.3 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 49  bytes 4917 (4.8 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nroot@loongnixdebian10-test:/# \nroot@loongnixdebian10-test:/# brctl show\nroot@loongnixdebian10-test:/# ping baidu.com\nPING baidu.com (110.242.68.66) 56(84) bytes of data.\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=1 ttl=54 time=20.8 ms\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=2 ttl=54 time=20.5 ms\n^C\n--- baidu.com ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 2ms\nrtt min/avg/max/mdev = 20.466/20.631/20.797/0.219 ms\n\nroot@loongnixdebian10-test:/# apt update\n\u200b\u547d\u4e2d\u200b:1 https://pkg.loongnix.cn/loongnix DaoXiangHu-stable InRelease\n\u200b\u6b63\u5728\u200b\u8bfb\u53d6\u200b\u8f6f\u4ef6\u5305\u200b\u5217\u8868\u200b... \u200b\u5b8c\u6210\u200b\n\u200b\u6b63\u5728\u200b\u5206\u6790\u200b\u8f6f\u4ef6\u5305\u200b\u7684\u200b\u4f9d\u8d56\u200b\u5173\u7cfb\u200b\u6811\u200b... \u200b\u5b8c\u6210\u200b\n\u200b\u6240\u6709\u200b\u8f6f\u4ef6\u5305\u200b\u5747\u200b\u4e3a\u200b\u6700\u65b0\u200b\u3002\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/","title":"lxc &amp; lxc-templates","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#1","title":"1.\u200b\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc \u200b\u7248\u672c\u200b 3.1.0 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc \u200b\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b lxc-templates \u200b\u7248\u672c\u200b 3.0.4 \u200b\u5b98\u65b9\u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/lxc/lxc-templates"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#2","title":"2.\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b loongnix server8.4"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>lxc\uff1a \u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/lxc/tree/loongarch64-lxc-3.1.0 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b     lxc-templates: \u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/lxc-templates/tree/loongarch64-lxc-templates-3.0.4 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#4","title":"4.\u200b\u6784\u5efa\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#41-lxc","title":"4.1 lxc\u200b\u4e8c\u8fdb\u5236\u200b\u6784\u5efa","text":"<p>\u200b\u8fdb\u5165\u200b\u5230\u200blxc\u200b\u6e90\u7801\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\u540e\u200b\uff0c\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>yum install -y libcap-devel  //\u200b\u907f\u514d\u200b\u95ee\u9898\u200b1\u200b\u7684\u200b\u51fa\u73b0\u200b\n./autogen.sh\n./configure\nmake  //make\u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\u4f1a\u200b\u751f\u6210\u200b\u5728\u200bsrc/lxc/.libs\u200b\u76ee\u524d\u200b\uff0c\u200b\u751f\u6210\u200b\u7684\u200blxc-create/lxc-start\u200b\u7b49\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u50a8\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u76ee\u5f55\u200b\u5f53\u4e2d\u200b\nmake install  //make install\u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#42-lxc-templates","title":"4.2 lxc-templates\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u6784\u5efa","text":"<p>\u200b\u8fdb\u5165\u200b\u5230\u200b\u6e90\u7801\u200b\u6839\u76ee\u5f55\u200b\u540e\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a <pre><code>./autogen.sh\n./configure\nmake install  //make install \u200b\u6267\u884c\u200b\u5b8c\u540e\u200b\uff0c\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u5c06\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/share/lxc/templates/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#5lxc-loongnixserver","title":"5.\u200b\u4f7f\u7528\u200blxc-loongnixserver\u200b\u6a21\u677f\u200b\u521b\u5efa\u200b\u5bb9\u5668\u200b\u4e0e\u200b\u542f\u52a8","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#51","title":"5.1 \u200b\u5bb9\u5668\u200b\u521b\u5efa","text":"<p><pre><code>lxc-create -n loongnixserver8.4-test -t loongnixserver //-n\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u521b\u5efa\u200b\u7684\u200b\u5bb9\u5668\u200b\u540d\u79f0\u200b\uff0c-t\u200b\u540e\u9762\u200b\u8ddf\u200b\u7684\u200b\u662f\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a -t\u200b\u540e\u9762\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8ddf\u200b\u6a21\u677f\u200b\u6587\u4ef6\u200b\u7684\u200b\u5168\u200b\u8def\u5f84\u200b /usr/local/share/lxc/templates/lxc-loongnixserver <pre><code>[root@kubernetes-master-1 lxc]# lxc-create -n loongnixserver8.4-test -t loongnixserver\n......\nCopy /usr/local/var/cache/lxc/loongnixserver/loongarch64/8.4/rootfs to /usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs ... \nCopying rootfs to /usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs ...\nStoring root password in '/usr/local/var/lib/lxc/loongnixserver8.4-test/tmp_root_pass'\n\u200b\u6b63\u5728\u200b\u7ec8\u6b62\u200b\u7528\u6237\u200b root \u200b\u7684\u200b\u5bc6\u7801\u200b\u3002\npasswd: \u200b\u64cd\u4f5c\u200b\u6210\u529f\u200b\n\nContainer rootfs and config have been created.\nEdit the config file to check/enable networking setup.\n\nThe temporary root password is stored in:\n\n        '/usr/local/var/lib/lxc/loongnixserver8.4-test/tmp_root_pass'\n\nThe root password is set up as expired and will require it to be changed\nat first login, which you should do as soon as possible.  If you lose the\nroot password or wish to change it without starting the container, you\ncan change it from the host by running the following command (which will\nalso reset the expired flag):\n\n        chroot /usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs passwd\n</code></pre> <pre><code>[root@kubernetes-master-1 lxc]# lxc-ls\nloongnixserver8.4-test \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#52","title":"5.2 \u200b\u5bb9\u5668\u200b\u542f\u52a8","text":"<p>\u200b\u6b64\u65f6\u200b\u76f4\u63a5\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\u4f1a\u200b\u62a5\u9519\u200b\uff0c\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@kubernetes-master-1 lxc]# lxc-start -n loongnixserver8.4-test --logfile=aaa\nlxc-start: loongnixserver8.4-test: lxccontainer.c: wait_on_daemonized_start: 864 Received container state \"ABORTING\" instead of \"RUNNING\"\nlxc-start: loongnixserver8.4-test: tools/lxc_start.c: main: 330 The container failed to start\nlxc-start: loongnixserver8.4-test: tools/lxc_start.c: main: 333 To get more details, run the container in foreground mode\nlxc-start: loongnixserver8.4-test: tools/lxc_start.c: main: 336 Additional information can be obtained by setting the --logfile and --logpriority options\n[root@kubernetes-master-1 lxc]# cat aaa\nlxc-start loongnixserver8.4-test 20231027072735.235 ERROR    utils - utils.c:run_command:1623 - Failed to exec command\nlxc-start loongnixserver8.4-test 20231027072735.235 ERROR    network - network.c:lxc_ovs_attach_bridge:1887 - Failed to attach \"lxcbr0\" to openvswitch bridge \"veth58EVGK\": lxc-start: loongnixserver8.4-test: utils.c: run_command: 1623 Failed to exec command\nlxc-start loongnixserver8.4-test 20231027072735.235 ERROR    network - network.c:instantiate_veth:172 - Operation not permitted - Failed to attach \"veth58EVGK\" to bridge \"lxcbr0\"\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    network - network.c:lxc_create_network_priv:2457 - Failed to create network device\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    start - start.c:lxc_spawn:1646 - Failed to create the network\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    start - start.c:__lxc_start:1972 - Failed to spawn container \"loongnixserver8.4-test\"\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    lxccontainer - lxccontainer.c:wait_on_daemonized_start:864 - Received container state \"ABORTING\" instead of \"RUNNING\"\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    lxc_start - tools/lxc_start.c:main:330 - The container failed to start\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    lxc_start - tools/lxc_start.c:main:333 - To get more details, run the container in foreground mode\nlxc-start loongnixserver8.4-test 20231027072735.259 ERROR    lxc_start - tools/lxc_start.c:main:336 - Additional information can be obtained by setting the --logfile and --logpriority options\n</code></pre></p> <p>\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5bb9\u5668\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b/usr/local/var/lib/lxc/loongnixserver8.4-test/config \u200b\u4e2d\u200b\u7b2c\u200b11\u200b\u884c\u200b\u9ed8\u8ba4\u8bbe\u7f6e\u200b\u4e86\u200b\u5bb9\u5668\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u5230\u200b\u7f51\u6865\u200blxcbr0\uff0c\u200b\u800c\u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u4e0d\u200b\u5b58\u5728\u200b\u8be5\u200b\u7f51\u6865\u200b\u6240\u4ee5\u200b\u62a5\u9519\u200b: <pre><code> 10 lxc.net.0.type = veth\n 11 lxc.net.0.link = lxcbr0\n 12 lxc.net.0.hwaddr = fe:e0:32:2e:57:82\n 13 lxc.net.0.flags = up\n 14 lxc.rootfs.path = dir:/usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs\n</code></pre></p> <p>\u200b\u82e5\u200b\u60f3\u8981\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\uff0c\u200b\u53ef\u200b\u5c06\u200b\u6587\u4ef6\u200b/usr/local/var/lib/lxc/loongnixserver8.4-test/config\u200b\u7684\u200b\u7b2c\u200b11\u200b\u884c\u200b\u4ee3\u7801\u200b\u6682\u65f6\u200b\u6ce8\u91ca\u200b: <pre><code> 10 lxc.net.0.type = veth\n 11 # lxc.net.0.link = lxcbr0\n 12 lxc.net.0.hwaddr = fe:e0:32:2e:57:82\n 13 lxc.net.0.flags = up\n 14 lxc.rootfs.path = dir:/usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs\n</code></pre></p> <p>\u200b\u6b64\u65f6\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u542f\u52a8\u200b\u5bb9\u5668\u200b\uff0c\u200b\u4f46\u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u7f51\u7edc\u200b\u4e0d\u901a\u200b\uff0c\u200b\u5177\u4f53\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@kubernetes-master-1 lxc]# lxc-ls \nloongnixserver8.4-test \n[root@kubernetes-master-1 lxc]# lxc-start -n loongnixserver8.4-test\n[root@kubernetes-master-1 lxc]# lxc-attach -n loongnixserver8.4-test\n[root@loongnixserver8 /]# ls\nbin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  selinux  srv  sys  tmp  usr  var\n[root@loongnixserver8 /]# ping baidu.com\nping: baidu.com: Name or service not known\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#6","title":"6.\u200b\u7f51\u7edc\u200b\u8bbe\u7f6e","text":"<p>\u200b\u8fd9\u91cc\u200b\u4e3b\u8981\u200b\u4ecb\u7ecd\u200b\u4e24\u79cd\u200b\u7f51\u7edc\u200b\u65b9\u6cd5\u200b\uff1a       \u200b\u65b9\u6cd5\u200b1\uff1a\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0\uff0c\u200b\u5c06\u200b\u5176\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u4e0a\u200b       \u200b\u65b9\u6cd5\u200b2\uff1a\u200b\u4f7f\u7528\u200bvirbr0/docker0\u200b\u7f51\u6865\u200b        </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#61-virbr0docker0","title":"6.1 \u200b\u4f7f\u7528\u200bvirbr0/docker0\u200b\u7f51\u6865","text":"<p>\u200b\u5176\u200b\u539f\u7406\u200b\u5c31\u662f\u200b\u4f7f\u7528\u200b\u7f51\u6865\u200bvirbr0/docker0\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u7f51\u6865\u200b\u5c06\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7f51\u7edc\u200b\u4e0a\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u200b\u5bb9\u5668\u200b\u5185\u4f7f\u200b\u5176\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u5916\u200b\u7f51\u200b\u3002 \u200b\u8fd9\u91cc\u200b\u4ecb\u7ecd\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200bvirbr0\u200b\u7f51\u6865\u200b   (1) \u200b\u5b89\u88c5\u200blibvirt <pre><code>yum install -y libvirt\n</code></pre> \u200b\u5728\u200b\u5b89\u88c5\u200b\u5b8c\u200blibvirt\u200b\u8f6f\u4ef6\u200b\u540e\u200b\uff0c\u200b\u4f7f\u7528\u200bifconfig\u200b\u547d\u4ee4\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u5230\u200b\u865a\u62df\u200b\u7f51\u5361\u200bvirbr0: <pre><code>virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500\n        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255\n        ether 52:54:00:6b:17:ed  txqueuelen 1000  (Ethernet)\n        RX packets 598  bytes 37039 (36.1 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 751  bytes 980279 (957.3 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre></p> <p>(2) \u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u914d\u7f6e\u200b\u5bb9\u5668\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\u8fde\u63a5\u200b\u5230\u200bvirbr0 <pre><code>/usr/local/var/lib/lxc/loongnixserver8.4-test/config\uff1a\n 10 lxc.net.0.type = veth\n 11 lxc.net.0.link = virbr0  //\u200b\u66ff\u6362\u200b\u9ed8\u8ba4\u200b\u7684\u200blxcbr0\n 12 lxc.net.0.hwaddr = fe:e0:32:2e:57:82\n 13 lxc.net.0.flags = up\n 14 lxc.rootfs.path = dir:/usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs\n</code></pre></p> <p>\uff083\uff09\u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\u6dfb\u52a0\u200b\u865a\u62df\u200b\u7f51\u5361\u200beth0 \u200b\u5728\u200b/etc/sysconfig/network-scripts/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6dfb\u52a0\u200bifcfg-eth0\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a <pre><code>DEVICE=eth0\nBOOTPROTO=dhcp  //\u200b\u901a\u8fc7\u200bdhcp\u200b\u52a8\u6001\u200b\u83b7\u53d6\u200bip\u200b\u5730\u5740\u200b\nONBOOT=yes\nHOSTNAME=loongnixserver8.4-test\nNM_CONTROLLED=no\nTYPE=Ethernet\nMTU=\nDHCP_HOSTNAME=`hostname`\n</code></pre></p> <p>\uff084\uff09\u200b\u91cd\u542f\u200b\u5bb9\u5668\u200b\u4f7f\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b <pre><code>lxc-stop -n loongnixserver8.4-test\nlxc-start -n loongnixserver8.4-test\nlxc-attach -n loongnixserver8.4-test\n</code></pre> \u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u5bb9\u5668\u200b\u5185\u200beth0\u200b\u7684\u200b\u7f51\u7edc\u200bIP\u200b\u548c\u200b\u4e3b\u673a\u200b\u4e0a\u200bvirbr0\u200b\u5728\u200b\u540c\u4e00\u200b\u7f51\u6bb5\u200b\u4e0a\u200b\uff1a <pre><code>[root@kubernetes-master-1 lxc]# lxc-stop -n loongnixserver8.4-test\n[root@kubernetes-master-1 lxc]# lxc-start -n loongnixserver8.4-test\n[root@kubernetes-master-1 lxc]# lxc-attach -n loongnixserver8.4-test\n[root@loongnixserver8 /]# ifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.122.217  netmask 255.255.255.0  broadcast 192.168.122.255\n        inet6 fe80::fce0:32ff:fe2e:5782  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether fe:e0:32:2e:57:82  txqueuelen 1000  (Ethernet)\n        RX packets 202  bytes 11375 (11.1 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 18  bytes 2092 (2.0 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> \u200b\u5bb9\u5668\u200b\u5185\u200b\u5df2\u7ecf\u200b\u53ef\u4ee5\u200b\u6b63\u5e38\u200b\u548c\u200b\u5916\u90e8\u200b\u901a\u4fe1\u200b\u4e86\u200b\uff1a <pre><code>[root@loongnixserver8 /]# ping baidu.com\nPING baidu.com (110.242.68.66) 56(84) bytes of data.\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=1 ttl=53 time=22.2 ms\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=2 ttl=53 time=24.1 ms\n^C\n--- baidu.com ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 22.227/23.166/24.106/0.951 ms\n[root@loongnixserver8 /]# \n[root@loongnixserver8 /]# yum makecache\nLoongnix server 8.4 - BaseOS                                                                                                                                   60 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - AppStream                                                                                                                                64 kB/s | 4.3 kB     00:00    \nLoongnix server 8.4 - Extras                                                                                                                                   62 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-buildtools-common                                                                                                                  37 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-gitforge-pagure                                                                                                                    41 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-common                                                                                                                             43 kB/s | 3.0 kB     00:00    \n\u200b\u5143\u200b\u6570\u636e\u200b\u7f13\u5b58\u200b\u5df2\u200b\u5efa\u7acb\u200b\u3002\n</code></pre></p> <p>\u200b\u5907\u6ce8\u200b\uff1a\u200b\u82e5\u200b\u8981\u200b\u4f7f\u7528\u200bdocker0\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u5148\u200b\u5728\u200b\u673a\u5668\u200b\u4e0a\u200b\u5b89\u88c5\u200bdocker, \u200b\u7136\u540e\u200b\u5c06\u200b/usr/local/var/lib/lxc/loongnixserver8.4-test/config\u200b\u4e2d\u200b\u7684\u200blxc.net.0.link = virbr0 \u200b\u4fee\u6539\u200b\u4e3a\u200blxc.net.0.link = docker0\u200b\u5373\u53ef\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u4e0d\u518d\u200b\u5177\u4f53\u200b\u5c55\u793a\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc-loongnixserver/#62-br0","title":"6.2 \u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0\uff0c\u200b\u5c06\u200b\u5176\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u4e0a","text":"<p>\u200b\u5176\u200b\u57fa\u672c\u539f\u7406\u200b\u5c31\u662f\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u7f51\u6865\u200bbr0\uff0cbr0\u200b\u7684\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200b\u4e0a\u200b\uff0c\u200b\u53e6\u5916\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u5bb9\u5668\u200b\u4e0a\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u5f97\u200b\u5bb9\u5668\u200b\u83b7\u53d6\u200b\u4e0e\u200b\u4e3b\u673a\u200b\u7f51\u5361\u200b\u76f8\u540c\u200b\u7684\u200b\u7f51\u7edc\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u3002     \uff081\uff09\u200b\u786e\u8ba4\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u7269\u7406\u200b\u7f51\u5361\u200b   \u200b\u901a\u8fc7\u200bifconfig\u200b\u67e5\u770b\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u6240\u6709\u200b\u7f51\u5361\u200b(\u200b\u5305\u62ec\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\u548c\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\uff09    <pre><code>[root@kubernetes-master-1 lxc]# ifconfig\ndocker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500\n        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255\n        inet6 fe80::42:aff:feff:12c8  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 02:42:0a:ff:12:c8  txqueuelen 0  (Ethernet)\n        RX packets 2535728  bytes 137783421 (131.4 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 4804202  bytes 7437553909 (6.9 GiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nenp0s3f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.98  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::2807:a5f2:8ab6:eae4  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 38:f7:cd:c4:2d:46  txqueuelen 1000  (Ethernet)\n        RX packets 28478114  bytes 17123123101 (15.9 GiB)\n        RX errors 0  dropped 5208473  overruns 0  frame 0\n        TX packets 8171673  bytes 3287300224 (3.0 GiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 47  \n.......\n</code></pre> /sys/devices/virtual/net/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u5b58\u50a8\u200b\u7684\u200b\u662f\u200b\u865a\u62df\u200b\u7f51\u5361\u200b\uff1a <pre><code>[root@kubernetes-master-1 lxc]# ls /sys/devices/virtual/net/\ndocker0  dummy0  lo  nerdctl0  sit0  veth551E9Q  virbr0  virbr0-nic\n</code></pre> \u200b\u6545\u200b\u53ef\u4ee5\u200b\u77e5\u9053\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u7269\u7406\u200b\u7f51\u5361\u200b\u662f\u200benp0s3f0   </p> <p>\uff082\uff09\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0,\u200b\u5c06\u200b\u7f51\u6865\u200b\u7684\u200b\u4e00\u7aef\u200b\u8fde\u63a5\u200b\u5230\u200b\u4e3b\u673a\u200b\u7684\u200b\u7f51\u5361\u200b\u4e0a\u200b     \u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a  1\uff09\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0 <pre><code>[root@kubernetes-master-1 network-scripts]# nmcli connection add type bridge con-name br0 ifname br0 autoconnect yes\n\u200b\u8fde\u63a5\u200b \"br0\" (98039fb8-bce4-49d5-9dc4-413c1f070482) \u200b\u5df2\u200b\u6210\u529f\u200b\u6dfb\u52a0\u200b\u3002\n</code></pre> \u200b\u5728\u200b\u6210\u529f\u200b\u521b\u5efa\u200b\u7f51\u6865\u200bbr0\u200b\u4ee5\u540e\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff1a <pre><code>[root@kubernetes-master-1 network-scripts]# nmcli connection\nNAME        UUID                                  TYPE      DEVICE   \n\u200b\u6709\u7ebf\u200b\u8fde\u63a5\u200b 1  face2e91-cade-3e71-a39e-83e334f42e3f  ethernet  enp0s3f0 \ndocker0     2ee07799-6074-4cc8-a2e6-a0385ae46bf5  bridge    docker0  \nnerdctl0    acf5f4d7-1322-45cb-b3ac-bc66859cdda7  bridge    nerdctl0 \nvirbr0      f9160b73-9080-4bad-a207-d8f275c66955  bridge    virbr0   \nbr0         98039fb8-bce4-49d5-9dc4-413c1f070482  bridge    --   \n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a \u200b\u6b64\u65f6\u200b\u5728\u200b\u4f1a\u200b\u5728\u200b/etc/sysconfig/network-scripts/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u6587\u4ef6\u200bifcfg-br0 <pre><code> cat /etc/sysconfig/network-scripts/ifcfg-br0 \nSTP=yes\nBRIDGING_OPTS=priority=32768\nTYPE=Bridge\nPROXY_METHOD=none\nBROWSER_ONLY=no\nBOOTPROTO=dhcp\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=br0\nUUID=2acac4a7-e8da-4bbe-9133-9486eb7d1221\nDEVICE=br0\n</code></pre></p> <p>2) \u200b\u5c06\u200b\u7269\u7406\u200b\u7f51\u5361\u200benp0s3f0\u200b\u6865\u200b\u63a5\u5230\u200b\u7f51\u6865\u200bbr0\u200b\u4e0a\u200b <pre><code>[root@kubernetes-master-1 network-scripts]# nmcli connection add type bridge-slave ifname enp0s3f0 master br0\n\u200b\u8fde\u63a5\u200b \"bridge-slave-enp0s3f0\" (b860efd2-c0e9-4b06-9954-b5615f34bf54) \u200b\u5df2\u200b\u6210\u529f\u200b\u6dfb\u52a0\u200b\u3002\n</code></pre> \u200b\u5f53\u200b\u6267\u884c\u200b\u5b8c\u200b\u8fd9\u4e2a\u200b\u547d\u4ee4\u200b\u540e\u4f1a\u200b\u5728\u200b/etc/sysconfig/network-scripts \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u6587\u4ef6\u200bifcfg-bridge-slave-enp0s3f0\uff1a     <pre><code>cat /etc/sysconfig/network-scripts/ifcfg-bridge-slave-enp0s3f0 \nTYPE=Ethernet\nNAME=bridge-slave-enp0s3f0\nUUID=27d5721f-de75-48ae-9245-1b04dbb4ef3c\nDEVICE=enp0s3f0\nONBOOT=yes\nBRIDGE=br0\n</code></pre></p> <p>3\uff09\u200b\u542f\u52a8\u200bbr0 <pre><code>[root@kubernetes-master-1 network-scripts]# nmcli connection up br0\n\u200b\u8fde\u63a5\u200b\u5df2\u200b\u6210\u529f\u200b\u6fc0\u6d3b\u200b\uff08master waiting for slaves\uff09\uff08D-Bus \u200b\u6d3b\u52a8\u200b\u8def\u5f84\u200b\uff1a/org/freedesktop/NetworkManager/ActiveConnection/8\uff09\n</code></pre></p> <p>4\uff09\u200b\u7ed9\u200b\u7f51\u6865\u200bbr0\u200b\u8bbe\u7f6e\u200bip\u200b\u5730\u5740\u200b      \u200b\u53ef\u200b\u9009\u62e9\u200b\u9759\u6001\u200b\u8bbe\u7f6e\u200bip\u200b\u5730\u5740\u200b\uff0c\u200b\u6216\u200b\u52a8\u6001\u200b\u83b7\u53d6\u200bip\u200b\u5730\u5740\u200b\u3002    \u200b\u9759\u6001\u200b\u8bbe\u7f6e\u200bip\u200b\u5730\u5740\u200b\uff1a   <pre><code>[root@kubernetes-master-1 network-scripts]# nmcli c m br0 ipv4.address 10.130.0.112/24 ipv4.gateway 10.130.1.1 ipv4.method manual\n</code></pre> \u200b\u52a8\u6001\u200b\u83b7\u53d6\u200bip\u200b\u5730\u5740\u200b\uff1a <pre><code>nmcli c m br0 ipv4.method auto\n</code></pre> 5\uff09\u200b\u91cd\u542f\u200b\u7f51\u7edc\u200b\u4f7f\u200b\u4e0a\u9762\u200b\u7684\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b <pre><code>[root@kubernetes-master-1 network-scripts]# systemctl restart network\n</code></pre> \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff0c\u200b\u7f51\u6865\u200bbr0\u200b\u4e0a\u200b\u5df2\u7ecf\u200b\u7ed1\u5b9a\u200b\u4e86\u200bIP\u200b\u5730\u5740\u200b10.130.0.112, \u200b\u800c\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u7269\u7406\u200b\u7f51\u5361\u200benp0s3f0\u200b\u7684\u200bip\u200b\u5730\u5740\u200b\u5df2\u7ecf\u200b\u6ca1\u6709\u200b\u4e86\u200b <pre><code>[root@kubernetes-master-1 workspace]# ifconfig\nbr0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.112  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::5189:f7ec:e685:bad2  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 38:f7:cd:c4:2d:46  txqueuelen 1000  (Ethernet)\n        RX packets 52481  bytes 3229883 (3.0 MiB)\n        RX errors 0  dropped 1929  overruns 0  frame 0\n        TX packets 2558  bytes 231555 (226.1 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nenp0s3f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        ether 38:f7:cd:c4:2d:46  txqueuelen 1000  (Ethernet)\n        RX packets 28558055  bytes 17129537503 (15.9 GiB)\n        RX errors 0  dropped 5212469  overruns 0  frame 0\n        TX packets 8177499  bytes 3287944288 (3.0 GiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 47  \n</code></pre> \u200b\u7f51\u6865\u200bbr0\u200b\u5df2\u7ecf\u200b\u8fde\u63a5\u200b\u5230\u200b\u7269\u7406\u200b\u7f51\u5361\u200benp0s3f0\u200b\u4e0a\u200b\uff1a <pre><code>[root@kubernetes-master-1 workspace]# brctl show\nbridge name bridge id       STP enabled interfaces\nbr0     8000.38f7cdc42d46   yes     enp0s3f0\ndocker0     8000.02420aff12c8   no      \nnerdctl0        8000.000000000000   no      \nvirbr0      8000.5254006b17ed   yes     virbr0-nic\n</code></pre></p> <p>\uff083\uff09\u200b\u5728\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u914d\u7f6e\u200blxc\u200b\u5bb9\u5668\u200b\u7684\u200b\u7f51\u7edc\u8fde\u63a5\u200b\u5230\u200b\u7f51\u6865\u200bbr0 /usr/local/var/lib/lxc/loongnixserver8.4-test/config: <pre><code> 10 lxc.net.0.type = veth\n 11 lxc.net.0.link = br0 //\u200b\u5c06\u200b\u9ed8\u8ba4\u200b\u7684\u200blxcbr0\u200b\u4fee\u6539\u200b\u4e3a\u200bbr0\n 12 lxc.net.0.hwaddr = fe:e0:32:2e:57:82\n 13 lxc.net.0.flags = up\n 14 lxc.rootfs.path = dir:/usr/local/var/lib/lxc/loongnixserver8.4-test/rootfs\n</code></pre></p> <p>(4)\u200b\u5728\u200b\u5bb9\u5668\u200b\u5185\u200b\u521b\u5efa\u200b\u865a\u62df\u200b\u7f51\u7edc\u200beth0 \u200b\u5728\u200b/etc/sysconfig/network-scripts/\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u521b\u5efa\u200b\u6587\u4ef6\u200bifcfg-eth0\uff0c\u200b\u5177\u4f53\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@loongnixserver8 /]# cat /etc/sysconfig/network-scripts/ifcfg-eth0 \nDEVICE=eth0\nBOOTPROTO=dhcp\nONBOOT=yes\nHOSTNAME=loongnixserver8.4-test\nNM_CONTROLLED=no\nTYPE=Ethernet\nMTU=\nDHCP_HOSTNAME=`hostname`\n</code></pre></p> <p>(5) \u200b\u91cd\u65b0\u542f\u52a8\u200b\u5bb9\u5668\u200b\u4f7f\u200b\u914d\u7f6e\u200b\u751f\u6548\u200b \u200b\u91cd\u542f\u200b\u5bb9\u5668\u200b\u540e\u200b\u9700\u8981\u200b\u7b49\u5f85\u200b\u4e00\u4f1a\u200b\uff0c\u200b\u7136\u540e\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u5bb9\u5668\u200b\u5185\u200b\u7684\u200b\u7f51\u7edc\u200beth0\u200b\u5df2\u7ecf\u200b\u83b7\u53d6\u200b\u5230\u200b\u4e86\u200bip\u200b\u5730\u5740\u200b\uff0c\u200b\u5e76\u4e14\u200b\u548c\u200b\u7f51\u6865\u200bip\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200b\u7f51\u6bb5\u200b\u4e0a\u200b <pre><code>[root@kubernetes-master-1 workspace]# lxc-stop -n loongnixserver8.4-test\n[root@kubernetes-master-1 workspace]# lxc-start -n loongnixserver8.4-test\n[root@kubernetes-master-1 workspace]# lxc-attach -n loongnixserver8.4-test\n[root@loongnixserver8 /]# ifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.130.0.156  netmask 255.255.255.0  broadcast 10.130.0.255\n        inet6 fe80::fce0:32ff:fe2e:5782  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether fe:e0:32:2e:57:82  txqueuelen 1000  (Ethernet)\n        RX packets 2860  bytes 214588 (209.5 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 25  bytes 3778 (3.6 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre></p> <p>\u200b\u6b64\u65f6\u200b\u5bb9\u5668\u200b\u5185\u200b\u5df2\u7ecf\u200b\u53ef\u4ee5\u200b\u8fde\u63a5\u200b\u5916\u90e8\u200b\u7f51\u7edc\u200b\uff1a <pre><code>[root@loongnixserver8 /]# yum makecache\nLoongnix server 8.4 - BaseOS                                                                                                                                   66 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - AppStream                                                                                                                                56 kB/s | 4.3 kB     00:00    \nLoongnix server 8.4 - Extras                                                                                                                                   32 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-buildtools-common                                                                                                                  60 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-gitforge-pagure                                                                                                                    62 kB/s | 3.0 kB     00:00    \nLoongnix server 8.4 - infra-common                                                                                                                             38 kB/s | 3.0 kB     00:00    \n\u200b\u5143\u200b\u6570\u636e\u200b\u7f13\u5b58\u200b\u5df2\u200b\u5efa\u7acb\u200b\u3002\n[root@loongnixserver8 /]# ping baidu.com\nPING baidu.com (110.242.68.66) 56(84) bytes of data.\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=1 ttl=54 time=22.1 ms\n64 bytes from 110.242.68.66 (110.242.68.66): icmp_seq=2 ttl=54 time=28.9 ms\n^C\n--- baidu.com ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 22.113/25.513/28.913/3.400 ms\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/","title":"lxc \u200b\u6307\u5bfc\u200b\u624b\u518c","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/#1","title":"1.\u200b\u6e90\u7801\u200b\u79fb\u690d","text":"<p>\u200b\u5177\u4f53\u200b\u89c1\u200bhttps://github.com/Loongson-Cloud-Community/lxc/tree/loongarch64-lxc-5.0.2 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/#2","title":"2. \u200b\u6784\u5efa","text":"<p><pre><code>meson setup build\nninja -C build\nninja -C build install\n</code></pre> \u200b\u82e5\u200b\u8981\u200b\u6307\u5b9a\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b\uff0c\u200b\u53ef\u200b\u5728\u200bmeson\u200b\u547d\u4ee4\u200b\u540e\u200b\u6dfb\u52a0\u200b\u76f8\u5173\u200b\u7684\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u5982\u200b\uff1a <pre><code>meson setup build/ -Dio-uring-event-loop=false -Dtests=true -Dpam-cgroup=true -Dprefix=/usr/ -Dsysconfdir=/etc/ -Dlocalstatedir=/var/\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/#3","title":"3. \u200b\u6d4b\u8bd5","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/#31","title":"3.1 \u200b\u4e0a\u6e38\u200b\u6d4b\u8bd5","text":"<p>lxc\u200b\u4e0a\u6e38\u200b\u6d4b\u8bd5\u200b\u6d41\u7a0b\u200b\u662f\u200b\uff1a 1\uff09\u200b\u542f\u52a8\u200b\u4e00\u4e2a\u200barm\u200b\u7684\u200b\u865a\u62df\u673a\u200b 2\uff09\u200b\u4e0b\u8f7d\u200blxc\u200b\u6e90\u7801\u200b\uff0c\u200b\u6267\u884c\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b 3\uff09\u200b\u4e0b\u8f7d\u200blxc-ci\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b\u5176\u4e2d\u200b\u7684\u200b\u811a\u672c\u200b\u6587\u4ef6\u200blxc-exercise\u200b\u6765\u200b\u6267\u884c\u200b\u6d4b\u8bd5\u200b \u200b\u8be6\u7ec6\u200b\u7684\u200bci\u200b\u6d4b\u8bd5\u200b\u6d41\u7a0b\u200b\u89c1\u200bhttps://jenkins.linuxcontainers.org/job/lxc-github-pull-test/4813/arch=arm64,async=epoll,compiler=gcc,restrict=vm/consoleFull</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxc/#32","title":"3.2 \u200b\u672c\u5730\u200b\u6d4b\u8bd5","text":"<p>\uff081\uff09\u200b\u73af\u5883\u200b\u51c6\u5907\u200b   arm\u200b\u673a\u5668\u200b   debian/ubuntu\u200b\u7cfb\u7edf\u200b    </p> <p>(2)\u200b\u6e90\u7801\u200b\u51c6\u5907\u200b lxc\uff1a <pre><code>mkdir -p /build/source\ngit clone https://github.com/lxc/lxc -b main /build/source\ngit fetch https://github.com/lxc/lxc +refs/pull/*:refs/remotes/origin/pr/*\ngit checkout 4d08dac9c02a7ad40010129916f5e105ea1a67c3\nWANT_IO_URING=-Dio-uring-event-loop=false &amp;&amp; meson setup build/ -Dio-uring-event-loop=false -Dtests=true -Dpam-cgroup=true -Dprefix=/usr/ -Dsysconfdir=/etc/ -Dlocalstatedir=/var/\n</code></pre></p> <p>lxc-ci\uff1a <pre><code>git clone https://github.com/lxc/lxc-ci.git\ncd lxc-ci\ncp ./deps/lxc-exercise /build/\n</code></pre> \uff083\uff09lxc\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b <pre><code>ninja -C build\nninja -C build install\n// \u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u4e3a\u200b\u6d4b\u8bd5\u200b\u505a\u200b\u51c6\u5907\u200b\nnetplan generate\nnetplan apply\nsed -i s/lxd-/incus-/g /lib/apparmor/rc.apparmor.functions\nsystemctl restart apparmor\nmount -t tmpfs tmpfs /home\nmkdir -p /var/lib/lxc\nmount -t tmpfs tmpfs /var/lib/lxc\n</code></pre> (4)\u200b\u6267\u884c\u200b\u6d4b\u8bd5\u200b <pre><code>/build/lxc-exercise\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/","title":"lxcfs","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#1","title":"1. \u200b\u6e90\u7801\u200b\u79fb\u690d","text":"<p>\u200b\u79fb\u690d\u200b\u7248\u672c\u200b\uff1a5.0.4     \u200b\u5177\u4f53\u200b\u53c2\u8003\u200bhttps://github.com/Loongson-Cloud-Community/lxcfs/tree/loongarch64-5.0.4    \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#2","title":"2. \u200b\u6e90\u7801\u200b\u6784\u5efa","text":"<p>\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\uff1aloongnix server 8.4     \u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\u5982\u4e0b\u200b\uff1a <pre><code>yum install -y fuse3 fuse3-libs fuse3-devel help2man \nmeson setup -Dinit-script=systemd --prefix=/usr build/\nmeson compile -C build/\nsudo meson install -C build/\n</code></pre> \u200b\u5728\u200b\u4e0a\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u6267\u884c\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5c06\u200blxcfs\u200b\u547d\u4ee4\u200b\u5b89\u88c5\u200b\u5728\u200b/bin\u200b\u548c\u200b/usr/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#3-lxcfs","title":"3. lxcfs\u200b\u4f7f\u7528","text":"<p>\u200b\u8fd9\u91cc\u200b\u4ecb\u7ecd\u200b\u4e86\u200b\u5728\u200bdocker\u200b\u4e2d\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200blxcfs\u3002         </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#31","title":"3.1 \u200b\u5b89\u88c5","text":"<p>\u200b\u4f7f\u7528\u200b\u4e0a\u9762\u200b\u6b65\u9aa4\u200b2\u200b\u4e2d\u200b\u7684\u200b\u6e90\u7801\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff0c\u200b\u6216\u8005\u200b\u4e0b\u8f7d\u200brpm\u200b\u5305\u200b(https://github.com/Loongson-Cloud-Community/lxcfs/releases/download/loongarch64-v5.0.4/lxcfs-5.0.4-abi1.0-rpm.tar.gz) \u200b\u8fdb\u884c\u200b\u5b89\u88c5\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#32-docker","title":"3.2 \u200b\u5728\u200bdocker\u200b\u4e2d\u200b\u4f7f\u7528","text":"<p>\uff081\uff09\u200b\u542f\u52a8\u200blxcfs\u200b\u670d\u52a1\u200b\uff1a <pre><code>mkdir -p /var/lib/lxcfs\nsudo lxcfs /var/lib/lxcfs\n# sudo lxcfs /var/lib/lxcfs &amp;  #\u200b\u540e\u53f0\u200b\u542f\u52a8\u200b\n</code></pre> \uff082\uff09\u200b\u8fd0\u884c\u200b\u5bb9\u5668\u200b\uff0c\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u9650\u5236\u200b\u4e86\u200b\u5bb9\u5668\u200b\u7684\u200b\u5185\u5b58\u5927\u5c0f\u200b\u4ee5\u53ca\u200bswap\u200b\u5927\u5c0f\u200b\u662f\u200b256M\uff0c\u200b\u9650\u5236\u200b\u4f7f\u7528\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b0,1\u200b\u4e24\u4e2a\u200bCPU\uff1a    <pre><code>docker run -it -m 256m --memory-swap 256m --cpus 2 --cpuset-cpus \"0,1\" \\\n       -v /var/lib/lxcfs/proc/cpuinfo:/proc/cpuinfo:rw \\\n       -v /var/lib/lxcfs/proc/diskstats:/proc/diskstats:rw \\\n       -v /var/lib/lxcfs/proc/meminfo:/proc/meminfo:rw \\\n       -v /var/lib/lxcfs/proc/stat:/proc/stat:rw \\\n       -v /var/lib/lxcfs/proc/swaps:/proc/swaps:rw \\\n       -v /var/lib/lxcfs/proc/uptime:/proc/uptime:rw \\\ncr.loongnix.cn/library/debian:buster-slim\n</code></pre> \uff083\uff09\u200b\u5728\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u67e5\u770b\u200b\u8fd0\u884c\u200b\u7ed3\u679c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u7684\u200bmem\u200b\u548c\u200bswap\u200b\u5927\u5c0f\u200b\u5c31\u662f\u200bdocker\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0ccpu\u200b\u4e5f\u200b\u662f\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u7684\u200b0,1 <pre><code>root@e55fecbf5d0f:/# apt update &amp;&amp; apt install -y procps\n......\nroot@e55fecbf5d0f:/# free -h\n              total        used        free      shared  buff/cache   available\nMem:          256Mi       6.0Mi       199Mi          0B        50Mi       249Mi\nSwap:         256Mi          0B       256Mi\nroot@e55fecbf5d0f:/# cat /proc/cpuinfo \nprocessor   : 0\npackage         : 0\ncore            : 0\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n\nprocessor   : 1\npackage         : 0\ncore            : 1\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lxcfs/#4","title":"4. \u200b\u5907\u6ce8","text":"<p>\u200b\u5728\u200b\u672a\u200b\u542f\u52a8\u200blxcfs\u200b\u670d\u52a1\u200b\u65f6\u200b\uff0c\u200b\u67e5\u770b\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u7684\u200b\u5185\u5b58\u200b\u548c\u200bCPU\u200b\u4fe1\u606f\u200b\u3002     </p> <p>\uff081\uff09\u200b\u5bb9\u5668\u200b\u542f\u52a8\u200b\uff1a <pre><code>docker run -it -m 256m --memory-swap 256m --cpus 2 --cpuset-cpus \"0,1\" cr.loongnix.cn/library/debian:buster-slim\n</code></pre> \uff082\uff09\u200b\u5728\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u67e5\u770b\u200b\u5185\u5b58\u200b\u548c\u200bCPU\u200b\u4fe1\u606f\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u5728\u200b\u5bb9\u5668\u200b\u4e2d\u200b\u67e5\u770b\u200b\u5230\u200b\u5185\u5b58\u200b\u548c\u200bCPU\u200b\u4fe1\u606f\u200b\u5e76\u200b\u4e0d\u662f\u200b\u5bb9\u5668\u200b\u771f\u5b9e\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u800c\u662f\u200b\u5bbf\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u4fe1\u606f\u200b\uff1a <pre><code>root@2b8fe77f1098:/# apt update &amp;&amp; apt install -y procps\n......\nroot@2b8fe77f1098:/# free -h\n              total        used        free      shared  buff/cache   available\nMem:           15Gi       1.3Gi       3.1Gi        64Mi        10Gi        11Gi\nSwap:         7.9Gi       130Mi       7.8Gi\nroot@2b8fe77f1098:/# cat /proc/cpuinfo \nsystem type     : generic-loongson-machine\nprocessor       : 0\npackage         : 0\ncore            : 0\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n\nprocessor       : 1\npackage         : 0\ncore            : 1\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n\nprocessor       : 2\npackage         : 0\ncore            : 2\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n\nprocessor       : 3\npackage         : 0\ncore            : 3\ncpu family      : Loongson-64bit\nmodel name      : Loongson-3A5000-HV\nCPU Revision        : 0x11\nFPU Revision        : 0x00\nCPU MHz         : 2500.00\nBogoMIPS        : 5000.00\nTLB entries     : 2112\nAddress sizes       : 48 bits physical, 48 bits virtual\nisa         : loongarch32 loongarch64\nfeatures        : cpucfg lam ual fpu lsx lasx complex crypto lvz lbt_x86 lbt_arm lbt_mips\nhardware watchpoint : yes, iwatch count: 8, dwatch count: 8\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lz4-java/","title":"lz4-java","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lz4-java/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>1.3.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lz4-java/#2","title":"2. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/lz4-java/#3","title":"3. \u200b\u6784\u5efa","text":"<p><pre><code>ant -lib /usr/share/java/ivy.jar\n</code></pre> \u200b\u5728\u200b\u4f7f\u7528\u200b\u65f6\u200b\u9700\u8981\u200b\u5c06\u200b\u751f\u6210\u200b\u7684\u200blz4-1.3-SNAPSHOT.jar\u200b\u62f7\u8d1d\u200b\uff1a cp lz4-1.3-SNAPSHOT.jar \uff5e/.m2/repository/net/jpountz/lz4/lz4/1.3.0/lz4-1.3.0.jar</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mahout/","title":"mahout","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mahout/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>trunk\u200b\u5206\u652f\u200b\uff0ccommit id: 343fc71f5338a627a6949a812b7ca76573981fef \u200b\u5bf9\u5e94\u200b\u7684\u200b\u7248\u672c\u200b\u662f\u200b14.2</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mahout/#2","title":"2. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mahout/#3-maven","title":"3. \u200b\u914d\u7f6e\u200b\u9f99\u82af\u200bmaven\u200b\u6e90","text":"<p>\u200b\u5c06\u200bmaven\u200b\u6e90\u200b\u4fee\u6539\u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\u3002 \u200b\u5728\u200b\u6587\u4ef6\u200b/etc/maven/settings.xml \u200b\u548c\u200b ~/.m2/settings.xml \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a   <pre><code>        &lt;profile&gt;\n        &lt;id&gt;loongson&lt;/id&gt;\n        &lt;repositories&gt;\n        &lt;repository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;/repositories&gt;\n        &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n</code></pre> <pre><code>  &lt;activeProfiles&gt;\n        &lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mahout/#4","title":"4. \u200b\u6784\u5efa","text":"<pre><code>mvn clean package -DskipTests\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/metrics-server/","title":"metrics-server","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/metrics-server/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>v0.5.0</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/metrics-server/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u4f7f\u7528\u200b\u9f99\u82af\u200bdebian-10\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5b89\u88c5\u200bgolang-1.19 <pre><code>root@cloud-01:/home/workspace/github-loongCloud/metrics-server-0.5.0# cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>root@cloud-01:/home/workspace/github-loongCloud/metrics-server-0.5.0# uname -a\nLinux cloud-01 4.19.0-17-loongson-3 #1 SMP 4.19.190-6.1 Mon Apr 11 13:19:19 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/metrics-server/#3","title":"3. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\uff081\uff09\u200b\u4f7f\u7528\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u66f4\u65b0\u200bsys\u200b\u53bb\u200b\u652f\u6301\u200bloong64 <pre><code>go get  -d golang.org/x/sys@bc2c85ada10aa9b6aa9607e9ac9ad0761b95cf1d  //\u200b\u66f4\u65b0\u200bsys\u200b\u53bb\u200b\u652f\u6301\u200bloong64\n</code></pre> \uff082\uff09\u200b\u6e90\u7801\u200b\u4e2d\u200b\u4e0e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4ee3\u7801\u200b\u4ec5\u200b\u5728\u200bMakefile\u200b\u548c\u200bDockerfile\u200b\u4e2d\u200b\uff0c\u200b\u9002\u914d\u200b\u8f83\u4e3a\u7b80\u5355\u200b\uff0c\u200b\u5177\u4f53\u200b\u67e5\u770b\u200bhttps://github.com/Loongson-Cloud-Community/metrics-server/tree/v0.5.0-loongarch64 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/metrics-server/#4","title":"4. \u200b\u6784\u5efa","text":"<pre><code>go mod vendor   //\u200b\u4f7f\u7528\u200bvendor\u200b\u6784\u5efa\u200b\nmake metrics-server  //\u200b\u6784\u5efa\u200b\u4e8c\u8fdb\u5236\u200b\nmake container  //\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/migrate/","title":"migrate","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/migrate/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b migrate \u200b\u7248\u672c\u200b 4.15.1 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/migrate/migrate \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/migrate/migrate/blob/v4.15.1/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/migrate/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/migrate/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/migrate/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b 1. Linux kernel version 2.6.23 or later 2. go 1.20.0 \u200b\u4ee5\u4e0a\u200b\u7248\u672c\u200b   \u200b\u9f99\u82af\u200bgo\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b: http://ftp.loongnix.cn/toolchain/golang/</p> <p>\u200b\u79fb\u690d\u200b</p> <p>\u200b\u5177\u4f53\u200b\u89c1\u200b<code>https://github.com/Loongson-Cloud-Community/migrate/commit/53f240cbee83d86036ccc6749b734d35f3dcde58</code> \u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b\u4e86\u200bMakefile\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u90e8\u5206\u200b <pre><code>diff --git a/Makefile b/Makefile\nindex 79fa85f..05616a3 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -1,6 +1,7 @@\n SOURCE ?= file go_bindata github github_ee bitbucket aws_s3 google_cloud_storage godoc_vfs gitlab\n DATABASE ?= postgres mysql redshift cassandra spanner cockroachdb clickhouse mongodb sqlserver firebird neo4j pgx\n-DATABASE_TEST ?= $(DATABASE) sqlite sqlite3 sqlcipher\n+#DATABASE_TEST ?= $(DATABASE) sqlite sqlite3 sqlcipher\n+DATABASE_TEST ?= $(DATABASE) sqlite sqlcipher\n VERSION ?= $(shell git describe --tags 2&gt;/dev/null | cut -c 2-)\n TEST_FLAGS ?=\n REPO_OWNER ?= $(shell cd .. &amp;&amp; basename \"$$(pwd)\")\n@@ -10,7 +11,7 @@ build:\n        CGO_ENABLED=0 go build -ldflags='-X main.Version=$(VERSION)' -tags '$(DATABASE) $(SOURCE)' ./cmd/migrate\n\n build-docker:\n-       CGO_ENABLED=0 go build -a -o build/migrate.linux-386 -ldflags=\"-s -w -X main.Version=${VERSION}\" -tags \"$(DATABASE) $(SOURCE)\" ./cmd/migrate\n+       CGO_ENABLED=0 go build -a -o build/migrate.linux-loongarch64 -ldflags=\"-s -w -X main.Version=${VERSION}\" -tags \"$(DATABASE) $(SOURCE)\" ./cmd/migrate\n\n build-cli: clean\n        -mkdir ./cli/build\n@@ -20,6 +21,7 @@ build-cli: clean\n        cd ./cmd/migrate &amp;&amp; CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build -a -o ../../cli/build/migrate.darwin-amd64 -ldflags='-X main.Version=$(VERSION) -extldflags \"-static\"' -tags '$(DATABASE) $(SOURCE)' .\n        cd ./cmd/migrate &amp;&amp; CGO_ENABLED=0 GOOS=windows GOARCH=386 go build -a -o ../../cli/build/migrate.windows-386.exe -ldflags='-X main.Version=$(VERSION) -extldflags \"-static\"' -tags '$(DATABASE) $(SOURCE)' .\n        cd ./cmd/migrate &amp;&amp; CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build -a -o ../../cli/build/migrate.windows-amd64.exe -ldflags='-X main.Version=$(VERSION) -extldflags \"-static\"' -tags '$(DATABASE) $(SOURCE)' .\n+       cd ./cmd/migrate &amp;&amp; CGO_ENABLED=0 GOOS=linux GOARCH=loong64 go build -a -o ../../cli/build/migrate.linux-loongarch64 -ldflags='-X main.Version=$(VERSION) -extldflags \"-static\"' -tags '$(DATABASE) $(SOURCE)' .\n        cd ./cli/build &amp;&amp; find . -name 'migrate*' | xargs -I{} tar czf {}.tar.gz {}\n        cd ./cli/build &amp;&amp; shasum -a 256 * &gt; sha256sum.txt\n        cat ./cli/build/sha256sum.txt\n@@ -36,7 +38,7 @@ test-short:\n test:\n        @-rm -r $(COVERAGE_DIR)\n        @mkdir $(COVERAGE_DIR)\n-       make test-with-flags TEST_FLAGS='-v -race -covermode atomic -coverprofile $$(COVERAGE_DIR)/combined.txt -bench=. -benchmem -timeout 20m'\n+       make test-with-flags TEST_FLAGS='-v  -covermode atomic -coverprofile $$(COVERAGE_DIR)\n</code></pre></p> <p>\u200b\u7f16\u8bd1\u200b 1. \u200b\u7f16\u8bd1\u200bmigrate\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b <pre><code>#\u200b\u66f4\u65b0\u200bgo mod\u200b\u4f9d\u8d56\u200b\ngo mod tidy\n#\u200b\u7f16\u8bd1\u200b\u4e8c\u8fdb\u5236\u200b\nmake build \n</code></pre> 3. \u200b\u6784\u5efa\u200b\u955c\u50cf\u200b <pre><code>./docker-deploy.sh\n</code></pre> \u200b\u6d4b\u8bd5\u200b 1. \u200b\u6d4b\u8bd5\u200bmigrate\u200b\u4e8c\u8fdb\u5236\u200b <pre><code>[yzw@kubernetes-master-1 migrate]$ ./migrate -h\nUsage: migrate OPTIONS COMMAND [arg...]\n       migrate [ -version | -help ]\n\nOptions:\n  -source          Location of the migrations (driver://url)\n  -path            Shorthand for -source=file://path\n  -database        Run migrations against this database (driver://url)\n  -prefetch N      Number of migrations to load in advance before executing (default 10)\n  -lock-timeout N  Allow N seconds to acquire database lock (default 15)\n  -verbose         Print verbose logging\n  -version         Print version\n  -help            Print usage\n\nCommands:\n  create [-ext E] [-dir D] [-seq] [-digits N] [-format] [-tz] NAME\n       Create a set of timestamped up/down migrations titled NAME, in directory D with extension E.\n       Use -seq option to generate sequential up/down migrations with N digits.\n       Use -format option to specify a Go time format string. Note: migrations with the same time cause \"duplicate migration version\" error.\n           Use -tz option to specify the timezone that will be used when generating non-sequential migrations (defaults: UTC).\n\n  goto V       Migrate to version V\n  up [N]       Apply all or N up migrations\n  down [N] [-all]    Apply all or N down migrations\n    Use -all to apply all down migrations\n  drop [-f]    Drop everything inside database\n    Use -f to bypass confirmation\n  force V      Set version V but don't run migration (ignores dirty state)\n  version      Print current migration version\n\nSource drivers: github-ee, godoc-vfs, gcs, s3, github, gitlab, go-bindata, file, bitbucket\nDatabase drivers: neo4j, pgx, mongodb+srv, sqlserver, firebird, clickhouse, cockroach, crdb-postgres, postgres, postgresql, redshift, spanner, cassandra, firebirdsql, mongodb, mysql, stub, cockroachdb\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio-mc/","title":"minio-mc","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio-mc/#loongarch64","title":"Loongarch64","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio-mc/#_1","title":"\u6784\u5efa\u200b\u7248\u672c","text":"<p>2020-12-18T10-53-53Z </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio-mc/#_2","title":"\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u9002\u914d\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio-mc/#_3","title":"\u7f16\u8bd1","text":"<p>g\u200b\u4f7f\u7528\u200bgo\u200b\u7248\u672c\u200b\uff1a1.19  \u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff1a <pre><code>go build \\\n   -mod=vendor \\\n   -buildmode=pie \\\n   -trimpath -tags kqueue \\\n   -ldflags=\"-s -w -X github.com/minio/mc/cmd.Version=2020-12-18T10-53-53Z \\\n        -X github.com/minio/mc/cmd.ReleaseTag=2020-12-18T10-53-53Z\" \\\n   -o bin/minio-client\n   ```\n\n## rpm\u200b\u5305\u200b\u5236\u4f5c\u200b\n\u200b\u4f7f\u7528\u200bspec\u200b\u89c1\u200bsrc.rpm\n</code></pre> https://github.com/Loongson-Cloud-Community/mc/releases/download/untagged-c79ae86bb2c97de123bc/minio-client-20201218T105353Z-1.1.src.rpm <pre><code>\u200b\u6267\u884c\u200brpm\u200b\u5305\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff1a\n</code></pre> rpmbuild -ba --nodebuginfo  minio-client.spec ```</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio/","title":"minio","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio/#_1","title":"\u73af\u5883\u200b\u8981\u6c42","text":"<ul> <li>loongson 3A5000</li> <li>golang1.15</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio/#_2","title":"\u9879\u76ee\u5206\u6790","text":"<p><code>minio</code> \u200b\u662f\u200b\u4e00\u4e2a\u200b <code>go</code> \u200b\u8bed\u8a00\u200b\u9879\u76ee\u200b\uff0c\u200b\u867d\u7136\u200b\u5e26\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u524d\u7aef\u200b\u9875\u9762\u200b\uff0c\u200b\u4f46\u662f\u200b\u8fd9\u90e8\u5206\u200b\u5e76\u4e0d\u9700\u8981\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u6240\u4ee5\u200b <code>minio</code> \u200b\u53ef\u4ee5\u200b\u770b\u4f5c\u200b\u4e00\u4e2a\u200b\u7eaf\u200b <code>go</code> \u200b\u8bed\u8a00\u200b\u9879\u76ee\u200b;</p> <p>\u200b\u5176\u6b21\u200b <code>minio</code> \u200b\u91c7\u7528\u200b <code>go mod</code> \u200b\u8fdb\u884c\u200b\u4f9d\u8d56\u200b\u7ba1\u7406\u200b\uff0c\u200b\u9f99\u82af\u200b\u4e5f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5339\u914d\u200b\u7684\u200b <code>goproxy</code> \u200b\u6e90\u200b\u65b9\u4fbf\u200b\u79fb\u690d\u200b;</p> <p>\u200b\u5f53\u524d\u200b <code>loongarch64</code> \u200b\u4ec5\u200b\u652f\u6301\u200b <code>go-1.15.6</code>\uff0c\u200b\u6240\u4ee5\u200b\u6211\u4eec\u200b\u9009\u62e9\u200b\u5bf9\u5e94\u200b\u7248\u672c\u200b\u7684\u200b <code>minio:RELEASE.2021-02-24T18-44-45Z</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u5220\u9664\u200b <code>go.sum</code> \u200b\u6587\u4ef6\u200b <pre><code>rm go.sum\n</code></pre></p> <p>\u200b\u8bbe\u7f6e\u200b\u9f99\u82af\u200b <code>GOPROXY</code> \u200b\u4ee3\u7406\u200b\uff0c\u200b\u8bbe\u7f6e\u200b\u5173\u95ed\u200b <code>GOSUMDB</code> \u200b\u6821\u9a8c\u200b <pre><code>export GOPROXY=http://goproxy.loongnix.cn:3000\nexport GOSUMDB=off\n</code></pre></p> <p>\u200b\u6267\u884c\u200b <code>make build</code>\uff0c\u200b\u4f1a\u200b\u62a5\u9519\u200b\u4ee5\u4e0b\u200b\u9519\u8bef\u200b\uff0c\u200b\u7ed3\u5408\u200b\u9519\u8bef\u200b\u63d0\u793a\u200b\u4ee5\u53ca\u200b Makefile \u200b\u7684\u200b\u7f16\u8bd1\u200b\u6d41\u7a0b\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u627e\u5230\u200b <pre><code>root@pugu:/tmp/minio-RELEASE.2021-02-24T18-44-45Z# make build\nError generating git commit-id:  exit status 128\nexit status 1\nChecking dependencies\nArch 'loongarch64' is not supported. Supported Arch: [x86_64, amd64, aarch64, ppc64le, arm*, s390x]\nmake: *** [Makefile:15: checks] Error 1\n</code></pre></p> <p>\u200b\u7ed3\u5408\u200b\u9519\u8bef\u200b\u63d0\u793a\u200b\u4ee5\u53ca\u200b Makefile \u200b\u7684\u200b\u7f16\u8bd1\u200b\u6d41\u7a0b\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u627e\u5230\u200b\u5728\u200b <code>buildscripts/checkdeps.sh</code> \u200b\u4e2d\u6709\u200b\u4e0b\u5217\u200b\u4ee3\u7801\u200b\uff0c\u200b\u9700\u8981\u200b\u52a0\u4e0a\u200b loongarch64 \u200b\u67b6\u6784\u200b\u7684\u200b\u652f\u6301\u200b <pre><code># \u200b\u4fee\u6539\u200b\u524d\u200b\nassert_is_supported_arch() {\n    case \"${ARCH}\" in\n        x86_64 | amd64 | aarch64 | ppc64le | arm* | s390x )\n            return\n            ;;\n        *)\n            echo \"Arch '${ARCH}' is not supported. Supported Arch: [x86_64, amd64, aarch64, ppc64le, arm*, s390x]\"\n            exit 1\n    esac\n}\n\n# \u200b\u4fee\u6539\u200b\u540e\u200b\nassert_is_supported_arch() {\n    case \"${ARCH}\" in\n        x86_64 | amd64 | aarch64 | ppc64le | arm* | s390x | loongarch64 )\n            return\n            ;;\n        *)\n            echo \"Arch '${ARCH}' is not supported. Supported Arch: [x86_64, amd64, aarch64, ppc64le, arm*, s390x, loongarch64]\"\n            exit 1\n    esac\n}\n</code></pre></p> <p>\u200b\u6700\u540e\u200b\u6267\u884c\u200b <code>make build</code>\uff0c\u200b\u5373\u53ef\u200b\u6210\u529f\u200b\u7f16\u8bd1\u200b\u51fa\u200b <code>minio</code> \u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/minio/#_4","title":"\u5236\u4f5c\u200b\u955c\u50cf","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ml-cpp/","title":"ml-cpp","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ml-cpp/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b ml-cpp \u200b\u7248\u672c\u200b 8.4.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/elastic/ml-cpp \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/elastic/ml-cpp/blob/main/build-setup"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ml-cpp/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 5.10.0-60.101.0.126.oe2203.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ml-cpp/#_3","title":"\u79fb\u690d\u200b\u4f9d\u8d56","text":"<p>\u200b\u5b89\u88c5\u200b\u4f9d\u8d56\u200b <code>yum install bzip2 gcc-c++ texinfo tzdata unzip zlib-devel java-1.8.0-openjdk autoconf libtool diffutils</code> \u200b\u6b27\u62c9\u200b\u7f3a\u5c11\u200bpatchelf libxml2 boost \u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u7f16\u8bd1\u200b - libxml2 \u200b\u7f16\u8bd1\u200b \u200b\u914d\u7f6e\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b     <pre><code>export LD_LIBRARY_PATH=/usr/local/gcc103/lib64:/usr/local/gcc103/lib:/usr/lib:/lib\nexport PATH=$JAVA_HOME/bin:/usr/local/gcc103/bin:/usr/local/cmake/bin:/usr/bin:/bin:/usr/sbin:/sbin:/home/vagrant/bin\nexport CPP_SRC_HOME=/home/yzw/ml-cpp\nwget https://download.gnome.org/sources/libxml2/2.9/libxml2-2.9.14.tar.xz\n</code></pre> - boost \u200b\u7f16\u8bd1\u200b     <pre><code>    boost\u200b\u7f16\u8bd1\u200b \u200b\u4f7f\u7528\u200b\u4e91\u200b\u7ec4\u7ec7\u200b\u9002\u914d\u200b\u7684\u200bboost https://github.com/Loongson-Cloud-Community/boost 1.77.0 \u200b\u7248\u672c\u200b\n./bootstrap.sh --without-libraries=context --without-libraries=coroutine --without-libraries=graph_parallel --without-libraries=mpi --without-libraries=python --without-icu\n\u200b\u4fee\u6539\u200b\nEdit boost/unordered/detail/implementation.hpp and change line 287 from:\n\n(17ul)(29ul)(37ul)(53ul)(67ul)(79ul) \\\nto:\n(3ul)(17ul)(29ul)(37ul)(53ul)(67ul)(79ul) \\\n./b2 -j6 --layout=versioned --disable-icu pch=off optimization=speed inlining=full define=BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS define=BOOST_LOG_WITHOUT_DEBUG_OUTPUT define=BOOST_LOG_WITHOUT_EVENT_LOG define=BOOST_LOG_WITHOUT_SYSLOG define=BOOST_LOG_WITHOUT_IPC define=_FORTIFY_SOURCE=2 cxxflags=-std=gnu++14 cxxflags=-fstack-protector linkflags=-Wl,-z,relro linkflags=-Wl,-z,now\n\u200b\u914d\u7f6e\u200b\u73af\u5883\u53d8\u91cf\u200b env PATH=\"$PATH\" LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH\" ./b2 install --prefix=/usr/local/gcc75 --layout=versioned --disable-icu pch=off optimization=speed inlining=full define=BOOST_MATH_NO_LONG_DOUBLE_MATH_FUNCTIONS define=BOOST_LOG_WITHOUT_DEBUG_OUTPUT define=BOOST_LOG_WITHOUT_EVENT_LOG define=BOOST_LOG_WITHOUT_SYSLOG define=BOOST_LOG_WITHOUT_IPC define=_FORTIFY_SOURCE=2 cxxflags=-std=gnu++14 cxxflags=-fstack-protector linkflags=-Wl,-z,relro linkflags=-Wl,-z,now\n</code></pre> - patchelf     Extract it to a temporary directory using:</p> <pre><code>bzip2 -cd patchelf-0.13.tar.bz2 | tar xvf -\nIn the resulting patchelf-0.13.20210805.a949ff2 directory, run the:\n\n./configure --prefix=/usr/local/gcc103\nscript. This should build an appropriate Makefile. Assuming it does, run:\n\nmake\nsudo make install\n\u200b\u7f16\u8bd1\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u62a5\u9519\u200b\uff0c\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200bcaffe2\uff1a[\u200b\u7f16\u8bd1\u200b\u6559\u7a0b\u200b](https://blog.csdn.net/weixin_43624538/article/details/84712617)\n</code></pre> <ul> <li>\u200b\u8fd8\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200bpytroch     \u200b\u539f\u56e0\u200b\uff1aml-cpp\u200b\u672c\u8eab\u200b\u65e0\u200b\u95ee\u9898\u200b \u200b\u62a5\u9519\u200b \u200b\u627e\u200b\u4e0d\u5230\u200blibtorch_cpu.so     \u200b\u7ffb\u9605\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b \u200b\u9700\u8981\u200b\u5b89\u88c5\u200bpytorch     pip3 install install numpy ninja pyyaml setuptools cffi typing_extensions future six requests dataclasses     git clone --depth=1 --branch=v1.11.0 git@github.com:pytorch/pytorch.git     cd pytorch     git submodule sync     git submodule update --init --recursive     \u200b\u7f16\u8f91\u200b torch/csrc/jit/codegen/fuser/cpu/fused_kernel.cpp \u200b\u5e76\u200b\u5c06\u200b\u6240\u6709\u200b\u51fa\u73b0\u200b\u7684\u200b system( \u200b\u66ff\u6362\u200b\u4e3a\u200b strlen(\u3002\u200b\u6b64\u200b\u6587\u4ef6\u200b\u7528\u4e8e\u200b\u7f16\u8bd1\u200b\u878d\u5408\u200b CPU \u200b\u5185\u6838\u200b\uff0c\u200b\u6211\u4eec\u200b\u4e0d\u200b\u5e0c\u671b\u200b\u8fd9\u6837\u200b\u505a\u200b\uff0c\u200b\u4e5f\u200b\u6c38\u8fdc\u200b\u4e0d\u60f3\u200b\u8fd9\u6837\u200b\u505a\u51fa\u200b\u4e8e\u200b\u5b89\u5168\u200b\u539f\u56e0\u200b\u3002\u200b\u66ff\u6362\u200b\u5bf9\u200b system() \u200b\u7684\u200b\u8c03\u7528\u200b\u53ef\u200b\u786e\u4fdd\u200b\u5728\u200b\u6211\u4eec\u200b\u53d1\u5e03\u200b\u7684\u200b\u4ea7\u54c1\u200b\u4e2d\u200b\u5bfb\u627e\u200b\u6f5c\u5728\u200b\u5371\u9669\u200b\u51fd\u6570\u8c03\u7528\u200b\u7684\u200b\u542f\u53d1\u5f0f\u200b\u75c5\u6bd2\u200b\u626b\u63cf\u200b\u7a0b\u5e8f\u200b\u4e0d\u4f1a\u200b\u9047\u5230\u200b\u8fd9\u4e9b\u200b\u8fd0\u884c\u200b\u5916\u90e8\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u51fd\u6570\u200b\u3002     \u200b\u7f16\u8bd1\u200b\u53c2\u6570\u200b     [ $(uname -m) = x86_64 ] &amp;&amp; export BLAS=MKL || export BLAS=Eigen     export BUILD_TEST=OFF     [ $(uname -m) = x86_64 ] &amp;&amp; export BUILD_CAFFE2=OFF     [ $(uname -m) != x86_64 ] &amp;&amp; export USE_FBGEMM=OFF     [ $(uname -m) != x86_64 ] &amp;&amp; export USE_KINETO=OFF     [ $(uname -m) = x86_64 ] &amp;&amp; export USE_NUMPY=OFF     export USE_DISTRIBUTED=OFF     export USE_MKLDNN=ON     export USE_QNNPACK=OFF     export USE_PYTORCH_QNNPACK=OFF     [ $(uname -m) = x86_64 ] &amp;&amp; export USE_XNNPACK=OFF     Breakpad is undesirable as it causes libtorch_cpu to have an executable stack     export USE_BREAKPAD=OFF     export PYTORCH_BUILD_VERSION=1.11.0     export PYTORCH_BUILD_NUMBER=1     /usr/local/gcc103/bin/python3.7 setup.py install     \u200b\u6700\u7ec8\u200b\uff1asudo mkdir -p /usr/local/gcc103/include/pytorch     sudo cp -r torch/include/* /usr/local/gcc103/include/pytorch/     sudo cp torch/lib/libtorch_cpu.so /usr/local/gcc103/lib     sudo cp torch/lib/libc10.so /usr/local/gcc103/lib</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/ml-cpp/#_4","title":"\u7f16\u8bd1","text":"<p>mkdir build &amp;&amp; cmake .. &amp;&amp; make</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/moby/","title":"moby","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/moby/#1","title":"1. \u200b\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>moby\u200b\u5373\u200bdocker-ce\uff0c\u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\u5730\u5740\u200b\uff1ahttps://github.com/moby/moby</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/moby/#2","title":"2. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>v23.0.4</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/moby/#3","title":"3. \u200b\u6784\u5efa\u200b\u6b65\u9aa4","text":"<p>\uff081\uff09loong64\u200b\u67b6\u6784\u200b\u6784\u5efa\u200b \u200b\u6309\u7167\u200b\u5b98\u65b9\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u662f\u200b\u5148\u751f\u200b\u6210\u200b\u5f00\u53d1\u200b\u73af\u5883\u200b\u7684\u200b\u955c\u50cf\u200b\uff0c\u200b\u7136\u540e\u200b\u5728\u200b\u955c\u50cf\u200b\u4e2d\u200b\u6784\u5efa\u200bmoby\u200b\u9879\u76ee\u200b\uff0c\u200b\u7531\u4e8e\u200b\u5b98\u65b9\u200b\u955c\u50cf\u200b\u8fd8\u200b\u4e0d\u200b\u652f\u6301\u200bloong64\uff0c\u200b\u6545\u200b\u5728\u200b\u4e0d\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\u7684\u200b\u6761\u4ef6\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u6309\u7167\u200b\u4ee5\u4e0b\u200b\u6b65\u9aa4\u200b\u6784\u5efa\u200bdockerd\u200b\u4e8c\u8fdb\u5236\u200b\uff1a</p> <p><pre><code>export GOPATH=/go\ngo env -w GOPATH=/go GO11MODUEL=off\n\nmkdir -p /go/src/github.com/docker/\ncd /go/src/github.com/docker/\ngit clone https://github.com/moby/moby.git\nmv moby docker\n\ncd /go/src/github.com/docker/docker\nhack/make.sh  binary\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u50a8\u200b\u5728\u200bbundles/binary-deamon/ \u200b\u8def\u5f84\u200b\u4e0b\u200b\u3002</p> <p>\uff082\uff09x86\u200b\u67b6\u6784\u200b\u6784\u5efa\u200b \u200b\u5bf9\u4e8e\u200b\u5b98\u65b9\u200b\u652f\u6301\u200b\u955c\u50cf\u200b\u7684\u200b\u67b6\u6784\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u6309\u7167\u200b\u5b98\u65b9\u200b\u65b9\u6cd5\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\uff0c\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5728\u200bx86\u200b\u67b6\u6784\u200b\u4e0b\u200b\u6784\u5efa\u200b\uff1a 1\uff09\u200b\u751f\u6210\u200b\u5f00\u53d1\u200b\u73af\u5883\u200b --- \u200b\u955c\u50cf\u200b <pre><code>make BIND_DIR=. shell  //\u200b\u8be5\u200b\u547d\u4ee4\u200b\u5b9e\u9645\u200b\u8c03\u7528\u200b\u7684\u200b\u662f\u200b\u201ddocker buildx build  --build-arg=GO_VERSION  -f \"Dockerfile\" --target=dev-base --load -t \"docker-dev\" .\u201c\n</code></pre> \u200b\u8be5\u200b\u547d\u4ee4\u200b\u6267\u884c\u200b\u6210\u529f\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u955c\u50cf\u200bdocker-dev\uff0c\u200b\u5e76\u200b\u81ea\u52a8\u200b\u8fdb\u5165\u200b\u5230\u200b\u751f\u6210\u200b\u7684\u200b\u955c\u50cf\u200b\u5f53\u4e2d\u200b\uff0clog\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>......\n#116 exporting to image\n#116 exporting layers\n#116 exporting layers 8.7s done\n#116 writing image sha256:16cbb16a6d828a822b2799d96c5bb703ffb6cc894b27c0ad9143cdd50b826467\n#116 writing image sha256:16cbb16a6d828a822b2799d96c5bb703ffb6cc894b27c0ad9143cdd50b826467 0.0s done\n#116 naming to docker.io/library/docker-dev 0.1s done\n#116 DONE 9.3s\ndocker run --rm --privileged  -e BUILD_APT_MIRROR -e BUILDFLAGS -e KEEPBUNDLE -e DOCKER_BUILD_ARGS -e DOCKER_BUILD_GOGC -e DOCKER_BUILD_OPTS -e DOCKER_BUILD_PKGS -e DOCKER_BUILDKIT -e DOCKER_BASH_COMPLETION_PATH -e DOCKER_CLI_PATH -e DOCKER_DEBUG -e DOCKER_EXPERIMENTAL -e DOCKER_GITCOMMIT -e DOCKER_GRAPHDRIVER -e DOCKER_LDFLAGS -e DOCKER_PORT -e DOCKER_REMAP_ROOT -e DOCKER_ROOTLESS -e DOCKER_STORAGE_OPTS -e DOCKER_TEST_HOST -e DOCKER_USERLANDPROXY -e DOCKERD_ARGS -e DELVE_PORT -e GITHUB_ACTIONS -e TEST_FORCE_VALIDATE -e TEST_INTEGRATION_DIR -e TEST_INTEGRATION_USE_SNAPSHOTTER -e TEST_SKIP_INTEGRATION -e TEST_SKIP_INTEGRATION_CLI -e TESTCOVERAGE -e TESTDEBUG -e TESTDIRS -e TESTFLAGS -e TESTFLAGS_INTEGRATION -e TESTFLAGS_INTEGRATION_CLI -e TEST_FILTER -e TIMEOUT -e VALIDATE_REPO -e VALIDATE_BRANCH -e VALIDATE_ORIGIN_BRANCH -e VERSION -e PLATFORM -e DEFAULT_PRODUCT_LICENSE -e PRODUCT -e PACKAGER_NAME -v \"/home/zhaixiaojuan/docker-project/moby/.:/go/src/github.com/docker/docker/.\" -v \"/home/zhaixiaojuan/docker-project/moby/.git:/go/src/github.com/docker/docker/.git\" -v docker-dev-cache:/root/.cache -v docker-mod-cache:/go/pkg/mod/     -t -i \"docker-dev\" bash\n</code></pre> \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5355\u72ec\u200b\u6267\u884c\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u8fdb\u5165\u200b\u5230\u200b\u955c\u50cf\u200b\u5f53\u4e2d\u200b\uff1a <pre><code>docker run --rm --privileged  -e BUILD_APT_MIRROR -e BUILDFLAGS -e KEEPBUNDLE -e DOCKER_BUILD_ARGS -e DOCKER_BUILD_GOGC -e DOCKER_BUILD_OPTS -e DOCKER_BUILD_PKGS -e DOCKER_BUILDKIT -e DOCKER_BASH_COMPLETION_PATH -e DOCKER_CLI_PATH -e DOCKER_DEBUG -e DOCKER_EXPERIMENTAL -e DOCKER_GITCOMMIT -e DOCKER_GRAPHDRIVER -e DOCKER_LDFLAGS -e DOCKER_PORT -e DOCKER_REMAP_ROOT -e DOCKER_ROOTLESS -e DOCKER_STORAGE_OPTS -e DOCKER_TEST_HOST -e DOCKER_USERLANDPROXY -e DOCKERD_ARGS -e DELVE_PORT -e GITHUB_ACTIONS -e TEST_FORCE_VALIDATE -e TEST_INTEGRATION_DIR -e TEST_INTEGRATION_USE_SNAPSHOTTER -e TEST_SKIP_INTEGRATION -e TEST_SKIP_INTEGRATION_CLI -e TESTCOVERAGE -e TESTDEBUG -e TESTDIRS -e TESTFLAGS -e TESTFLAGS_INTEGRATION -e TESTFLAGS_INTEGRATION_CLI -e TEST_FILTER -e TIMEOUT -e VALIDATE_REPO -e VALIDATE_BRANCH -e VALIDATE_ORIGIN_BRANCH -e VERSION -e PLATFORM -e DEFAULT_PRODUCT_LICENSE -e PRODUCT -e PACKAGER_NAME -v \"/home/zhaixiaojuan/docker-project/moby/.:/go/src/github.com/docker/docker/.\" -v \"/home/zhaixiaojuan/docker-project/moby/.git:/go/src/github.com/docker/docker/.git\" -v docker-dev-cache:/root/.cache -v docker-mod-cache:/go/pkg/mod/     -t -i \"docker-dev\" bash\n</code></pre> 2\uff09\u200b\u7f16\u8bd1\u200bdockerd\u200b\u4e8c\u8fdb\u5236\u200b \u200b\u5728\u200b\u8fdb\u5165\u200b\u5230\u200b\u5bb9\u5668\u200b\u4ee5\u540e\u200b\uff0c\u200b\u6267\u884c\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\uff1a <pre><code>hack/make.sh binary\n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\u4e8c\u8fdb\u5236\u200b\u4f1a\u200b\u5b58\u50a8\u200b\u5728\u200bbundles/binary-daemon/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p> <p>3\uff09\u200b\u5b89\u88c5\u200b <pre><code>make install\n</code></pre> \u200b\u6267\u884c\u200b\u5b8c\u200b\u4ee5\u540e\u200b\u9ed8\u8ba4\u200b\u5b89\u88c5\u200b\u5230\u200b/usr/local/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/moby/#4","title":"4. \u200b\u5907\u6ce8","text":"<p>\u200b\u5728\u200b\u4e0a\u9762\u200b3\u200b\u7684\u200b\u6784\u5efa\u200b\u6b65\u9aa4\u200b\u4e2d\u200b\u6309\u7167\u200b \"\uff081\uff09loong64\u200b\u67b6\u6784\u200b\u6784\u5efa\u200b\" \u200b\u548c\u200b \"\uff082\uff09x86\u200b\u67b6\u6784\u200b\u6784\u5efa\u200b\" \u200b\u7f16\u8bd1\u200b\u540e\u200b\u6700\u540e\u200b\u751f\u6210\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u4e2a\u6570\u200b\u4e0d\u540c\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5728\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u4f1a\u200b\u4e0b\u8f7d\u200b\u5bf9\u5e94\u200b\u7684\u200brunc\uff0ccontainerd\u200b\u7b49\u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u5e76\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\uff0c\u200b\u5728\u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u5c06\u200b\u8fd9\u4e9b\u200b\u4e8c\u8fdb\u5236\u200b\u590d\u5236\u5230\u200b\u4e86\u200bbundles/binary-daemon/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/","title":"mongo","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_1","title":"\u79fb\u690d\u200b\u73af\u5883","text":"<p>cpu\uff1a3a6000 \u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\uff1adebian</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_2","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u5b98\u65b9\u200b\u6784\u5efa\u200b\u6587\u6863\u200b\u8bf7\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_3","title":"\u6e90\u7801\u200b\u4e0b\u8f7d","text":"<p>\u200b\u5b89\u88c5\u200bgit <pre><code>apt-get update &amp;&amp; apt-get install -y git\n</code></pre> \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <pre><code>git clone -b r4.4.29 --depth 1 https://github.com/mongodb/mongo.git\n</code></pre> \u200b\u6ce8\u200b\uff1a\u200b\u5982\u679c\u200b\u4e0b\u8f7d\u200b\u5931\u8d25\u200b\u6216\u200b\u4e0b\u8f7d\u901f\u5ea6\u200b\u8fc7\u200b\u6162\u200b\uff0c\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b\u4ee3\u7406\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_4","title":"\u4f9d\u8d56\u200b\u4e0b\u8f7d","text":"<pre><code>apt-get update &amp;&amp; apt-get install -y gcc libcurl4-openssl-dev python3 python3-pip python3-dev libssl-dev libffi-dev cmake wget curl\n\ncd mongo\n\npython3 -m pip install -r etc/pip/compile-requirements.txt\n\n#\u200b\u9047\u5230\u200b\u65e0\u6cd5\u200b\u5b89\u88c5\u200bcryptography\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u8bf7\u200b\u624b\u52a8\u200b\u5b89\u88c5\u200bcryptography==36.0.2\u200b\u7248\u672c\u200b\uff0c\u200b\u7136\u540e\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u4e0a\u8ff0\u200b\u547d\u4ee4\u200b\npip3 install cryptography-36.0.2/cryptography-36.0.2-cp311-cp311-linux_loongarch64.whl\n\npip3 install setuptools\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_5","title":"\u67b6\u6784\u200b\u8865\u4e01","text":"<p>\u200b\u672c\u7ae0\u200b\u4ec5\u200b\u7ed9\u51fa\u200b\u9700\u8981\u200b\u79fb\u690d\u200b\u54ea\u4e9b\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8be6\u7ec6\u200b\u7684\u200b\u5185\u5bb9\u200b\u4fee\u6539\u200b\u8bf7\u200b\u67e5\u770b\u200b\u8865\u4e01\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#gpertools-27","title":"gpertools-2.7","text":"<p>\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a <pre><code>src/third_party/gperftools-2.7/dist/m4/pc_from_ucontext.m4\nsrc/third_party/gperftools-2.7/dist/src/base/basictypes.h\nsrc/third_party/gperftools-2.7/dist/src/base/linux_syscall_support.h\nsrc/third_party/gperftools-2.7/dist/src/base/linuxthreads.h\nsrc/third_party/gperftools-2.7/dist/src/malloc_hook_mmap_linux.h\nsrc/third_party/gperftools-2.7/dist/src/stacktrace.cc\nsrc/third_party/gperftools-2.7/dist/src/tcmalloc.cc\nsrc/third_party/gperftools-2.7/dist/config.guess\nsrc/third_party/gperftools-2.7/dist/config.sub\n</code></pre></p> <p>\u200b\u9700\u8981\u200b\u521b\u5efa\u200b\u76ee\u5f55\u200b\uff1a<code>src/third_party/gperftools-2.7/platform/linux_loongarch64</code> \u200b\u751f\u6210\u200b\u76ee\u5f55\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff1a\u200b\u6267\u884c\u200b<code>./src/third_party/gperftools-2.7/scripts/host_config.sh</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#mozjs-60","title":"mozjs-60","text":"<p>\u200b\u9700\u8981\u200b\u4fee\u6539\u200b/\u200b\u6dfb\u52a0\u200b\u7684\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a <pre><code>src/third_party/mozjs-60/extract/js/src/jit/AtomicOperations.h\nsrc/third_party/mozjs-60/extract/js/src/jit/none/AtomicOperations-feeling-lucky.h\nsrc/third_party/mozjs-60/gen-config.sh\nsrc/third_party/mozjs-60/include/double-conversion/utils.h\nsrc/third_party/mozjs-60/0001-mozilla-add-loongarch-support.patch\nsrc/third_party/mozjs-60/get-sources.sh\n</code></pre></p> <p>\u200b\u9700\u8981\u200b\u521b\u5efa\u200b\u76ee\u5f55\u200b\uff1a<code>src/third_party/mozjs-60/platform/loongarch64</code> \u200b\u751f\u6210\u200b\u76ee\u5f55\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff1a\u200b\u5728\u200b<code>src/third_party/mozjs-60/</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b<code>./get-sources.sh</code>,\u200b\u4e0b\u8f7d\u200bmozilla-release\u200b\u4ee3\u7801\u200b mozilla-release\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a <pre><code>build/autoconf/config.guess\nbuild/autoconf/config.sub\nbuild/moz.configure/init.configure\nmodules/freetype2/builds/unix/config.guess\nmodules/freetype2/builds/unix/config.sub\nnsprpub/build/autoconf/config.guess\nnsprpub/build/autoconf/config.sub\npython/mozbuild/mozbuild/configure/constants.py\ntoolkit/crashreporter/google-breakpad/autotools/config.guess\ntoolkit/crashreporter/google-breakpad/autotools/config.sub\n</code></pre> \u200b\u4fee\u6539\u200b\u540e\u200b\u5728\u200b<code>src/third_party/mozjs-60/</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b<code>./gen-config.sh</code>\u200b\u751f\u6210\u200b\u4e0a\u8ff0\u200b\u76ee\u5f55\u200b \u200b\u6ce8\u200b\uff1a\u200b\u7531\u4e8e\u200bmozilla-release\u200b\u4ee3\u7801\u200b\u4f9d\u8d56\u200bpython2\uff0c\u200b\u6240\u4ee5\u200b\u751f\u6210\u200b\u76ee\u5f55\u200b\u8fd9\u90e8\u5206\u200b\u662f\u200b\u5728\u200babi1.0 debian10\u200b\u955c\u50cf\u200b\u4e2d\u200b\u6267\u884c\u200b\u7684\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#wiredtiger","title":"wiredtiger","text":"<p>\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a <pre><code>src/third_party/wiredtiger/SConscript\nsrc/third_party/wiredtiger/build_posix/configure.ac.in\nsrc/third_party/wiredtiger/cmake/configs/base.cmake\nsrc/third_party/wiredtiger/cmake/helpers.cmake\nsrc/third_party/wiredtiger/dist/filelist\nsrc/third_party/wiredtiger/dist/prototypes.py\nsrc/third_party/wiredtiger/src/docs/arch-fs-os.dox\nsrc/third_party/wiredtiger/src/docs/spell.ok\nsrc/third_party/wiredtiger/src/include/gcc.h\n</code></pre> \u200b\u9700\u8981\u200b\u521b\u5efa\u200b\u7684\u200b\u76ee\u5f55\u200b\u5982\u4e0b\u200b\uff1a <pre><code>src/third_party/wiredtiger/src/checksum/loongarch64\n</code></pre> \u200b\u521b\u5efa\u200b\u8be5\u200b\u76ee\u5f55\u200b\u540e\u200b\uff0c\u200b\u5728\u200b\u8be5\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u521b\u5efa\u200b<code>crc32-loongarch64.c</code>\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5177\u4f53\u200b\u8bf7\u200b\u53c2\u8003\u200b\u8865\u4e01\u200b\u5185\u5bb9\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#mongo_1","title":"mongo","text":"<p>\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u7684\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a <pre><code>SConstruct\nsrc/mongo/platform/pause.h\nsrc/mongo/db/exec/plan_stats.h\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/mongo/#_6","title":"\u7f16\u8bd1","text":"<pre><code> python3 buildscripts/scons.py install-core --disable-warnings-as-errors\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nacos/","title":"nacos","text":"<ul> <li>\u200b\u7248\u672c\u200b\uff1a2.1.0</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nacos/#01","title":"01 \u200b\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>Nacos /n\u0251:k\u0259\u028as/ \u200b\u662f\u200b Dynamic Naming and Configuration Service\u200b\u7684\u200b\u9996\u5b57\u6bcd\u200b\u7b80\u79f0\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u66f4\u200b\u6613\u4e8e\u200b\u6784\u5efa\u200b\u4e91\u200b\u539f\u751f\u200b\u5e94\u7528\u200b\u7684\u200b\u52a8\u6001\u200b\u670d\u52a1\u200b\u53d1\u73b0\u200b\u3001\u200b\u914d\u7f6e\u7ba1\u7406\u200b\u548c\u200b\u670d\u52a1\u200b\u7ba1\u7406\u200b\u5e73\u53f0\u200b\u3002</p> <p>Nacos \u200b\u81f4\u529b\u4e8e\u200b\u53d1\u73b0\u200b\u3001\u200b\u914d\u7f6e\u200b\u548c\u200b\u7ba1\u7406\u200b\u5fae\u200b\u670d\u52a1\u200b\u3002Nacos \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u7b80\u5355\u200b\u6613\u7528\u200b\u7684\u200b\u7279\u6027\u200b\u96c6\u200b\uff0c\u200b\u5e2e\u52a9\u200b\u60a8\u200b\u5feb\u901f\u200b\u5b9e\u73b0\u200b\u52a8\u6001\u200b\u670d\u52a1\u200b\u53d1\u73b0\u200b\u3001\u200b\u670d\u52a1\u200b\u914d\u7f6e\u200b\u3001\u200b\u670d\u52a1\u200b\u5143\u200b\u6570\u636e\u200b\u53ca\u200b\u6d41\u91cf\u200b\u7ba1\u7406\u200b\u3002</p> <p>Nacos \u200b\u5e2e\u52a9\u200b\u60a8\u200b\u66f4\u200b\u654f\u6377\u200b\u548c\u200b\u5bb9\u6613\u200b\u5730\u200b\u6784\u5efa\u200b\u3001\u200b\u4ea4\u4ed8\u200b\u548c\u200b\u7ba1\u7406\u200b\u5fae\u200b\u670d\u52a1\u5e73\u53f0\u200b\u3002 Nacos \u200b\u662f\u200b\u6784\u5efa\u200b\u4ee5\u200b\u201c\u200b\u670d\u52a1\u200b\u201d\u200b\u4e3a\u200b\u4e2d\u5fc3\u200b\u7684\u200b\u73b0\u4ee3\u200b\u5e94\u7528\u200b\u67b6\u6784\u200b (\u200b\u4f8b\u5982\u200b\u5fae\u200b\u670d\u52a1\u200b\u8303\u5f0f\u200b\u3001\u200b\u4e91\u200b\u539f\u751f\u200b\u8303\u5f0f\u200b) \u200b\u7684\u200b\u670d\u52a1\u200b\u57fa\u7840\u8bbe\u65bd\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nacos/#02","title":"02 \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code># \u200b\u7cfb\u7edf\u200b\u4fe1\u606f\u200b\nroot@nacos_server /w/d/nacos# cat /etc/os-release\nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n# \u200b\u5185\u6838\u200b\u4fe1\u606f\u200b\nroot@nacos_server /w/d/nacos# uname -r\n4.19.190-2.1.lns8.loongarch64\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nacos/#04","title":"04 \u200b\u6784\u5efa\u200b\u8fc7\u7a0b","text":"<ol> <li>protoc-la64</li> <li>protoc-gen-grpc-java-la64-server</li> </ol> <p>\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\uff1a<code>mvn -Prelease-nacos -Dmaven.test.skip=true clean install -U</code></p> <p>\u200b\u6700\u7ec8\u200b\u6784\u5efa\u200b\u6210\u529f\u200b\u7684\u200b\u5236\u54c1\u200b\u4f4d\u4e8e\u200b\uff1a\u201cdistribution/target/\u201d</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nacos/#05","title":"05 \u200b\u6d4b\u8bd5","text":"<p>\u200b\u542f\u52a8\u200b\u547d\u4ee4\u200b\uff1a <code>./startup.sh -m standalone</code></p> <ul> <li>\u200b\u68c0\u67e5\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200bjar\u200b\u5305\u200b\u786e\u8ba4\u200b\u662f\u5426\u200b\u5305\u542b\u200bLA\u200b\u67b6\u6784\u200bso</li> </ul> <pre><code>root@nacos_server2 /w/n/n/d/t/n/n/tmp (la64-Alpha-2.1.0) [SIGINT]# for file in (find ./ -name \"*.jar\"); jar tf $file | grep \".so\\$\" &amp;&amp; echo $file; end\nlibrocksdbjni-linux64.so\n./BOOT-INF/lib/rocksdbjni-5.18.4.jar\nMETA-INF/native/libnetty_transport_native_epoll_loongarch_64.so\n./BOOT-INF/lib/netty-all-4.1.59.Final.jar\nMETA-INF/native/libio_grpc_netty_shaded_netty_tcnative.so\nMETA-INF/native/libio_grpc_netty_shaded_netty_transport_native_epoll_loongarch_64.so\n./BOOT-INF/lib/nacos-client-2.1.0.jar\nMETA-INF/native/libio_grpc_netty_shaded_netty_tcnative.so\nMETA-INF/native/libio_grpc_netty_shaded_netty_transport_native_epoll_loongarch_64.so\n./BOOT-INF/lib/grpc-netty-shaded-1.26.0.jar\ncom/sun/jna/linux-x86/libjnidispatch.so\ncom/sun/jna/linux-x86-64/libjnidispatch.so\ncom/sun/jna/linux-arm/libjnidispatch.so\ncom/sun/jna/linux-armel/libjnidispatch.so\ncom/sun/jna/linux-aarch64/libjnidispatch.so\ncom/sun/jna/linux-ppc/libjnidispatch.so\ncom/sun/jna/linux-ppc64le/libjnidispatch.so\ncom/sun/jna/linux-mips64el/libjnidispatch.so\ncom/sun/jna/linux-loongarch64/libjnidispatch.so\ncom/sun/jna/linux-s390x/libjnidispatch.so\ncom/sun/jna/linux-riscv64/libjnidispatch.so\ncom/sun/jna/sunos-x86/libjnidispatch.so\ncom/sun/jna/sunos-x86-64/libjnidispatch.so\ncom/sun/jna/sunos-sparc/libjnidispatch.so\ncom/sun/jna/sunos-sparcv9/libjnidispatch.so\ncom/sun/jna/freebsd-x86/libjnidispatch.so\ncom/sun/jna/freebsd-x86-64/libjnidispatch.so\ncom/sun/jna/openbsd-x86/libjnidispatch.so\ncom/sun/jna/openbsd-x86-64/libjnidispatch.so\n./BOOT-INF/lib/jna-4.5.2.jar\n</code></pre> <ul> <li>rocksdbjni\u200b\u6570\u636e\u5e93\u200b\u6587\u4ef6\u200b</li> </ul> <pre><code>root@nacos_server2 /tmp# file /tmp/librocksdbjni3982187426176383834.so\n/tmp/librocksdbjni3982187426176383834.so: ELF 64-bit LSB shared object, *unknown arch 0x102* version 1 (GNU/Linux), dynamically linked, BuildID[sha1]=d7103584459702015a1fcdaaacdb2c7dd0888be4, not stripped\n</code></pre> <ul> <li>\u200b\u7aef\u53e3\u200b</li> </ul> <pre><code>root@nacos_server2 /w/n/n/d/t/n/n/bin (la64-Alpha-2.1.0) [SIGINT]# ss -ntlp\nState              Recv-Q             Send-Q                         Local Address:Port                         Peer Address:Port             Process\nLISTEN             0                  128                                  0.0.0.0:9848                              0.0.0.0:*                 users:((\"java\",pid=108239,fd=464))\nLISTEN             0                  128                                  0.0.0.0:9849                              0.0.0.0:*                 users:((\"java\",pid=108239,fd=465))\nLISTEN             0                  128                                  0.0.0.0:7848                              0.0.0.0:*                 users:((\"java\",pid=108239,fd=466))\nLISTEN             0                  100                                  0.0.0.0:8848                              0.0.0.0:*                 users:((\"java\",pid=108239,fd=601))\n</code></pre> <ul> <li>\u200b\u7aef\u53e3\u200b\u8fde\u901a\u6027\u200b</li> </ul> <pre><code>root@nacos_server2 /w/n/n/d/t/n/n/bin (la64-Alpha-2.1.0)# telnet 127.0.0.1 9848\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n\ufffd^CConnection closed by foreign host.\nroot@nacos_server2 /w/n/n/d/t/n/n/bin (la64-Alpha-2.1.0) [1]# telnet 127.0.0.1 9849\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n\ufffd^CConnection closed by foreign host.\nroot@nacos_server2 /w/n/n/d/t/n/n/bin (la64-Alpha-2.1.0) [1]# telnet 127.0.0.1 7848\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n\ufffd^CConnection closed by foreign host.\nroot@nacos_server2 /w/n/n/d/t/n/n/bin (la64-Alpha-2.1.0) [1]# telnet 127.0.0.1 8848\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n^CConnection closed by foreign host.\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/","title":"nerdctl","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#1","title":"1. \u200b\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b nerdctl \u200b\u7248\u672c\u200b 1.5.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/containerd/nerdctl <p>nerdctl\u200b\u662f\u200bcontainerd\u200b\u7684\u200b\u547d\u4ee4\u884c\u200b\u5de5\u5177\u200b\u3002\u200b\u4e0e\u200bctr\u200b\u4e0d\u540c\u200b\uff0cnerdctl\u200b\u7684\u200b\u76ee\u6807\u200b\u662f\u200b\u7528\u6237\u200b\u53cb\u597d\u200b\u5e76\u200b\u548c\u200bdocker\u200b\u517c\u5bb9\u200b\uff0c\u200b\u6bd4\u200bctr\u200b\u8986\u76d6\u200b\u66f4\u200b\u5168\u9762\u200b\u3002    \u200b\u4ece\u200b\u57fa\u672c\u200b\u7528\u6cd5\u200b\u7684\u200b\u89d2\u5ea6\u200b\u6765\u770b\u200b\uff0c\u200b\u4e0e\u200bctr\u200b\u76f8\u6bd4\u200b\uff0cnerdctl\u200b\u652f\u6301\u200b\uff1a   \u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\uff1b \u200b\u5bb9\u5668\u200b\u7f51\u7edc\u7ba1\u7406\u200b\uff1b docker compose\u200b\u4e0e\u200bnerdctl compose up</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#2","title":"2. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u4e0e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u7684\u200b\u4ee3\u7801\u200b\u8f83\u200b\u5c11\u200b\uff0c\u200b\u5177\u4f53\u200b\u89c1\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/nerdctl/tree/v1.5.0-loong64 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#3","title":"3. \u200b\u6784\u5efa","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#31","title":"3.1 \u200b\u4e8c\u8fdb\u5236\u200b\u7f16\u8bd1","text":"<p>\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1amake nerdctl        \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200b_output\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200bnerdctl\u200b\u4e8c\u8fdb\u5236\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#32","title":"3.2 \u200b\u4e8c\u8fdb\u5236\u200b\u5b89\u88c5","text":"<p>\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a make install     \u200b\u9ed8\u8ba4\u200b\u5b89\u88c5\u200b\u5728\u200b/usr/local/bin\u200b\u76ee\u5f55\u200b\u4e0b\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#33-release","title":"3.3 \u200b\u5b98\u65b9\u200brelease\u200b\u5305\u200b\u6784\u5efa","text":"<p>\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a make artifacts  \u200b\u8be5\u200b\u547d\u4ee4\u200b\u5c06\u200b\u6784\u5efa\u200b\u6240\u6709\u200b\u5e73\u53f0\u200b\uff0c\u200b\u6240\u6709\u200b\u67b6\u6784\u200b\u7684\u200btar\u200b\u5305\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/nerdctl/#4","title":"4. \u200b\u4f7f\u7528\u200b\u4f9d\u8d56","text":"<p>\u200b\u82e5\u200b\u8981\u200b\u4f7f\u7528\u200bnerdctl\u200b\u9700\u8981\u200b\u6ee1\u8db3\u200b\u4ee5\u4e0b\u200b2\u200b\u4e2a\u200b\u6761\u4ef6\u200b\uff1a       1\uff09\u200b\u4f7f\u7528\u200b\u9ad8\u200b\u7248\u672c\u200b\u7684\u200bCNI\u200b\u7f51\u7edc\u200b\u63d2\u4ef6\u200b\uff1a          \u200b\u4e0b\u8f7d\u200bhttps://github.com/Loongson-Cloud-Community/plugins/releases/download/v1.3.0/loongarch64-v1.3.0-bin.tar.gz\uff0c        \u200b\u89e3\u538b\u200b\u540e\u200b\u91cd\u547d\u540d\u200b\u4e3a\u200bbin,\u200b\u5c06\u200b\u5176\u200b\u5b58\u653e\u200b\u5728\u200b/opt/cni/ \u200b\u76ee\u5f55\u200b\u4e0b\u200b     \u200b\u5907\u6ce8\u200b\uff1a plugins\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u6307\u5bfc\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/plugins.md    2\uff09\u200b\u5378\u8f7d\u200bdocker-ce        3) \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b    <pre><code>[root@kubernetes-master-1 plugins]# nerdctl pull cr.loongnix.cn/library/alpine:3.11\ncr.loongnix.cn/library/alpine:3.11:                                               resolved       |++++++++++++++++++++++++++++++++++++++| \nmanifest-sha256:9730184ded621302981066363fad2a8157ff071565dc3478c3e8c4fce9c08adc: done           |++++++++++++++++++++++++++++++++++++++| \nconfig-sha256:530dc3f1f2ceb4bea7af5aa073e25108e98e2520049193b37e28bb1d0ae51c62:   done           |++++++++++++++++++++++++++++++++++++++| \nelapsed: 0.5 s                                                                    total:  528.0  (1.0 KiB/s)                                       \n[root@kubernetes-master-1 plugins]# nerdctl run -it cr.loongnix.cn/library/alpine:3.11\n/ # \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/","title":"netty-tcnative","text":"<p>netty-tcnative\u200b\u6784\u5efa\u200b\u6307\u5bfc\u200b     \u200b\u6784\u5efa\u200b\u7248\u672c\u200b\uff1anetty-tcnative-parent-2.0.26.Final</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#1","title":"1. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>cat /etc/os-release\nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>uname -a\nLinux node1 4.19.0-19-loongson-3 #1 SMP pkg_lnd10_4.19.190-7.6 Wed Nov 16 11:12:41 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#2","title":"2. \u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305","text":"<pre><code>apt install libapr1-dev libssl-dev cmake ninja-build libunwind-dev golang-1.19-go\nexport PATH=/usr/lib/go-1.19/bin:$PATH\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#3","title":"3. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#1boringssl-staticpomxml","title":"(1)boringssl-static/pom.xml","text":"<pre><code>diff --git a/boringssl-static/pom.xml b/boringssl-static/pom.xml\nindex cc40c74..e91b434 100644\n--- a/boringssl-static/pom.xml\n+++ b/boringssl-static/pom.xml\n@@ -79,7 +79,7 @@\n                 &lt;configuration&gt;\n                   &lt;checkoutDirectory&gt;${boringsslCheckoutDir}&lt;/checkoutDirectory&gt;\n                   &lt;connectionType&gt;developerConnection&lt;/connectionType&gt;\n-                  &lt;developerConnectionUrl&gt;scm:git:https://boringssl.googlesource.com/boringssl&lt;/developerConnectionUrl&gt;\n+                  &lt;developerConnectionUrl&gt;scm:git:https://github.com/Loongson-Cloud-Community/boringssl&lt;/developerConnectionUrl&gt;\n                   &lt;scmVersion&gt;${boringsslBranch}&lt;/scmVersion&gt;\n                   &lt;scmVersionType&gt;branch&lt;/scmVersionType&gt;\n                   &lt;skipCheckoutIfExists&gt;true&lt;/skipCheckoutIfExists&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#2-pomxml","title":"(2) pom.xml","text":"<pre><code>diff --git a/pom.xml b/pom.xml\nindex 2619560..18d3d01 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -90,7 +90,7 @@\n       &lt;extension&gt;\n         &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n         &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n-        &lt;version&gt;1.6.2&lt;/version&gt;\n+        &lt;version&gt;1.7.1&lt;/version&gt;\n       &lt;/extension&gt;\n     &lt;/extensions&gt;\n\n@@ -467,8 +467,8 @@\n\n                         &lt;property name=\"aprTarGzFile\" value=\"apr-${aprVersion}.tar.gz\" /&gt;\n                         &lt;property name=\"aprTarFile\" value=\"apr-${aprVersion}.tar\" /&gt;\n-                        &lt;get src=\"http://archive.apache.org/dist/apr/${aprTarGzFile}\" dest=\"${project.build.directory}/${aprTarGzFile}\" verbose=\"on\" /&gt;\n-                        &lt;checksum file=\"${project.build.directory}/${aprTarGzFile}\" algorithm=\"SHA-256\" property=\"${aprSha256}\" verifyProperty=\"isEqual\" /&gt;\n+                        &lt;get src=\"https://github.com/Loongson-Cloud-Community/netty-tcnative/releases/download/netty-tcnative-parent-2.0.26.Final/la64-apr-1.6.5.tar.gz\" dest=\"${project.build.directory}/${aprTarGzFile}\" verbose=\"on\" /&gt;\n+                          &lt;!-- &lt;checksum file=\"${project.build.directory}/${aprTarGzFile}\" algorithm=\"SHA-256\" property=\"${aprSha256}\" verifyProperty=\"isEqual\" /&gt; --&gt;\n                         &lt;gunzip src=\"${project.build.directory}/${aprTarGzFile}\" dest=\"${project.build.directory}\" /&gt;\n                         &lt;!-- Use the tar command (rather than the untar ant task) in order to preserve file permissions. --&gt;\n                         &lt;exec executable=\"tar\" failonerror=\"true\" dir=\"${project.build.directory}/\" resolveexecutable=\"true\"&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#4","title":"4. \u200b\u6784\u5efa\u200b\u5b89\u88c5","text":"<pre><code>./mvnw install\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#5","title":"5. \u200b\u5305\u542b\u200b\u7ec4\u4ef6","text":"<p>netty-tcnative-{os-arch}\uff1a\u200b\u52a8\u6001\u200b\u8fde\u63a5\u200b\u5230\u200blibapr-1\u200b\u548c\u200bopenssl\uff0c\u200b\u8981\u200b\u4f7f\u7528\u200b\u8be5\u200b\u7ec4\u4ef6\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u5fc5\u987b\u200b\u540c\u4e8b\u200b\u5b89\u88c5\u200b\u548c\u200b\u914d\u7f6e\u200blibapr-1\u200b\u548c\u200bopenssl,\u200b\u8be5\u200b\u7ec4\u4ef6\u200b\u7ba1\u7406\u5458\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b\u5347\u7ea7\u200bopenssl\u200b\u800c\u200b\u65e0\u9700\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b\u5e94\u7528\u200b\u3002      netty-tcnative-boringssl-static-{os-arch}: \u200b\u9759\u6001\u200b\u94fe\u63a5\u200b\u5230\u200b\u8c37\u6b4c\u200b\u7684\u200bboringssl\uff0c\u200b\u662f\u200bopenssl\u200b\u7684\u200b\u4e00\u4e2a\u200b\u5206\u652f\u200b\uff0c\u200b\u5177\u6709\u200b\u9644\u52a0\u200b\u529f\u80fd\u200b\uff0c\u200b\u9759\u6001\u200b\u94fe\u63a5\u200b\u4f7f\u5f97\u200b\u5728\u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u4f7f\u7528\u200btcnative\u200b\u53d8\u5f97\u200b\u66f4\u200b\u5bb9\u6613\u200b\uff0c\u200b\u8be5\u5e93\u200b\u4e0d\u200b\u9700\u8981\u200bapr\u3002 netty-tcnative-boringssl-static: \u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u6240\u6709\u200b\u53d7\u200b\u652f\u6301\u200b\u7684\u200bnetty-tcnative-boringssl-static-{os-arch}\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u5173\u5fc3\u200b\u5e73\u53f0\u200b\u67b6\u6784\u200b\u3002 netty-tcnative-openssl-static-{os-arch}: \u200b\u9759\u6001\u200b\u94fe\u63a5\u200b\u5230\u200blibapr-1\u200b\u548c\u200bopenssl</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty-tcnative/#6","title":"6. \u200b\u5907\u6ce8","text":"<p>(1)\u200b\u82e5\u200b\u51fa\u73b0\u200b\u4ee5\u4e0b\u200b\u95ee\u9898\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u662f\u200b\u7531\u4e8e\u200b\u7f51\u7edc\u200b\u539f\u56e0\u200b\u9020\u6210\u200b\u7684\u200b\uff1a <pre><code>     [echo] Downloading and unpacking APR\n      [get] Getting: https://github.com/Loongson-Cloud-Community/netty-tcnative/releases/download/netty-tcnative-parent-2.0.26.Final/la64-apr-1.6.5.tar.gz\n      [get] To: /home/zhaixiaojuan/workspace/netty-tcnative-test/libressl-static/target/apr-1.6.5.tar.gz\n      [get] Error getting https://github.com/Loongson-Cloud-Community/netty-tcnative/releases/download/netty-tcnative-parent-2.0.26.Final/la64-apr-1.6.5.tar.gz to /home/zhaixiaojuan/workspace/netty-tcnative-test/libressl-static/target/apr-1.6.5.tar.gz\n</code></pre> \u200b\u53ef\u4ee5\u200b\u624b\u52a8\u200b\u4e0b\u8f7d\u200bapr-1.6.5.tar.gz\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u590d\u5236\u5230\u200b/home/zhaixiaojuan/workspace/netty-tcnative-test/libressl-static/target/apr-1.6.5.tar.gz\u200b\u5e76\u200b\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b\u89e3\u538b\u200b</p> <p>(2)   \u200b\u4ee5\u4e0b\u200b\u4e24\u4e2a\u200b\u8fde\u63a5\u200b\u662f\u200b\u9002\u914d\u200bLA\u200b\u67b6\u6784\u200b\u7684\u200b\uff0c\u200b\u53ef\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u4f7f\u7528\u200b\uff08\u200b\u5373\u53ef\u200b\u7701\u7565\u200b\u4e0a\u9762\u200b\u6b65\u9aa4\u200b\u201d3\u200b\u6e90\u7801\u200b\u4fee\u6539\u200b\u201c\u200b\u7684\u200b\u5185\u5bb9\u200b\uff09          https://github.com/Loongson-Cloud-Community/netty-tcnative/tree/loong64-netty-tcnative-parent-2.0.26.Final     https://github.com/Loongson-Cloud-Community/netty-tcnative/tree/loong64-netty-tcnative-parent-2.0.29.Final      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/","title":"netty","text":"<p>netty\u200b\u6784\u5efa\u200b\u6307\u5bfc\u200b      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<pre><code>tag: netty-4.1.42.Final\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>cat /etc/os-release\nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre> <pre><code>uname -a\nLinux node1 4.19.0-19-loongson-3 #1 SMP pkg_lnd10_4.19.190-7.6 Wed Nov 16 11:12:41 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/#3","title":"3. \u200b\u5b89\u88c5\u200b\u4f9d\u8d56","text":"<pre><code>apt-get install autoconf automake libtool make tar gcc openjdk-11-jdk libapr1-dev libssl-dev cmake ninja-build libunwind-dev golang-1.19-go\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/#4","title":"4. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<pre><code>diff --git a/common/src/main/java/io/netty/util/internal/PlatformDependent.java b/common/src/main/java/io/netty/util/internal/PlatformDependent.java\nindex b7ce81484f..463426c12f 100644\n--- a/common/src/main/java/io/netty/util/internal/PlatformDependent.java\n+++ b/common/src/main/java/io/netty/util/internal/PlatformDependent.java\n@@ -1398,6 +1398,9 @@ public final class PlatformDependent {\n         if (\"s390x\".equals(value)) {\n             return \"s390_64\";\n         }\n+        if (\"loongarch64\".equals(value)) {\n+            return \"loongarch_64\";\n+        }\n\n         return \"unknown\";\n     }\ndiff --git a/pom.xml b/pom.xml\nindex 4737b3e3e5..be3de04ef1 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -311,7 +311,7 @@\n     &lt;argLine.javaProperties&gt;-D_&lt;/argLine.javaProperties&gt;\n     &lt;!-- Configure the os-maven-plugin extension to expand the classifier on                  --&gt;\n     &lt;!-- Fedora-\"like\" systems. This is currently only used for the netty-tcnative dependency --&gt;\n-    &lt;osmaven.version&gt;1.6.2&lt;/osmaven.version&gt;\n+    &lt;osmaven.version&gt;1.7.1&lt;/osmaven.version&gt;\n     &lt;!-- keep in sync with PlatformDependent#ALLOWED_LINUX_OS_CLASSIFIERS --&gt;\n     &lt;os.detection.classifierWithLikes&gt;fedora,suse,arch&lt;/os.detection.classifierWithLikes&gt;\n     &lt;tcnative.artifactId&gt;netty-tcnative&lt;/tcnative.artifactId&gt;\n@@ -768,10 +768,10 @@\n                 &lt;/requireMavenVersion&gt;\n                 &lt;requireProperty&gt;\n                   &lt;regexMessage&gt;\n-                    x86_64/AARCH64/PPCLE64 JDK must be used.\n+                    x86_64/AARCH64/PPCLE64/loongarch64 JDK must be used.\n                   &lt;/regexMessage&gt;\n                   &lt;property&gt;os.detected.arch&lt;/property&gt;\n-                  &lt;regex&gt;^(x86_64|aarch_64|ppcle_64)$&lt;/regex&gt;\n+                  &lt;regex&gt;^(x86_64|aarch_64|ppcle_64|loongarch_64)$&lt;/regex&gt;\n                 &lt;/requireProperty&gt;\n               &lt;/rules&gt;\n             &lt;/configuration&gt;\ndiff --git a/testsuite-shading/pom.xml b/testsuite-shading/pom.xml\nindex e4064cfe9b..0301616136 100644\n--- a/testsuite-shading/pom.xml\n+++ b/testsuite-shading/pom.xml\n@@ -46,7 +46,7 @@\n       &lt;extension&gt;\n         &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n         &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n-        &lt;version&gt;1.6.0&lt;/version&gt;\n+        &lt;version&gt;1.7.1&lt;/version&gt;\n       &lt;/extension&gt;\n     &lt;/extensions&gt;\n     &lt;plugins&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/netty/#5","title":"5. \u200b\u6784\u5efa\u200b\u547d\u4ee4","text":"<pre><code>./mvnw  install -DskipTests\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/node-re2/","title":"node-re2","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/node-re2/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>1.17.4     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/node-re2/#2","title":"2. \u200b\u6784\u5efa\u200b\u547d\u4ee4","text":"<p><pre><code>git clone git@github.com:uhop/node-re2.git\ncd node-re2\ngit submodule update --init --recursive\nnpm install\nnpm run rebuild\n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200bbuild\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200bRelease/re2.node</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/node-re2/#3","title":"3. \u200b\u5907\u6ce8","text":"<p>\u200b\u4ece\u200b1.19.0\u200b\u7248\u672c\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5728\u200b\u6e90\u7801\u200b\u4e2d\u200b\u8c03\u7528\u200b\u4e86\u200bv8::RegExp:kHasIndices\uff0c\u200b\u5728\u200b\u6211\u4eec\u200b\u73b0\u6709\u200b\u7684\u200bv8\u200b\u7248\u672c\u200b\u4e2d\u200b\u4e0d\u200b\u652f\u6301\u200b\uff0c\u200b\u4f1a\u200b\u7f16\u8bd1\u200b\u62a5\u9519\u200b\uff1a <pre><code>make: \u200b\u8fdb\u5165\u200b\u76ee\u5f55\u200b\u201c/home/zhaixiaojuan/workspace/node-re2/build\u201d\n  CXX(target) Release/obj.target/re2/lib/addon.o\n  CXX(target) Release/obj.target/re2/lib/new.o\n../lib/new.cc: In static member function \u2018static Nan::NAN_METHOD_RETURN_TYPE WrappedRE2::New(Nan::NAN_METHOD_ARGS_TYPE)\u2019:\n../lib/new.cc:313:41: error: \u2018kHasIndices\u2019 is not a member of \u2018v8::RegExp\u2019\n   hasIndices = bool(flags &amp; v8::RegExp::kHasIndices);\n                                         ^~~~~~~~~~~\nmake: *** [re2.target.mk:224\uff1aRelease/obj.target/re2/lib/new.o] \u200b\u9519\u8bef\u200b 1\nmake: \u200b\u79bb\u5f00\u200b\u76ee\u5f55\u200b\u201c/home/zhaixiaojuan/workspace/node-re2/build\u201d\ngyp ERR! build error \ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:194:23)\ngyp ERR! stack     at ChildProcess.emit (events.js:315:20)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12)\ngyp ERR! System Linux 4.19.190-7.4.lns8.loongarch64\ngyp ERR! command \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\" \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/","title":"onlyoffice-documentserver","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_1","title":"\u5feb\u901f\u200b\u90e8\u7f72","text":"<p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u4e0b\u8f7d\u200b mips64 \u200b\u67b6\u6784\u200b onlyoffice documentsever 7.1.1 <code>deb</code> \u200b\u5305\u200b\u3002</p> <p>\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u67e5\u770b\u200b\u6216\u200b\u4e0b\u8f7d\u200b\u5df2\u7ecf\u200b\u9002\u914d\u200b mips64 \u200b\u67b6\u6784\u200b\u7684\u200b\u811a\u672c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_2","title":"\u79fb\u690d\u200b\u67b6\u6784","text":"<p>mips64el</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_3","title":"\u79fb\u690d\u200b\u7248\u672c","text":"<p>\u200b\u672c\u6587\u200b\u79fb\u690d\u200b\u7684\u200b onlyoffice documentserver \u200b\u4e3a\u200b <code>7.1.1</code> \u200b\u7248\u672c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_4","title":"\u73af\u5883\u200b\u8981\u6c42","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_5","title":"\u786c\u4ef6","text":"<p>\u200b\u78c1\u76d8\u7a7a\u95f4\u200b &gt;=40G  \u200b\u5185\u5b58\u200b &gt;=2G CPU &gt;=2\uff0c&gt;=2GHz SWAP &gt;=4G</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_6","title":"\u8f6f\u4ef6","text":"<p>python git ninja-build nodejs 14.16.1 npm 8.19.2 jdk8  </p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u672c\u6587\u200b\u7684\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b\u4ec5\u200b\u5728\u200bdebian:bullseye\u200b\u4e0b\u200b\u8fdb\u884c\u200b\u8fc7\u200b\u9a8c\u8bc1\u200b\uff0c\u200b\u4ee5\u4e0a\u200b\u73af\u5883\u200b\u8981\u6c42\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_7","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_8","title":"\u8f6f\u4ef6\u200b\u9002\u914d","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_9","title":"\u5b89\u88c5\u200b\u4f9d\u8d56\u200b\u8f6f\u4ef6","text":"<p>\u200b\u5b89\u88c5\u200b git python \u200b\u4ee5\u53ca\u200b ninja\uff1a <pre><code>sudo apt install -y git python python3 ninja-build\n</code></pre> debian \u200b\u5b98\u65b9\u200b\u6e90\u200b\u63d0\u4f9b\u200b\u7684\u200b nodejs \u200b\u548c\u200b npm \u200b\u7248\u672c\u200b\u8fc7\u4f4e\u200b\uff0c\u200b\u9009\u62e9\u200b\u4ece\u200b\u9f99\u82af\u200bmips\u200b\u6e90\u4e2d\u200b\u4e0b\u8f7d\u200b\u548c\u200b\u5b89\u88c5\u200b nodejs\uff0c\u200b\u901a\u8fc7\u200b yarnpkg \u200b\u5b89\u88c5\u200b\u9ad8\u200b\u7248\u672c\u200b npm\uff1a <pre><code>apt install -y yarnpkg &amp;&amp; yarnpkg add npm -g\n</code></pre> \u200b\u4ece\u200b http://ftp.loongnix.cn \u200b\u4e2d\u200b\u4e0b\u8f7d\u200b mips jdk8 \u200b\u7684\u200b tar \u200b\u5305\u200b\uff0c\u200b\u89e3\u538b\u200b\u540e\u200b\u5c06\u200b\u5176\u200b\u5b89\u88c5\u200b\u5728\u200b <code>/usr/local</code> \u200b\u4e0b\u200b\uff0c\u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u4ee5\u4e0b\u200b\u73af\u5883\u53d8\u91cf\u200b\uff1a <pre><code>export JAVA_HOME=/usr/local/openjdk &amp;&amp;\\\nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_10","title":"\u4e0b\u8f7d\u200b\u6e90\u7801","text":"<p>\u200b\u65b0\u5efa\u200b\u76ee\u5f55\u200b onlyoffice\uff0c\u200b\u5c06\u200b\u5176\u200b\u89c6\u4e3a\u200b\u672c\u6b21\u200b\u8f6f\u4ef6\u200b\u79fb\u690d\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\uff1a <pre><code>mkdir onlyoffice &amp;&amp; cd onlyoffice\n</code></pre> \u200b\u4e0b\u8f7d\u200b onlyoffice documentserver \u200b\u5b98\u65b9\u200b\u6784\u5efa\u200b\u5de5\u5177\u200b build_tools\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff08\u200b\u5982\u679c\u200b\u8bfb\u8005\u200b\u9700\u8981\u200b\u9002\u914d\u200b\u5176\u4ed6\u200b\u7248\u672c\u200b\u7684\u200b\u6e90\u7801\u200b\uff0c\u200b\u8bf7\u200b\u786e\u4fdd\u200b build_tools \u200b\u4e2d\u200b\u7684\u200b <code>version</code> \u200b\u4e0e\u200b documentserver \u200b\u6e90\u7801\u200b\u7684\u200b\u7248\u672c\u200b\u4e00\u81f4\u200b\uff09: <pre><code>git clone -b v7.1.1.76 https://github.com/ONLYOFFICE/build_tools.git\n</code></pre> </p> <p>\u200b\u4e0b\u8f7d\u200b onlyoffice documentserver \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1</code>\uff0c\u200b\u540c\u65f6\u200b\u4e0b\u8f7d\u200b documentserver \u200b\u4e2d\u200b\u94fe\u63a5\u200b\u7684\u200b\u5b50\u9879\u76ee\u200b\uff0c\u200b\u4e0b\u8f7d\u200b\u5b8c\u6210\u200b\u540e\u200b\u5c06\u200b documentserver \u200b\u7684\u200b\u7ec4\u4ef6\u200b\u79fb\u52a8\u200b\u5230\u200b\u4e0a\u5c42\u200b\u76ee\u5f55\u200b\uff1a <pre><code>git clone --recursive -b v7.1.1 https://github.com/ONLYOFFICE/DocumentServer.git &amp;&amp;\\ \nmv ./DocumentServer/core ./DocumentServer/core-fonts ./DocumentServer/dictionaries ./DocumentServer/sdkjs ./DocumentServer/sdkjs-plugins ./DocumentServer/server ./DocumentServer/web-apps .\n</code></pre> \u200b\u4e0b\u8f7d\u200b onlyoffice document-templates \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff1a <pre><code>git clone -b v7.1.1.76 https://github.com/ONLYOFFICE/document-templates.git\n</code></pre> \u200b\u4e0b\u8f7d\u200b onlyoffice document-server-integration \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff0c\u200b\u540c\u65f6\u200b\u4e0b\u8f7d\u200b documentserver \u200b\u4e2d\u200b\u94fe\u63a5\u200b\u7684\u200b\u5b50\u9879\u76ee\u200b: <pre><code>git clone --recursive -b v7.1.1.76 https://github.com/ONLYOFFICE/document-server-integration.git\n</code></pre> \u200b\u4e0b\u8f7d\u200b onlyoffice sdkjs-forms \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff1a <pre><code>git clone -b v7.1.1.76 https://github.com/ONLYOFFICE/sdkjs-forms.git\n</code></pre> \u200b\u4e0b\u8f7d\u200b onlyoffice ducumentbuilder \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff0c\u200b\u540c\u65f6\u200b\u4e0b\u8f7d\u200b documentbuilder \u200b\u4e2d\u200b\u94fe\u63a5\u200b\u7684\u200b\u5b50\u9879\u76ee\u200b\uff1a <pre><code>git clone --recursive -b v7.1.1.76 https://github.com/ONLYOFFICE/DocumentBuilder.git\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_11","title":"\u8bbe\u7f6e\u200b\u73af\u5883\u53d8\u91cf","text":"<pre><code>export GCLIENT_PY3=0  \nexport USE_PYTHON3=0\nexport DEPOT_TOOLS_UPDATE=0\nexport DEPOT_TOOLS_BOOTSTRAP_PYTHON3=0\nexport SKIP_GCE_AUTH_FOR_GIT=1\nexport KERNEL_BITS=64\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_12","title":"\u4fee\u6539\u200b\u811a\u672c\u200b\u548c\u200b\u6e90\u7801","text":"<p>\u200b\u6ce8\u91ca\u200b <code>./build_tools/make.py</code> \u200b\u4e2d\u200b\u66f4\u65b0\u200b onlyoffice \u200b\u7ec4\u4ef6\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u786e\u4fdd\u200b\u7248\u672c\u200b\u59cb\u7ec8\u200b\u4e3a\u200b <code>v7.1.1</code>: <pre><code>diff --git a/make.py b/make.py\nindex 7635f70..a22a30e 100755\n--- a/make.py\n+++ b/make.py\n@@ -52,9 +52,9 @@ config.parse_defaults()\n base.check_build_version(base_dir)\n\n # update\n-if (\"1\" == config.option(\"update\")):\n-  repositories = base.get_repositories()\n-  base.update_repositories(repositories)\n+#if (\"1\" == config.option(\"update\")):\n+#  repositories = base.get_repositories()\n+#  base.update_repositories(repositories)\n\n base.configure_common_apps()\n</code></pre> \u200b\u4fee\u6539\u200b <code>./build_tools/scripts/core_common/modules/openssl.py</code>\uff1a <pre><code>diff --git a/scripts/core_common/modules/openssl.py b/scripts/core_common/module\nindex 2a5cdbd..ebff355 100644\n--- a/scripts/core_common/modules/openssl.py\n+++ b/scripts/core_common/modules/openssl.py\n@@ -79,12 +79,12 @@ def make():\n     return\n\n   if (-1 != config.option(\"platform\").find(\"linux\")) and not base.is_dir(\"../bu\n-    base.cmd(\"./config\", [\"no-shared\", \"no-asm\", \"--prefix=\" + old_cur_dir + \"/\n+    base.cmd(\"./Configure\", [\"linux64-mips64\", \"no-shared\", \"no-asm\", \"--prefix\n     base.replaceInFile(\"./Makefile\", \"CFLAGS=-Wall -O3\", \"CFLAGS=-Wall -O3 -fvi\n     base.replaceInFile(\"./Makefile\", \"CXXFLAGS=-Wall -O3\", \"CXXFLAGS=-Wall -O3 \n     base.cmd(\"make\")\n     base.cmd(\"make\", [\"install\"])\n-    # TODO: support x86\n+    # TODO: support mips64\n</code></pre> \u200b\u4fee\u6539\u200b <code>./build_tools/scripts/base.py</code>\uff1a <pre><code>diff --git a/scripts/base.py b/scripts/base.py\nindex fc8a377..3f92ccf 100644\n--- a/scripts/base.py\n+++ b/scripts/base.py\n@@ -598,6 +598,8 @@ def qt_config(platform):\n     config_param += \" linux_arm64\"\n   if config.check_option(\"platform\", \"linux_arm64\"):\n     config_param += \" v8_version_89\"\n+  if config.check_option(\"platform\", \"linux_64\"):\n+    config_param += \" v8_version_89\"\n   return config_param\n\n def qt_major_version():\n@@ -1243,7 +1245,7 @@ def copy_v8_files(core_dir, deploy_dir, platform, is_xp=Fa\n   if (config.option(\"vs-version\") == \"2019\"):\n     directory_v8 += \"/v8_89/v8/out.gn/\"\n   else:\n-    directory_v8 += \"/v8/v8/out.gn/\"\n+    directory_v8 += \"/v8_89/v8/out.gn/\"\n\n   if is_xp:\n     copy_files(directory_v8 + platform + \"/release/icudt*.dll\", deploy_dir + \"/\n</code></pre> \u200b\u4fee\u6539\u200b <code>./build_tools/scripts/core_common/modules/v8.py</code>\uff1a <pre><code>diff --git a/scripts/core_common/modules/v8.py b/scripts/core_common/modules/v8.\nindex 98008a2..dbf2b9d 100644\n--- a/scripts/core_common/modules/v8.py\n+++ b/scripts/core_common/modules/v8.py\n@@ -71,7 +71,8 @@ def make():\n   if (\"mac\" == base.host_platform()) and (-1 == config.option(\"config\").find(\"u\n     return\n\n-  use_v8_89 = False\n+#  use_v8_89 = False\n+  use_v8_89 = True\n   if (-1 != config.option(\"config\").lower().find(\"v8_version_89\")):\n     use_v8_89 = True\n   if (\"windows\" == base.host_platform()) and (config.option(\"vs-version\") == \"2\n</code></pre> \u200b\u4fee\u6539\u200b <code>./build_tools/scripts/core_common/modules/v8_89.py</code>\uff1a <pre><code>diff --git a/scripts/core_common/modules/v8_89.py b/scripts/core_common/modules/\nindex 7529882..b089ae4 100644\n--- a/scripts/core_common/modules/v8_89.py\n+++ b/scripts/core_common/modules/v8_89.py\n@@ -13,8 +13,8 @@ def make_args(args, platform, is_64=True, is_debug=False):\n     args_copy.append(\"target_cpu=\\\\\\\"x64\\\\\\\"\") \n     args_copy.append(\"v8_target_cpu=\\\\\\\"x64\\\\\\\"\")\n   else:\n-    args_copy.append(\"target_cpu=\\\\\\\"x86\\\\\\\"\") \n-    args_copy.append(\"v8_target_cpu=\\\\\\\"x86\\\\\\\"\")\n+    args_copy.append(\"target_cpu=\\\\\\\"mips64el\\\\\\\"\") \n+    args_copy.append(\"v8_target_cpu=\\\\\\\"mips64el\\\\\\\"\")\n\n   if (platform == \"linux_arm64\"):\n     args_copy = args[:]\n@@ -28,7 +28,7 @@ def make_args(args, platform, is_64=True, is_debug=False):\n     args_copy.append(\"is_debug=false\")\n\n   if (platform == \"linux\"):\n-    args_copy.append(\"is_clang=true\")\n+    args_copy.append(\"is_clang=false\")\n     args_copy.append(\"use_sysroot=false\")\n   if (platform == \"windows\"):\n     args_copy.append(\"is_clang=false\")    \n@@ -76,7 +76,6 @@ def make():\n       os.chdir(\"../\")\n     base.cmd(\"./depot_tools/gclient\", [\"sync\", \"-r\", \"remotes/branch-heads/8.9\"\n     base.cmd(\"gclient\", [\"sync\", \"--force\"], True)\n-\n   if (\"windows\" == base.host_platform()):\n     base.replaceInFile(\"v8/build/config/win/BUILD.gn\", \":static_crt\", \":dynamic\n\n@@ -93,7 +92,7 @@ def make():\n              \"treat_warnings_as_errors=false\"]\n\n   if config.check_option(\"platform\", \"linux_64\"):\n-    base.cmd2(\"gn\", [\"gen\", \"out.gn/linux_64\", make_args(gn_args, \"linux\")])\n+    base.cmd2(\"gn\", [\"gen\", \"out.gn/linux_64\", make_args(gn_args, \"linux\", Fals\n     base.cmd(\"ninja\", [\"-C\", \"out.gn/linux_64\"])\n\n   if config.check_option(\"platform\", \"linux_32\"):\n</code></pre> \u200b\u5728\u200b <code>./build_tools/tools/linux/automate.py</code> \u200b\u4e2d\u200b\uff0c\u200b\u5728\u200b <code>qt</code> \u200b\u7f16\u8bd1\u200b\u524d\u200b\u52a0\u4e0a\u200b\u65ad\u70b9\u200b\uff1a <pre><code>diff --git a/tools/linux/automate.py b/tools/linux/automate.py\nindex 70ed8b3..6db14dc 100755\n--- a/tools/linux/automate.py\n+++ b/tools/linux/automate.py\n@@ -24,7 +24,7 @@ def install_qt():\n\n   if not base.is_dir(\"./qt-everywhere-opensource-src-5.9.9\"):\n     base.cmd(\"tar\", [\"-xf\", \"./qt_source_5.9.9.tar.xz\"])\n-\n+    sys.exit(0)\n   qt_params = [\"-opensource\",\n                \"-confirm-license\",\n                \"-release\",\n</code></pre> \u200b\u5728\u200b <code>./build_tools/tools/linux/</code> \u200b\u4e0b\u200b\uff0c\u200b\u8fd0\u884c\u200b <code>./automate.py</code> \u200b\u811a\u672c\u200b\uff08\u200b\u4e0b\u6587\u200b\u5c06\u200b\u4e0d\u518d\u200b\u8d58\u8ff0\u200b automate.py \u200b\u811a\u672c\u200b\u7684\u200b\u8def\u5f84\u200b\uff09: <pre><code>./automate server\n</code></pre> \u200b\u5f53\u200b\u811a\u672c\u200b\u5728\u200b\u65ad\u70b9\u200b\u9000\u51fa\u200b\u540e\u200b\uff0c\u200b\u4fee\u6539\u200b <code>./build_tools/tools/linux/qt-everywhere-opensource-src-5.9.9/qtdeclarative/src/qml/jsruntime/qv4global_p.h</code>\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u5220\u9664\u200b\u65ad\u70b9\u200b\uff1a <pre><code>diff --git a/qv4global_p.h b/qv4global_p.h\n@@ -107,7 +107,8 @@ inline double trunc(double d) {return d &gt; 0 ? floor(d) : ceil(d); }\n#  if defined(Q_OS_LINUX) || defined(Q_OS_QNX)\n#    define V4_ENABLE_JIT\n#  endif\n-#elif defined(Q_PROCESSOR_MIPS_32) &amp;&amp; defined(Q_OS_LINUX)\n+//#elif defined(Q_PROCESSOR_MIPS_32) &amp;&amp; defined(Q_OS_LINUX)\n+#elif defined(Q_PROCESSOR_MIPS_32) &amp;&amp; 0\n#  define V4_ENABLE_JIT\n#endif\n</code></pre> \u200b\u4fee\u6539\u200b <code>./core/Common/3dParty/v8/v8.pri</code>\uff1a <pre><code>diff --git a/Common/3dParty/v8/v8.pri b/Common/3dParty/v8/v8.pri\n@@ -4,9 +4,9 @@ v8_version_89 {\nCONFIG += use_v8_monolith\n    DEFINES += V8_VERSION_89_PLUS\n-   core_win_32:CONFIG += build_platform_32\n-   core_linux_32:CONFIG += build_platform_32\n-   !build_platform_32:DEFINES += V8_COMPRESS_POINTERS\n+   core_win_64:CONFIG += build_platform_64\n+   core_linux_64:CONFIG += build_platform_64\n+   !build_platform_64:DEFINES += V8_COMPRESS_POINTERS\n\n    CORE_V8_PATH_OVERRIDE = $$PWD/../v8_89\n}\n</code></pre> \u200b\u4fee\u6539\u200b <code>./core/Common/base.pri</code>\uff1a <pre><code>diff --git a/Common/base.pri b/Common/base.pri\n@@ -110,6 +110,11 @@ linux-g++:contains(QMAKE_HOST.arch, aarch64): {\n    CONFIG += core_linux_64\n    CONFIG += core_linux_host_arm64\n}\n+linux-g++:contains(QMAKE_HOST.arch, mips64): {\n+   message(\"linux-64\")\n+   CONFIG += core_linux_64\n+   CONFIG += core_linux_host_mips64\n+}\n !core_linux64: {\n    message(\"linux-32\")\n    CONFIG += core_linux_32\n@@ -199,6 +204,8 @@ core_windows {\n}\n\ncore_linux {\n+   QMAKE_CFLAGS += -mxgot\n+   QMAKE_CXXFLAGS += -mxgot\n    equals(TEMPLATE, app) {\n        QMAKE_LFLAGS += \"-Wl,-rpath,\\'\\$$ORIGIN\\'\"\n        QMAKE_LFLAGS += \"-Wl,-rpath,\\'\\$$ORIGIN/system\\'\"\n</code></pre> \u200b\u5728\u200b\u6b64\u6b21\u200b\u5de5\u4f5c\u200b\u76ee\u5f55\u200b\u5916\u200b\u91cd\u65b0\u200b\u62c9\u53d6\u200b\u5b98\u65b9\u200b\u7684\u200b bulid_tools \u200b\u6e90\u7801\u200b\uff0c\u200b\u5728\u200b <code>build_tools/scripts/core_common/modules/v8_89.py</code> \u200b\u4e2d\u200b\u52a0\u5165\u200b\u65ad\u70b9\u200b\uff1a <pre><code>@@ -76,7 +76,7 @@ def make():\n       os.chdir(\"../\")\n     base.cmd(\"./depot_tools/gclient\", [\"sync\", \"-r\", \"remotes/branch-heads/8.9\"\n     base.cmd(\"gclient\", [\"sync\", \"--force\"], True)\n-\n+    sys.exit(0)\n   if (\"windows\" == base.host_platform()):\n     base.replaceInFile(\"v8/build/config/win/BUILD.gn\", \":static_crt\", \":dynamic\n</code></pre> \u200b\u8fd0\u884c\u200b <code>automate.py</code> \u200b\u811a\u672c\u200b\u81f3\u200b\u65ad\u70b9\u200b\u5904\u200b\uff0c\u200b\u4fee\u6539\u200b <code>./core/Common/3dParty/v8_89/depot_tools/ninja</code>\uff1a <pre><code>diff --git a/ninja b/ninja\n@@ -24,6 +24,8 @@ case \"$OS\" in\n    case \"$MACHINE\" in\n      x86_64)\n        exec \"${THIS_DIR}/ninja-linux64\" \"$@\";;\n+     mips64 | mips64el)\n+       exec \"/usr/bin/ninja\" \"$@\";;\n      *)\n        echo Unsupported architecture \\($MACHINE\\) -- unable to run ninja.\n        print_help\n</code></pre> \u200b\u4fee\u6539\u200b <code>./core/Common/3dParty/v8_89/v8/src/codegen/mips64/assembler-mips64.h</code>\uff1a <pre><code>diff --git a/assember-mips64.h b/assember-mips64.h\n@@ -65,11 +65,16 @@ class Operand {\n      : rm_(no_reg), rmode_(rmode) {\n    value_.immediate = immediate;\n  }\n+/*  V8_INLINE explicit Operand(int32_t immediate,\n+                            RelocInfo::Mode rmode = RelocInfo::NONE)\n+     : rm_(no_reg), rmode_(rmode) {\n+   value_.immediate = static_cast&lt;int64_t&gt;(immediate);\n+ }*/\n  V8_INLINE explicit Operand(const ExternalReference&amp; f)\n      : rm_(no_reg), rmode_(RelocInfo::EXTERNAL_REFERENCE) {\n    value_.immediate = static_cast&lt;int64_t&gt;(f.address());\n  }\n- V8_INLINE explicit Operand(const char* s);\n+ //V8_INLINE explicit Operand(const char* s);\n  explicit Operand(Handle&lt;HeapObject&gt; handle);\n  V8_INLINE explicit Operand(Smi value) : rm_(no_reg), rmode_(RelocInfo::NONE) {\n    value_.immediate = static_cast&lt;intptr_t&gt;(value.ptr());\n</code></pre> \u200b\u4fee\u6539\u200b <code>./core/Common/3dParty/v8_89/v8/src/objects/managed.h</code>\uff1a <pre><code>diff --git a/managed.h b/managed.h\n@@ -93,8 +93,8 @@ class Managed : public Foregin {\nstatic Handle&lt;Managed&lt;CppType&gt;&gt; FromSharedPtr(\n      Isolate* isolate, size_t estimated_size,\n      std::shared_ptr&lt;CppType&gt; shared_ptr) {\n-    reinterpret_cast&lt;v8::Isolate*&gt;(isolate)\n-       -&gt;AdjustAmountOfExternalAllocatedMemory(estimated_size);\n+    reinterpret_cast&lt;v8::Isolate*&gt;(isolate)\n+       -&gt;AdjustAmountOfExternalAllocatedMemory(static_cast&lt;int64_t&gt;(estimated_size));   \n    auto destructor = new ManagedPtrDestructor(\n        estimated_size, new std::shared_ptr&lt;CppType&gt;{std::move(shared_ptr)},\n        Destructor);\n</code></pre> \u200b\u4fee\u6539\u200b <code>./core/Common/3dParty/v8_89/v8/test/cctest/cctest-utils.h</code>\uff1a <pre><code>diff --git a/cctest-utils.h b/cctest-utils.h\n@@ -29,7 +29,7 @@ namespace internal {\n  __asm__ __volatile__(\"sw $sp, %0\" : \"=g\"(sp_addr))\n#elif V8_HOST_ARCH_MIPS64\n#define GET_STACK_POINTER_TO(sp_addr) \\\n- __asm__ __volatile__(\"sd $sp, %0\" : \"=g\"(sp_addr))\n+ __asm__ __volatile__(\"sd $sp, %0\" : \"=m\"(sp_addr))\n#elif defined(__s390x__) || defined(_ARCH_S390X)\n#define GET_STACK_POINTER_TO(sp_addr) \\\n  __asm__ __volatile__(\"stg %%r15, %0\" : \"=m\"(sp_addr))\n</code></pre> \u200b\u4fee\u6539\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u5220\u9664\u200b\u5b98\u65b9\u200b <code>build_tools/scripts/core_common/modules/v8_89.py</code> \u200b\u4e2d\u200b\u7684\u200b\u65ad\u70b9\u200b\uff0c\u200b\u628a\u200b\u5b98\u65b9\u200b <code>core/Common/3dParty/v8_89</code> \u200b\u76ee\u5f55\u200b\u79fb\u52a8\u200b\u5230\u200b\u672c\u6b21\u200b\u79fb\u690d\u200b\u7684\u200b\u76ee\u5f55\u200b\u4e0b\u200b.\u200b\u7531\u4e8e\u200b onlyoffice documentserver \u200b\u5b98\u65b9\u200b\u811a\u672c\u200b\u4e0b\u8f7d\u200b\u7684\u200b depot_tools \u200b\u4e2d\u200b\u6ca1\u6709\u200b mips \u200b\u67b6\u6784\u200b\u7684\u200b gn \u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u8bfb\u8005\u200b\u4e0b\u8f7d\u200b gn \u200b\u6e90\u7801\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200b\uff08gn \u200b\u6e90\u7801\u200b\u652f\u6301\u200b mips \u200b\u67b6\u6784\u200b\uff0c\u200b\u65e0\u9700\u200b\u8fdb\u884c\u200b\u9002\u914d\u200b\uff09\u3002\u200b\u5c06\u200b\u7f16\u8bd1\u200b\u597d\u200b\u7684\u200b <code>gn</code> \u200b\u653e\u5728\u200b <code>./core/Common/3dParty/v8_89/v8/buildtools/linux64/</code> \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u3002 \u200b\u8fd0\u884c\u200b automate.py\uff0c\u200b\u6b63\u5e38\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u7531\u4e8e\u200b pkg \u200b\u5b98\u65b9\u200b\u63d0\u4f9b\u200b\u7684\u200b nodejs \u200b\u4e0d\u200b\u652f\u6301\u200b mips \u200b\u67b6\u6784\u200b\uff0c\u200b\u811a\u672c\u200b\u4f1a\u200b\u5728\u200b\u6267\u884c\u200b\u5230\u200b pkg \u200b\u6253\u5305\u200b nodejs \u200b\u9879\u76ee\u200b\u65f6\u62a5\u200b\u9519\u200b\uff1a <pre><code>&gt; pkg@5.8.0\n&gt; Fetching base Node.js binaries to PKG_CACHE_PATH\n  fetched-v14.20.0-linux-mips64el      [                    ] 0%\n&gt; Error! 404: Not Found\n&gt; Not found in remote cache:\n  {\"tag\":\"v3.4\",\"name\":\"node-v14.20.0-linux-mips64el\"}\n&gt; Building base binary from source:\n  built-v14.20.0-linux-mips64el\n&gt; Error! Unknown arch 'mips64el'. Specify x64, x86, armv7, arm64, ppc64, s390x\n</code></pre> \u200b\u6b64\u65f6\u200b\u9700\u8981\u200b\u8bfb\u8005\u200b\u5148\u200b\u4e0b\u8f7d\u200b node \u200b\u5b98\u65b9\u200b\u7684\u200b nodejs 14.20.0\u200b\u7248\u672c\u200b\u6e90\u7801\u200b\uff0c\u200b\u5e76\u200b\u4e0b\u8f7d\u200b node.v14.20.0.cpp.patch, \u200b\u5c06\u200b\u8be5\u200b\u8865\u4e01\u200b\u5408\u5165\u200b\u5230\u200b node14.20.0 \u200b\u7684\u200b\u5b98\u65b9\u200b\u4ee3\u7801\u200b\u4e2d\u200b\uff0c\u200b\u6700\u540e\u200b\u6267\u884c\u200b <code>make &amp;&amp; make install</code> \u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\u548c\u200b\u5b89\u88c5\u200b\u3002\u200b\u5c06\u200b\u7f16\u8bd1\u200b\u7684\u200b node \u200b\u91cd\u547d\u540d\u200b\u4e3a\u200b <code>fetched-v14.20.0-linux-mips64el</code>\uff0c\u200b\u62f7\u8d1d\u5230\u200b <code>~/.pkg-cache/v3.4/</code> \u200b\u8def\u5f84\u200b\u4e0b\u200b\u3002\u200b\u6700\u540e\u200b\u5728\u200b <code>/usr/local/lib/node_modules/pkg/node_modules/pkg-fetch/lib-es5/index.js</code> \u200b\u4e2d\u200b\u53d6\u6d88\u200b pkg \u200b\u7684\u200b\u6821\u9a8c\u200b\uff1a</p> <p></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#deb","title":"deb \u200b\u5305\u200b\u5236\u4f5c","text":"<p>\u200b\u4e0b\u8f7d\u200b onlyoffice document-server-package \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff1a <pre><code>git clone -b v7.1.1.76 https://github.com/ONLYOFFICE/document-server-package.git\n</code></pre> \u200b\u4fee\u6539\u200b <code>./document-server-package/Makefile</code>: <pre><code>diff --git a/Makefile b/Makefile\n@@ -29,6 +29,11 @@ ifeq ($(UNAME_M),x86_64)\n        DEB_ARCH := amd64\n        TAR_ARCH := x86_64\n endif\n+ifeq ($(UNAME_M),mips64)\n+       RPM_ARCH := mips64el\n+       DEB_ARCH := mips64el\n+       TAR_ARCH := mips64el\n+endif\n ifneq ($(filter aarch%,$(UNAME_M)),)\n        RPM_ARCH := aarch64\n        DEB_ARCH := arm64\n@@ -158,6 +163,9 @@ else\n        ifeq ($(UNAME_M),x86_64)\n                ARCHITECTURE := 64\n        endif\n+       ifeq ($(UNAME_M),mips64)\n+               ARCHITECTURE := 64\n+       endif\n        ifneq ($(filter %86,$(UNAME_M)),)\n                ARCHITECTURE := 32\n        endif\n</code></pre> \u200b\u5728\u200b <code>./document-server-package/</code> \u200b\u4e0b\u200b\u6267\u884c\u200b <code>make deb</code> \u200b\u547d\u4ee4\u200b\uff1a <pre><code>cd ./document-server-package &amp;&amp; make deb\n</code></pre> \u200b\u751f\u6210\u200b\u7684\u200b deb \u200b\u5305\u200b\u5728\u200b <code>./document-server-package/deb/</code> \u200b\u8def\u5f84\u200b\u4e0b\u200b\uff1a</p> <p></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#docker","title":"Docker \u200b\u955c\u50cf\u200b\u5236\u4f5c","text":"<p>\u200b\u4e0b\u8f7d\u200b onlyoffice docker-documentserver \u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\uff0c\u200b\u4f7f\u7528\u200b git \u200b\u5207\u6362\u200b\u7248\u672c\u200b\u81f3\u200b <code>v7.1.1.76</code>\uff1a <pre><code>git clone -b v7.1.1.76 https://github.com/ONLYOFFICE/Docker-DocumentServer.git\n</code></pre> \u200b\u65b0\u5efa\u200b\u76ee\u5f55\u200b <code>deb</code>\uff0c\u200b\u5728\u200b <code>deb</code> \u200b\u76ee\u5f55\u200b\u4e0b\u200b\u4e0b\u8f7d\u200b <code>ttf-mscorefonts-installer_3.8_all.deb</code> \u200b\u5e76\u200b\u5c06\u200b <code>onlyoffice-documentserver_0.0.0-0_mips64el.deb</code> \u200b\u62f7\u8d1d\u5230\u200b\u8be5\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1a <pre><code>cd ./Docker-DocumentServer &amp;&amp; \\\nmkdir deb &amp;&amp; \\\ncd deb &amp;&amp; \\\nwget http://httpredir.debian.org/debian/pool/contrib/m/msttcorefonts/ttf-mscorefonts-installer_3.8_all.deb &amp;&amp;\\\ncp ./document-server-package/deb/onlyoffice-documentserver_0.0.0-0_mips64el.deb .\n</code></pre> Docker-DocumentServer \u200b\u5b8c\u6574\u200b\u7684\u200b\u76ee\u5f55\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u4fee\u6539\u200b Dockerfile\uff0c\u200b\u5236\u4f5c\u200b <code>cr.loongnix.cn/mips/onlyoffice-documentserver:7.1.1.76</code>\uff1a <pre><code>cd ./Docker-DocumentServer &amp;&amp; docker build -t cr.loongnix.cn/mips/onlyoffice-documentserver:7.1.1.76 .\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_13","title":"\u529f\u80fd\u6d4b\u8bd5","text":"<p>\u200b\u6d4b\u8bd5\u200b\u65f6\u200b\u4f7f\u7528\u200b\u5b98\u65b9\u200b\u63d0\u4f9b\u200b\u7684\u200b <code>example</code>\uff0c\u200b\u672c\u6587\u200b\u4ec5\u200b\u9488\u5bf9\u200b\u5173\u952e\u200b\u529f\u80fd\u200b\u8fdb\u884c\u200b\u6d4b\u8bd5\u200b\uff1a\u200b\u5bb9\u5668\u200b\u80fd\u5426\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\u3001\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\u7d20\u6750\u200b\u4e22\u5931\u200b\uff0c\u200b\u76f8\u5173\u200b\u6587\u4ef6\u200b\u7684\u200b\u65b0\u5efa\u200b\u3001\u200b\u4fee\u6539\u200b\u3001\u200b\u4fdd\u5b58\u200b\u4ee5\u53ca\u200b\u6587\u4ef6\u200b\u7684\u200b\u4e0a\u4f20\u200b\u3001\u200b\u4e0b\u8f7d\u200b\u529f\u80fd\u200b\u662f\u5426\u200b\u6b63\u5e38\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_14","title":"\u542f\u52a8\u200b\u955c\u50cf","text":"<p>\u200b\u53c2\u7167\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b\uff0c\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a <pre><code>docker run -i -t -d -p 8086:80 cr.loongnix.cn/mips/onlyoffice-documentserver:7.1.1.76\n</code></pre> \u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8f93\u5165\u200b\u672c\u200b\u673a\u200b <code>ip:\u200b\u6620\u5c04\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b</code> \u200b\u8fdb\u5165\u200b <code>welcome</code> \u200b\u9875\u9762\u200b\uff1a</p> <p></p> <p>\u200b\u5728\u200b\u7ec8\u7aef\u200b\u8f93\u5165\u200b\uff1a <pre><code>sudo docker exec f46a8772db8c sudo supervisorctl start ds:example\nsudo docker exec f46a8772db8c sudo sed 's,autostart=false,autostart=true,' -i /etc/supervisor/conf.d/ds-example.conf\n</code></pre> \u200b\u70b9\u51fb\u200b <code>GO TO TEST EXAMPLE</code> \u200b\u6309\u94ae\u200b\u7ec4\u4ef6\u200b\uff0c\u200b\u8fdb\u5165\u200b\u5b98\u65b9\u200b\u63d0\u4f9b\u200b\u7684\u200b <code>example</code>\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_15","title":"\u7d20\u6750\u200b\u68c0\u67e5","text":"<p>\u200b\u5bf9\u6bd4\u200b\u540c\u200b\u7248\u672c\u200b\u5b98\u65b9\u200b\u63d0\u4f9b\u200b\u7684\u200b x86 \u200b\u67b6\u6784\u200b onlyoffice documentserver \u200b\u955c\u50cf\u200b\u4e2d\u200b\u7684\u200b\u7d20\u6750\u200b\uff0c\u200b\u672c\u6587\u200b\u6784\u5efa\u200b\u7684\u200b\u955c\u50cf\u200b\u5305\u542b\u200b\u7684\u200b\u7d20\u6750\u200b\u4e0e\u5176\u200b\u4e00\u81f4\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_16","title":"\u65b0\u5efa\u200b\u6587\u4ef6","text":"<p>\u200b\u65b0\u5efa\u200b <code>new.docx</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u518d\u6b21\u200b\u6253\u5f00\u200b\uff0c\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u6b63\u5e38\u200b\u663e\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u65b0\u5efa\u200b <code>new.xlsx</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u518d\u6b21\u200b\u6253\u5f00\u200b\uff0c\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u6b63\u5e38\u200b\u663e\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u65b0\u5efa\u200b <code>new.pptx</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u518d\u6b21\u200b\u6253\u5f00\u200b\uff0c\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u6b63\u5e38\u200b\u663e\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u65b0\u5efa\u200b <code>new.docxf</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u518d\u6b21\u200b\u6253\u5f00\u200b\uff0c\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u6b63\u5e38\u200b\u663e\u793a\u200b\uff1a</p> <p></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_17","title":"\u4f20\u8f93\u200b\u6587\u4ef6","text":"<p>\u200b\u4e0a\u4f20\u200b <code>test.docx</code> \u200b\u6587\u4ef6\u200b\uff1a</p> <p></p> <p>\u200b\u4e0b\u8f7d\u200b 'new.docx' \u200b\u6587\u4ef6\u200b\uff1a </p> <p></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/onlyoffice/#_18","title":"\u7279\u6b8a\u200b\u95ee\u9898\u200b\u5f52\u7eb3","text":"<p>\u200b\u5982\u679c\u200b\u8bfb\u8005\u200b\u6309\u7167\u200b\u672c\u6587\u200b\u7684\u200b\u6b65\u9aa4\u200b\u548c\u200b\u65b9\u6cd5\u200b\u8fdb\u884c\u200b\u9002\u914d\u200b\uff0c\u200b\u5bb9\u5668\u200b\u5e94\u8be5\u200b\u80fd\u591f\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\u3002\u200b\u5982\u679c\u200b\u8bfb\u8005\u200b\u5728\u200b\u9002\u914d\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u51fa\u73b0\u200b\u4e86\u200b\u5176\u4ed6\u200b\u95ee\u9898\u200b\uff0c\u200b\u5e0c\u671b\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u80fd\u591f\u200b\u5e2e\u52a9\u200b\u5230\u200b\u8bfb\u8005\u200b\uff1a</p> <p>\u200b\u95ee\u9898\u200b1\uff1a\u200b\u5bb9\u5668\u200b\u56fe\u7247\u7d20\u6750\u200b\u7f3a\u5931\u200b \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u91cd\u65b0\u200b\u8fd0\u884c\u200b <code>build_js.make()</code> \u200b\u4ee5\u53ca\u200b\u4e4b\u540e\u200b\u7684\u200b\u811a\u672c\u200b\u3002</p> <p>\u200b\u95ee\u9898\u200b2\uff1a\u200b\u5bb9\u5668\u200b\u4e2d\u200b <code>themes.js</code> \u200b\u7f3a\u5931\u200b \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u4e0e\u200b\u95ee\u9898\u200b1\u200b\u4e00\u81f4\u200b\u3002</p> <p>\u200b\u95ee\u9898\u200b3\uff1a\u200b\u6587\u6863\u200b\u65e0\u6cd5\u200b\u4fdd\u5b58\u200b \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u91cd\u65b0\u200b\u9a8c\u8bc1\u200b onlyoffice documentserver \u200b\u5404\u4e2a\u200b\u7ec4\u4ef6\u200b\u7684\u200b\u7248\u672c\u200b\uff0c\u200b\u786e\u4fdd\u200b\u7ec4\u4ef6\u200b\u7684\u200b\u7248\u672c\u200b\u4e00\u81f4\u200b\u4e14\u200b build_tools \u200b\u7684\u200b\u7248\u672c\u200b\u652f\u6301\u200b onlyoffice documentserver \u200b\u6e90\u7801\u200b\uff08\u200b\u53ef\u200b\u901a\u8fc7\u200b\u67e5\u770b\u200b build_tools \u200b\u4e0b\u200b\u7684\u200b version \u200b\u6587\u4ef6\u200b\uff09\u3002</p> <p>\u200b\u95ee\u9898\u200b4\uff1a\u200b\u5728\u200b <code>build.make()</code> \u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u63d0\u793a\u200b\u7f3a\u5c11\u200b\u5e93\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5982\u200b\uff1a<code>/usr/bin/ld: cannot find -lVbaFormatLib</code> \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u4e0e\u200b\u95ee\u9898\u200b3\u200b\u4e00\u81f4\u200b\u3002</p> <p>\u200b\u95ee\u9898\u200b5\uff1apkg \u200b\u6253\u5305\u200b node \u200b\u6821\u9a8c\u200b\u5931\u8d25\u200b \u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a\u200b\u5728\u200b <code>/usr/local/lib/node_modules/pkg/node_modules/pkg-fetch/lib-es5/index.js</code> \u200b\u4e2d\u200b\u53d6\u6d88\u200b pkg \u200b\u7684\u200b\u6821\u9a8c\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/openresty/","title":"openresty","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/openresty/#dockerfile","title":"\u5b98\u65b9\u200b dockerfile","text":"<p>openresty \u200b\u7684\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b debian\uff0ccentos\uff0calpine \u200b\u7b49\u200b\uff0c\u200b\u4f46\u200b\u53ea\u6709\u200b alpine \u200b\u662f\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\uff0c\u200b\u5728\u200b\u6b64\u200b\u6211\u4eec\u200b\u9009\u62e9\u200b alpine/Dockerfile\u3002 <pre><code>https://github.com/openresty/docker-openresty\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/openresty/#openresty-pre-release","title":"openresty pre-release","text":"<p>\u200b\u4ece\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b\u65f6\u200b\uff0cDockerfile \u200b\u4f1a\u200b\u4e0b\u8f7d\u200b\u4e00\u4e2a\u200b openresty \u200b\u7684\u200b\u9884\u200b\u6784\u5efa\u200b\u7684\u200b\u6e90\u7801\u200b\u5305\u200b\uff0c\u200b\u8be5\u200b\u6e90\u7801\u200b\u5305\u7531\u200b <code>openresty/util/mirror-tarballs</code> \u200b\u751f\u6210\u200b\uff0c\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u53c2\u8003\u200b\u3002 <pre><code>https://github.com/Loongson-Cloud-Community/openresty/commit/d5475b0b7278bba597ef6bd26a1b87846014cdf4\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/openresty/#_1","title":"\u955c\u50cf\u200b\u6784\u5efa","text":"<p>openresty \u200b\u79fb\u690d\u200b\u53c2\u8003\u200b\u5982\u4e0b\u200b\u94fe\u63a5\u200b\uff0c\u200b\u4e3b\u8981\u200b\u505a\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u4fee\u6539\u200b <pre><code>https://github.com/Loongson-Cloud-Community/dockerfiles/commit/4554d8e134a8d0c8188e2440e0ab372535989c9f\n</code></pre> 1. \u200b\u4fee\u6539\u200b openresty pre-release \u200b\u4e0b\u8f7d\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u4ee5\u200b\u4f7f\u200b\u6e90\u7801\u200b\u652f\u6301\u200b\u9f99\u82af\u200b\u67b6\u6784\u200b 2. \u200b\u7981\u7528\u200b pcre jit \u200b\u7279\u6027\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/","title":"powerdns","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_1","title":"\u73af\u5883\u200b\u51c6\u5907","text":"<ul> <li>loongson loongarch64\u200b\u67b6\u6784\u200b\u7cfb\u7edf\u200b</li> <li>\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b\uff08\u200b\u4ee5\u4e0b\u200b\u8f6f\u4ef6\u200b\u662f\u200b\u5728\u200bdebian\u200b\u7cfb\u7edf\u200b\u7684\u200b\u8f6f\u4ef6\u200b\uff0c\u200b\u82e5\u200b\u5728\u200b\u5176\u4ed6\u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u66ff\u6362\u200b\u4e3a\u200b\u76f8\u5e94\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u5373\u53ef\u200b\uff09 g++  libboost-all-dev libtool make pkg-config  libssl-dev autoconf automake bison flex lua5.3 liblua5.3-dev libmariadb-dev-compat libmariadb-dev</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_2","title":"\u9879\u76ee\u5206\u6790","text":"<p>powerdns\u200b\u662f\u200b\u4e00\u4e2a\u200b\u57df\u540d\u89e3\u6790\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5728\u200bpowerdns\u200b\u6e90\u7801\u200b\u4e2d\u200b\u4e3b\u8981\u200b\u5206\u4e3a\u200b\u4e09\u79cd\u200b\uff1aauth,recursor\u200b\u548c\u200bdnsdist</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_3","title":"\u7248\u672c\u4fe1\u606f","text":"<p>-auth-4.1.11 -\u200b\u5176\u4ed6\u200b\u7248\u672c\u200b\u79fb\u690d\u200b\u53c2\u8003\u200b\u8fd9\u91cc\u200b\u7684\u200b\u4fee\u6539\u200b\u5373\u53ef\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u5171\u200b\u4fee\u6539\u200b\u4e24\u4e2a\u200b\u6587\u4ef6\u200b\uff1am4/pdns_check_os.m4\uff0cpdns/dns.hh</p> <p>m4/pdns_check_os.m4\u200b\u4fee\u6539\u200b\uff1a <pre><code>diff --git a/m4/pdns_check_os.m4 b/m4/pdns_check_os.m4\nindex 860f9aa0e..d2ec0b092 100644\n--- a/m4/pdns_check_os.m4\n+++ b/m4/pdns_check_os.m4\n@@ -36,7 +36,7 @@ AC_DEFUN([PDNS_CHECK_OS],[\n   AM_CONDITIONAL([HAVE_SOLARIS], [test \"x$have_solaris\" = \"xyes\"])\n\n   case \"$host\" in\n-  mips* | powerpc-* )\n+  mips* | powerpc-* | loongarch64*)\n     AC_MSG_CHECKING([whether the linker accepts -latomic])\n     LDFLAGS=\"-latomic $LDFLAGS\"\n     AC_LINK_IFELSE([m4_default([],[AC_LANG_PROGRAM()])],\n</code></pre></p> <p>pdns/dns.hh \u200b\u4fee\u6539\u200b\uff1a <pre><code>diff --git a/pdns/dns.hh b/pdns/dns.hh\nindex 88a658c5a..11abc3e64 100644\n--- a/pdns/dns.hh\n+++ b/pdns/dns.hh\n@@ -142,7 +142,7 @@ static_assert(sizeof(EDNS0Record) == 4, \"EDNS0Record size must be 4\");\n # define PDP_ENDIAN     3412 /* LSB first in word, MSW first in long (pdp) */\n\n #if defined(vax) || defined(ns32000) || defined(sun386) || defined(i386) || \\\n-        defined(__i386) || defined(__ia64) || defined(__amd64) || \\\n+  defined(__i386) || defined(__ia64) || defined(__amd64) || defined(__loongarch64) || \\\n         defined(MIPSEL) || defined(_MIPSEL) || defined(BIT_ZERO_ON_RIGHT) || \\\n         defined(__alpha__) || defined(__alpha) || \\\n         (defined(__Lynx__) &amp;&amp; defined(__x86__))\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_5","title":"\u7f16\u8bd1","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#pdns-auth","title":"pdns-auth\u200b\u7f16\u8bd1","text":"<p>\uff081\uff09\u200b\u751f\u6210\u200bconfigure\u200b\u6587\u4ef6\u200b\uff1a <pre><code>./bootstrap \n</code></pre></p> <p>\uff082\uff09\u200b\u751f\u6210\u200bmakefile\u200b\u6587\u4ef6\u200b\uff1a <pre><code>./configure --with-modules=\"bind gmysql\" --sysconfdir=/etc/powerdns --with-unixodbc-lib=/usr/lib/loongarch64-linux-gnu\n</code></pre></p> <p>\uff083\uff09\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b <pre><code>make -C ext &amp;&amp; make -C modules &amp;&amp; make -C pdns &amp;&amp;\nmake -C  pdns install &amp;&amp; make -C modules install\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#pdns-recurs","title":"pdns-recurs\u200b\u7f16\u8bd1","text":"<p>\uff081\uff09\u200b\u8fdb\u5165\u200b pdns/pdns/recursordist \uff082\uff09\u200b\u751f\u6210\u200bconfigure\u200b\u6587\u4ef6\u200b\uff1a <pre><code>autoreconf -vi\n</code></pre> \uff083\uff09\u200b\u751f\u6210\u200bmakefile\u200b\u6587\u4ef6\u200b\uff1a <pre><code>./configure\n</code></pre> \uff084\uff09\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b\uff1a <pre><code>make\n</code></pre>   \u200b\u5907\u6ce8\u200b\uff1a\u200b\u5177\u4f53\u200b\u53ef\u200b\u67e5\u770b\u200b pdns/pdns/recursordist/README.md \u200b\u6587\u4ef6\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#pdns-dnsdist","title":"pdns-dnsdist\u200b\u7f16\u8bd1","text":"<p>\uff081\uff09\u200b\u8fdb\u5165\u200bpdns/pdns/dnsdistdist</p> <p>\u200b\u6b65\u9aa4\u200b\uff082\uff09\uff5e\uff084\uff09\u200b\u540c\u200bpdns-recurs\u200b\u7f16\u8bd1\u200b\u4e2d\u200b\u4e00\u81f4\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_6","title":"\u955c\u50cf\u200b\u5236\u4f5c","text":"<p>\u200b\u7531\u4e8e\u200bpdns-auth\u200b\u955c\u50cf\u200b\u8f83\u4e3a\u200b\u5e38\u7528\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fd9\u91cc\u200b\u53ea\u200b\u4ecb\u7ecd\u200b\u8be5\u200b\u955c\u50cf\u200b\u7684\u200b\u5236\u4f5c\u65b9\u6cd5\u200b\uff0cpdns-recur\u200b\u548c\u200bpdns-dnsdist\u200b\u7684\u200b\u5236\u4f5c\u200b\u53c2\u8003\u200bpdns-auth\u200b\u5373\u53ef\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#dockerfile-auth","title":"Dockerfile-auth\u200b\u5236\u4f5c","text":"<p>\u200b\u7531\u4e8e\u200b\u8be5\u200b\u7248\u672c\u200b\u6e90\u7801\u200b\u4e2d\u200b\u6ca1\u6709\u200bdockerfile\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u7f16\u5199\u200bdockerfile\uff0c\u200b\u4e3b\u8981\u200b\u53c2\u8003\u200bauth-4.5.0\u200b\u548c\u200bauth-4.3.0\u200b\u7248\u672c\u200b\u7684\u200bdockerfile\u200b\u7f16\u5199\u200b\uff0c \u200b\u5177\u4f53\u200bdockerfile\u200b\u89c1\u200b:https://github.com/Loongson-Cloud-Community/pdns/blob/auth-4.1.11/Dockerfile-auth </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pdns/#_7","title":"\u955c\u50cf\u200b\u7f16\u8bd1","text":"<p>docker build -t pdns-auth:4.1.11 -f Dockerfile-auth .</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/plugins/","title":"plugins","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/plugins/#_1","title":"\u6784\u5efa\u200b\u6307\u4ee4","text":"<p><pre><code> git clone https://github.com/containernetworking/plugins.git\ncd plugins\n./build_linux.sh\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\u4f1a\u200b\u751f\u6210\u200bbin\u200b\u76ee\u5f55\u200b\u5b58\u50a8\u200b\u4e8c\u8fdb\u5236\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/portainer/","title":"portainer","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/portainer/#1","title":"1. \u200b\u9879\u76ee\u200b\u4ecb\u7ecd","text":"<p>portainer\u200b\u662f\u200b\u4e00\u6b3e\u200b\u5bf9\u5355\u200b\u8282\u70b9\u200b  \u200b\u591a\u200b\u8282\u70b9\u200b\u96c6\u7fa4\u200b\u4e0b\u200b\u7684\u200b\u5bb9\u5668\u200b\u3001\u200b\u955c\u50cf\u200b\u8d44\u6e90\u200b\u8fdb\u884c\u200b\u7ba1\u7406\u200b\u7684\u200b\u53ef\u89c6\u5316\u200bweb\u200b\u5de5\u5177\u200b \u200b\u6e90\u7801\u200b\uff1ahttps://github.com/portainer/portainer 1.x\u200b\u7248\u672c\u200b\u955c\u50cf\u200b\u540d\u4e3a\u200bportainer 2.x\u200b\u7248\u672c\u200b\u4e3a\u200bportainer-ce</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/portainer/#2","title":"2. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>2.11.1</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/portainer/#3","title":"3. \u200b\u6784\u5efa\u200b\u6b65\u9aa4","text":"<p>\uff081\uff09loong64\u200b\u67b6\u6784\u200b\u6784\u5efa\u200b \u200b\u5b98\u65b9\u200b\u672a\u200b\u7ed9\u51fa\u200b\u6784\u5efa\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u67e5\u770b\u200b\u9879\u76ee\u200b\u6587\u4ef6\u200b\uff0c\u200b\u53ef\u77e5\u200b\u901a\u8fc7\u200bbuild/binary_portainer.sh\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\u4e8c\u8fdb\u5236\u200b\uff1a</p> <p>\u200b\u9700\u8981\u200b\u5148\u200b\u5728\u200bapi\u200b\u6587\u4ef6\u5939\u200b\u4e0b\u200b\u83b7\u53d6\u200bvendor<code>go mod vendor</code> \u200b\u53ef\u80fd\u200b\u51fa\u73b0\u200b\u7531\u4e8e\u200bbbolt\u200b\u9879\u76ee\u200b\u672a\u200b\u9002\u914d\u200b\u5bfc\u81f4\u200b\u7684\u200b\u62a5\u9519\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5c06\u200bbbolt\u200b\u7684\u200b\u5f15\u7528\u200b\u6539\u4e3a\u200bbolt\uff0c\u200b\u66f4\u6539\u200b\u5177\u4f53\u200b\u8be6\u60c5\u200b\u89c1\u200bhttps://github.com/Loongson-Cloud-Community/docker-library/portainer/portainer/2.11.1/\u200b\u7684\u200bpatch\u200b\u4fe1\u606f\u200b <pre><code>bash build/binary_portainer.sh linux loong64\n</code></pre> \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u5b58\u50a8\u200b\u5728\u200bdist\u200b\u8def\u5f84\u200b\u4e0b\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/portainer/#4","title":"4. \u200b\u5907\u6ce8","text":"<ul> <li> <p>\u200b\u6784\u5efa\u200b\u5bb9\u5668\u200b\u53ef\u80fd\u200b\u62a5\u9519\u200b\u60c5\u51b5\u200b\uff1a <pre><code>not found docker-compose binary\n</code></pre> \u200b\u9700\u8981\u200b\u5c06\u200bdocker-compose docker helm kubectl kcompose\u200b\u7b49\u200b\u4e8c\u8fdb\u5236\u200b\u62c9\u53d6\u200b\u5230\u200bdist\u200b\u6587\u4ef6\u5939\u200b\u4e0b\u200b\u518d\u200b\u6784\u5efa\u200b\u955c\u50cf\u200b</p> </li> <li> <p>\u200b\u60c5\u51b5\u200b\u4e8c\u200b\uff1a \u200b\u8fd0\u884c\u200b\u5bb9\u5668\u200b\u8bbf\u95ee\u200b\u9875\u9762\u200b404not found \u200b\u56e0\u4e3a\u200b\u955c\u50cf\u200b\u5185\u200b\u6ca1\u6709\u200b\u524d\u7aef\u200b\u8d44\u6e90\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u5b98\u65b9\u200b\u955c\u50cf\u200b\u83b7\u53d6\u200b \u200b\u83b7\u53d6\u200b\u65b9\u6cd5\u200b\uff1a <pre><code>docker pull --platform portainer/portainer-ce:2.11.1\ndocker run -d --name portainer -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\ndocker export portainer &gt; portainer.tar.gz \nmkdir tmp &amp;&amp; cd tmp &amp;&amp; tar xf ../portainer.tar.gz\n</code></pre> \u200b\u89e3\u538b\u200btar\u200b\u5305\u200b\u5f97\u5230\u200b\u7684\u200bpublic\u200b\u548c\u200bstorybook\u200b\u5373\u200b\u4e3a\u200b\u524d\u7aef\u200b\u8d44\u6e90\u200b\uff0cCOPY\u200b\u5230\u200b\u955c\u50cf\u200b\u5185\u200b\u5373\u53ef\u200b</p> </li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/","title":"protobuf","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<pre><code>2.5.0\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>[root@5cef9fb1156f protobuf-2.5.0]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n[root@5cef9fb1156f protobuf-2.5.0]# uname -a\nLinux 5cef9fb1156f 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/protobuf/tree/loong64-v2.5.0   \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/#4","title":"4. \u200b\u6784\u5efa","text":"<p>\u200b\u7f16\u8bd1\u200b\u6709\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\u548c\u200b\u52a8\u6001\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u6e90\u7801\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u7f16\u8bd1\u200b\u65b9\u5f0f\u200b\u52a8\u6001\u200b\u7f16\u8bd1\u200b <pre><code>./autogen.sh  \n./configure \uff08\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\uff1a./configure --enable-shared=no\uff09\nmake \uff08\u200b\u5168\u90e8\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b make LDFLAGS=-all-static\uff09\n</code></pre> <pre><code>make check \n</code></pre> \u200b\u82e5\u200bmake check\u200b\u5931\u8d25\u200b\uff0c\u200b\u4ecd\u7136\u200b\u53ef\u4ee5\u200b\u5b89\u88c5\u200b\uff0c\u200b\u4f46\u662f\u200b\u5e93\u200b\u7684\u200b\u67d0\u4e9b\u200b\u529f\u80fd\u200b\u53ef\u80fd\u200b\u65e0\u6cd5\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b\u3002 \u200b\u5b89\u88c5\u200b\uff1a <pre><code>sudo make install\nsudo ldconfig //\u200b\u5237\u65b0\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u7f13\u5b58\u200b\n</code></pre> \u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u8be5\u200b\u8f6f\u4ef6\u5305\u200b\u5c06\u200b\u5b89\u88c5\u200b\u5230\u200b/usr/local\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u5728\u200b\u4e00\u4e9b\u200b\u5e73\u53f0\u200b\u4e0a\u200b\uff0c/usr/local/lib\u200b\u90fd\u200b\u4e0d\u662f\u200bLD_LIBRARY_PATH\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002\u200b\u6b64\u65f6\u200b\u53ef\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u89e3\u51b3\u200b\uff1a <pre><code>a.export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH\nb../configure --prefix=/usr  //\u200b\u4f7f\u7528\u200b\u8be5\u200b\u547d\u4ee4\u200b\u5c06\u200bprotobuf\u200b\u5b89\u88c5\u200b\u5230\u200b/usr\u200b\u8def\u5f84\u200b\u4e0b\u200b\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a\u200b\u66f4\u200b\u8be6\u7ec6\u200b\u7684\u200b\u5185\u5bb9\u200b\u53ef\u200b\u53c2\u8003\u200b\u5b98\u65b9\u200b\u6587\u6863\u200b\uff1ahttps://github.com/protocolbuffers/protobuf/blob/master/src/README.md\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf/#5","title":"5. \u200b\u5e38\u89c1\u95ee\u9898","text":"<p>protoc\u200b\u6267\u884c\u200b\u62a5\u9519\u200b\uff1a <pre><code>./protoc: error while loading shared libraries: libprotobuf.so.18:\ncannot open shared object file: No such file or directory\n</code></pre> \u200b\u8fd9\u662f\u200b\u7531\u4e8e\u200b\u4f7f\u7528\u200b\u5b98\u65b9\u200b\u6e90\u7801\u200b\u9ed8\u8ba4\u200b\u751f\u6210\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u662f\u200b\u52a8\u6001\u200b\u7684\u200b\u3002 \u200b\u89e3\u51b3\u200b\uff1a\u200b\u4f7f\u7528\u200b\u65f6\u200b\u9700\u8981\u200b\u5c06\u200bsrc/.libs\u200b\u4e2d\u200b\u7684\u200blib\u200b\u5f00\u5934\u200b\u7684\u200b\u5e93\u200b\u6587\u4ef6\u200b\u590d\u5236\u5230\u200b\u672c\u5730\u200b\u7684\u200b/lib\u200b\u76ee\u5f55\u200b\u4e0b\u200b,\u200b\u6b64\u65f6\u200bprotoc\u200b\u4e8c\u8fdb\u5236\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u8fd0\u884c\u200b\u3002 \u200b\u6216\u8005\u200b\u8bbe\u7f6e\u200bexport LD_LIBRARY_PATH=xxx/protobuf/src/.libs:$LD_LIBRARY_PATH</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protoc-java/","title":"protoc-java","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protoc-java/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>3.5.1.1</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protoc-java/#2","title":"2. \u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u9002\u914d\u200b\u6e90\u7801\u200b\u4e0d\u200b\u591a\u200b\uff0c\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/protoc-jar/tree/loongarch64-3.5.1.1 \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protoc-java/#3","title":"3. \u200b\u6784\u5efa","text":"<p><pre><code>mvn clean install -DskipTests\n</code></pre> \u200b\u6784\u5efa\u200b\u5b8c\u6210\u200b\u540e\u4f1a\u200b\u5728\u200btarget\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u76f8\u5e94\u200b\u7684\u200bjar\u200b\u5305\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar-manager/","title":"pulsar-manager","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar-manager/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b pulsar-manager \u200b\u7248\u672c\u200b v0.4.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/apache/pulsar-manager \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/apache/pulsar-manager/tree/v0.4.0/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar-manager/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar-manager/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u53ca\u200b\u4f9d\u8d56\u200b 1. java 8 \u200b\u53ca\u200b\u4ee5\u4e0a\u200b 2. node 16 \u200b\u53ca\u200b\u4ee5\u4e0a\u200b 3. npm 9.8 \u200b\u53ca\u200b\u4ee5\u4e0a\u200b //node\u200b\u53ca\u200bnpm\u200b\u76f8\u5e94\u200b\u7248\u672c\u200b\u914d\u7f6e\u200b\u5728\u200bfront-end\u200b\u4e0b\u200b\u7684\u200bbuild.gradle\u200b\u4e2d\u200b\u4fee\u6539\u200b</p> <p>\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b 1. \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b    - <code>git clone -b v0.4.0 --depth 1 https://github.com/apache/pulsar-manager.git</code> \u200b\u5982\u679c\u200b\u9700\u8981\u200b0.4.0\u200b\u7248\u672c\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200bhttps://github.com/Loongson-Cloud-Community/pulsar-manager/tree/loong64-0.4.0    - <code>git clone -b loong64-0.4.0 --depth 1 https://github.com/Loongson-Cloud-Community/pulsar-manager.git</code>    \u200b\u4e0b\u8f7d\u200b\u540e\u200b\u53ef\u4ee5\u200b\u5ffd\u7565\u200b\u7b2c\u4e8c\u6b65\u200b    - \u200b\u9700\u8981\u200b\u4e8c\u8fdb\u5236\u200b\u5305\u200b\u53ef\u4ee5\u200b\u4ece\u200bhttps://github.com/Loongson-Cloud-Community/pulsar-manager/releases/tag/0.4.0\u200b\u83b7\u53d6\u200b.</p> <ol> <li>\u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b    \u200b\u5177\u4f53\u200b\u89c1\u200b https://github.com/Loongson-Cloud-Community/pulsar-manager/commit/68203f667d1591efc7cd0426afafeeebd0577314</li> <li>\u200b\u7f16\u8bd1\u200b    \u200b\u6dfb\u52a0\u200b<code>-x test</code>\u200b\u8df3\u8fc7\u200b\u6d4b\u8bd5\u200b    <code>./gradlew build -x test</code></li> <li>\u200b\u7f16\u8bd1\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u5728\u200bfront-end\u200b\u5b50\u200b\u4efb\u52a1\u200b\u4e0b\u200bnpm install\u200b\u5931\u8d25\u200b,\u200b\u6267\u884c\u200b:    <pre><code>cd front-end &amp;&amp; npm install --ignore-scripts &amp;&amp; npm run build:prod\n</code></pre>    \u200b\u7f16\u8bd1\u200b\u6210\u529f\u200b\u7684\u200b\u5236\u54c1\u200b\u4f4d\u4e8e\u200b./build/distribution/\u200b\u76ee\u5f55\u200b\u4e0b\u200b</li> </ol> <p>\u200b\u6d4b\u8bd5\u200b</p> <pre><code>[yzw@kubernetes-master-1 bin]$ ./pulsar-manager\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/home/yzw/git-release/pulsar-manager/pulsar-manager/lib/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/home/yzw/git-release/pulsar-manager/pulsar-manager/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/home/yzw/git-release/pulsar-manager/pulsar-manager/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n2023-09-06 09:17:40.928  INFO 23982 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@77128536: startup date [Wed Sep 06 09:17:40 CST 2023]; root of context hierarchy\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.springframework.cglib.core.ReflectUtils$1 (file:/home/yzw/git-release/pulsar-manager/pulsar-manager/lib/spring-core-5.0.6.RELEASE.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\nWARNING: Please consider reporting this to the maintainers of org.springframework.cglib.core.ReflectUtils$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n2023-09-06 09:17:41.244  WARN 23982 --- [kground-preinit] o.s.h.c.j.Jackson2ObjectMapperBuilder    : For Jackson Kotlin classes support please add \"com.fasterxml.jackson.module:jackson-module-kotlin\" to the classpath\n2023-09-06 09:17:41.291  INFO 23982 --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n2023-09-06 09:17:41.373  INFO 23982 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'configurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$b23dda4a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.0.2.RELEASE)\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar/","title":"pulsar","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b pulsar \u200b\u7248\u672c\u200b 2.8.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/apache/pulsar \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/apache/pulsar/tree/v3.0.0/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/pulsar/#_3","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u53ca\u200b\u4f9d\u8d56\u200b 1. java 8  2. maven 3.5 3. zip</p> <p>\u200b\u79fb\u690d\u200b\u6b65\u9aa4\u200b 1. \u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b    <pre><code>git clone -b v2.8.0 --depth 1 https://github.com/apache/pulsar.git`\n</code></pre>    \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u9002\u914d\u200b\u4ee3\u7801\u200b    <pre><code>git clone -b loong64-2.8.0 --depth 1 [https://github.com/apache/pulsar.git](https://github.com/Loongson-Cloud-Community/pulsar.git)\n</code></pre> 2. \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b    \u200b\u4e3b\u8981\u200b\u4fee\u6539\u200b\u4e86\u200b\u9879\u76ee\u200b\u6240\u200b\u9700\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u672a\u200b\u5728\u200b\u9879\u76ee\u200b\u4e2d\u200b\u914d\u7f6e\u200bloongarch maven\u200b\u4ed3\u5e93\u200b\uff0c\u200b\u5177\u4f53\u200b\u914d\u7f6e\u200b\u89c1\u200b\u9f99\u82af\u200bmaven\u200b\u4ed3\u5e93\u200b\u914d\u7f6e\u200b    \u200b\u5177\u4f53\u200b\u89c1\u200b \u200b\u9002\u914d\u200b\u66f4\u6539\u200b 3. \u200b\u7f16\u8bd1\u200b    \u200b\u6700\u5c0f\u5316\u200b\u7f16\u8bd1\u200b,\u200b\u7f16\u8bd1\u200b\u8f83\u200b\u5feb\u200b     <pre><code>mvn install -Pcore-modules,-main -DskipTests\n</code></pre>    \u200b\u7f16\u8bd1\u200b\u5b8c\u6210\u200b\u7684\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u4f4d\u4e8e\u200bbin\u200b\u76ee\u5f55\u200b\u4e0b\u200b    \u200b\u5168\u90e8\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b\uff1a    <pre><code>mvn install -DskipTests \n</code></pre></p> <p>\u200b\u6d4b\u8bd5\u200b</p> <p><pre><code>[yzw@kubernetes-master-1 bin]$ ./pulsar standalone\n2023-09-05T11:24:45,203+0800 [main] INFO  org.apache.pulsar.PulsarStandalone - Starting BK with RocksDb metadata store\n2023-09-05T11:24:45,646+0800 [main] INFO  org.apache.pulsar.metadata.impl.RocksdbMetadataStore - new RocksdbMetadataStore,url=MetadataStoreConfig(sessionTimeoutMillis=30000, allowReadOnlyOperations=false, configFilePath=null, batchingEnabled=true, batchingMaxDelayMillis=5, batchingMaxOperations=1000, batchingMaxSizeKb=128, metadataStoreName=metadata-store, fsyncEnable=true, synchronizer=null),instanceId=1\n2023-09-05T11:24:45,665+0800 [main] INFO  org.apache.pulsar.metadata.bookkeeper.PulsarRegistrationManager - Initializing metadata for new cluster, ledger root path: /ledgers\n2023-09-05T11:24:45,704+0800 [main] INFO  org.apache.pulsar.metadata.bookkeeper.PulsarRegistrationManager - Successfully initiated cluster. ledger root path: /ledgers instanceId: b41129fc-4e56-4fdf-8c99-5c6910aecb8d\n2023-09-05T11:24:45,726+0800 [main] INFO  org.apache.pulsar.metadata.bookkeeper.BKCluster - Starting new bookie on port: 34027\n2023-09-05T11:24:45,751+0800 [main] INFO  org.apache.bookkeeper.server.EmbeddedServer$Builder - Load lifecycle component : org.apache.bookkeeper.server.service.StatsProviderService\n2023-09-05T11:24:45,765+0800 [main] INFO  org.apache.bookkeeper.meta.MetadataDrivers - BookKeeper metadata driver manager initialized\n2023-09-05T11:24:45,870+0800 [main] INFO  org.apache.bookkeeper.bookie.LegacyCookieValidation - Stamping new cookies on all dirs [data/standalone/bookkeeper/current]\n2023-09-05T11:24:45,984+0800 [main] INFO  org.apache.bookkeeper.bookie.BookieResources - Using ledger storage: org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage\n2023-09-05T11:24:45,990+0800 [main] INFO  org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage - Started Db Ledger Storage\n</code></pre> \u200b\u8981\u200b\u6d4b\u8bd5\u200b\u5176\u4ed6\u200b\u5177\u4f53\u200b\u7684\u200b\u5982\u200bpulsar-client\u200b\u6216\u200bpulsar-admin \u200b\u89c1\u200bhttps://pulsar.apache.org/docs/3.1.x/getting-started-standalone/</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/","title":"runc","text":"<p>\u200b\u672c\u6b21\u200b\u79fb\u690d\u200b <code>runc 1.0.0</code> \u200b\u7248\u672c\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u4e3a\u200b <code>loognix-server:8.3</code> \u200b\u5bb9\u5668\u200b\uff0cgolang \u200b\u91c7\u7528\u200b\u7cfb\u7edf\u200b\u81ea\u5e26\u200b\u7684\u200b <code>golang 1.15.6</code>\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#_1","title":"\u73af\u5883","text":"<ul> <li>runc 1.0.0 \u200b\u6e90\u7801\u200b</li> <li>loongnix-server 8.3 \u200b\u5bb9\u5668\u200b</li> <li>golang 1.15.6</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#_2","title":"\u7f16\u8bd1\u200b\u79fb\u690d","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#1","title":"1. \u200b\u5b89\u88c5\u200b\u7f16\u8bd1\u200b\u5fc5\u8981\u200b\u8f6f\u4ef6","text":"<pre><code>yum install libseccomp-devel golang make git vim -y\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#2","title":"2. \u200b\u5207\u6362\u200b\u5230\u200b\u9700\u8981\u200b\u79fb\u690d\u200b\u7684\u200b\u5206\u652f","text":"<p><code>git checkout -b v1.0.0-loongarch64 v1.0.0</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#3-patch","title":"3. \u200b\u53c2\u8003\u200b\u4ee5\u4e0b\u200b patch \u200b\u8fdb\u884c\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>patch to loongarch64</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#4-vendor-golangsys-golangnet","title":"4. \u200b\u66f4\u65b0\u200b vendor \u200b\u4e0b\u200b\u7684\u200b golang/sys golang/net \u200b\u5e93","text":"<pre><code>export GOPROXY=http://goproxy.loongnix.cn:3000\nexport GOSUMDB=off\nrm -f go.sum\ngo mod vendor\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/runc/#5","title":"5. \u200b\u7f16\u8bd1","text":"<p>\u200b\u52a8\u6001\u200b\u7f16\u8bd1\u200b\uff1a  <code>make runc</code>  \u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\uff1a  <code>make static</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/","title":"seaweedfs","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>2.85</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#2","title":"2.\u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u4e24\u4e2a\u200b\u73af\u5883\u200b\u4e2d\u5747\u200b\u6784\u5efa\u200b\uff1a</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#21-loongnix-server","title":"2.1 loongnix-server","text":"<p><pre><code># cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n\n# uname -a\nLinux localhost.localdomain 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre> <pre><code># go version\ngo version go1.19 linux/loong64\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#22-anolis-os","title":"2.2 Anolis OS","text":"<p><pre><code># cat /etc/os-release \nNAME=\"Anolis OS\"\nVERSION=\"8.8\"\nID=\"anolis\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8.8\"\nPLATFORM_ID=\"platform:an8\"\nPRETTY_NAME=\"Anolis OS 8.8\"\nANSI_COLOR=\"0;31\"\nHOME_URL=\"https://openanolis.cn/\"\n\n# uname -a\nLinux bogon 4.19.190-7.6.an8.loongarch64 #1 SMP Sun Jun 25 11:36:01 CST 2023 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre> <pre><code># go version\ngo version go1.18.10 linux/loong64\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#3vendor","title":"3.\u200b\u4e0b\u8f7d\u200bvendor\u200b\u76ee\u5f55","text":"<pre><code>cd seaweedfs\ngo mod tidy\ngo mod vendor\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#4","title":"4.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u6e90\u7801\u200b\u9002\u914d\u200b\uff0c\u200b\u4e3b\u8981\u200b\u662f\u200b\u4f9d\u8d56\u200b\u7684\u200bvendor\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u9879\u76ee\u200b\u4e0e\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\uff0c\u200b\u6d89\u53ca\u200b\u4ee5\u4e0b\u200b\u51e0\u4e2a\u200b\u9879\u76ee\u200b\uff1a</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#41-sys","title":"4.1 sys","text":"<p>\u200b\u5b98\u65b9\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u5df2\u200b\u652f\u6301\u200bloong64\u200b\u67b6\u6784\u200b\uff0c\u200b\u66f4\u65b0\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e2d\u200b\u4f9d\u8d56\u200b\u7684\u200bsys\u200b\u7248\u672c\u200b\uff1a <pre><code># go get -d golang.org/x/sys\n# go mod tidy\n# go mod vendor\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#42-bigfft","title":"4.2 bigfft","text":"<p>\u200b\u5b98\u65b9\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u5df2\u200b\u652f\u6301\u200bloong64\u200b\u67b6\u6784\u200b\uff0c\u200b\u66f4\u65b0\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e2d\u200b\u4f9d\u8d56\u200b\u7684\u200bbigfft\u200b\u7248\u672c\u200b\uff1a <pre><code># go get -d github.com/remyoudompheng/bigfft\n# go mod tidy\n# go mod vendor\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#43-memory","title":"4.3 memory","text":"<p>\u200b\u5b98\u65b9\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u5df2\u200b\u652f\u6301\u200bloong64\u200b\u67b6\u6784\u200b\uff0c\u200b\u66f4\u65b0\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e2d\u200b\u4f9d\u8d56\u200b\u7684\u200bmemory\u200b\u7248\u672c\u200b\uff1a <pre><code># go get -d modernc.org/memory\n# go mod tidy\n# go mod vendor\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#44-libc","title":"4.4 libc","text":"<p>\u200b\u5b98\u65b9\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u5df2\u200b\u652f\u6301\u200bloong64\u200b\u67b6\u6784\u200b\uff0c\u200b\u66f4\u65b0\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e2d\u200b\u4f9d\u8d56\u200b\u7684\u200blibc\u200b\u7248\u672c\u200b\uff1a <pre><code>go get -d modernc.org/libc@v1.23.0\n# go mod tidy\n# go mod vendor\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#45-sqlite","title":"4.5 sqlite","text":"<p>\u200b\u8be5\u200b\u9879\u76ee\u200b\u76ee\u524d\u200b\u5b98\u65b9\u200b\u8fd8\u200b\u4e0d\u200b\u652f\u6301\u200b\uff0c\u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u5c06\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u4ee3\u7801\u200b\u6dfb\u52a0\u200b\u5230\u200bvendor/modernc.org/sqlite\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff0c\u200b\u5177\u4f53\u200b\u8be6\u89c1\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/seaweedfs/commit/bc7ed3a2be7036e7e19c6d092b456fc62a7a5167</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/seaweedfs/#5","title":"5. \u200b\u6e90\u7801\u200b\u6784\u5efa","text":"<pre><code>cd weed\nmake install    //\u200b\u6267\u884c\u200b\u5b8c\u6210\u200b\u540e\u200bweed\u200b\u4e8c\u8fdb\u5236\u200b\u5c06\u200b\u5b89\u88c5\u200b\u5728\u200b $GOPATH/bin \u200b\u76ee\u5f55\u200b\u4e0b\u200b\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar/","title":"sigar","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>master\u200b\u7248\u672c\u200b\uff0c commit\u200b\u53f7\u200b\uff1aad47dc3b494e9293d1f087aebb099bdba832de5e</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>openjdk-8     </p> <p>\u200b\u4f7f\u7528\u200b\u7684\u200b\u7cfb\u7edf\u200b\u73af\u5883\u200b\u662f\u200b\u9f99\u82af\u200bdebian-10,\u200b\u5177\u4f53\u200b\u73af\u5883\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>root@cloud-01:/home/workspace/cloud/sigar# cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\nroot@cloud-01:/home/workspace/cloud/sigar# uname -a\nLinux cloud-01 4.19.0-17-loongson-3 #1 SMP 4.19.190-6.1 Mon Apr 11 13:19:19 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/sigar/tree/loongarch64-master-ad47dc3b494e \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sigar/#4","title":"4. \u200b\u6784\u5efa\u200b\u547d\u4ee4","text":"<pre><code>cd bindings/java\nant\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sofa-pbrpc/","title":"baidu/sofa-pbrpc","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sofa-pbrpc/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b sofa-pbrpc \u200b\u7248\u672c\u200b 1.0.1 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/baidu/sofa-pbrpc \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/baidu/sofa-pbrpc/blob/v1.0.1/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sofa-pbrpc/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b openEuler 22.03 LTS"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sofa-pbrpc/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<ul> <li>\u200b\u9700\u8981\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u4f9d\u8d56\u200b\uff1a     <pre><code>boost-1.53.0  ,\nprotobuf-2.4.1 ,\nsnappy-1.1.1 ,\nzlib\n</code></pre></li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/sofa-pbrpc/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u79fb\u690d\u200b\u4f9d\u8d56\u200b   - \u200b\u4e0b\u8f7d\u200b boost-1.53.0      \u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b https://sourceforge.net/projects/boost/files/boost/      \u200b\u7531\u4e8e\u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\u4ec5\u200b\u9700\u8981\u200bboost\u200b\u7684\u200b\u5934\u6587\u4ef6\u200b./boost/smart_ptr.hpp\uff0c\u200b\u5206\u6790\u200b\u8be5\u200b\u90e8\u5206\u200b\u4e0e\u200b\u67b6\u6784\u200b\u65e0\u5173\u200b\uff0c\u200b\u65e0\u9700\u200b\u6539\u52a8\u200b   - \u200b\u79fb\u690d\u200bprotobuf-2.4.1      \u200b\u53c2\u8003\u200b\u6587\u6863\u200b [https://loongson-cloud-community.github.io/Loongson-Cloud-Community/%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/protobuf]   - \u200b\u79fb\u690d\u200bsnappy-1.1.1      1. \u200b\u7531\u4e8e\u200b\u627e\u200b\u4e0d\u5230\u200b1.1.1\u200b\u4e14\u200b\u9879\u76ee\u200b\u5bf9\u200b\u7248\u672c\u200b\u6ca1\u6709\u200b\u8981\u6c42\u200b\uff0c\u200b\u9009\u5b9a\u200b1.1.5\u200b\u8fdb\u884c\u200b\u79fb\u690d\u200b         snappy \u200b\u6240\u200b\u9700\u200b\u4f9d\u8d56\u200b\u914d\u7f6e\u200b         <code>yum install cmake build-essential</code>           \u200b\u7531\u4e8e\u200b\u65e0\u6cd5\u200b\u76f4\u63a5\u200b\u5b89\u88c5\u200bgmock,\u200b\u9700\u8981\u200b\u7f16\u8bd1\u200b\u5b89\u88c5\u200bgmock\u200b\u5e93\u200b         <code>git clone https://github.com/google/googletest.git</code> <code>cd googletest &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make</code> <code>make install</code>         snappy\u200b\u6ca1\u6709\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u5185\u5bb9\u200b\uff0c\u200b\u4f46\u200b\u7531\u4e8e\u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\u9700\u8981\u200b\u7684\u200b\u662f\u200bsnappy\u200b\u7684\u200b\u9759\u6001\u200b\u5e93\u200b\uff0c\u200b\u800c\u200bsnappy\u200b\u9ed8\u8ba4\u200b\u751f\u6210\u200b\u52a8\u6001\u200b\u5e93\u200b\uff0c\u200b\u9700\u8981\u200b\u5728\u200bCMakeists.txt\u200b\u4e2d\u200b\u505a\u200b\u5982\u4e0b\u200b\u4fee\u6539\u200b\uff1a          <pre><code>yzw@loongson-pc:~/workspace/snappy$ git diff CMakeLists.txt\n       diff --git a/CMakeLists.txt b/CMakeLists.txt\n       index 2c79e46..8d41198 100644\n       --- a/CMakeLists.txt\n       +++ b/CMakeLists.txt\n       @@ -80,8 +80,9 @@ IF (WIN32)\n        ENDIF (WIN32)\n\n        # Define the main library.\n       -ADD_LIBRARY(snappy SHARED\n       -        snappy-c.cc\n       +# ADD_LIBRARY(snappy SHARED\n       +ADD_LIBRARY(snappy STATIC        \n       +       snappy-c.cc\n                snappy-c.h\n                snappy-sinksource.cc\n                snappy-sinksource.h\n</code></pre>      2. \u200b\u4f9d\u6b21\u200b\u6267\u884c\u200b\u7f16\u8bd1\u200b\u547d\u4ee4\u200b          <pre><code>   ./autogen.sh &amp;&amp;./configure\n   mkdir build &amp;&amp; cd build &amp;&amp; cmake ../  &amp;&amp; make \n</code></pre>      3. \u200b\u5b89\u88c5\u200b          <pre><code>sudo make install &amp;&amp; sudo ldconfig \n</code></pre>    - sofa-pbrpc\u200b\u6e90\u7801\u200b\u4fee\u6539\u200b       \u200b\u6d89\u53ca\u200b\u8f83\u200b\u591a\u200b\u6c47\u7f16\u200b\u6307\u4ee4\u200b\u4fee\u6539\u200b,\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u5185\u5bb9\u200b\u89c1\u200b\u94fe\u63a5\u200bhttps://github.com/Loongson-Cloud-Community/sofa-pbrpc/commit/4242aab44533c8da2fcd506b134914198c9d226c</p> <p>\u200b\u7f16\u8bd1\u200b <pre><code>sudo make build\n</code></pre> \u200b\u5b89\u88c5\u200b</p> <pre><code>```\nsudo make install\n```\n</code></pre> <p>\u200b\u6d4b\u8bd5\u200b \u200b\u9700\u8981\u200b\u4e0b\u8f7d\u200bgoogletest\u200b\u6587\u4ef6\u200b \u200b\u914d\u7f6e\u200bgoogletest\u200b\u6587\u4ef6\u200b\u8def\u5f84\u200b\u5230\u200buntest\u200b\u6587\u4ef6\u5939\u200b\u7684\u200bdepends.md\u200b\u4e2d\u200b <pre><code>make &amp;&amp; bash run_test.sh\n</code></pre> \u200b\u6d4b\u8bd5\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b: <pre><code>[----------] Global test environment tear-down\n[==========] 2 tests from 1 test case ran. (0 ms total)\n[  PASSED  ] 2 tests.\n\nCASE NUM: 9\nALL CASE PASSED!!!\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/spark/","title":"Spark","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/spark/#_1","title":"\u4e00\u200b\u3001\u200b\u914d\u7f6e","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/spark/#11-maven","title":"1.1 maven \u200b\u914d\u7f6e","text":"<ul> <li><code>/etc/maven/settings.xml</code>\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u9700\u8981\u200b\u5c06\u200b<code>proxy</code>\u200b\u90e8\u5206\u200b\u66ff\u6362\u200b\u4e3a\u200b\u81ea\u5df1\u200b\u7684\u200b<code>IP+PORT</code>\uff1a</li> </ul> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n&lt;pluginGroups&gt;\n&lt;/pluginGroups&gt;\n&lt;proxies&gt;\n&lt;proxy&gt;\n&lt;id&gt;xxx&lt;/id&gt;\n&lt;active&gt;true&lt;/active&gt;\n&lt;protocol&gt;http&lt;/protocol&gt;\n&lt;host&gt;x.x.x.x&lt;/host&gt;\n&lt;port&gt;xxx&lt;/port&gt;\n&lt;nonProxyHosts&gt;*.loongnix.cn|*.aliyun.com&lt;/nonProxyHosts&gt;\n&lt;/proxy&gt;\n&lt;/proxies&gt;\n&lt;servers&gt;\n&lt;/servers&gt;\n&lt;mirrors&gt;\n&lt;mirror&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;\n&lt;name&gt;Nexus ali&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;/mirror&gt;\n&lt;/mirrors&gt;\n&lt;profiles&gt;\n&lt;profile&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;loongson&lt;/id&gt;\n&lt;name&gt;Loongson Maven&lt;/name&gt;\n&lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;!-- ali --&gt;\n&lt;profile&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;repositories&gt;\n&lt;repository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n&lt;pluginRepository&gt;\n&lt;id&gt;ali&lt;/id&gt;\n&lt;name&gt;ali Maven&lt;/name&gt;\n&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;\n&lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n&lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n&lt;/profile&gt;\n&lt;/profiles&gt;\n&lt;activeProfiles&gt;\n&lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n&lt;!-- \n    &lt;activeProfile&gt;ali&lt;/activeProfile&gt;\n    --&gt;\n&lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/spark/#_2","title":"\u4e8c\u200b\u3001\u200b\u6784\u5efa","text":"<pre><code>## \u200b\u542f\u52a8\u200bdocker\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\ndocker run -d --name spark --hostname spark --network host cr.loongnix.cn/loongson/loongnix-server:8.4 bash -c \"while true; do sleep 1;done\"\n\n## \u200b\u5b89\u88c5\u200b\u76f8\u5173\u200b\u8f6f\u4ef6\u200b\uff0c\u200b\u9700\u8981\u200b\u624b\u52a8\u200b\u5f00\u542f\u200bPowerTools\u200b\u548c\u200bepel\u200b\u4ed3\u5e93\u200b\ndnf install /usr/bin/mvn git vim java-1.8.0-openjdk-devel.loongarch64 wget python3 R libgomp libgfortran gcc\n\n## \u200b\u4ee3\u7801\u200b\u4e0b\u8f7d\u200b\ngit clone --branch loong64-v3.1.1 --depth=3 https://github.com/Loongson-Cloud-Community/spark.git\n\n## \u200b\u62c9\u200b\u53bb\u200b\u9f99\u82af\u200bmaven\u200b\u6e90\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b\u5305\u200b(\u200b\u524d\u63d0\u200b\u662f\u200b\u5df2\u7ecf\u200b\u914d\u7f6e\u200b\u8fc7\u200bmaven\u200b\u4ed3\u5e93\u200b)\nmvn dependency:tree\n\n## \u200b\u6784\u5efa\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u4f7f\u7528\u200bhttps://github.com/Loongson-Cloud-Community/zinc/releases/download/v0.3.15/zinc-0.3.15.tgz\u200b\u6765\u200b\u8986\u76d6\u200bbuild\u200b\u4e0b\u200b\u7684\u200bzinc\n\n## \u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b\n./dev/make-distribution.sh --name spark-v3.1.1 --pip  --tgz -Psparkr -Phive -Phive-thriftserver -Pmesos -Pyarn -Dmaven.test.skip=true -Denforcer.skip=true\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telegraf/","title":"telegraf","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telegraf/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b telegraf \u200b\u7248\u672c\u200b 1.27.3 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/influxdata/telegraf \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://github.com/influxdata/telegraf/blob/v1.27.3/README.md"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telegraf/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telegraf/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telegraf/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b 1. Linux kernel version 2.6.23 or later 2. go 1.20.0 \u200b\u4ee5\u4e0a\u200b\u7248\u672c\u200b   \u200b\u9f99\u82af\u200bgo\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b: http://ftp.loongnix.cn/toolchain/golang/</p> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <pre><code>git clone -b v1.27.3 --depth 1 git@github.com:influxdata/telegraf.git\n</code></pre></p> <p>\u200b\u79fb\u690d\u200b</p> <ul> <li>\u200b\u68c0\u67e5\u200b\u67b6\u6784\u200b\u76f8\u5173\u200b     \u200b\u4fee\u6539\u200bMakefile\u200b\u4e2d\u200b\u7684\u200b\u67b6\u6784\u200b\u58f0\u660e\u200b\uff0c\u200b\u8be5\u200b\u9879\u76ee\u200b\u5728\u200b\u6253\u5305\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u4e0e\u200b\u67b6\u6784\u200b\u6302\u94a9\u200b <pre><code>diff --git a/Makefile b/Makefile\nindex 7d3c391..0f229e5 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -122,14 +122,14 @@ embed_readme_%:\n .PHONY: config\n config:\n        @echo \"generating default config\"\n-       go run ./cmd/telegraf config &gt; etc/telegraf.conf\n+       go run -v ./cmd/telegraf config &gt; etc/telegraf.conf\n\n .PHONY: docs\n docs: build_tools embed_readme_inputs embed_readme_outputs embed_readme_processors embed_readme_aggregators embed_readme_secretstores\n\n .PHONY: build\n build:\n-       CGO_ENABLED=0 go build -tags \"$(BUILDTAGS)\" -ldflags \"$(LDFLAGS)\" ./cmd/telegraf\n+       CGO_ENABLED=0 go build -v -tags \"$(BUILDTAGS)\" -ldflags \"$(LDFLAGS)\" ./cmd/telegraf\n\n .PHONY: telegraf\n telegraf: build\n@@ -137,7 +137,7 @@ telegraf: build\n # Used by dockerfile builds\n .PHONY: go-install\n go-install:\n-       go install -mod=mod -ldflags \"-w -s $(LDFLAGS)\" ./cmd/telegraf\n+       go install -mod=vendor -ldflags \"-w -s $(LDFLAGS)\" ./cmd/telegraf\n\n .PHONY: test\n test:\n@@ -242,15 +242,15 @@ clean:\n\n .PHONY: docker-image\n docker-image:\n-       docker build -f scripts/buster.docker -t \"telegraf:$(commit)\" .\n+       docker build -f scripts/buster.docker -t \"telegraf:$(tag)\" .\n\n plugins/parsers/influx/machine.go: plugins/parsers/influx/machine.go.rl\n        ragel -Z -G2 $^ -o $@\n\n .PHONY: ci\n ci:\n-       docker build -t quay.io/influxdb/telegraf-ci:1.20.5 - &lt; scripts/ci.docker\n-       docker push quay.io/influxdb/telegraf-ci:1.20.5\n+       docker build -t cr.loongnix.cn/influxdb/telegraf-ci:1.20.2 - &lt; scripts/ci.docker\n+       #docker push cr.loongnix.cn/influxdb/telegraf-ci:1.20.2\n\n .PHONY: install\n install: $(buildbin)\n@@ -274,7 +274,7 @@ install: $(buildbin)\n $(buildbin):\n        echo $(GOOS)\n        @mkdir -pv $(dir $@)\n-       CGO_ENABLED=0 go build -o $(dir $@) -ldflags \"$(LDFLAGS)\" ./cmd/telegraf\n+       CGO_ENABLED=0 go build -v -o $(dir $@) -ldflags \"$(LDFLAGS)\" ./cmd/telegraf\n\n # Define packages Telegraf supports, organized by architecture with a rule to echo the list to limit include_packages\n # e.g. make package include_packages=\"$(make amd64)\"\n@@ -287,6 +287,12 @@ mipsel += mipsel.deb linux_mipsel.tar.gz\n mipsel:\n        @ echo $(mipsel)\n arm64 += linux_arm64.tar.gz arm64.deb aarch64.rpm\n+\n+loongarch64 += linux_loongarch64.tar.gz loongarch64.deb loongarch64.rpm\n+.PHONY: loongarch64\n+loongarch64:\n+       @ echo $(loongarch64)\n+\n .PHONY: arm64\n arm64:\n        @ echo $(arm64)\n@@ -332,7 +338,7 @@ darwin-arm64 += darwin_arm64.tar.gz\n darwin-arm64:\n        @ echo $(darwin-arm64)\n\n-include_packages := $(mips) $(mipsel) $(arm64) $(amd64) $(armel) $(armhf) $(riscv64) $(s390x) $(ppc64le) $(i386) $(windows) $(darwin-amd64) $(darwin-arm64)\n+include_packages := $(mips) $(mipsel) $(loongarch64) $(arm64) $(amd64) $(armel) $(armhf) $(riscv64) $(s390x) $(ppc64le) $(i386) $(windows) $(darwin-amd64) $(darwin-arm64)\n\n .PHONY: package\n package: docs config $(include_packages)\n@@ -425,6 +431,9 @@ mips.deb linux_mips.tar.gz: export GOARCH := mips\n mipsel.deb linux_mipsel.tar.gz: export GOOS := linux\n mipsel.deb linux_mipsel.tar.gz: export GOARCH := mipsle\n\n+loongarch64.deb linux_loongarch64.tar.gz: export GOOS := linux\n+loongarch64.deb linux_loongarch64.tar.gz: export GOARCH := loong64\n+\n riscv64.deb riscv64.rpm linux_riscv64.tar.gz: export GOOS := linux\n riscv64.deb riscv64.rpm linux_riscv64.tar.gz: export GOARCH := riscv64\n</code></pre></li> <li>\u200b\u7f16\u8bd1\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u53d1\u73b0\u200b\u9700\u8981\u200bfpm\u200b\u6253\u5305\u200b\u5de5\u5177\u200b\uff0c\u200b\u5b89\u88c5\u200b\u6b65\u9aa4\u200b\u5982\u4e0b\u200b <pre><code>sudo yum install rubygems ruby\ngem sources --add http://mirrors.aliyun.com/rubygems/ #\u200b\u66f4\u6362\u200b\u4e3a\u200b\u963f\u91cc\u200b\u6e90\u200b\ngem sources --remove https://rubygems.org/\nsudo gem install fpm\n</code></pre></li> </ul> <p>\u200b\u7f16\u8bd1\u200b 1. \u200b\u7f16\u8bd1\u200btelegraf\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b <pre><code>go mod tidy\ngo mod vendor #\u200b\u4f9d\u8d56\u200b\u4e0b\u8f7d\u200b\u5230\u200b\u5f53\u524d\u200b\u9879\u76ee\u200b\uff0c\u200b\u65b9\u4fbf\u200b\u5904\u7406\u200b\nmake build \n</code></pre> 2. \u200b\u6253\u5305\u200bloongarch\u200b\u67b6\u6784\u200b\u4e0b\u200b\u7684\u200btelegraf rpm\u3001deb\u200b\u5305\u200b <pre><code>make config\nmake loongarch64.deb\nmake linux_loongarch64.tar.gz\nmake loongarch64.rpm\n</code></pre> 3. \u200b\u6784\u5efa\u200b\u955c\u50cf\u200b \u200b\u589e\u52a0\u200bdocker\u200b\u6587\u4ef6\u200b buster.docker  docker-entrypoint.sh buster.docker\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\uff1a <pre><code>FROM cr.loongnix.cn/library/golang:1.20-buster as builder\nWORKDIR /go/src/github.com/influxdata/telegraf\n\nCOPY . /go/src/github.com/influxdata/telegraf\nRUN make go-install\n\nFROM cr.loongnix.cn/library/buildpack-deps:buster-curl\n#FROM buildpack-deps:buster-curl\nCOPY --from=builder /go/bin/* /usr/bin/\nCOPY etc/telegraf.conf /etc/telegraf/telegraf.conf\n\nEXPOSE 8125/udp 8092/udp 8094\n\nCOPY scripts/docker-entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"telegraf\"]\n</code></pre> docker-entrypoint.sh\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b <pre><code>#!/bin/bash\nset -e\n\nif [ \"${1:0:1}\" = '-' ]; then\n    set -- telegraf \"$@\"\nfi\n\nexec \"$@\"\n</code></pre> \u200b\u6700\u7ec8\u200b\u6267\u884c\u200b\uff1a <pre><code>make docker-images\n</code></pre> \u200b\u6784\u5efa\u200b\u955c\u50cf\u200b\u65f6\u200b\u53d1\u73b0\u200bserver\u200b\u673a\u5668\u200b\u7684\u200b\u7f51\u7edc\u200b\u9047\u5230\u200b\u95ee\u9898\u200b\uff0c\u200b\u66f4\u6362\u200b\u5230\u200b\u672c\u673a\u200b\u8fdb\u884c\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u901a\u8fc7\u200b \u200b\u6d4b\u8bd5\u200b 1. \u200b\u6d4b\u8bd5\u200btelegraf\u200b\u4e8c\u8fdb\u5236\u200b <pre><code>./telegraf --help\nyzw@yzw-pc:~/git/telegraf$ telegraf --version\n2023/08/21 10:56:22 github.com/josharian/native: unrecognized arch loong64 (LittleEndian), please file an issue\nTelegraf 1.27.3 (git: HEAD@afcf0133)\n</code></pre> \u200b\u53d1\u73b0\u200b\u63d0\u793a\u4fe1\u606f\u200b\uff0c\u200b\u4e0d\u200b\u5f71\u54cd\u200b\u4f7f\u7528\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u200b\u81ea\u884c\u200b\u5230\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b 2. \u200b\u6d4b\u8bd5\u200bdeb\u200b\u5305\u200b\u548c\u200brpm\u200b\u5305\u200b <pre><code>\u200b\u4f7f\u7528\u200b\u53e6\u4e00\u53f0\u200b\u673a\u5668\u200b\u6216\u8005\u200b\u542f\u52a8\u200b\u955c\u50cf\u200b\uff0c\u200b\u5c06\u200b\u751f\u6210\u200b\u7684\u200b\u5b89\u88c5\u5305\u200b\u590d\u5236\u200b\nsudo dpkg -i telegraf_1.27.3-1_loongarch64.deb\n</code></pre> 3. \u200b\u6d4b\u8bd5\u200b\u955c\u50cf\u200b <pre><code>\u200b\u7ecf\u8fc7\u200b\u548c\u200bx86\u200b\u673a\u5668\u200b\u5bf9\u6bd4\u200b\uff0c\u200b\u955c\u50cf\u200b\u65e0\u8bef\u200b\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/","title":"telepresence","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#00x00","title":"00x00 \u200b\u53c2\u8003","text":"<ol> <li>telepresence\u200b\u4ecb\u7ecd\u200b</li> <li>\u200b\u6e90\u7801\u200b\u53ca\u200b\u955c\u50cf\u200b\u6784\u5efa\u200b-\u200b\u5b98\u65b9\u200b\u672a\u627e\u5230\u200b</li> <li>\u200b\u9f99\u82af\u200b\u6e90\u7801\u200b\u5730\u5740\u200b</li> <li>percona-xtrabackup-8.0.33-linux-loongarch64.tar.gz</li> </ol>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#00x01","title":"00x01 \u200b\u6784\u5efa\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"<ul> <li>arch</li> </ul> <pre><code>root@telepresence /w/p/telepresence# uname -a\nLinux telepresence 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre> <ul> <li>os</li> </ul> <pre><code>root@telepresence /w/p/percona-xtrabackup# cat /etc/os-release PRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#00x02","title":"00x02 \u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#_1","title":"\u4f9d\u8d56\u200b\u5de5\u5177","text":"<pre><code>\u200b\u6839\u636e\u200bMakefile\u200b\u6587\u4ef6\u200b\uff0c\u200b\u53ef\u77e5\u200b\u9700\u8981\u200b\uff1a\nprotobuf 21.9 \uff0cprotolint 0.42.0 shellcheck 0.8.0 helm3.12.0 golang 1.20 \u200b\u4ee5\u4e0a\u200b\n\u200b\u56e0\u6b64\u200b\u5148\u200b\u6784\u5efa\u200bprotobuf21.9 \u200b\u6309\u7167\u200b[\u200b\u6587\u6863\u200b] \n\u200b\u6784\u5efa\u200bprotolint\u200b\u65f6\u200b\u4e0e\u200b\u6e90\u7801\u200b\u65e0\u5173\u200b\uff0c\u200b\u4f46\u200b\u6ce8\u610f\u200b\u9700\u8981\u200b\u5728\u200bMakefile\u200b\u4e2d\u200b\u5c4f\u853d\u200b\u6d4b\u8bd5\u9879\u76ee\u200b\uff0c\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u89c1\u200b[]\nshellcheck\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u9759\u6001\u200b\u68c0\u67e5\u200b\u4ee3\u7801\u200b\uff0c\u200b\u9700\u8981\u200b\u4f7f\u7528\u200bcabal\u200b\u5de5\u5177\u200b\u6784\u5efa\u200b\uff0c\u200b\u4f7f\u7528\u200bhaskell\u200b\u8bed\u8a00\u200b\u7f16\u5199\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5148\u200b\u6ce8\u91ca\u200b\u6389\u200b\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#_2","title":"\u4ee3\u7801\u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":"<p>\u200b\u5728\u200bbuild\u200b\u65f6\u200b\u4f9d\u8d56\u200b\uff1a <pre><code>[go-fuseftp](https://github.com/datawire/go-fuseftp.git)\n\u200b\u8be5\u200b\u9879\u76ee\u200b\u7248\u672c\u200b\u9700\u8981\u200b 0.4.2,\u200b\u4f9d\u8d56\u200bprotobuf 21.5 \u200b\u4f7f\u7528\u200b21.9\u200b\u7248\u672c\u200b\u66ff\u4ee3\u200b\n\u200b\u4f9d\u8d56\u200bfuse\u200b\u5f00\u53d1\u5305\u200b `sudo yum install fuse-devel`\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#00x03","title":"00x03 \u200b\u6784\u5efa","text":"<ul> <li>\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b</li> </ul> <pre><code>make build\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#cgo","title":"cgo\u200b\u62a5\u9519","text":"<p>\u200b\u5e76\u200b\u4e0d\u200b\u5f71\u54cd\u200b\u6784\u5efa\u200b\uff0c\u200b\u5ffd\u7565\u200b</p> <pre><code># github.com/telepresenceio/telepresence/v2/cmd/telepresence\nloadinternal: cannot find runtime/cgo\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#00x04","title":"00x04 \u200b\u6784\u5efa\u200b\u955c\u50cf","text":"<pre><code>docker build --target tel2 --tag tel2 --tag cr.loongnix.cn/library/tel2:2.15.1 -f build-aux/docker/images/Dockerfile.traffic  .\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#_3","title":"\u4e8c\u8fdb\u5236\u200b\u538b\u7f29\u5305","text":"<p>root@xtrabackup /w/p/p/build (loong64-8.0)# file percona-xtrabackup-8.0.33-linux-loongarch64.tar.gz percona-xtrabackup-8.0.33-linux-loongarch64.tar.gz: gzip compressed data, last modified: Fri Jul  7 09:07:15 2023, from Unix, original size 338969088</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#0005","title":"00\u00d705 \u200b\u6d4b\u8bd5","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#1-telepresence","title":"1 \u200b\u6d4b\u8bd5\u200btelepresence\u200b\u4e8c\u8fdb\u5236","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#_4","title":"\u57fa\u672c\u200b\u6d4b\u8bd5","text":"<pre><code>[yzw@kubernetes-master-1 bin]$ ./telepresence -h\nTelepresence can connect to a cluster and route all outbound traffic from your\nworkstation to that cluster so that software running locally can communicate\nas if it executed remotely, inside the cluster. This is achieved using the\ncommand:\n\ntelepresence connect\n\nTelepresence can also intercept traffic intended for a specific service in a\ncluster and redirect it to your local workstation:\n\ntelepresence intercept &lt;name of service&gt;\n\nTelepresence uses background processes to manage the cluster session. One of\nthe processes runs with superuser privileges because it modifies the network.\nUnless the daemons are already started, an attempt will be made to start them.\nThis will involve a call to sudo unless this command is run as root (not\nrecommended) which in turn may result in a password prompt.\n\nUsage:\n  telepresence [flags]\n  telepresence [command]\n\nAvailable Commands:\n  completion         Generate a shell completion script\n  config             \n  connect            Connect to a cluster\n  current-cluster-id Get cluster ID for your kubernetes cluster\n  gather-logs        Gather logs from traffic-manager, traffic-agent, user and root daemons, and export them into a zip file.\n  gather-traces      Gather Traces\n  genyaml            Generate YAML for use in kubernetes manifests.\n  helm               \n  help               Help about any command\n  intercept          Intercept a service\n  leave              Remove existing intercept\n  list               List current intercepts\n  loglevel           Temporarily change the log-level of the traffic-manager, traffic-agent, and user and root daemons\n  quit               Tell telepresence daemon to quit\n  status             Show connectivity status\n  test-vpn           Test VPN configuration for compatibility with telepresence\n  uninstall          Uninstall telepresence agents\n  upload-traces      Upload Traces\n  version            Show version\n\nFlags:\n  -h, --help   help for telepresence\n\nGlobal flags:\n      --context string   The name of the kubeconfig context to use\n      --docker           Start, or connect to, daemon in a docker container\n      --no-report        Turn off anonymous crash reports and log submission on failure\n      --output string    Set the output format, supported values are 'json', 'yaml',\n                         and 'default' (default \"default\")\n\nUse \"telepresence [command] --help\" for more information about a command.\n\nFor complete documentation and quick-start guides, check out our website at https://www.telepresence.io\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#tel2","title":"tel2 \u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u6d4b\u8bd5","text":"<pre><code>yzw@loongson:~/tmp$ docker run -it cr.loongnix.cn/library/tel2:2.15.1\n2023-09-25 08:22:57.7783 error   quit: failed to LoadEnv: 13 errors:\n 1. invalid LogLevel (aborting): is not set\n 2. invalid ServerPort (aborting): is not set\n 3. invalid AgentArrivalTimeout (aborting): is not set\n 4. invalid MaxReceiveSize (aborting): is not set\n 5. invalid PodCIDRStrategy (aborting): is not set\n 6. invalid PodIP (aborting): is not set\n 7. invalid AgentRegistry (aborting): is not set\n 8. invalid AgentInjectPolicy (aborting): is not set\n 9. invalid AgentAppProtocolStrategy (aborting): is not set\n 10. invalid AgentPort (aborting): is not set\n 11. invalid AgentInjectorName (aborting): is not set\n 12. invalid ClientDnsExcludeSuffixes (aborting): is not set\n 13. invalid ClientConnectionTTL (aborting): is not set\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/telepresence/#telepresence_1","title":"telepresence\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u6d4b\u8bd5","text":"<pre><code>yzw@loongson:~/tmp$ docker run -it cr.loongnix.cn/library/telepresence:2.15.1\nTelepresence can connect to a cluster and route all outbound traffic from your\nworkstation to that cluster so that software running locally can communicate\nas if it executed remotely, inside the cluster. This is achieved using the\ncommand:\n\ntelepresence connect\n\nTelepresence can also intercept traffic intended for a specific service in a\ncluster and redirect it to your local workstation:\n\ntelepresence intercept &lt;name of service&gt;\n\nTelepresence uses background processes to manage the cluster session. One of\nthe processes runs with superuser privileges because it modifies the network.\nUnless the daemons are already started, an attempt will be made to start them.\nThis will involve a call to sudo unless this command is run as root (not\nrecommended) which in turn may result in a password prompt.\n\nUsage:\n  telepresence [flags]\n  telepresence [command]\n\nAvailable Commands:\n  completion         Generate a shell completion script\n  config             \n  connect            Connect to a cluster\n  current-cluster-id Get cluster ID for your kubernetes cluster\n  dashboard          Open the dashboard in a web page\n  gather-logs        Gather logs from traffic-manager, traffic-agent, user and root daemons, and export them into a zip file.\n  gather-traces      Gather Traces\n  genyaml            Generate YAML for use in kubernetes manifests.\n  helm               \n  help               Help about any command\n  intercept          Intercept a service\n  leave              Remove existing intercept\n  license            Get License from Ambassador Cloud\n  list               List current intercepts\n  login              Authenticate to Ambassador Cloud\n  loglevel           Temporarily change the log-level of the traffic-manager, traffic-agent, and user and root daemons\n  logout             Logout from Ambassador Cloud\n  preview            Create or remove preview domains for existing intercepts\n  pro-ingress-info   Request Ingress Info from the Cloud\n  quit               Tell telepresence daemon to quit\n  status             Show connectivity status\n  test-vpn           Test VPN configuration for compatibility with telepresence\n  uninstall          Uninstall telepresence agents\n  upload-traces      Upload Traces\n  version            Show version\n\nFlags:\n  -h, --help   help for telepresence\n\nGlobal flags:\n      --context string   The name of the kubeconfig context to use\n      --docker           Start, or connect to, daemon in a docker container\n      --no-report        Turn off anonymous crash reports and log submission on failure\n      --output string    Set the output format, supported values are 'json', 'yaml',\n                         and 'default' (default \"default\")\n\nUse \"telepresence [command] --help\" for more information about a command.\n\nFor complete documentation and quick-start guides, check out our website at https://www.telepresence.io\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/","title":"tikv","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#_1","title":"\u6784\u5efa\u200b\u6307\u5bfc","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#1","title":"1.\u200b\u73af\u5883\u200b\u51c6\u5907","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#1_1","title":"(1)\u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u8fd9\u91cc\u200b\u4f7f\u7528\u200bserver:8.4\u200b\u955c\u50cf\u200b\u4f5c\u4e3a\u200b\u6784\u5efa\u200b\u73af\u5883\u200b    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#2","title":"(2)\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305","text":"<p>yum install -y loongnix-release-epel &amp;&amp; yum clean all &amp;&amp; yum makecache  yum install -y scl-utils rpmdevtools gcc gcc-c++ protobuf-compiler  clang-libs clang-devel  perl cmake3 make &amp;&amp; yum clean all   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#3rust","title":"(3)\u200b\u5b89\u88c5\u200brust\u200b\u5de5\u5177\u200b\u94fe","text":"<p>export RUSTUP_DIST_SERVER=https://rust-lang.loongnix.cn   export RUSTUP_UPDATE_ROOT=https://rust-lang.loongnix.cn/rustup    curl --proto '=https' --tlsv1.2 -sSf https://rust-lang.loongnix.cn/rustup-init.sh | sh    rustup toolchain install nightly-2021-10-18      rustup default nightly-2021-10-18-loongarch64-unknown-linux-gnu    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#4","title":"(4)\u200b\u9a8c\u8bc1\u200b\u5de5\u5177\u200b\u94fe\u200b\u662f\u5426\u200b\u5b89\u88c5\u200b\u6210\u529f","text":"<p>rustc 1.58.0-nightly  binary: rustc  commit-hash: unknown  commit-date: unknown  host: loongarch64-unknown-linux-gnu  release: 1.58.0-nightly  LLVM version: 13.0.1   </p> <p>cargo 1.57.0-nightly  release: 1.57.0  host: loongarch64-unknown-linux-gnu  libgit2: 1.3.0 (sys:0.13.23 vendored)  libcurl: 7.64.0 (sys:0.4.49+curl-7.79.1 system ssl:OpenSSL/1.1.1d)  os: Linux 20 (DaoXiangHu) [64-bit]   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#_2","title":"\u5907\u6ce8","text":"<p>\u200b\u82e5\u200b\u7f51\u7edc\u200b\u4e0d\u597d\u200b\uff0c\u200b\u5219\u200b\u4e0b\u8f7d\u200bhttps://github.com/zhaixiaojuan/tikv/releases/Loongarch64-file.tar.gz, \u200b\u4f7f\u7528\u200bLoongarch64-file/nightly-2021-10-18-loongarch64-unknown-linux-gnu, \u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200bPATH\u200b\u8def\u5f84\u200b\u4e0b\u200b,\u200b\u6b64\u65f6\u200b\u4e0d\u518d\u200b\u9700\u8981\u200b\u6b65\u9aa4\u200b\uff083\uff09\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#2_1","title":"2. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u4e0b\u200b\u5728\u200b\u6e90\u7801\u200b\uff0c\u200b\u5207\u200b\u5230\u200bloongarch64-5.4.3\uff0c\u200b\u901a\u8fc7\u200b\u4e0b\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b</p> <p>git show ded2c0422b6d86d3cfa3b0a22799145ed73c2331  git show 992ba3648956f23072a41f292b1a85d4911499bd  git show 0ffc1de1351de938fac7b9b25faf0a171b38aeca  git show 811b3da87293fe31b1fbb726cbafdd0eda15fb91   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#3","title":"3. \u200b\u4e8c\u8fdb\u5236\u200b\u6784\u5efa","text":"<p>make build_dist_release   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/tikv/#4_1","title":"4. \u200b\u955c\u50cf\u200b\u6784\u5efa","text":"<p>make docker </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/vector/","title":"vector","text":"Note <ul> <li>\u200b\u672c\u6587\u200b\u5047\u8bbe\u200b\u7f51\u7edc\u200b\u901a\u7545\u200b\uff0c\u200b\u5982\u9047\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\u8bf7\u200b\u81ea\u884c\u89e3\u51b3\u200b</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/vector/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b \u200b\u540d\u79f0\u200b vector \u200b\u7248\u672c\u200b 0.26.0 \u200b\u9879\u76ee\u200b\u5730\u5740\u200b https://github.com/vectordotdev/vector \u200b\u5b98\u65b9\u200b\u6307\u5bfc\u200b https://vector.dev/docs/setup/installation/manual/from-source/"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/vector/#_2","title":"\u73af\u5883\u200b\u4fe1\u606f","text":"\u540d\u79f0\u200b \u200b\u63cf\u8ff0\u200b CPU 3A5000 \u200b\u7cfb\u7edf\u200b 4.19.190-7.6.lns8.loongarch64"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/vector/#_3","title":"\u79fb\u690d\u200b\u8bf4\u660e","text":"<p>\u200b\u7531\u4e8e\u200brust-musl\u200b\u6682\u672a\u200b\u652f\u6301\u200b\uff0calpine\u200b\u7248\u672c\u200b\u7684\u200bvector\u200b\u955c\u50cf\u200b\u6682\u65f6\u200b\u53ea\u6709\u200bDockerfile\uff0c\u200b\u65e0\u6cd5\u200b\u5f00\u5c55\u200b\u5236\u4f5c\u200b \u200b\u5236\u54c1\u200b vector-0.26.0-loongarch64-unknown-linux-gnu.tar.gz vector_0.26.0-1_loongarch64.deb</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/vector/#_4","title":"\u79fb\u690d\u200b\u6b65\u9aa4","text":"<p>\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u548c\u200b\u4f9d\u8d56\u200b 1. rust 1.64 +     \u200b\u5b89\u88c5\u200b\u6587\u6863\u200b 2. deb \u200b\u6253\u5305\u200b\u6240\u200b\u9700\u200b\u5de5\u5177\u200b     <code>cmark-gfm</code> <code>cargo install cargo-deb@1.39.3</code> 3. \u200b\u9879\u76ee\u200b\u6240\u200b\u9700\u200b\u5de5\u5177\u200b     - \u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200baws-smithy-async\u200b\u9700\u8981\u200b\uff1a     <code>apt-get install libsasl2-dev or dnf install cyrus-sasl-devel libssl-devel</code>     - \u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200bloki-logproto\u200b\u9700\u8981\u200b\u9ad8\u200b\u7248\u672c\u200bprotobuf \u200b\u6b64\u5904\u200b\u4f7f\u7528\u200b\u4e86\u200b3.21.12</p> <p>\u200b\u4e0b\u8f7d\u200b\u6e90\u7801\u200b <code>git clone -b v0.26.0 --depth 1 https://github.com/vectordotdev/vector</code> \u200b\u6216\u200b\u76f4\u63a5\u200b\u4e0b\u8f7d\u200b\u9002\u914d\u200b\u540e\u200b\u7684\u200b\u6e90\u7801\u200b\uff1a <code>git clone -b loongarch64-0.26.0 https://github.com/Loongson-Cloud-Community/vector.git</code></p> <p>\u200b\u79fb\u690d\u200b</p> <ul> <li>\u200b\u9879\u76ee\u200b\u672c\u8eab\u200b\u79fb\u690d\u200b\u90e8\u5206\u200b<ul> <li>Makefile\u200b\u90e8\u5206\u200b\u9002\u914d\u200bloongarch64\u200b\u7f16\u8bd1\u200b\u76ee\u6807\u200b\uff0c\u200b\u5305\u62ec\u200b<code>build-loong64-unknown-linux-gnu \u3001 build-loong64-unknown-linux-musl</code> \u200b\u7b49\u200b\uff0c\u200b\u5177\u4f53\u200b\u89c1\u200b</li> <li>\u200b\u9002\u914d\u200bDockerfile\uff0c<code>distribution/docker/</code>\uff0c\u200b\u4e3b\u8981\u200b\u4fee\u6539\u200bvector\u200b\u83b7\u53d6\u200b\u7684\u200burl\u200b\u4ee5\u53ca\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b</li> </ul> </li> <li>\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u9700\u8981\u200b\u4e0b\u8f7d\u200b\u540e\u200b\u79fb\u690d\u200b\u6216\u200b\u66f4\u65b0\u200b\u7684\u200b\u652f\u6301\u200bLA\u200b\u7684\u200b\u7248\u672c\u200b\uff0c\u200b\u4e3a\u4e86\u200b\u66f4\u597d\u200b\u652f\u6301\u200b\u6307\u5b9a\u200b\u7684\u200bvector\u200b\u7248\u672c\u200b\uff0c\u200b\u9009\u62e9\u200b\u79bb\u7ebf\u200b\u9002\u914d\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u79fb\u690d\u200b<ul> <li>\u200b\u6267\u884c\u200b <code>cargo vendor</code> \u200b\u83b7\u53d6\u200b\u79bb\u7ebf\u200bvendor\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5e76\u200b\u6839\u636e\u200b\u63d0\u793a\u200b\u5c06\u200b\u6307\u5b9a\u200b\u5185\u5bb9\u200b\u6dfb\u52a0\u200b\u5230\u200b<code>.cargo/config.toml</code>\u200b\u4e2d\u200b\uff0c\u200b\u4fdd\u8bc1\u200b\u9879\u76ee\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u4f7f\u7528\u200bvendor\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u9002\u914d\u200b\u597d\u200b\u7684\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b</li> <li>\u200b\u9002\u914d\u200b\u9879\u76ee\u200b\u5305\u62ec\u200b\uff1alinux-raw-sys \u200b\u591a\u4e2a\u200b\u7248\u672c\u200b\uff0cnix \u200b\u591a\u200b\u7248\u672c\u200b\uff0crustix-0.34.4\uff0cring\uff0cheim-host\uff0ctikv-jemalloc-sys\uff0c\u200b\u4e0b\u9762\u200b\u5177\u4f53\u200b\u7ed9\u51fa\u200b\u9002\u914d\u200b\u8fc7\u7a0b\u200b\u53ca\u200b\u76f8\u5173\u200b\u4fe1\u606f\u200b<ul> <li>\u200b\u4fee\u6539\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u540e\u200b\uff0crust\u200b\u7f16\u8bd1\u200b\u524d\u4f1a\u200b\u6821\u9a8c\u200b\u5b57\u200b\u6bb5\u200b\u62a5\u9519\u200b\u5982\u200b\uff1a     <pre><code> error: the listed checksum of `/rust-xxx/vendor/async-channel/tests/bounded.rs` has changed:\nexpected: b4818293e8a4080b7bc2107b1b5704678d2984e99bb3647219f8aa61aaf189fc\nactual:   788245e613eb88beb150fd7817606581399eee1df63f6fbbd72ff4509fc8f63c\ndirectory sources are not intended to be edited, if modifications are required then it is recommended that `[patch]` is used with a forked copy of the source\nThe command '/bin/sh -c cargo build --release --offline' returned a non-zero code: 101\nERROR: Job failed: exit status 1\n</code></pre>     \u200b\u4fee\u6539\u200b\u8be5\u9879\u200b\u76ee\u7684\u200b.cargo-checksum.json\uff0c<code>sed -i 's/expected-list/actual-list/g' ../.cargo-checksum.json</code></li> <li>linux-raw-sys<ul> <li>\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200bsrc/loongarch64 \u200b\u6587\u4ef6\u5939\u200b\uff0c\u200b\u6587\u4ef6\u5939\u200b\u5185\u5bb9\u200b\u5df2\u7ecf\u200b\u5728\u200b\u8be5\u200b\u9879\u76ee\u200b\u9ad8\u200b\u7248\u672c\u200b\uff0c\u200b\u76f4\u63a5\u200b\u590d\u5236\u200b\u5373\u53ef\u200bLA\u200b\u90e8\u5206\u200b</li> <li>src/lib.rs\u200b\u90e8\u5206\u200b\u6dfb\u52a0\u200bloongarch\uff0c\u200b\u89c1\u200bhttps://github.com/sunfishcode/linux-raw-sys/blob/main/src/lib.rs</li> </ul> </li> <li>nix<ul> <li>src/sys/ioctl/linux.rs \u200b\u90e8\u5206\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b<code>target_arch = \"loongarch64\"</code> https://github.com/Loongson-Cloud-Community/vector/blob/loongarch64-0.26.0/vendor/nix/src/sys/ioctl/linux.rs</li> <li>\u200b\u4fee\u6539\u200bopenssl-src\u200b\u9879\u76ee\u200b\u7684\u200bsrc/lib.rs https://github.com/Loongson-Cloud-Community/vector/blob/loongarch64-0.26.0/vendor/openssl-src/src/lib.rs</li> </ul> </li> <li>rustix<ul> <li>\u200b\u6309\u7167\u200b\u641c\u7d22\u200b\u7684\u200b\u4e0a\u6e38\u200bLA\u200b\u5185\u5bb9\u200b\u6dfb\u52a0\u200b https://github.com/search?q=repo%3Abytecodealliance%2Frustix%20loong&amp;type=code</li> </ul> </li> <li>ring<ul> <li>\u200b\u6309\u7167\u200b\u4e0b\u9762\u200b\u7684\u200b\u4ee3\u7801\u200b\u6dfb\u52a0\u200bLA\u200b\u67b6\u6784\u200b\u540e\u200b\uff0c\u200b\u8be5\u200b\u95ee\u9898\u200b\u89e3\u51b3\u200b ring/include/GFp/base.h <pre>\n72 #if defined(x86_64) || defined(_M_AMD64) || defined(_M_X64)\n73 #define OPENSSL_64_BIT\n74 #define OPENSSL_X86_64\n75 #elif defined(__x86) || defined(__i386) || defined(__i386) || defined(_M_IX86)\n76 #define OPENSSL_32_BIT\n77 #define OPENSSL_X86\n78 #elif defined(AARCH64EL) || defined(_M_ARM64)\n79 #define OPENSSL_64_BIT\n80 #define OPENSSL_AARCH64\n81 #elif defined(ARMEL) || defined(_M_ARM)\n82 #define OPENSSL_32_BIT\n83 #define OPENSSL_ARM\n84 #elif defined(MIPSEL) &amp;&amp; !defined(LP64)\n85 #define OPENSSL_32_BIT\n86 #define OPENSSL_MIPS\n87 #elif defined(MIPSEL) &amp;&amp; defined(LP64)\n88 #define OPENSSL_64_BIT\n89 #define OPENSSL_MIPS64\n90 #elif defined(wasm)\n91 #define OPENSSL_32_BIT\n92 #elif defined(__loongarch64)\n93 #define OPENSSL_64_BIT\n94 #define OPENSSL_LOONGARCH64\n95 #else\n96 // Note BoringSSL only supports standard 32-bit and 64-bit two's-complement,\n97 // little-endian architectures. Functions will not produce the correct answer\n98 // on other systems. Run the crypto_test binary, notably\n99 // crypto/compiler_test.cc, before adding a new architecture.\n100 #error \"Unknown target CPU\"\n101 #endif\n</pre></li> <li>ring/src/rand.rs <pre>\n208         #[cfg(target_arch = \"aarch64\")]\n209         const SYS_GETRANDOM: c_long = 278;\n210\n211         #[cfg(target_arch = \"arm\")]\n212         const SYS_GETRANDOM: c_long = 384;\n213\n214         #[cfg(target_arch = \"loongarch64\")]\n215         const SYS_GETRANDOM: c_long = 278;\n216\n217         #[cfg(target_arch = \"x86\")]\n218         const SYS_GETRANDOM: c_long = 355;\n219\n220         #[cfg(target_arch = \"x86_64\")]\n221         const SYS_GETRANDOM: c_long = 318;\n</pre></li> </ul> </li> <li>heim-host<ul> <li>heim-host/src/os/linux.rs <code>cfg_if::cfg_if! { // aarch64-unknown-linux-gnu has different type if #[cfg(all(any(target_arch = \"aarch64\", target_arch = \"loongarch64\"), not(target_family = \"musl\")))] {     /// User session ID.     pub type SessionId = i64; } else {     /// User session ID.     pub type SessionId = i32; } }</code></li> </ul> </li> <li>tikv-jemalloc-sys<ul> <li>\u200b\u4fee\u6539\u200btikv-jemallocator/benches/roundtrip.rs tikv-jemallocator/src/lib.rs <pre><code>            const MIN_ALIGN: usize = 8;\n#[cfg(all(any(\n    target_arch = \"x86\",\n    target_arch = \"x86_64\",\n    target_arch = \"aarch64\",\n    target_arch = \"powerpc64\",\n    target_arch = \"powerpc64le\",\n    target_arch = \"loongarch64\",\n    target_arch = \"mips64\",\n    target_arch = \"riscv64\",\n    target_arch = \"s390x\",\n    target_arch = \"sparc64\"\n)))]\nconst MIN_ALIGN: usize = 16;\n</code></pre> <pre><code>            #[cfg(all(any(\n    target_arch = \"x86\",\n    target_arch = \"x86_64\",\n    target_arch = \"aarch64\",\n    target_arch = \"powerpc64\",\n    target_arch = \"powerpc64le\",\n    target_arch = \"loongarch64\",\n    target_arch = \"mips64\",\n    target_arch = \"riscv64\",\n    target_arch = \"s390x\",\n    target_arch = \"sparc64\"\n)))]\nconst ALIGNOF_MAX_ALIGN_T: usize = 16;\n</code></pre></li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>\u200b\u7f16\u8bd1\u200b 1. \u200b\u7f16\u8bd1\u200bvector\u200b\u4e8c\u8fdb\u5236\u200b <pre><code>make build\nor\ncargo build --release --no-default-features --verbose\n</code></pre> 2. \u200b\u6253\u5305\u200bloongarch\u200b\u67b6\u6784\u200b\u4e0b\u200b\u7684\u200bvector tar\u3001rpm\u3001deb\u200b\u5305\u200b <pre><code>TARGET=loongarch64-unknown-linux-gnu bash scripts/package-archieve.sh\nTARGET=loongarch64-unknown-linux-gnu bash scripts/package-deb.sh\nTARGET=loongarch64-unknown-linux-gnu bash scripts/package-rpm.sh\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/","title":"weaveworks-scope","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"<p>scope\u200b\u5e2e\u52a9\u200b\u4f60\u200b\u80fd\u591f\u200b\u76f4\u89c2\u200b\u7684\u200b\u4e86\u89e3\u200b\u3001\u200b\u76d1\u89c6\u200b\u548c\u200b\u63a7\u5236\u200b\u5bb9\u5668\u200b\u5316\u200b\u3001\u200b\u57fa\u4e8e\u200b\u5fae\u200b\u670d\u52a1\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3002\u200b\u53ef\u4ee5\u200b\u76d1\u63a7\u200bk8s\u200b\u96c6\u7fa4\u200b\u7684\u200b\u4e00\u7cfb\u5217\u200b\u8d44\u6e90\u200b\u7684\u200b\u72b6\u6001\u200b\u3001\u200b\u8d44\u6e90\u200b\u4f7f\u7528\u200b\u60c5\u51b5\u200b\u3001\u200b\u5e94\u7528\u200b\u62d3\u6251\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u901a\u8fc7\u200bUI\u200b\u754c\u9762\u200b\u8fdb\u884c\u200b\u8c03\u8bd5\u200b\u3001\u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b\u7b49\u200b\u64cd\u4f5c\u200b\u4ee5\u200b\u5b9e\u65f6\u200b\u4e86\u89e3\u200bdocker\u200b\u5bb9\u5668\u200b\uff0c\u200b\u7c7b\u4f3c\u200b\u4e0e\u200bzabbix\u200b\u7b49\u200b\u76d1\u63a7\u200b\u670d\u52a1\u200b\u3002   \u200b\u9879\u76ee\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/scope/tree/loong64-1.13.0       \u200b\u9879\u76ee\u200b\u5206\u652f\u200b\uff1aloong64-1.13.0     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#_2","title":"\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u5177\u4f53\u200b\u4fee\u6539\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b <pre><code>git show e67356a970495fac20ac168c874b366d2fb51f93\ngit show abe42d11d984df193e25b2ae3ced171da53ac96e\ngit show 9f297fb798bcbf31094e15c3fb840d65d15e7e36\ngit show 428a8de5c67cb781c9e5abd8a647d90cb23eeed6\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#_3","title":"\u9879\u76ee\u200b\u6784\u5efa","text":"<p>\u200b\u63d0\u524d\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200b:    <pre><code>cr.loongnix.cn/library/golang:1.15     \ncr.loongnix.cn/library/node:10.24.1-debian      \n</code></pre> \u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a <pre><code>make\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#_4","title":"\u6784\u5efa\u200b\u7ed3\u679c","text":"<p>make\u200b\u6267\u884c\u200b\u6210\u529f\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u751f\u6210\u200b4\u200b\u4e2a\u200b\u955c\u50cf\u200b   <pre><code>cr.loongnix.cn/weaveworks/scope-ui-build:1.13.0     \ncr.loongnix.cn/weaveworks/scope-backend-build:1.13.0     \ncr.loongnix.cn/weaveworks/cloud-agent:1.13.0     \ncr.loongnix.cn/weaveworks/scope:1.13.0    \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#scope-backend-build","title":"scope-backend-build","text":"<p>\u200b\u751f\u6210\u200b\u8be5\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bbackend/Dockerfile\uff0c\u200b\u8be5\u200b\u955c\u50cf\u200b\u662f\u200b\u6839\u200b\u955c\u50cf\u200b\uff0c\u200b\u4e3b\u8981\u200b\u914d\u7f6e\u200b\u4e86\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\u5305\u62ec\u200b\u5b89\u88c5\u200b\u5fc5\u8981\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u3001go\u200b\u7684\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u53ca\u5e93\u200b\u6587\u4ef6\u200b\uff08libpacp\uff09\u200b\u7b49\u200b\u3002     \u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u7684\u200b\u6784\u5efa\u200b\u4e5f\u200b\u90fd\u200b\u662f\u200b\u5728\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e2d\u200b\u6267\u884c\u200b\u7684\u200b\uff1a   \u200b\u5305\u62ec\u200b\u6587\u4ef6\u200b\uff1aprog/staticui/staticui.go, prog/externalui/externalui.go //\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6ca1\u6709\u200bmain\uff0c\u200b\u6240\u4ee5\u200b\u6784\u5efa\u200b\u5b8c\u540e\u200b\u4e0d\u4f1a\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u751f\u6210\u200b\u5e93\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u6784\u5efa\u200b\u4ec5\u4ec5\u200b\u662f\u200b\u7528\u4f8b\u200b\u68c0\u6d4b\u200b\u8fd9\u200b\u4e24\u4e2a\u200b\u6587\u4ef6\u200b\u662f\u5426\u200b\u6709\u200b\u8bed\u6cd5\u200b\u7b49\u200b\u9519\u8bef\u200b\u3002   \u200b\u6784\u5efa\u200b\u4e8c\u8fdb\u5236\u200b\uff1a\uff1a  \u200b\u7f16\u8bd1\u200bscope\u200b\u6e90\u7801\u200b\u751f\u6210\u200bprog/scope\u200b\u4e8c\u8fdb\u5236\u200b    \u200b\u7f16\u8bd1\u200bvendor/github.com/peterbourgon/runsvinit\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200bvendor/github.com/peterbourgon/runsvinit/runsvinit     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#cloud-agent","title":"cloud-agent","text":"<p>\u200b\u8be5\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bdocker/Dockerfile.cloud-agent\u3002\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e2d\u200b\u4e3b\u8981\u200b\u5b58\u50a8\u200b\u4e86\u200bscope\u200b\u4e8c\u8fdb\u5236\u200b\uff0c\u200b\u5e76\u200b\u542f\u52a8\u200b\u8be5\u200b\u4e8c\u8fdb\u5236\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#scope-ui-build","title":"scope-ui-build","text":"<p>\u200b\u8be5\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bclient/Dockerfile\uff0c\u200b\u8be5\u200b\u955c\u50cf\u200b\u7528\u6765\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u73af\u5883\u53d8\u91cf\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#scope","title":"scope","text":"<p>\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bdocker/Dockerfile.scope\u3002\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u4e86\u200b\uff1a   \u200b\u811a\u672c\u200bweave\uff1a\u200b\u7528\u6765\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200bweaveexec, weave, weavedb   \u200b\u4e8c\u8fdb\u5236\u200brunsvinit   \u200b\u811a\u672c\u200brun-app\uff1a\u200b\u6267\u884c\u200bscope\u200b\u65f6\u200b\u4f20\u5165\u200b\u53c2\u6570\u200bscope-app    \u200b\u811a\u672c\u200brun-probe\uff1a\u200b\u5728\u200b\u6267\u884c\u200bscope\u200b\u65f6\u200b\u4f20\u5165\u200b\u53c2\u6570\u200bscope-probe     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-scope/#_5","title":"\u90e8\u7f72\u200b\u6d4b\u8bd5","text":"<p><pre><code>wget https://github.com/Loongson-Cloud-Community/scope/blob/loong64-1.13.0/scope     \nmv scope /usr/local/bin/scope\nchmod a+x /usr/local/bin/scope\n//\u200b\u90e8\u7f72\u200b\u5b89\u88c5\u200bscope,\u200b\u8bbe\u5b9a\u200b\u7528\u6237\u200bmyuser, \u200b\u5bc6\u7801\u200bmypassword\nsudo scope launch -app.basicAuth -app.basicAuth.password mypassword -app.basicAuth.username myuser -probe.basicAuth -probe.basicAuth.password mypassword -probe.basicAuth.username myuser\n</code></pre> \u200b\u6b64\u65f6\u200b\u5728\u200b\u673a\u5668\u200b\u4e0a\u200b\u4f1a\u200b\u542f\u52a8\u200b\u4e00\u4e2a\u200bscope\u200b\u7684\u200b\u5bb9\u5668\u200b\uff1a <pre><code>root@node1:/home/workspace/scope-test# docker ps\nCONTAINER ID   IMAGE    COMMAND   CREATED  STATUS   PORTS    NAMES\nfe3f9aa32121   cr.loongnix.cn/weaveworks/scope:1.13.0   \"/home/weave/entrypo\u2026\"   16 minutes ago   Up 16 minutes    weavescope\n</code></pre> \u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8f93\u5165\u200b\u672c\u200b\u673a\u200bip\u200b\u5730\u5740\u200b\uff1a4040\u200b\u7aef\u53e3\u200b\uff0c\u200b\u5e76\u200b\u8f93\u5165\u200b\u7528\u6237\u540d\u200b\u548c\u200b\u5bc6\u7801\u200b\uff08myuser mypassword\uff09</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/","title":"weaveworks-weave","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#_1","title":"\u9879\u76ee\u200b\u4fe1\u606f","text":"<p>weave\u200b\u662f\u200bweaveworks\u200b\u516c\u53f8\u200b\u7684\u200b\u6838\u5fc3\u200b\u9879\u76ee\u200b\uff0c\u200b\u7528\u6765\u200b\u89e3\u51b3\u200bdocker\u200b\u7f51\u7edc\u200b\u95ee\u9898\u200b\uff0cweave\u200b\u521b\u5efa\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u7edc\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u90e8\u7f72\u200b\u5728\u200b\u591a\u4e2a\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u5bb9\u5668\u200b\u8fde\u63a5\u8d77\u6765\u200b\uff0c\u200b\u5bf9\u200b\u5bb9\u5668\u200b\u6765\u8bf4\u200b\uff0cweave\u200b\u5c31\u200b\u50cf\u200b\u4e00\u4e2a\u200b\u5de8\u5927\u200b\u7684\u200b\u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u200b\uff0c\u200b\u6240\u6709\u200b\u4ecb\u5165\u200b\u8fd9\u4e2a\u200b\u4ea4\u6362\u673a\u200b\u7684\u200b\u5bb9\u5668\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u901a\u4fe1\u200b\u3002   \u200b\u9879\u76ee\u200b\u5730\u5740\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/weave/tree/loong64-2.1.3        \u200b\u9879\u76ee\u200b\u5206\u652f\u200b\uff1aloong64-2.1.3                </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#_2","title":"\u9879\u76ee\u200b\u6784\u5efa","text":"<p>\u200b\u51c6\u5907\u200b\uff1a\u200b\u63d0\u524d\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200bcr.loongnix.cn/library/alpine:3.11.11           \u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a           ARCH=loong64 ALPINE_BASEIMAGE=cr.loongnix.cn/library/alpine:3.11.11 make</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#_3","title":"\u6784\u5efa\u200b\u7ed3\u679c","text":"<p>make\u200b\u6267\u884c\u200b\u6210\u529f\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u751f\u6210\u200b\u4ee5\u4e0b\u200b\u955c\u50cf\u200b\uff1a <pre><code>cr.loongnix.cn/weaveworks/weavebuild:2.1.3\ncr.loongnix.cn/weaveworks/weave-npc:2.1.3                                   \ncr.loongnix.cn/weaveworks/weave-kube:2.1.3                                     \ncr.loongnix.cn/weaveworks/weaveexec:2.1.3                                \ncr.loongnix.cn/weaveworks/weave:2.1.3  \ncr.loongnix.cn/weaveworks/weavedb:2.1.3  \n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weavebuild","title":"weavebuild","text":"<p>\u200b\u751f\u6210\u200b\u8be5\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bbuild/Dockerfile\uff0c\u200b\u8be5\u200b\u955c\u50cf\u200b\u662f\u200b\u540e\u9762\u200b\u5176\u4ed6\u200b\u51e0\u4e2a\u200b\u955c\u50cf\u200b\u7684\u200b\u57fa\u7840\u200b\u955c\u50cf\u200b\uff0c\u200b\u4e3b\u8981\u200b\u914d\u7f6e\u200b\u4e86\u200b\u6784\u5efa\u200b\u73af\u5883\u200b\u5305\u62ec\u200b\u5b89\u88c5\u200b\u5fc5\u8981\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u3001go\u200b\u7684\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u53ca\u5e93\u200b\u6587\u4ef6\u200b\uff08libpacp\uff09\u200b\u7b49\u200b\u3002  \u200b\u9879\u76ee\u200b\u6e90\u7801\u200b\u7684\u200b\u6784\u5efa\u200b\u4e5f\u200b\u90fd\u200b\u662f\u200b\u5728\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e2d\u200b\u6267\u884c\u200b\u7684\u200b\uff0c\u200b\u5305\u62ec\u200b\u4e8c\u8fdb\u5236\u200b\uff1aprog/weaver/weave\u3001prog/weaveutil/weaveutile\u3001prog/sigproxy/sigproxy\u3001prog/weavewait/weavewait, prog/weavewait/weavewait_noop, prog/weavewait/weavewait_nomcast, prog/kube-peers/kube-peers, prog/weave-npc/weave-npc        </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weave","title":"weave","text":"<p>\u200b\u8be5\u200b\u955c\u50cf\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bprog/weaver/Dockerfile.weaveworks\u200b\u662f\u200b\u4e3b\u7a0b\u5e8f\u200b\uff0c\u200b\u8d1f\u8d23\u200b\u5efa\u7acb\u200bweave\u200b\u7f51\u7edc\u200b\uff0c\u200b\u6536\u53d1\u200b\u6570\u636e\u200b\uff0c\u200b\u63d0\u4f9b\u200bDNS\u200b\u670d\u52a1\u200b\u3002\u200b\u5176\u4e2d\u200b\u4e3b\u8981\u200b\u5305\u542b\u200b\u4e86\u200b\u4e8c\u8fdb\u5236\u200bprog/weaver/weaver, prog/weaveutil/weaveutil\u200b\u548c\u200bshell\u200b\u811a\u672c\u200bprog/weaver/weave\u3002                       weave: \u200b\u7528\u6237\u200b\u6001\u200b\u7684\u200bshell\u200b\u811a\u672c\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b89\u88c5\u200bweave,\u200b\u5c06\u200bcontainer\u200b\u8fde\u63a5\u200b\u5230\u200bweave\u200b\u865a\u62df\u200b\u7f51\u7edc\u200b\uff0c\u200b\u5e76\u200b\u4e3a\u200b\u4ed6\u4eec\u200b\u5206\u914d\u200bIP\u3002     weaver: \u200b\u8fd0\u884c\u200b\u4e8e\u200bcontainer\u200b\u5185\u200b\uff0c\u200b\u6bcf\u4e2a\u200bweave\u200b\u7f51\u7edc\u200b\u5185\u200b\u7684\u200b\u4e3b\u673a\u200b\u90fd\u200b\u8981\u200b\u8fd0\u884c\u200b\uff0c\u200b\u662f\u200b\u4f7f\u7528\u200bgo\u200b\u8bed\u8a00\u200b\u5b9e\u73b0\u200b\u7684\u200b\u865a\u62df\u200b\u7f51\u7edc\u200b\u8def\u7531\u5668\u200b\u3002\u200b\u4e0d\u540c\u200b\u4e3b\u673a\u200b\u4e4b\u95f4\u200b\u7684\u200b\u7f51\u7edc\u901a\u4fe1\u200b\u4f9d\u8d56\u4e8e\u200bweaver\u200b\u8def\u7531\u200b\u3002 \u200b\u53c2\u8003\u200b\uff1ahttps://cloud.tencent.com/developer/article/1027318                </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weaveexec","title":"weaveexec","text":"<p>\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bprog/weaveexec/Dockerfile.weaveworks\u3002\u200b\u8be5\u200b\u955c\u50cf\u200b\u662f\u200blibnetwork CNM driver,\u200b\u5b9e\u73b0\u200bdocker\u200b\u7f51\u7edc\u200b\u3002\u200b\u5176\u4e2d\u200b\u4e3b\u8981\u200b\u5305\u542b\u200b\u4e86\u200b\u4e8c\u8fdb\u5236\u200bprog/sigproxy/sigproxy,prog/weavewait/weavewait,prog/weavewait/weavewait_noop, prog/weavewait/weavewait_nomcast\u3002            \u200b\u53c2\u8003\u200b\uff1ahttps://www.feiyiblog.com/2020/04/06/Docker%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C-weave/       </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weave-kube","title":"weave-kube","text":"<p>\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e3b\u8981\u200b\u5305\u542b\u200b\u4e86\u200b\u4e8c\u8fdb\u5236\u200bprog/kube-peers/kube-peers\u3002\u200b\u5728\u200bweavenet\u200b\u53ef\u4ee5\u200b\u81ea\u52a8\u200b\u4e3a\u200b\u5bb9\u5668\u200b\u5206\u914d\u200bIP\u200b\u5730\u5740\u200b\uff0c\u200b\u5e76\u200b\u57fa\u4e8e\u200bVxLAN\u200b\u534f\u8bae\u200b\u4e3a\u200b\u5bb9\u5668\u200b\u63d0\u4f9b\u200b\u8de8\u200b\u4e3b\u673a\u200b\u901a\u4fe1\u200b\u80fd\u529b\u200b\u3002\u200b\u5728\u200bweavenet\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u53f0\u200b\u4e3b\u673a\u200b\u90fd\u200b\u8fd0\u884c\u200b\u7740\u200b\u4e00\u4e2a\u200bweave peer\uff0c\u200b\u6bcf\u4e2a\u200bpeer\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u540d\u79f0\u200b\uff0c\u200b\u91cd\u542f\u200b\u4fdd\u6301\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4e4b\u95f4\u200b\u901a\u8fc7\u200bTCP\u200b\u8fde\u63a5\u200b\u5f7c\u6b64\u200b\uff0c\u200b\u5efa\u7acb\u200b\u540e\u200b\u4ea4\u6362\u200b\u62d3\u6251\u200b\u4fe1\u606f\u200b\u3002     weave net\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5177\u6709\u200b\u7f16\u53f7\u200b\u62d3\u6251\u200b\u90e8\u5206\u200b\u8fde\u63a5\u200b\u7684\u200b\u7f51\u7edc\u200b\u4e2d\u8def\u200b\u7531\u200b\u6570\u636e\u5305\u200b\u3002\u200b\u5982\u200b\u5728\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\uff0cpeer1\u200b\u76f4\u63a5\u200b\u8fde\u63a5\u200b2\u200b\u548c\u200b3,\u200b\u4f46\u662f\u200b\u5982\u679c\u200b1\u200b\u9700\u8981\u200b\u53d1\u9001\u200b\u6570\u636e\u5305\u200b\u5230\u200b4\u200b\u548c\u200b5,\u200b\u5219\u200b\u5fc5\u987b\u200b\u5148\u200b\u5c06\u200b\u5176\u200b\u53d1\u9001\u5230\u200bpeer3\u3002    \u200b\u53c2\u8003\u200b\uff1ahttps://blog.csdn.net/lfs666666/article/details/111821138     https://blog.51cto.com/u_13045706/3834774     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weave-npc","title":"weave-npc","text":"<p>\u200b\u8be5\u200b\u955c\u50cf\u200b\u4e3b\u8981\u200b\u5305\u542b\u200b\u4e86\u200b\u4e8c\u8fdb\u5236\u200bweave-npc, weave-npc\u200b\u4f7f\u7528\u200biptables\u200b\u6765\u200b\u751f\u6548\u200bnetwork policy\uff0c\u200b\u63a7\u5236\u200b\u63a5\u5165\u200b\u8f93\u51fa\u200b\u3002    \u200b\u53c2\u8003\u200b\uff1ahttps://juejin.cn/post/6935333405810753543      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#weavedb","title":"weavedb","text":"<p>\u200b\u4f7f\u7528\u200b\u7684\u200bdockerfile\u200b\u662f\u200bprog/weavedb/Dockefile,\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7a7a\u200b\u955c\u50cf\u200b\u3002    </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#_4","title":"\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u8be6\u7ec6\u200b\u7684\u200b\u6e90\u7801\u200b\u4fee\u6539\u200b\u53ef\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\uff1a <pre><code>git show ae49ea3dafacb457e2c0d3aeec300796ec662b05\ngit show 2140d55f11135df4628ee6a93d7b89fb70da563a\n</code></pre></p> <p>\u200b\u4e0b\u9762\u200b\u662f\u200b\u9488\u5bf9\u200b\u4e00\u4e9b\u200b\u4fee\u6539\u200b\u6dfb\u52a0\u200b\u7684\u200b\u89e3\u91ca\u200b   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#makefile","title":"Makefile","text":"<p>\uff081\uff09\u200b\u5728\u200bMakefile\u200b\u4e2d\u200b\u6ce8\u91ca\u200b\u4e86\u200b\u5173\u4e8e\u200bqemu\u200b\u76f8\u5173\u200b\u7684\u200b\u5185\u5bb9\u200b\uff0c\u200b\u901a\u8fc7\u200b\u67e5\u770b\u200b\u6ce8\u91ca\u200bqemu\u200b\u4e3b\u8981\u200b\u662f\u200b\u5728\u200bx86\u200b\u4e0a\u200b\u4ea4\u53c9\u200b\u6784\u5efa\u200b\u522b\u7684\u200b\u67b6\u6784\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fd9\u91cc\u200b\u6ce8\u91ca\u200b\u3002 <pre><code>diff --git a/Makefile b/Makefile\nindex ece9c260..ef1a32c6 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -249,7 +251,7 @@ endif\n # It also makes sure the multiarch hooks are reqistered in the kernel so the QEMU emulation works\n $(BUILD_UPTODATE): build/*\n        $(SUDO) docker build -t $(BUILD_IMAGE) build/\n-       $(SUDO) docker run --rm --privileged multiarch/qemu-user-static:register --reset\n+#      $(SUDO) docker run --rm --privileged multiarch/qemu-user-static:register --reset\n        touch $@\n\n@@ -265,8 +267,8 @@ ifeq ($(ARCH),amd64)\n else\n # When cross-building, only the placeholder \"CROSS_BUILD_\" should be removed\n # Register /usr/bin/qemu-ARCH-static as the handler for ARM and ppc64le binaries in the kernel\n-       curl -sSL https://github.com/multiarch/qemu-user-static/releases/download/$(QEMU_VERSION)/x86_64_qemu-$(QEMUARCH)-static.tar.gz | tar -xz -C $(shell dirname $@)\n-       cd $(shell dirname $@) &amp;&amp; sha256sum -c $(shell pwd)/build/shasums/qemu-$(QEMUARCH)-static.sha256sum\n+       #curl -sSL https://github.com/multiarch/qemu-user-static/releases/download/$(QEMU_VERSION)/x86_64_qemu-$(QEMUARCH)-static.tar.gz | tar -xz -C $(shell dirname $@)\n+       #cd $(shell dirname $@) &amp;&amp; sha256sum -c $(shell pwd)/build/shasums/qemu-$(QEMUARCH)-static.sha256sum\n</code></pre></p> <p>\uff082\uff09\u200b\u4fee\u6539\u200b\u4e86\u200bvendor\u200b\u4e2d\u200b\u5185\u5bb9\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200b\u6784\u5efa\u200b\u65f6\u200b\uff0c\u200b\u4e0d\u518d\u200b\u8fdb\u884c\u200b\u5b50\u200b\u6a21\u5757\u200b\u66f4\u65b0\u200b <pre><code>diff --git a/Makefile b/Makefile\nindex ece9c260..ef1a32c6 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -196,9 +198,9 @@ ifeq ($(BUILD_IN_CONTAINER),true)\n # This make target compiles all binaries inside of the weaveworks/build container\n # It bind-mounts the source into the container and passes all important variables\n exes $(EXES) tests lint: $(BUILD_UPTODATE)\n-       git submodule update --init\n+       #git submodule update --init\n # Containernetworking has another copy of vishvananda/netlink which leads to duplicate definitions\n-       -@rm -r vendor/github.com/containernetworking/cni/vendor\n+       #-@rm -r vendor/github.com/containernetworking/cni/vendor\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#builddockerfile","title":"build/Dockerfile","text":"<p>\uff081\uff09\u200b\u5728\u200b\u76ee\u524d\u200b\u9f99\u82af\u200bdebian\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u5de5\u5177\u200bshfmt, \u200b\u8be5\u200b\u5de5\u5177\u200b\u662f\u200b\u7528\u6765\u200b\u683c\u5f0f\u5316\u200bshell\u200b\u7a0b\u5e8f\u200b\u7684\u200b\uff0c\u200b\u975e\u5173\u952e\u200b\u4f5c\u7528\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fd9\u91cc\u200b\u5220\u9664\u200b  <pre><code>@@ -43,25 +41,29 @@ RUN apt-get update \\\n                flex \\\n                bison\n\n-RUN curl -fsSLo shfmt https://github.com/mvdan/sh/releases/download/v1.3.0/shfmt_v1.3.0_linux_amd64 &amp;&amp; \\\n-       echo \"b1925c2c405458811f0c227266402cf1868b4de529f114722c2e3a5af4ac7bb2  shfmt\" | sha256sum -c &amp;&amp; \\\n-       chmod +x shfmt &amp;&amp; \\\n-       mv shfmt /usr/bin\n</code></pre> \uff082\uff09\u200b\u5220\u9664\u200b\u4ea4\u53c9\u200b\u7f16\u8bd1\u200b\u5de5\u5177\u200b\u90e8\u5206\u200b <pre><code> # Temporarily add the Debian repositories, because we're going to install gcc cross-compilers from there\n # Install the build-essential and crossbuild-essential-ARCH packages\n-RUN echo \"deb http://emdebian.org/tools/debian/ jessie main\" &gt; /etc/apt/sources.list.d/cgocrosscompiling.list \\\n-  &amp;&amp; curl http://emdebian.org/tools/debian/emdebian-toolchain-archive.key | apt-key add - \\\n</code></pre> \uff083\uff09\u200b\u5728\u200bgolang\u200b\u4e2d\u200bLA\u200b\u67b6\u6784\u200b\u4e0d\u200b\u652f\u6301\u200b-race\u200b\u7279\u6027\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5220\u9664\u200b <pre><code> RUN go clean -i net \\\n-       &amp;&amp; go install -tags netgo std \\\n-       &amp;&amp; go install -race -tags netgo std\n+       &amp;&amp; go install -tags netgo std\n</code></pre> \uff084\uff09\u200b\u4e0b\u8f7d\u200b\u7684\u200blibpcap\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200bconfig.sub\u200b\u548c\u200bconfig.guess\u200b\u4e0d\u200b\u652f\u6301\u200bLA\u200b\u67b6\u6784\u200b\uff0c\u200b\u83b7\u53d6\u200b\u652f\u6301\u200bLA\u200b\u67b6\u6784\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5e76\u200b\u8fdb\u884c\u200b\u66ff\u6362\u200b <pre><code>@@ -76,6 +78,8 @@ RUN chmod -R a+w /usr/local/go\n ENV LIBPCAP_CROSS_VERSION=1.6.2\n RUN curl -sSL http://www.tcpdump.org/release/libpcap-${LIBPCAP_CROSS_VERSION}.tar.gz | tar -xz \\\n        &amp;&amp; cd libpcap-${LIBPCAP_CROSS_VERSION} \\\n+       &amp;&amp; wget -O ./config.sub \"git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\" \\\n+       &amp;&amp; wget -O ./config.guess \"git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\" \\\n        &amp;&amp; for crosscompiler in ${GCC_CROSSCOMPILERS}; do \\\n                CC=${crosscompiler}-gcc ac_cv_linux_vers=2 ./configure --host=${crosscompiler} --with-pcap=linux \\\n</code></pre> \uff085\uff09go mod \u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u4e0b\u8f7d\u200b <pre><code> # Install common Go tools\n-RUN go get \\\n-       github.com/golang/lint/golint \\\n-       github.com/fzipp/gocyclo \\\n-       github.com/fatih/hclfmt \\\n-       github.com/client9/misspell/cmd/misspell\n+\n+ENV https_proxy=http://10.130.0.16:7890\n+RUN go env -w GO111MODULE=on \\\n+       &amp;&amp; go env -w GOSUMDB=off \\\n+       &amp;&amp; go get \\\n+       golang.org/x/lint/golint \\\n+       github.com/fzipp/gocyclo@v0.3.0 \\\n+       github.com/fatih/hclfmt \\\n+       github.com/client9/misspell/cmd/misspell \\\n+       &amp;&amp; go env -w GO111MODULE=\"\"\n</code></pre> \u200b\u5728\u200b\u4e0b\u8f7d\u200bgo\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\u65f6\u200b\uff0c\u200b\u4f7f\u7528\u200bgo module\u200b\u6a21\u5f0f\u200b\u4e0b\u8f7d\u200b\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5728\u200bGOPATH\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u4e0b\u8f7d\u200b\u65f6\u62a5\u200b\u9519\u200b\uff1a 1\uff09hclfmt <pre><code> root@93d6ee8c5f2a:/go# go get github.com/fatih/hclfmt\npackage io/fs: unrecognized import path \"io/fs\": import path does not begin with hostname\ncannot find package \"github.com/hashicorp/hcl/hcl/printer\" in any of:\n    /usr/local/go/src/github.com/hashicorp/hcl/hcl/printer (from $GOROOT)\n    /go/src/github.com/hashicorp/hcl/hcl/printer (from $GOPATH)\n\nroot@f721141043a1:/go/src/github.com/fatih/hclfmt# grep -rn printer\nmain.go:14:    \"github.com/hashicorp/hcl/hcl/printer\" \nmain.go:116:    res, err := printer.Format(src)\n</code></pre>   \u200b\u6b64\u65f6\u200bGOPATH\u200b\u4e0b\u200b\u5df2\u7ecf\u200b\u4e0b\u8f7d\u200b\u4e86\u200b/go/src/github.com/hashicorp/hcl\uff0c\u200b\u8be5\u200b\u6e90\u7801\u200b\u7684\u200b\u7248\u672c\u200b\u662f\u200b\u6700\u65b0\u200b\u7248\u672c\u200bv2.15.0\uff0c\u200b\u4e0d\u200b\u5b58\u5728\u200bhcl/printer,\u200b\u6545\u200b\u62a5\u9519\u200b\uff0c\u200b\u5728\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0c\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u67e5\u627e\u200b\u5728\u200b\u54ea\u4e2a\u200b\u7248\u672c\u200b\u7684\u200bhashicorp/hcl\u200b\u4e2d\u200b\u5b58\u5728\u200b\u76ee\u5f55\u200bhcl/printer,\u200b\u5e76\u200b\u4e0b\u8f7d\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7248\u672c\u200b\u3002 2\uff09gocyclo <pre><code>root@93d6ee8c5f2a:/go# go get  github.com/fzipp/gocyclo       \npackage io/fs: unrecognized import path \"io/fs\": import path does not begin with hostname\n</code></pre> \u200b\u5f53\u524d\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bgo1.15.6, io/fs\u200b\u8fd9\u4e2a\u200b\u6a21\u5757\u200b\u5728\u200bgo1.16\u200b\u7248\u672c\u200b\u624d\u200b\u6709\u200b\uff0c\u200b\u6545\u200b\u964d\u4f4e\u200bgocyclo\u200b\u7684\u200b\u7248\u672c\u200b,\u200b\u8981\u200b\u6307\u5b9a\u200b\u7248\u672c\u200b\u4e0b\u8f7d\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5728\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u200b: <pre><code>root@93d6ee8c5f2a:/go# go env -w GO111MODULE=\"on\" \nroot@93d6ee8c5f2a:/go# go get  github.com/fzipp/gocyclo@v0.3.0\ngo: downloading github.com/fzipp/gocyclo v0.3.0\n</code></pre> \u200b\u6ce8\u610f\u200b\uff1a\u200b\u5728\u200b\u4f7f\u7528\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u8f7d\u200b\u5b8c\u6210\u200b\u540e\u200b\u53c8\u200b\u901a\u8fc7\u200bgo env -w GO111MODULE=\u201d\u201d\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bGOPATH\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u540e\u9762\u200b\u7684\u200b\u955c\u50cf\u200b\u5728\u200b\u4f7f\u7528\u200b\u8be5\u200b\u955c\u50cf\u200b\u65f6\u200b\uff0c\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200b\u9879\u76ee\u200b\u91cc\u200b\u81ea\u5e26\u200b\u7684\u200bvendor\u200b\u6784\u5efa\u200b\uff0c\u200b\u867d\u7136\u200b\u5728\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bvendor\u200b\u6784\u5efa\u200b\uff0c\u200b\u4f46\u662f\u200b\u6b64\u65f6\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u7c7b\u4f3c\u200b\u4e0b\u9762\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u51fa\u73b0\u200b\u7684\u200b\u95ee\u9898\u200b\u8f83\u200b\u591a\u200b\u3002     <pre><code>go: found golang.org/x/sys/unix in golang.org/x/sys v0.2.0\ngo: found github.com/docker/libnetwork/ipams/remote/api in github.com/docker/libnetwork v0.5.6\ngo: found golang.org/x/crypto/hkdf in golang.org/x/crypto v0.3.0\ngo: github.com/weaveworks/weave/prog/weaver imports\n    github.com/weaveworks/weave/common imports\n    github.com/Sirupsen/logrus: github.com/Sirupsen/logrus@v1.9.0: parsing go.mod:\n    module declares its path as: github.com/sirupsen/logrus\n            but was required as: github.com/Sirupsen/logrus\n</code></pre> \u200b\u800c\u4e14\u200b\u5728\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u8fd8\u200b\u4f1a\u200b\u62a5\u200b\u5982\u4e0b\u200b\u7684\u200b\u9519\u8bef\u200b\uff1a <pre><code>go build -i -ldflags \"-linkmode external -extldflags -static -X main.version=git-f670be431546\" -tags netgo -o prog/weaver/weaver ./prog/weaver\nvendor/github.com/docker/docker/api/types/container/config.go:7:2: cannot find package \".\" in:\n    /go/src/github.com/weaveworks/weave/vendor/github.com/docker/go-connections/nat\nvendor/github.com/docker/docker/pkg/plugins/client.go:14:2: cannot find package \".\" in:\n    /go/src/github.com/weaveworks/weave/vendor/github.com/docker/go-connections/sockets\nvendor/github.com/docker/docker/pkg/plugins/client.go:15:2: cannot find package \".\" in:\n    /go/src/github.com/weaveworks/weave/vendor/github.com/docker/go-connections/tlsconfig\nvendor/github.com/aws/aws-sdk-go/aws/credentials/shared_credentials_provider.go:8:2: cannot find package \".\" in:\n    /go/src/github.com/weaveworks/weave/vendor/github.com/go-ini/ini\nvendor/github.com/aws/aws-sdk-go/aws/awsutil/path_value.go:9:2: cannot find package \".\" in:\n    /go/src/github.com/weaveworks/weave/vendor/github.com/jmespath/go-jmespath\nmake: *** [Makefile:219: prog/weaver/weaver] Error 1\n</code></pre> \u200b\u5176\u5b9e\u200b\u5728\u200bdocker/docker/vendor\u200b\u4e0b\u9762\u200b\u5305\u542b\u200b\u4e86\u200b\u4f9d\u8d56\u200b\u9879\u76ee\u200b\uff0c\u200b\u4f46\u662f\u200bgo mod\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u5e76\u200b\u6ca1\u6709\u200b\u5728\u200bdocker/docker/vendor\u200b\u67e5\u627e\u200bdocker/docker\u200b\u7684\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u800c\u662f\u200b\u53bb\u200bdocker\u200b\u7684\u200b\u540c\u7ea7\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u67e5\u627e\u200b\u4f9d\u8d56\u200b\uff0c\u200b\u4ece\u800c\u200b\u5bfc\u81f4\u200b\u62a5\u9519\u200b\u3002\u200b\u5728\u200bGOPATH\u200b\u6a21\u5f0f\u200b\u4e0b\u5219\u200b\u4f1a\u63a5\u200b\u4f7f\u7528\u200bdocker/docker/vendor\u200b\u4e0b\u9762\u200b\u7684\u200b\u4f9d\u8d56\u200b\u8fdb\u884c\u200b\u6784\u5efa\u200b\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/weaveworks-weave/#vendor","title":"vendor","text":"<p>\uff081\uff09\u200b\u66ff\u6362\u200bgopacket\u200b\u7684\u200b\u4ee3\u7801\u200b <pre><code>root@9fcb61dbde31:/go/src/github.com/weaveworks/weave# go build -i -ldflags \"-linkmode external -extldflags -static -X main.version=git-f670be431546\" -tags netgo -o prog/weaver/weaver ./prog/weaver\n# github.com/weaveworks/weave/vendor/github.com/google/gopacket/pcap\nvendor/github.com/google/gopacket/pcap/pcap.go:199:7: identifier \"_Ctype_struct_bpf_program\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:476:13: identifier \"_Ctype_struct_pcap_stat\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:521:49: identifier \"_Ctype_struct_bpf_program\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:544:10: identifier \"_Ctype_struct_bpf_program\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:577:41: identifier \"_Ctype_struct_bpf_insn\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:649:66: identifier \"_Ctype_struct_bpf_program\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:662:19: identifier \"_Ctype_struct_bpf_insn\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:789:34: identifier \"_Ctype_struct_pcap_addr\" may conflict with identifiers generated by cgo\nvendor/github.com/google/gopacket/pcap/pcap.go:792:56: identifier \"_Ctype_struct_pcap_addr\" may conflict with identifiers generated by cgo\n</code></pre> \u200b\u901a\u8fc7\u200b\u67e5\u770b\u200b\u00a0https://github.com/google/gopacket/issues/656\uff0c \u200b\u662f\u200bgopacket\u200b\u672c\u8eab\u200b\u4ee3\u7801\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u4ece\u200bcommit 0c245453667e53d789b6dc8e74134345437f3312\u200b\u89e3\u51b3\u200b\u4e86\u200b\u8fd9\u4e2a\u200b\u95ee\u9898\u200b\u3002\u200b\u76ee\u524d\u200b\u662f\u200b\u4e0b\u8f7d\u200b\u4e86\u200bgopacket\u200b\u7684\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\uff0c\u200b\u66ff\u6362\u200bvendor\u200b\u4e0b\u9762\u200b\u7248\u672c\u200b\u3002</p> <p>\uff082\uff09containernetworking/cni   \u200b\u5c06\u200b\u8be5\u200b\u9879\u76ee\u200b\u4e0b\u200bvendor\u200b\u8def\u5f84\u200b\u4e0b\u200b\u7684\u200bsys\u200b\u66ff\u6362\u200b\u4e3a\u200b\u9002\u914d\u200bLA\u200b\u7684\u200b\u5e93\u200b    \uff083\uff09boltdb/bolt   \u200b\u589e\u52a0\u200bLA\u200b\u67b6\u6784\u200b\u7684\u200b\u652f\u6301\u200b    <pre><code>root@cloud-01:/home/zhaixiaojuan/workspace/github-loongCloud/weave-bak/vendor/github.com/boltdb/bolt# grep -rn loong\nbolt_loong64.go:1:// +build loong64\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl/","title":"wildfly-openssl","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>1.0.7</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<p>\u200b\u672c\u6b21\u200b\u6784\u5efa\u200b\u4f7f\u7528\u200b\u7684\u200bloongnix server\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5177\u4f53\u200b\u7cfb\u7edf\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a <pre><code>[root@5cef9fb1156f wildfly-openssl-1.0.7]# cat /etc/os-release\nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre></p> <pre><code>[root@5cef9fb1156f wildfly-openssl-1.0.7]# uname -a\nLinux 5cef9fb1156f 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl/#3","title":"3.\u200b\u6e90\u7801\u200b\u9002\u914d","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b https://github.com/Loongson-Cloud-Community/wildfly-openssl/tree/loong64-1.0.7.Final \u200b\u7684\u200bgit log\u200b\u4fe1\u606f\u200b\u3002      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/wildfly-openssl/#4","title":"4. \u200b\u6784\u5efa","text":"<pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0\nmvn clean -DskipTests install\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/","title":"xtrabackup","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#00x00","title":"00x00 \u200b\u53c2\u8003","text":"<ol> <li>xtrabackup\u200b\u4ecb\u7ecd\u200b</li> <li>\u200b\u6e90\u7801\u200b\u6784\u5efa\u200b-\u200b\u5b98\u65b9\u200b</li> <li>qpress\u200b\u6e90\u7801\u200b\u5730\u5740\u200b</li> <li>\u200b\u9f99\u82af\u200b\u6e90\u7801\u200b\u5730\u5740\u200b</li> <li>percona-xtrabackup-8.0.33-linux-loongarch64.tar.gz</li> </ol>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#00x01","title":"00x01 \u200b\u6784\u5efa\u200b\u73af\u5883\u200b\u4fe1\u606f","text":"<ul> <li>arch</li> </ul> <pre><code>root@xtrabackup /w/p/percona-xtrabackup# uname -a\nLinux xtrabackup 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre> <ul> <li>os</li> </ul> <pre><code>root@xtrabackup /w/p/percona-xtrabackup# cat /etc/os-release PRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#00x02","title":"00x02 \u200b\u6784\u5efa\u200b\u4f9d\u8d56","text":"<pre><code># \u200b\u6587\u6863\u200b\u6784\u5efa\u200b\u4f9d\u8d56\u200b\napt install python3-sphinx\n\n# \u200b\u4ee3\u7801\u200b\u6784\u5efa\u200b\u4f9d\u8d56\u200b\napt install bison pkg-config cmake devscripts debconf \\\ndebhelper automake bison ca-certificates libprocps-dev \\\nlibcurl4-openssl-dev cmake debhelper libaio-dev \\\nlibncurses-dev libssl-dev libtool zlib1g-dev libgcrypt20-dev libev-dev libprocps-dev \\\nlsb-release build-essential rsync libdbd-mysql-perl \\\nlibnuma1 socat librtmp-dev libtinfo5 vim-common \\\nliblz4-tool liblz4-1 liblz4-dev zstd python-docutils </code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#00x03","title":"00x03 \u200b\u6784\u5efa","text":"<ul> <li>\u200b\u6784\u5efa\u200b\u547d\u4ee4\u200b</li> </ul> <pre><code># \u200b\u66f4\u65b0\u200b\u5b50\u200b\u6a21\u5757\u200b\ngit submodule update --init --recursive\n\nmkdir build\ncd build\ncmake -DWITH_BOOST=../boost_1_77_0  -DCMAKE_VERBOSE_MAKEFILE=ON -DBUILD_CONFIG=xtrabackup_release -DWITH_MAN_PAGES=OFF ..\n\nmake -j`nproc`\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#1-boost","title":"1 boost\u200b\u7f3a\u5c11\u200b\u62a5\u9519","text":"<pre><code>CMake Error at cmake/boost.cmake:108 (MESSAGE):\n  You can download it with -DDOWNLOAD_BOOST=1 -DWITH_BOOST=&lt;directory&gt;\n\n  This CMake script will look for boost in &lt;directory&gt;.  If it is not there,\n  it will download and unpack it (in that directory) for you.\n\n  You can also download boost manually, from\n  https://boostorg.jfrog.io/artifactory/main/release/1.77.0/source/boost_1_77_0.tar.bz2\n\n  If you are inside a firewall, you may need to use an https proxy:\n\n  export https_proxy=http://example.com:80\n\nCall Stack (most recent call first):\n  cmake/boost.cmake:206 (COULD_NOT_FIND_BOOST)\n  CMakeLists.txt:1556 (INCLUDE)\n</code></pre> <ul> <li>\u200b\u5904\u7406\u200b</li> </ul> <pre><code># \u200b\u5728\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b\u6267\u884c\u200b\nwget https://boostorg.jfrog.io/artifactory/main/release/1.77.0/source/boost_1_77_0.zip\nunzip boost_1_77_0.zip\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#2-double-conversion-error","title":"2 double-conversion error","text":"<pre><code>[  4%] Building CXX object extra/icu/CMakeFiles/icui18n.dir/icu-release-69-1/source/i18n/double-conversion-bignum.cpp.o\ncd /work/percona/percona-xtrabackup/build/extra/icu &amp;&amp; /usr/bin/c++  -DBOOST_NO_CXX98_FUNCTION_BASE -DHAVE_CONFIG_H -DHAVE_TLSv13 -DLZ4_DISABLE_DEPRECATE_WARNINGS -DU_I18N_IMPLEMENTATION -DXTRABACKUP -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -D_USE_MATH_DEFINES -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -I/work/percona/percona-xtrabackup/build -I/work/percona/percona-xtrabackup/build/include -I/work/percona/percona-xtrabackup -I/work/percona/percona-xtrabackup/include -I/work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/common -I/work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/i18n -isystem /work/percona/percona-xtrabackup/extra/libedit/libedit-20210910-3.1/src/editline  -std=c++17 -fno-omit-frame-pointer -ffp-contract=off -ftls-model=initial-exec  -ffunction-sections -fdata-sections -O2 -g -DNDEBUG -g1 -fPIC   -Wno-undef -Wno-deprecated-declarations -Wno-error -Wno-unused-parameter -Wno-missing-field-initializers -Wno-sign-compare -Wno-type-limits -Wno-return-local-addr -Wno-stringop-overflow -Wno-unused-but-set-variable -Wno-misleading-indentation -Wno-maybe-uninitialized -Wno-restrict -Wno-stringop-truncation -Wno-address -o CMakeFiles/icui18n.dir/icu-release-69-1/source/i18n/double-conversion-bignum.cpp.o -c /work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/i18n/double-conversion-bignum.cpp\nIn file included from /work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/i18n/double-conversion-bignum.h:42,\n                 from /work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/i18n/double-conversion-bignum.cpp:42:\n/work/percona/percona-xtrabackup/extra/icu/icu-release-69-1/source/i18n/double-conversion-utils.h:144:2: error: #error Target architecture was not detected as supported by Double-Conversion.\n #error Target architecture was not detected as supported by Double-Conversion.\n  ^~~~~\nmake[2]: *** [extra/icu/CMakeFiles/icui18n.dir/build.make:781: extra/icu/CMakeFiles/icui18n.dir/icu-release-69-1/source/i18n/double-conversion-bignum.cpp.o] Error 1\nmake[2]: Leaving directory '/work/percona/percona-xtrabackup/build'\nmake[1]: *** [CMakeFiles/Makefile2:1092: extra/icu/CMakeFiles/icui18n.dir/all] Error 2\nmake[1]: Leaving directory '/work/percona/percona-xtrabackup/build'\nmake: *** [Makefile:155: all] Error 2\n</code></pre> <ul> <li>\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b</li> </ul> <pre><code>diff --git a/extra/icu/icu-release-69-1/source/i18n/double-conversion-utils.h b/extra/icu/icu-release-69-1/source/i18n/double-conversion-utils.h\nindex c9374636..97f58342 100644\n--- a/extra/icu/icu-release-69-1/source/i18n/double-conversion-utils.h\n+++ b/extra/icu/icu-release-69-1/source/i18n/double-conversion-utils.h\n@@ -118,6 +118,7 @@ int main(int argc, char** argv) {\n    defined(__ARMEL__) || defined(__avr32__) || defined(_M_ARM) || defined(_M_ARM64) || \\\n     defined(__hppa__) || defined(__ia64__) || \\\n     defined(__mips__) || \\\n+    defined(__loongarch__) || \\\n    defined(__nios2__) || defined(__ghs) || \\\n     defined(__powerpc__) || defined(__ppc__) || defined(__ppc64__) || \\\n     defined(_POWER) || defined(_ARCH_PPC) || defined(_ARCH_PPC64) || \\\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xtrabackup/#00x04","title":"00x04 \u200b\u6253\u5305","text":"<pre><code>make package\n\n# \u200b\u4e8c\u8fdb\u5236\u200b\u538b\u7f29\u5305\u200b\nroot@xtrabackup /w/p/p/build (loong64-8.0)# file percona-xtrabackup-8.0.33-linux-loongarch64.tar.gz\npercona-xtrabackup-8.0.33-linux-loongarch64.tar.gz: gzip compressed data, last modified: Fri Jul  7 09:07:15 2023, from Unix, original size 338969088\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/","title":"xx","text":"<p>\u200b\u672c\u6b21\u200b\u79fb\u690d\u200b <code>xx 1.3.0</code> \u200b\u7248\u672c\u200b\uff0c\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\u4e3a\u200b\u65b0\u4e16\u754c\u200b <code>openeuler:22.03</code> \uff0cgolang \u200b\u91c7\u7528\u200b <code>golang 1.21.0</code>\u3002</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#_1","title":"\u73af\u5883","text":"<ul> <li>xx 1.3.0 \u200b\u6e90\u7801\u200b</li> <li>openeuler:22.03 OS</li> <li>golang 1.21.0</li> </ul>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#_2","title":"\u7f16\u8bd1\u200b\u79fb\u690d","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#1","title":"1. \u200b\u5b89\u88c5\u200b\u7f16\u8bd1\u200b\u5fc5\u8981\u200b\u8f6f\u4ef6","text":"<p><pre><code>yum install docker libseccomp-devel golang make git vim -y\n</code></pre> \u200b\u5982\u679c\u200bdocker\u200b\u7248\u672c\u200b\u4f4e\u4e8e\u200b20.10 \u200b\u53c2\u8003\u200b\u5176\u4ed6\u200b\u6587\u6863\u200b/buildx.md \u200b\u7f16\u8bd1\u200bbuildx\u200b\u5e76\u200b\u6309\u200b\u6587\u6863\u200b\u5185\u5bb9\u200b\u52a0\u5165\u200bbuildx</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#2","title":"2. \u200b\u5207\u6362\u200b\u5230\u200b\u9700\u8981\u200b\u79fb\u690d\u200b\u7684\u200b\u5206\u652f","text":"<p><code>git checkout -b v1.3.0-loongarch64 v1.3.0</code></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#3-patch","title":"3. \u200b\u53c2\u8003\u200b\u4ee5\u4e0b\u200b patch \u200b\u8fdb\u884c\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>patch to loongarch64</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/xx/#4","title":"4. \u200b\u6784\u5efa\u200b\u955c\u50cf","text":"<pre><code>cd src &amp;&amp; docker buildx bake -f docker-bake.dev.hcl\n\ncd src/util/bats-assert &amp;&amp;  docker buildx bake -f docker-bake.hcl\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zookeeper/","title":"zookeeper","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zookeeper/#1","title":"1.\u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>release-3.6.3   </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zookeeper/#2","title":"2.\u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u4e0d\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u6e90\u7801\u200b</p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zookeeper/#3maven","title":"3.\u200b\u4fee\u6539\u200bmaven\u200b\u6e90","text":"<p>\u200b\u5c06\u200bmaven\u200b\u6e90\u200b\u4fee\u6539\u200b\u4e3a\u200b\u9f99\u82af\u200b\u6e90\u200b\u3002 \u200b\u5728\u200b\u6587\u4ef6\u200b/etc/maven/settings.xml \u200b\u548c\u200b ~/.m2/settings.xml \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a     <pre><code>        &lt;profile&gt;\n        &lt;id&gt;loongson&lt;/id&gt;\n        &lt;repositories&gt;\n        &lt;repository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;/repositories&gt;\n        &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n                &lt;id&gt;loongson&lt;/id&gt;\n                &lt;name&gt;Loongson Maven&lt;/name&gt;\n                &lt;url&gt;https://maven.loongnix.cn/loongarchabi1/maven/&lt;/url&gt;\n                &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n                &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;/pluginRepositories&gt;\n        &lt;/profile&gt;\n</code></pre> <pre><code>  &lt;activeProfiles&gt;\n        &lt;activeProfile&gt;loongson&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n</code></pre></p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zookeeper/#4","title":"4.\u200b\u6784\u5efa","text":"<pre><code>mvn clean package -DskipTests\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/","title":"zdtd-jni","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#_1","title":"\u6784\u5efa\u200b\u6587\u6863","text":""},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#1","title":"1. \u200b\u6784\u5efa\u200b\u7248\u672c","text":"<p>v1.4.9-1     </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#2","title":"2. \u200b\u6784\u5efa\u200b\u73af\u5883","text":"<pre><code>[root@5cef9fb1156f zstd-jni-1.4.9-1]# uname -a\nLinux 5cef9fb1156f 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n\n[root@5cef9fb1156f zstd-jni-1.4.9-1]# cat /etc/os-release \nNAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#3","title":"3. \u200b\u6e90\u7801\u200b\u4fee\u6539","text":"<p>\u200b\u5177\u4f53\u200b\u67e5\u770b\u200b\uff1ahttps://github.com/Loongson-Cloud-Community/zstd-jni/tree/loong64-1.4.9-1      </p>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#4","title":"4. \u200b\u7f16\u8bd1","text":"<pre><code>./sbt compile test package\n</code></pre>"},{"location":"%E7%A7%BB%E6%A4%8D%E6%89%8B%E5%86%8C/zstd-jni/#5","title":"5. \u200b\u5907\u6ce8","text":"<p>\u200b\u5728\u200b\u6e90\u7801\u200b\u4e2d\u200b\u4fee\u6539\u200b\u4e86\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff0c\u200b\u662f\u56e0\u4e3a\u200b\u6e90\u7801\u200b\u4e2d\u5199\u200b\u7684\u200b\u539f\u59cb\u200b\u7684\u200bsbt-jni\u200b\u7684\u200b\u4e0b\u8f7d\u200b\u8def\u5f84\u200b\u5df2\u7ecf\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u800c\u4e14\u200b\u76ee\u524d\u200b\u5b98\u65b9\u200b\u53ea\u200b\u5b58\u50a8\u200b\u4e86\u200b0.2.2b\u200b\u7248\u672c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fd9\u91cc\u200b\u4fee\u6539\u200b\u4e86\u200b\u4e0b\u8f7d\u200b\u8def\u5f84\u200b\u548c\u200b\u4e0b\u8f7d\u200b\u7248\u672c\u200b\u3002      <pre><code>diff --git a/project/plugins.sbt b/project/plugins.sbt\nindex ef64a00..4629b83 100644\n--- a/project/plugins.sbt\n+++ b/project/plugins.sbt\n@@ -1,5 +1,5 @@\n resolvers += Resolver.url(\"joprice-sbt-plugins\", url(\"https://dl.bintray.com/content/joprice/sbt-plugins\"))(Resolver.ivyStylePatterns)\n\n-addSbtPlugin(\"com.github.joprice\" % \"sbt-jni\" % \"0.2.1\")\n+addSbtPlugin(\"io.github.joprice\" % \"sbt-jni\" % \"0.2.2\")\n addSbtPlugin(\"com.typesafe.sbt\" % \"sbt-osgi\" % \"0.9.4\")\n addSbtPlugin(\"com.github.sbt\" % \"sbt-jacoco\" % \"3.1.0\")\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/","title":"hadoop+hbase\u200b\u4f2a\u200b\u5206\u5e03\u200b\u90e8\u7f72","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#1","title":"1. \u200b\u90e8\u7f72\u200b\u73af\u5883","text":"<p>\u200b\u4f7f\u7528\u200b1\u200b\u53f0\u200b\u673a\u5668\u200b <pre><code>hadoop@node1:/home/zhaixiaojuan/\u200b\u684c\u9762\u200b$ cat /etc/os-release \nPRETTY_NAME=\"Loongnix GNU/Linux 20 (DaoXiangHu)\"\nNAME=\"Loongnix GNU/Linux\"\nVERSION_ID=\"20\"\nVERSION=\"20 (DaoXiangHu)\"\nVERSION_CODENAME=DaoXiangHu\nID=Loongnix\nHOME_URL=\"https://www.loongnix.cn/\"\nSUPPORT_URL=\"https://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://www.loongnix.cn/\"\n\nhadoop@node1:/home/zhaixiaojuan/\u200b\u684c\u9762\u200b$ uname -a\nLinux node1 4.19.0-19-loongson-3 #1 SMP pkg_lnd10_4.19.190-7.6 Wed Nov 16 11:12:41 UTC 2022 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#2-hadoop","title":"2. hadoop\u200b\u90e8\u7f72","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#21-hadoop","title":"2.1 \u200b\u521b\u5efa\u200bhadoop\u200b\u7528\u6237","text":"<pre><code>sudo useradd -m hadoop -s /bin/bash\nsudo passed hadoop\nsudo adduser hadoop sudo\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#22","title":"2.2 \u200b\u914d\u7f6e\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u9646","text":"<pre><code>sudo apt install -y openssh-server\ncd ~/.ssh   //\u200b\u82e5\u200b\u6ca1\u6709\u200b\u8be5\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5219\u200b\u5148\u200b\u6267\u884c\u200b\u4e00\u6b21\u200bssh localhost\nssh-keygen -t rsa  //\u200b\u63d0\u793a\u200b\u6309\u200b\u56de\u8f66\u200b\u5373\u53ef\u200b\ncat ./id_rsa.pub &gt;&gt; ./authorized_keys  //\u200b\u52a0\u5165\u200b\u6388\u6743\u200b\n</code></pre> <p>\u200b\u6b64\u65f6\u200b\u518d\u7528\u200bssh localhost\u200b\u547d\u4ee4\u200b\uff0c\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u65e0\u9700\u200b\u5bc6\u7801\u200b\u767b\u9646\u200b\u4e86\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#23-java","title":"2.3 \u200b\u5b89\u88c5\u200bjava","text":"<p><pre><code>apt install -y openjdk-8-jdk\n</code></pre> \u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u5199\u5165\u200b\uff1a <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\nexport PATH=$JAVA_HOME/bin:$PATH\nsource ~/.bashrc\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#24-hadoop-334","title":"2.4 \u200b\u5b89\u88c5\u200bhadoop-3.3.4","text":"<p><pre><code>sudo tar -zxf hadoop-3.3.4.tar.gz -C /usr/local  \ncd /usr/local/\nsudo mv ./hadoop-3.3.4 ./hadoop  //\u200b\u4fee\u6539\u200b\u6587\u4ef6\u540d\u200b\nsudo chown -R hadoop ./hadoop  //\u200b\u4fee\u6539\u200b\u6587\u4ef6\u200b\u6743\u9650\u200b\n</code></pre> \u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u52a0\u5165\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>export PATH=$PATH:/usr/local/hadoop/bin:/usr/local/hadoop/sbin\n</code></pre> \u200b\u6267\u884c\u200b\uff1a source ~/.bashrc</p> <p>\u200b\u8f93\u5165\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u68c0\u67e5\u200bhadoop\u200b\u662f\u5426\u200b\u53ef\u7528\u200b\uff0c\u200b\u6210\u529f\u200b\u4f1a\u200b\u663e\u793a\u200bhadoop\u200b\u7248\u672c\u4fe1\u606f\u200b: <pre><code>hadoop@node01:/usr/local/hadoop$ hadoop version\nHadoop 3.3.4\nSource code repository https://github.com/apache/hadoop.git -r a585a73c3e02ac62350c136643a5e7f6095a3dbb\nCompiled by root on 2023-02-07T03:38Z\nCompiled with protoc 3.7.1\nFrom source with checksum fb9dd8918a7b8a5b430d61af858f6ec\nThis command was run using /usr/local/hadoop/share/hadoop/common/hadoop-common-3.3.4.jar\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#24","title":"2.4 \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#241-hadoop-envsh","title":"2.4.1 hadoop-env.sh","text":"<p>\u200b\u8bbe\u7f6e\u200bJAVA_HOME\u200b\u53c2\u6570\u200b\u4e3a\u200b\u672c\u5730\u200b <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#242-core-sitexml","title":"2.4.2 core-site.xml","text":"<pre><code>&lt;configuration&gt;\n&lt;property&gt;\n    &lt;!-- \u200b\u914d\u7f6e\u200bhadoop\u200b\u7684\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b --&gt;\n        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n        &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;\n        &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;\n    &lt;/property&gt;\n&lt;property&gt;\n    &lt;!--  \u200b\u6307\u5b9a\u200bhdfs\u200b\u4f7f\u7528\u200b\u672c\u5730\u200b\u673a\u5668\u200b\u7684\u200b9000\u200b\u7aef\u53e3\u200b  --&gt;\n        &lt;name&gt;fs.defaultFS&lt;/name&gt;\n        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#243-hdfs-sitexml","title":"2.4.3 hdfs-site.xml","text":"<pre><code>&lt;configuration&gt;\n&lt;property&gt;\n    &lt;!-- \u200b\u6307\u5b9a\u200bHDFS\u200b\u526f\u672c\u200b\u7684\u200b\u6570\u91cf\u200b  --&gt;\n        &lt;name&gt;dfs.replication&lt;/name&gt;\n        &lt;value&gt;1&lt;/value&gt;\n    &lt;/property&gt;\n&lt;property&gt;\n    &lt;!-- \u200b\u6307\u5b9a\u200bDFS\u200b\u540d\u79f0\u200b\u8868\u200b\uff08\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\uff09\u200b\u7684\u200b\u5b58\u50a8\u200b\u4f4d\u7f6e\u200b --&gt;\n        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;\n    &lt;/property&gt;\n&lt;property&gt;\n    &lt;!-- \u200b\u6307\u5b9a\u200bDFS\u200b\u6570\u636e\u8868\u200b\uff08\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\uff09\u200b\u7684\u200b\u5b58\u50a8\u200b\u4f4d\u7f6e\u200b --&gt;\n        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#25","title":"2.5 \u200b\u96c6\u7fa4\u200b\u542f\u52a8","text":"<p>\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\u683c\u5f0f\u5316\u200b\uff1a <pre><code>cd /usr/local/hadoop\n./bin/hdfs namenode -format\n</code></pre> \u200b\u51fa\u73b0\u200b\"successfully formatted\" \u200b\u7684\u200b\u63d0\u793a\u200b\u8868\u793a\u200b\u6210\u529f\u200b      </p> <p>\u200b\u542f\u52a8\u200bhdfs\u200b\u670d\u52a1\u200b\uff1a     <pre><code>cd /usr/local/hadoop\n./sbin/start-dfs.sh\n</code></pre> \u200b\u5f53\u200b\u542f\u52a8\u200b\u6210\u529f\u200b\u540e\u200b\uff0c\u200b\u901a\u8fc7\u200bjps\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u542f\u52a8\u200b\u4e86\u200b\u4e09\u4e2a\u200b\u8fdb\u7a0b\u200b\uff1aDataNode,NameNode\u200b\u548c\u200bSecondaryNameNode:    <pre><code>hadoop@node1:/usr/local$ jps\n21441 DataNode\n21348 NameNode\n28564 Jps\n21637 SecondaryNameNode\n</code></pre></p> <p>\u200b\u6b64\u65f6\u200b\u8bbf\u95ee\u200b\u7f51\u9875\u200b\uff1ahttp://localhost:9870    </p> <p></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#3-hbase","title":"3. \u200b\u90e8\u7f72\u200bhbase","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#31-hbase","title":"3.1 \u200b\u5b89\u88c5\u200bhbase","text":"<pre><code>sudo tar -zxf hbase-2.4.16.tar.gz -C /usr/local\ncd /usr/local\nsudo mv ./hbase-2.4.16 ./hbase\nsudo chown -R hadoop ./hbase  //\u200b\u4fee\u6539\u200b\u6587\u4ef6\u200b\u6743\u9650\u200b\n\u200b\u5728\u200b\uff5e/.bashrc \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\uff1a\nexport PATH=$PATH:/usr/local/hbase/bin\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#32","title":"3.2 \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#321-hbase-envsh","title":"3.2.1 hbase-env.sh","text":"<p>\u200b\u8bbe\u7f6e\u200bJAVA_HOME:  <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64/\n</code></pre></p> <p>\u200b\u8bbe\u7f6e\u200bzookeeper:  HBASE\u200b\u4e2d\u200b\u81ea\u5e26\u200bzookeeper\uff0c\u200b\u82e5\u200b\u8981\u200b\u5355\u72ec\u200b\u4f7f\u7528\u200bhbase\u200b\u4e2d\u200b\u5185\u7f6e\u200b\u7684\u200bzookeeper\uff0c\u200b\u5219\u200b\u4f7f\u7528\u200b\uff1a  <pre><code>export HBASE_MANAGES_ZK=true  (\u200b\u9ed8\u8ba4\u200b\u4e3a\u200btrue)\n</code></pre> \u200b\u82e5\u200b\u8981\u200b\u81ea\u5df1\u200b\u5355\u72ec\u200b\u914d\u7f6e\u200bzookeeper\uff0c\u200b\u5219\u200b\u5c06\u200b\u8be5\u200b\u53d8\u91cf\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bfalse\uff0c\u200b\u8fd9\u91cc\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200bhbase\u200b\u81ea\u5df1\u200b\u7ba1\u7406\u200b\u7684\u200bzookeeper\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#322-hbase-sitexml","title":"3.2.2 hbase-site.xml","text":"<pre><code>&lt;configuration&gt;\n  &lt;property&gt;\n    &lt;!-- \u200b\u8bbe\u5b9a\u200b\u90e8\u7f72\u200b\u65b9\u5f0f\u200b\u4e3a\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72\u200b --&gt;\n    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;\n    &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;!-- \u200b\u8bbe\u7f6e\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b\u7684\u200b\u4f4d\u7f6e\u200b  --&gt;\n    &lt;name&gt;hbase.tmp.dir&lt;/name&gt;\n    &lt;value&gt;./tmp&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;\n    &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;!-- \u200b\u8bbe\u7f6e\u200bHReion\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u5373\u200b\u6570\u636e\u200b\u5b58\u653e\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u8fd9\u91cc\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b\u8981\u200b\u548c\u200bhadoop\u200b\u7684\u200bcore-site.xml\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b\u4fdd\u6301\u4e00\u81f4\u200b --&gt;\n    &lt;name&gt;hbase.rootdir&lt;/name&gt;\n    &lt;value&gt;hdfs://localhost:9000/hbase&lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre> <p>\u200b\u5907\u6ce8\u200b\uff1a hbase.cluster.distributed\uff1a\u200b\u7528\u6765\u200b\u8bbe\u7f6e\u200bhbase\u200b\u7684\u200b\u8fd0\u884c\u200b\u65b9\u5f0f\u200b\u3002false\u200b\u662f\u200b\u5355\u673a\u200b\u6a21\u5f0f\u200b\uff0ctrue\u200b\u662f\u200b\u5206\u5e03\u5f0f\u200b\u6a21\u5f0f\u200b\u3002\u200b\u82e5\u200b\u4e3a\u200bfalse\uff0cHbase\u200b\u548c\u200bzookeeper\u200b\u4f1a\u200b\u8fd0\u884c\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200bJVM\u200b\u91cc\u9762\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200bfalse\u3002 hbase.unsafe.stream.capability.enforce\u200b\u8fd9\u4e2a\u200b\u5c5e\u6027\u200b\u7684\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u662f\u200b\u4e3a\u4e86\u200b\u907f\u514d\u51fa\u73b0\u200b\u542f\u52a8\u200b\u9519\u8bef\u200b\uff0c\u200b\u82e5\u200b\u6ca1\u6709\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bfalse\uff0c\u200b\u5219\u200b\u5728\u200b\u542f\u52a8\u200bhbase\u200b\u540e\u200b\uff0c\u200b\u6709\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u65e0\u6cd5\u200b\u627e\u5230\u200bHMaster\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9519\u8bef\u200b\uff0c\u200b\u542f\u52a8\u200b\u540e\u200b\u67e5\u770b\u200b\u7cfb\u7edf\u542f\u52a8\u200b\u65e5\u5fd7\u200b\uff08/usr/local/hbase/logs/hbase-hadoop-master-ubuntu.log\uff09\uff0c\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u5982\u4e0b\u200b\u9519\u8bef\u200b\uff1a <pre><code>2020-01-25 15:04:56,916 ERROR [master/localhost:16000:becomeActiveMaster] master.HMaster: Failed to become active master\njava.lang.IllegalStateException: The procedure WAL relies on the ability to hsync for proper operation during component failures, but the underlying filesystem does not support doing so. Please check the config value of 'hbase.procedure.store.wal.use.hsync' to set the desired level of robustness and ensure the config value of 'hbase.wal.dir' points to a FileSystem mount that can provide it.\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#33","title":"3.3 \u200b\u96c6\u7fa4\u200b\u542f\u52a8","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#331-hbase","title":"3.3..1 hbase\u200b\u670d\u52a1\u200b\u542f\u52a8","text":"<p><pre><code>hadoop@node1:/usr/local/hbase$ ./bin/start-hbase.sh \nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/local/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/hbase/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/local/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/hbase/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\n127.0.0.1: running zookeeper, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-zookeeper-node1.out\nrunning master, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-master-node1.out\n: running regionserver, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-regionserver-node1.out\n</code></pre> \u200b\u5f53\u200b\u6210\u529f\u200b\u542f\u52a8\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u589e\u52a0\u200b3\u200b\u4e2a\u200b\u8fdb\u7a0b\u200b\uff1aHMaster, HQuorumPeer, HRegionServer\u3002 <pre><code>hadoop@node1:/usr/local/hbase$ jps\n29808 Jps\n21441 DataNode\n21348 NameNode\n29556 HRegionServer\n21637 SecondaryNameNode\n29365 HMaster\n</code></pre> \u200b\u6b64\u65f6\u200b\u8bbf\u95ee\u200b\u7f51\u9875\u200b\uff1ahttp://localhost:16010 \uff1a      </p> <p>\u200b\u5e76\u4e14\u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b/hbase\u200b\u5b58\u50a8\u200b\u5728\u200bHDFS\u200b\u4e0a\u200b\uff1a     </p> <p>\u200b\u901a\u8fc7\u200b\u547d\u4ee4\u884c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u5230\u200b\uff1a <pre><code>hadoop@node1:/usr/local/hbase$ hadoop fs -ls /\nFound 1 items\ndrwxr-xr-x   - hadoop supergroup          0 2023-02-20 20:03 /hbase\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#34","title":"3.4 \u200b\u96c6\u7fa4\u200b\u6d4b\u8bd5","text":"<p>\u200b\u8fdb\u5165\u200bshell\uff1a   <pre><code>hadoop@node1:/usr/local/hbase$ hbase shell\n\u200b\u521b\u5efa\u200btable\uff1btest123\nhbase:055:0&gt; create 'test123', 'cf'\nCreated table test123\nTook 1.1293 seconds                                                                                                         \n=&gt; Hbase::Table - test123\n</code></pre></p> <p>\u200b\u63d2\u5165\u200b\u6570\u636e\u200b\uff1a <pre><code>hbase:056:0&gt; put 'test123', 'row1', 'cf:a', 'value100'\nTook 0.0209 seconds                                                                                                         \nhbase:057:0&gt;  put 'test123', 'row2', 'cf:b', 'value200'\nTook 0.0125 seconds  \n</code></pre> \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b/usr/local/hadoop/tmp/dfs/data/current/BP-1581270469-10.130.0.62-1676893644213/current/rbw\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u4e86\u200b\u6587\u4ef6\u200b\u4e86\u200bblk_xxxxxxxxxx\uff0c\u200b\u5176\u4e2d\u200b\u6587\u4ef6\u200b\u7684\u200b\u5185\u5bb9\u200b\u4fbf\u662f\u200bput\u200b\u5199\u5165\u200b\u7684\u200b\u5185\u5bb9\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#35-terasort","title":"3.5 Terasort\u200b\u6d4b\u8bd5","text":"<p>\u200b\u89c1\u200b\uff1a https://github.com/Loongson-Cloud-Community/Loongson-Cloud-Community/blob/main/docs/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop+hbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2.md</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#4","title":"4. \u200b\u96c6\u7fa4\u200b\u5173\u95ed","text":"<pre><code>/usr/local/hbase/bin/stop-hbase.sh\n/usr/local/hadoop/sbin/stop-dfs.sh\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E4%BC%AA%E5%88%86%E5%B8%83%E9%83%A8%E7%BD%B2/#5","title":"5. \u200b\u53c2\u8003","text":"<pre><code>https://hbase.apache.org/book.html#quickstart\nhttps://dblab.xmu.edu.cn/blog/2441/ \nhttps://dblab.xmu.edu.cn/blog/2442/ \n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/","title":"Hadoop+hbase\u200b\u5b8c\u5168\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72","text":"<p># hadoop+hbase \u200b\u5b8c\u5168\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#1","title":"1. \u200b\u73af\u5883\u200b\u51c6\u5907","text":"<p>\u200b\u8fd9\u91cc\u200b\u90e8\u7f72\u200b\u4f7f\u7528\u200b\u4e24\u53f0\u200b\u673a\u5668\u200b\uff1a <pre><code>10.130.0.80 node01 (\u200b\u4f5c\u4e3a\u200bmaster\u200b\u8282\u70b9\u200b)\n10.130.0.91 nodeo2\uff08\u200b\u4f5c\u4e3a\u200bslave\u200b\u8282\u70b9\u200b\uff09\n</code></pre> \u200b\u6ce8\u610f\u200b\uff1a\u200b\u7531\u4e8e\u200b\u8fd9\u91cc\u200b\u662f\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u4f7f\u7528\u200b\u4e24\u53f0\u200b\u673a\u5668\u200b\uff0c\u200b\u5728\u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u4e2d\u5f53\u200b\u90e8\u7f72\u200bhbase\uff0c\u200b\u7531\u4e8e\u200b\u6d89\u53ca\u200b\u5230\u200bzookeeper\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200b\u8fdb\u884c\u200b\u5b8c\u5168\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72\u200b\u65f6\u200b\u6700\u597d\u200b\u4f7f\u7528\u200b\u5947\u6570\u200b\u53f0\u200b\u673a\u5668\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#2-hadoop","title":"2. hadoop\u200b\u5b8c\u5168\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#21-hadoop","title":"2.1 \u200b\u521b\u5efa\u200bhadoop\u200b\u7528\u6237","text":"<p>\u200b\u5728\u200b\u4e24\u53f0\u200b\u673a\u5668\u200b\u4e0a\u200b\u90fd\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a     <pre><code>sudo useradd -m hadoop -s /bin/bash  //\u200b\u521b\u5efa\u200bhadoop\u200b\u7528\u6237\u200b\uff0c\u200b\u5e76\u7528\u200b/bin/bash\u200b\u4f5c\u4e3a\u200bshell\nsudo passwd hadoop //\u200b\u6dfb\u52a0\u200b\u5bc6\u7801\u200b\nsudo adduser hadoop sudo  //\u200b\u4e3a\u200bhadoop\u200b\u7528\u6237\u200b\u589e\u52a0\u200b\u7ba1\u7406\u5458\u200b\u6743\u9650\u200b\uff0c\u200b\u65b9\u4fbf\u200b\u90e8\u7f72\u200b\n</code></pre> \u200b\u9000\u51fa\u200b\u673a\u5668\u200b\uff0c\u200b\u4f7f\u7528\u200bhadoop\u200b\u7528\u6237\u200b\u8fdb\u884c\u200b\u767b\u5f55\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#22-openjdk","title":"2.2 \u200b\u5b89\u88c5\u200bopenjdk","text":"<p>\u200b\u5728\u200b\u4e24\u53f0\u200b\u673a\u5668\u200b\u4e0a\u200b\u90fd\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a <pre><code>apt install -y openjdk-8-jdk\n</code></pre></p> <p>\u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\nexport JRE_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre> java --version  //\u200b\u67e5\u770b\u200b\u662f\u5426\u200b\u5b89\u88c5\u200b\u6210\u529f\u200b\uff0c\u200b\u51fa\u73b0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u5219\u200b\u8868\u793a\u200b\u5b89\u88c5\u200b\u6210\u529f\u200b <pre><code>hadoop@node02:/usr/local/hadoop$ java -version\nopenjdk version \"1.8.0_352\"\nOpenJDK Runtime Environment (Loongson 8.1.12-loongarch64-Loongnix) (build 1.8.0_352-b08)\nOpenJDK 64-Bit Server VM (build 25.352-b08, mixed mode)\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#23","title":"2.3 \u200b\u8bbe\u7f6e\u200b\u673a\u5668\u200b\u540d\u79f0","text":"<p>10.130.0.80\u200b\u673a\u5668\u200b\uff1a\u200b\u6267\u884c\u547d\u4ee4\u200b\u201csudo vim /etc/hostname\u201d\u200b\u5199\u5165\u200bnode01(\u200b\u4f5c\u4e3a\u200bmaster\u200b\u8282\u70b9\u200b)    10.130.0.91\u200b\u673a\u5668\u200b\uff1a\u200b\u6267\u884c\u547d\u4ee4\u200b\u201csudo vim /etc/hostname\u201d\u200b\u5199\u5165\u200bnode02    \u200b\u5728\u200b\u4e24\u4e2a\u200b\u673a\u5668\u200b\u7684\u200b/etc/hosts\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5199\u5165\u200b\uff1a     <pre><code>10.130.0.80 node01\n10.130.0.91 node02\n</code></pre> \u200b\u5206\u522b\u200b\u91cd\u542f\u200b\u4e24\u53f0\u200b\u673a\u5668\u200b\uff0c\u200b\u5e76\u200b\u4f7f\u7528\u200bhadoop\u200b\u7528\u6237\u200b\u767b\u5f55\u200b     \u200b\u5728\u200b\u4e24\u4e2a\u200b\u673a\u5668\u200b\u4e0a\u200b\u90fd\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u7684\u200b\u547d\u4ee4\u200b\uff0c\u200b\u6d4b\u8bd5\u200b\u662f\u5426\u200b\u76f8\u4e92\u200b\u80fd\u200bping\u200b\u901a\u200b\uff1a    <pre><code>ping node01 -c 3  //ping 3\u200b\u6b21\u200b\u81ea\u52a8\u200b\u505c\u6b62\u200b\nping node02 -c 3 \n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#24-ssh","title":"2.4 ssh\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u5f55","text":"<p>\u200b\u90e8\u7f72\u200bhadoop\u200b\u5fc5\u987b\u200b\u8981\u200b\u8ba9\u200bmaster\u200b\u8282\u70b9\u200b(node01)\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b\u5230\u200b\u5404\u4e2a\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002   \u200b\u9996\u5148\u200b\uff0c\u200b\u751f\u6210\u200bnode01\u200b\u7684\u200b\u516c\u5319\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5bf9\u200b\u4e3b\u673a\u540d\u200b\u8fdb\u884c\u200b\u4e86\u200b\u4fee\u6539\u200b\uff0c\u200b\u6240\u4ee5\u200b\u4e4b\u524d\u200b\u82e5\u200b\u751f\u6210\u200b\u8fc7\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5220\u9664\u200b\u91cd\u65b0\u200b\u751f\u6210\u200b\u3002\u200b\u5177\u4f53\u200b\u547d\u4ee4\u200b\u5982\u4e0b\u200b\uff1a    <pre><code>cd ~/.ssh  //\u200b\u82e5\u200b\u6ca1\u6709\u200b\u8be5\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5148\u200b\u6267\u884c\u200b\u4e00\u6b21\u200bssh localhost\nrm ./id_rsa* //\u200b\u5220\u9664\u200b\u4e4b\u524d\u200b\u751f\u6210\u200b\u7684\u200b\u516c\u5319\u200b\uff08\u200b\u82e5\u200b\u5b58\u5728\u200b\uff09\nssh-keygen -t rsa  //\u200b\u6267\u884c\u200b\u8be5\u200b\u547d\u4ee4\u200b\u540e\u200b\uff0c\u200b\u9047\u5230\u200b\u63d0\u793a\u4fe1\u606f\u200b\uff0c\u200b\u4e00\u76f4\u200b\u6309\u200b\u56de\u8f66\u200b\u5373\u53ef\u200b\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#241-node01","title":"2.4.1 node01\u200b\u8282\u70b9\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b\u672c\u200b\u673a","text":"<pre><code>cat ./id_rsa.pub  &gt;&gt; ./authorized_keys\nssh node01 //\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u9047\u5230\u200b\u63d0\u793a\u4fe1\u606f\u200b\uff0c\u200b\u8f93\u5165\u200byes\u200b\u5373\u53ef\u200b\nexit  // ssh\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b\u6d4b\u8bd5\u200b\u6210\u529f\u200b\u540e\u200b\uff0c\u200b\u9000\u56de\u200b\u539f\u6765\u200b\u7684\u200b\u7ec8\u7aef\u200b\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#242-node01node02","title":"2.4.2 node01\u200b\u8282\u70b9\u200b\u65e0\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200bnode02:","text":"<p>\u200b\u5c06\u200bnode01\u200b\u7684\u200b\u5bc6\u94a5\u200b\u4f20\u5230\u200bnode02\u200b\u4e0a\u200b: <pre><code>scp ~/.ssh/id_rsa.pub hadoop@node02:/home/hadoop/\n</code></pre> \u200b\u5728\u200bnode02\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a <pre><code>mkdir ~/.ssh //\u200b\u82e5\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u5ffd\u7565\u200b\u8be5\u200b\u547d\u4ee4\u200b\ncat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys\nrm ~/id_rsa.pub \n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#25-hadoop-334","title":"2.5 \u200b\u5b89\u88c5\u200bhadoop-3.3.4","text":"<p>\u200b\u5728\u200bmaster\u200b\u8282\u70b9\u200b\uff08node01\uff09\u200b\u4e0a\u200b\u6267\u884c\u200b\uff1a <pre><code>sudo tar -zxf hadoop-3.3.4.tar.gz -C /usr/local  \ncd /usr/local/\nsudo mv ./hadoop-3.3.4 ./hadoop  //\u200b\u4fee\u6539\u200b\u6587\u4ef6\u540d\u200b\nsudo chown -R hadoop ./hadoop  //\u200b\u4fee\u6539\u200b\u6587\u4ef6\u200b\u6743\u9650\u200b\n</code></pre> \u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u52a0\u5165\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\uff1a <pre><code>export PATH=$PATH:/usr/local/hadoop/bin:/usr/local/hadoop/sbin\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre></p> <p>\u200b\u8f93\u5165\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u68c0\u67e5\u200bhadoop\u200b\u662f\u5426\u200b\u53ef\u7528\u200b\uff0c\u200b\u6210\u529f\u200b\u4f1a\u200b\u663e\u793a\u200bhadoop\u200b\u7248\u672c\u4fe1\u606f\u200b: <pre><code>hadoop@node01:/usr/local/hadoop$ hadoop version\nHadoop 3.3.4\nSource code repository https://github.com/apache/hadoop.git -r a585a73c3e02ac62350c136643a5e7f6095a3dbb\nCompiled by root on 2023-02-07T03:38Z\nCompiled with protoc 3.7.1\nFrom source with checksum fb9dd8918a7b8a5b430d61af858f6ec\nThis command was run using /usr/local/hadoop/share/hadoop/common/hadoop-common-3.3.4.jar\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#26","title":"2.6 \u200b\u914d\u7f6e\u200b\u96c6\u7fa4\u200b/\u200b\u5206\u5e03\u5f0f\u200b\u73af\u5883","text":"<p>\u200b\u5728\u200b\u8fdb\u884c\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u4fee\u6539\u200b/usr/local/hadoop/etc/hadoop\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u4ec5\u4ec5\u200b\u914d\u7f6e\u200b\u4e86\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\u6240\u200b\u5fc5\u987b\u200b\u7684\u200b\u8bbe\u7f6e\u200b\u9879\u200b\uff1aworkres, core-site.xml, hdfs-site.xml, mapred-site.xml, yarm-site.xml, hadoop-env.sh 6\u200b\u4e2a\u200b\u6587\u4ef6\u200b\u3002 \u200b\u8be6\u7ec6\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5185\u5bb9\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5b98\u65b9\u200bhttps://hadoop.apache.org/docs/stable/index.html \u200b\u6700\u200b\u5e95\u90e8\u200b\u7684\u200bConfiguration\u200b\u90e8\u5206\u200b\u8fdb\u884c\u200b\u5b66\u4e60\u200b\u548c\u200b\u67e5\u770b\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#261-node01","title":"2.6.1 \u200b\u4e3b\u200b(node01)\u200b\u8282\u70b9\u200b\u64cd\u4f5c","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#workers","title":"workers","text":"<p>\u200b\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u6240\u6709\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\u7684\u200b\u4e3b\u673a\u200b\u540d\u79f0\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200blocalhost(\u200b\u5373\u200b\u628a\u200b\u672c\u673a\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b)\uff0c\u200b\u6b64\u65f6\u200b\u8868\u793a\u200b\u672c\u673a\u200b\u5373\u200b\u4f5c\u4e3a\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\u4e5f\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\u3002\u200b\u5728\u200b\u672c\u6b21\u200b\u90e8\u7f72\u200b\u4e2d\u200b\u8ba9\u200bmaster(node01)\u200b\u5145\u5f53\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\u548c\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\uff0cnode02\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\uff0c\u200b\u6545\u200b\u5199\u5165\u200b\u7684\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a <pre><code>node01\nnode02\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#hadoop-envsh","title":"hadoop-env.sh","text":"<p>\u200b\u5728\u200b\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bbe\u7f6e\u200bJAVA_HOME\u200b\u53c2\u6570\u200b\uff1a <pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#core-sitexml","title":"core-site.xml","text":"<p>\u200b\u8be5\u200b\u6587\u4ef6\u200b\u662f\u200bhadoop\u200b\u7684\u200b\u6838\u5fc3\u200b\u5168\u5c40\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u53ef\u200b\u5728\u200b\u5176\u4ed6\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u5f15\u7528\u200b\u8be5\u200b\u6587\u4ef6\u200b    <pre><code>core-site.xml\n&lt;configuration&gt;\n        &lt;property&gt;\n&lt;!--\u200b\u6307\u5b9a\u200b\u6587\u4ef6\u7cfb\u7edf\u200b(namenode)\u200b\u7684\u200b\u5730\u5740\u200b\u662f\u200bnode01\uff0c\u200b\u7aef\u53e3\u53f7\u200b \u200b\u662f\u200b9000--&gt;\n                &lt;name&gt;fs.defaultFS&lt;/name&gt;\n                &lt;value&gt;hdfs://node01:9000&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n&lt;!--  \u200b\u914d\u7f6e\u200bhadoop\u200b\u7684\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b --&gt;\n                &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n                &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt; \n                &lt;description&gt;A base for other temporary directories.&lt;/description&gt;\n        &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a fs.defaultFS: \u200b\u7528\u6765\u200b\u914d\u7f6e\u200bHDFS\u200b\u7684\u200b\u4e3b\u200b\u8fdb\u7a0b\u200bNameNode\u200b\u7684\u200b\u8fd0\u884c\u200b\u4e3b\u673a\u200b\uff08\u200b\u4e5f\u200b\u5c31\u662f\u200bhadoop\u200b\u96c6\u7fa4\u200b\u7684\u200b\u4e3b\u200b\u8282\u70b9\u200b\u4f4d\u7f6e\u200b\uff09 hadoop.tmp.dir \uff1a\u200b\u8bbe\u7f6e\u200b\u4e34\u65f6\u6587\u4ef6\u200b\u7684\u200b\u8def\u5f84\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#hdfs-sitexml","title":"hdfs-site.xml","text":"<p>\u200b\u8be5\u200b\u6587\u4ef6\u200b\u7528\u4e8e\u200b\u8bbe\u7f6e\u200bHDFS\u200b\u7684\u200bNameNode\u200b\u548c\u200bDataNode <pre><code>&lt;configuration&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bsecondary namenode\u200b\u7684\u200bhttp\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u7aef\u53e3\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;\n                &lt;value&gt;node01:50090&lt;/value&gt;\n        &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bHDFS\u200b\u526f\u672c\u200b\u7684\u200b\u6570\u91cf\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;dfs.replication&lt;/name&gt;\n                &lt;value&gt;2&lt;/value&gt;\n        &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bDFS\u200b\u540d\u79f0\u200b\u8868\u200b\uff08\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\uff09\u200b\u7684\u200b\u5b58\u50a8\u200b\u4f4d\u7f6e\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n                &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;\n        &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bDFS\u200b\u6570\u636e\u8868\u200b\uff08\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\uff09\u200b\u7684\u200b\u5b58\u50a8\u200b\u4f4d\u7f6e\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n                &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;\n        &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a dfs: \u200b\u786e\u5b9a\u200bDFS\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\u5e94\u200b\u5728\u200b\u672c\u5730\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e0a\u200b\u7684\u200b\u54ea\u4e2a\u200b\u4f4d\u7f6e\u200b\u5b58\u50a8\u200b\u540d\u79f0\u200b\u8868\u200b\u3002\u200b\u5982\u679c\u200b\u662f\u200b\u4ee5\u200b\u9017\u53f7\u200b\u5206\u9694\u200b\u7684\u200b\u76ee\u5f55\u200b\u5217\u8868\u200b\uff0c\u200b\u5219\u200b\u540d\u79f0\u200b\u8868\u5c06\u200b\u590d\u5236\u5230\u200b\u6240\u6709\u200b\u76ee\u5f55\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u200b\u5b9e\u73b0\u200b\u526f\u672c\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#mapred-sitexml","title":"mapred-site.xml","text":"<p>\u200b\u8be5\u200b\u6587\u4ef6\u200b\u662f\u200bMapReduce\u200b\u7684\u200b\u6838\u5fc3\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u7528\u4e8e\u200b\u6307\u5b9a\u200bMapReduce\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6846\u67b6\u200b <pre><code>&lt;configuration&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bMapReduce\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6846\u67b6\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\n                &lt;value&gt;yarn&lt;/value&gt;\n        &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200b\u670d\u52a1\u5668\u200bIPC\u200b\u7684\u200b\u4e3b\u673a\u200b\uff1a\u200b\u7aef\u53e3\u53f7\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;\n                &lt;value&gt;node01:10020&lt;/value&gt;\n        &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200b\u670d\u52a1\u5668\u200bWeb UI\u200b\u7684\u200b\u4e3b\u673a\u200b\uff1a\u200b\u7aef\u53e3\u53f7\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;\n                &lt;value&gt;node01:19888&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n                &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;\n                &lt;value&gt;HADOOP_MAPRED_HOME=/usr/local/hadoop&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n                &lt;name&gt;mapreduce.map.env&lt;/name&gt;\n                &lt;value&gt;HADOOP_MAPRED_HOME=/usr/local/hadoop&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n                &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;\n                &lt;value&gt;HADOOP_MAPRED_HOME=/usr/local/hadoop&lt;/value&gt;\n        &lt;/property&gt; \n&lt;/configuration&gt;\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a mapreduce.framework.name\uff1a\u200b\u7528\u6765\u200b\u6307\u5b9a\u200bMapReduce\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6846\u67b6\u200b\uff0c\u200b\u6709\u200blocal,yarn\u200b\u548c\u200bclassic\u200b\u4e09\u79cd\u200b\u6a21\u5f0f\u200b\u3002 yarn.app.mapreduce.am.env: \u200b\u7528\u6237\u200b\u4e3a\u200bMapReduce APP master\u200b\u8fdb\u7a0b\u200b\u6dfb\u52a0\u200b\u7684\u200b\u73af\u5883\u53d8\u91cf\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#yarn-sitexml","title":"yarn-site.xml","text":"<p>\u200b\u672c\u200b\u6587\u4ef6\u200b\u662f\u200byarn\u200b\u6846\u67b6\u200b\u7684\u200b\u6838\u5fc3\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u9700\u8981\u200b\u6307\u5b9a\u200byarn\u200b\u96c6\u7fa4\u200b\u7684\u200b\u7ba1\u7406\u8005\u200b <pre><code>&lt;configuration&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200byarn\u200b\u96c6\u7fa4\u200b\u7ba1\u7406\u8005\u200b\u7684\u200b\u5730\u5740\u200b--&gt;\n        &lt;property&gt;\n                &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;\n                &lt;value&gt;node01&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\n        &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a\u200b\u4e0a\u8ff0\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u914d\u7f6e\u200b\u4e86\u200byarn\u200b\u7684\u200b\u4e3b\u200b\u8fdb\u7a0b\u200bResourceManager\u200b\u8fd0\u884c\u200b\u4e3b\u673a\u200b\u4e3a\u200bnode01\uff0c\u200b\u540c\u65f6\u200b\u914d\u7f6e\u200b\u4e86\u200bNodeManager\u200b\u8fd0\u884c\u200b\u65f6\u200b\u7684\u200b\u9644\u5c5e\u200b\u670d\u52a1\u200b\uff0c\u200b\u9700\u8981\u200b\u914d\u7f6e\u200b\u4e3a\u200bmapreduce_shuffle\u200b\u624d\u80fd\u200b\u6b63\u5e38\u200b\u8fd0\u884c\u200bMapReduce\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#262-node02","title":"2.6.2 \u200b\u4ece\u200b\uff08node02\uff09\u200b\u8282\u70b9\u200b\u64cd\u4f5c","text":"<p>\u200b\u4e0a\u9762\u200b6\u200b\u4e2a\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u9700\u8981\u200b\u628a\u200b\u4e3b\u200b\u8282\u70b9\u200b\u4e0a\u200b\u7684\u200b/usr/local/hadoop\u200b\u6587\u4ef6\u5939\u200b\u590d\u5236\u5230\u200b\u5404\u4e2a\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002\u200b\u5728\u200bnode02\u200b\u4e0a\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a <pre><code>sudo chown -R hadoop /usr/local/hadoop\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#27","title":"2.7 \u200b\u96c6\u7fa4\u200b\u542f\u52a8","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#271-node01","title":"2.7.1 \u200b\u4e3b\u200b(node01)\u200b\u8282\u70b9\u200b\u64cd\u4f5c","text":"<p>(1)\u200b\u5728\u200b\u4e3b\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b\u6267\u884c\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\u7684\u200b\u683c\u5f0f\u5316\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u6267\u884c\u200b\u4e00\u6b21\u200b\uff0c\u200b\u540e\u9762\u200b\u518d\u542f\u52a8\u200bhadoop\u200b\u65f6\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u518d\u6b21\u200b\u683c\u5f0f\u5316\u200b\u540d\u79f0\u200b\u8282\u70b9\u200b\uff08\u200b\u82e5\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u8fdb\u884c\u200b\u683c\u5f0f\u5316\u200b\uff0c\u200b\u5219\u200b\u5220\u9664\u200btmp\u200b\u548c\u200blog\u200b\u76ee\u5f55\u200b\uff09\u3002 \u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a <pre><code>hdfs namenode -format\n</code></pre> \u200b\u5f53\u200b\u51fa\u73b0\u200b\u4ee5\u4e0b\u5185\u5bb9\u200b\u65f6\u200b\u8868\u793a\u200b\u683c\u5f0f\u5316\u200b\u6210\u529f\u200b\uff1a <pre><code>2023-02-09 11:45:44,384 INFO namenode.FSImage: Allocated new BlockPoolId: BP-2007561254-10.130.0.80-1675914344373\n2023-02-09 11:45:44,400 INFO common.Storage: Storage directory /usr/local/hadoop/tmp/dfs/name has been successfully formatted.\n2023-02-09 11:45:44,436 INFO namenode.FSImageFormatProtobuf: Saving image file /usr/local/hadoop/tmp/dfs/name/current/fsimage.ckpt_0000000000000000000 using no compression\n2023-02-09 11:45:44,592 INFO namenode.FSImageFormatProtobuf: Image file /usr/local/hadoop/tmp/dfs/name/current/fsimage.ckpt_0000000000000000000 of size 401 bytes saved in 0 seconds .\n2023-02-09 11:45:44,611 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid &gt;= 0\n2023-02-09 11:45:44,647 INFO namenode.FSNamesystem: Stopping services started for active state\n2023-02-09 11:45:44,648 INFO namenode.FSNamesystem: Stopping services started for standby state\n2023-02-09 11:45:44,652 INFO namenode.FSImage: FSImageSaver clean checkpoint: txid=0 when meet shutdown.\n2023-02-09 11:45:44,652 INFO namenode.NameNode: SHUTDOWN_MSG:\n/************************************************************\nSHUTDOWN_MSG: Shutting down NameNode at node01/10.130.0.80\n************************************************************/\n</code></pre></p> <p>(2)\u200b\u542f\u52a8\u200bhadoop <pre><code>start-dfs.sh   //   \u200b\u542f\u52a8\u200bHDFS\u200b\u96c6\u7fa4\u200b\nstart-yarn.sh  //\u200b\u542f\u52a8\u200byarn\u200b\u96c6\u7fa4\u200b\nmr-jobhistory-daemon.sh start historyserver\n</code></pre></p> <p>(3)\u200b\u67e5\u770b\u200b\u542f\u52a8\u200b\u7684\u200b\u8fdb\u7a0b\u200b \u200b\u82e5\u200b\u6b63\u786e\u200b\u542f\u52a8\u200b\uff0c\u200b\u5728\u200b\u4e3b\u200b\u8282\u70b9\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u4ee5\u4e0b\u200b\u51e0\u4e2a\u200b\u8fdb\u7a0b\u200b\uff1a <pre><code>hadoop@node01:/usr/local/hadoop$ jps\n18449 ResourceManager\n19723 JobHistoryServer\n19803 Jps\n18061 DataNode\n18541 NodeManager\n18238 SecondaryNameNode\n17967 NameNode\n</code></pre></p> <p>(4)\u200b\u67e5\u770b\u200b\u542f\u52a8\u200b\u7684\u200b\u6570\u636e\u200b\u8282\u70b9\u200b <pre><code>hadoop@node01:/usr/local/hadoop$ hdfs dfsadmin -report\n......\nLive datanodes (2):\n\nName: 10.130.0.80:9866 (node01)\nHostname: node01\nDecommission Status : Normal\nConfigured Capacity: 44310081536 (41.27 GB)\nDFS Used: 8192 (8 KB)\nNon DFS Used: 12885385216 (12.00 GB)\nDFS Remaining: 31424688128 (29.27 GB)\nDFS Used%: 0.00%\nDFS Remaining%: 70.92%\nConfigured Cache Capacity: 0 (0 B)\nCache Used: 0 (0 B)\nCache Remaining: 0 (0 B)\nCache Used%: 100.00%\nCache Remaining%: 0.00%\nXceivers: 0\nLast contact: Thu Feb 09 20:22:37 CST 2023\nLast Block Report: Thu Feb 09 18:49:10 CST 2023\nNum of Blocks: 0\n\nName: 10.130.0.91:9866 (node02)\nHostname: node02\nDecommission Status : Normal\nConfigured Capacity: 44310081536 (41.27 GB)\nDFS Used: 8192 (8 KB)\nNon DFS Used: 10843045888 (10.10 GB)\nDFS Remaining: 33467027456 (31.17 GB)\nDFS Used%: 0.00%\nDFS Remaining%: 75.53%\nConfigured Cache Capacity: 0 (0 B)\nCache Used: 0 (0 B)\nCache Remaining: 0 (0 B)\nCache Used%: 100.00%\nCache Remaining%: 0.00%\nXceivers: 0\n</code></pre> \u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u542f\u52a8\u200b\u7684\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\u6709\u200b2\u200b\u4e2a\u200b\uff0cnode01\u200b\u548c\u200bnode02\uff0c\u200b\u4e0e\u200b\u524d\u9762\u200b\u5728\u200b\u914d\u7f6e\u6587\u4ef6\u200bhdfs-site.xml\u200b\u4e2d\u200b\u7684\u200b\u8bbe\u7f6e\u200b\u4e00\u81f4\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#272-node02","title":"2.7.2 \u200b\u4ece\u200b(node02)\u200b\u8282\u70b9\u200b\u64cd\u4f5c","text":"<p>\u200b\u5728\u200b\u4e3b\u200b\u8282\u70b9\u200b\u542f\u52a8\u200b\u670d\u52a1\u200b\u540e\u200b\uff0c\u200b\u5728\u200b\u4ece\u200b\u8282\u70b9\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u542f\u52a8\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u8fdb\u7a0b\u200bDataNode\u200b\u548c\u200bNodeManager\u3002 <pre><code>hadoop@node02:/usr/local/hadoop$ jps\n11349 DataNode\n11467 NodeManager\n11819 Jps\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#273-uihadoop","title":"2.7.3 \u200b\u901a\u8fc7\u200bUI\u200b\u754c\u9762\u200b\u67e5\u770b\u200bhadoop\u200b\u8fd0\u884c\u200b\u72b6\u6001","text":"<p>\u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8f93\u5165\u200bhttp://10.130.0.80:9870 \u200b\u67e5\u770b\u200bHDFS\u200b\u96c6\u7fa4\u200b\u72b6\u6001\u200b\u3002 </p> <p>\u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8f93\u5165\u200bhttp://10.130.0.80:8088\uff0c\u200b\u67e5\u770b\u200byarn\u200b\u96c6\u7fa4\u200b\u72b6\u6001\u200b\uff1a </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#28","title":"2.8 \u200b\u96c6\u7fa4\u200b\u6d4b\u8bd5","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#281-node01","title":"2.8.1 \u200b\u547d\u4ee4\u884c\u200b\u64cd\u4f5c\u200b\uff08\u200b\u4e3b\u200b\u8282\u70b9\u200bnode01\uff09","text":"<p>\uff081\uff09\u200b\u521b\u5efa\u200bHDFS\u200b\u7528\u6237\u200b\u5b9e\u4f8b\u200b <pre><code>hdfs dfs -mkdir -p /user/hadoop\n</code></pre> \u200b\u6b64\u65f6\u200b\u5728\u200bBrowse the file system\u200b\u4e2d\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u521b\u5efa\u200b\u7684\u200b\u7528\u6237\u200b\u76ee\u5f55\u200b\uff1a</p> <p> </p> <p>\u200b\u901a\u8fc7\u200bhdfs dfs -ls / \u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u5230\u200bhdfs\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b\u5b58\u50a8\u200b\u7684\u200b\u6587\u4ef6\u200b\uff1a <pre><code>hadoop@node01:/usr/local/hadoop$ hdfs dfs -ls /\nFound 2 items\ndrwxrwx---   - hadoop supergroup          0 2023-02-20 09:31 /tmp\ndrwxr-xr-x   - hadoop supergroup          0 2023-02-20 09:35 /user\n</code></pre></p> <p>\uff082\uff09\u200b\u5728\u200bHDFS\u200b\u4e2d\u200b\u521b\u5efa\u200binput\u200b\u76ee\u5f55\u200b\uff0c\u200b\u5c06\u8981\u200b\u64cd\u4f5c\u200b\u7684\u200b\u6587\u4ef6\u200b\u4fdd\u5b58\u200b\u5728\u200b\u8be5\u200b\u76ee\u5f55\u200b\u4e0b\u200b <pre><code>hdfs dfs -mkdir input\nhdfs dfs -put /usr/local/hadoop/etc/hadoop/*.xml input\n</code></pre> \uff083\uff09\u200b\u8fd0\u884c\u200bMapReduce\u200b\u4f5c\u4e1a\u200b <pre><code>cd  /usr/local/hadoop/share/hadoop/mapreduce\nhadoop@node01:/usr/local/hadoop/share/hadoop/mapreduce$ hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.4.jar grep input output 'dfs[a-z.]+'\n2023-02-09 20:42:05,830 INFO client.DefaultNoHARMFailoverProxyProvider: Connecting to ResourceManager at node01/10.130.0.80:8032\n2023-02-09 20:42:06,461 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /tmp/hadoop-yarn/staging/hadoop/.staging/job_1675933900726_0001\n2023-02-09 20:42:07,603 INFO input.FileInputFormat: Total input files to process : 0\n2023-02-09 20:42:07,671 INFO mapreduce.JobSubmitter: number of splits:0\n2023-02-09 20:42:07,845 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1675933900726_0001\n2023-02-09 20:42:07,845 INFO mapreduce.JobSubmitter: Executing with tokens: []\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a hadoop jar xxx\u200b\u8868\u793a\u200b\u6267\u884c\u200b\u4e00\u4e2a\u200bhadoop\u200b\u7684\u200bjar\u200b\u5305\u200b\u7a0b\u5e8f\u200b\uff0cgrep\u200b\u8868\u793a\u200b\u6267\u884c\u200bjar\u200b\u5305\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u641c\u7d22\u200b\u529f\u80fd\u200b\u5462\u200b\u4e2a\u200b\uff0cinput\u200b\u8868\u793a\u200b\u641c\u7d22\u200b\u7684\u200bHDFS\u200b\u6587\u4ef6\u200b\u8def\u5f84\u200b\uff0cout\u200b\u8868\u793a\u200b\u641c\u7d22\u200b\u5b8c\u6210\u200b\u540e\u200b\u8f93\u51fa\u200bHDFS\u200b\u7684\u200b\u7ed3\u679c\u200b\u8def\u5f84\u200b\u3002</p> <p>\u200b\u5728\u200b\u3010Utilities\u3011\u2192\u3010Browse the file system\u3011\u2192\u3010usr\u3011\u2192\u3010hadoop\u3011\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u751f\u6210\u200b\u4e86\u200boutput\u200b\u76ee\u5f55\u200b\uff1a  </p> <p>\u200b\u5728\u200b\u3010output\u3011\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u6709\u200b\u4e24\u4e2a\u200b\u6587\u4ef6\u200b\uff0c_SUCCESS\u200b\u8868\u793a\u200b\u6b64\u6b21\u200b\u4efb\u52a1\u200b\u6267\u884c\u200b\u6210\u529f\u200b\uff0cpart-r-0000\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u4e86\u200bgrep\u200b\u7684\u200b\u7ed3\u679c\u200b\u3002\u200b\u5355\u51fb\u200bpart-r-0000\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u6587\u4ef6\u200b\u4e0b\u8f7d\u200b\u5230\u200b\u672c\u5730\u200b\uff0c\u200b\u67e5\u770b\u200b\u5176\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b\uff1a <pre><code>1   dfsadmin\n1   dfs.replication\n1   dfs.namenode.secondary.http\n1   dfs.namenode.name.dir\n1   dfs.datanode.data.dir\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#282","title":"2.8.2 \u200b\u7f51\u9875\u200b\u7aef\u200b\u4e0a\u4f20\u200b\u6587\u4ef6","text":"<p>\u200b\u70b9\u51fb\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4e0a\u4f20\u200b\u6309\u94ae\u200b\uff0c\u200b\u4e0a\u4f20\u200b\u6587\u4ef6\u200b\uff1a</p> <p></p> <p>\u200b\u6ce8\u610f\u200b\uff1a \u200b\u6253\u5f00\u200b\u6d4f\u89c8\u5668\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b\u4ee5\u4e0b\u200b\u914d\u7f6e\u200b\uff1a /etc/hosts: <pre><code>10.130.0.80 node01\n10.130.0.91 node02\n</code></pre> \u200b\u5907\u6ce8\u200b\uff1a\u200b\u8981\u200b\u5173\u95ed\u200b\u4ee3\u7406\u670d\u52a1\u5668\u200b\uff0c\u200b\u5426\u5219\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8bbf\u95ee\u200b\u5931\u8d25\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#283","title":"2.8.3 \u200b\u7f51\u9875\u200b\u7aef\u200b\u67e5\u770b\u200b\u6587\u4ef6","text":"<p>\u200b\u70b9\u51fb\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200bDownload\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u4e0b\u8f7d\u200b\u6587\u4ef6\u200b\uff0cHead/Tail the file\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u6587\u4ef6\u200b: </p> <p>\u200b\u5907\u6ce8\u200b\uff1a 1\uff09hdfs\u200b\u5b58\u653e\u200b\u6587\u4ef6\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u4f4d\u4e8e\u200b\u8282\u70b9\u200b\u7684\u200bdatanode\u200b\u8def\u5f84\u200b\u4e0b\u200b\uff0c\u200b\u672c\u6b21\u200b\u90e8\u7f72\u200b\u5b58\u653e\u200b\u6587\u4ef6\u200b\u7684\u200b\u5177\u4f53\u200b\u76ee\u5f55\u200b\u662f\u200b\uff1a   <pre><code>\u201c/usr/local/hadoop/tmp/dfs/data/current/BP-1730813420-10.130.0.137-1676856486892/current/finalized/subdir0/subdir0\u201d\u3002\n</code></pre> \u200b\u56e0\u4e3a\u200bhdfs\u200b\u5b58\u653e\u200b\u6587\u4ef6\u200b\u662f\u200b\u6309\u7167\u200b\u5757\u200b\u5b58\u50a8\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5b58\u50a8\u200b\u6587\u4ef6\u200b\u7684\u200b\u540d\u79f0\u200b\u4e0e\u200b\u5b9e\u9645\u200b\u6587\u4ef6\u200b\u7684\u200b\u540d\u79f0\u200b\u5e76\u200b\u4e0d\u200b\u4e00\u81f4\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u4e0a\u4f20\u200b\u7684\u200b\u6587\u4ef6\u200b\u201c\u200b\u89e3\u51b3\u200b\u51b2\u7a81\u200b\u201d\uff0c\u200b\u5b9e\u9645\u200b\u6587\u4ef6\u540d\u79f0\u200b\u662f\u200b\uff1ablk_1073741826, vim\u200b\u8be5\u200b\u6587\u4ef6\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u5230\u200b\u5177\u4f53\u200b\u7684\u200b\u5b58\u50a8\u200b\u5185\u5bb9\u200b\u3002      2\uff09\u200b\u56e0\u4e3a\u200b\u672c\u6b21\u200b\u90e8\u7f72\u200b\u4f7f\u7528\u200b\u4e86\u200b2\u200b\u4e2a\u200b\u6570\u636e\u5907\u4efd\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5728\u200bnode01\u200b\u548c\u200bnode02\u200b\u4e0a\u200b\u90fd\u200b\u5b58\u5728\u200b\u5757\u200b\u6587\u4ef6\u200bblk_1073741826\u3002    </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#3hbase","title":"3.hbase\u200b\u5b8c\u5168\u200b\u5206\u5e03\u5f0f\u200b\u90e8\u7f72","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#31-hbase-2416","title":"3.1 \u200b\u5b89\u88c5\u200bhbase-2.4.16","text":"<p>\u200b\u5728\u200bmaster(node01)\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200b: <pre><code>sudo tar -xf hbase-2.4.16-bin.tar.gz\nsudo mv hbase-2.4.16 hbase\nsudo chown -R hadoop  ./hbase\n</code></pre> \u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\uff1a <pre><code>export HBASE_HOME=/usr/local/hbase\nexport PATH=$PATH:$HBASE_HOME/bin\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#32","title":"3.2 \u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#321-node01","title":"3.2.1 \u200b\u4e3b\u200b\u8282\u70b9\u200b\uff08node01\uff09\u200b\u64cd\u4f5c","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#3211-hbase-envsh","title":"3.2.1.1 hbase-env.sh","text":"<pre><code>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-loongarch64\nexport HBASE_MANAGES_ZK=true   #\u200b\u8868\u793a\u200b\u4f7f\u7528\u200bhbase\u200b\u81ea\u5e26\u200b\u7684\u200bzookeeper,\u200b\u82e5\u200b\u8981\u200b\u4f7f\u7528\u200b\u81ea\u5df1\u200b\u5355\u72ec\u200b\u90e8\u7f72\u200b\u7684\u200bzookeeper\u200b\u96c6\u7fa4\u200b\uff0c\u200b\u5219\u200b\u5c06\u200btrue\u200b\u8bbe\u7f6e\u200b\u4e3a\u200bfalse\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#3212-hbase-sitexml","title":"3.2.1.2 hbase-site.xml","text":"<pre><code>&lt;configuration&gt;\n &lt;!-- \u200b\u6307\u5b9a\u200bhbase\u200b\u5728\u200bhdfs\u200b\u4e0a\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\u7684\u200b\u6587\u4ef6\u5939\u200b\uff0c\u200b\u7aef\u53e3\u200b\u8981\u200b\u548c\u200bhadoop\u200b\u7684\u200bcore-site.xml\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b\u4e00\u81f4\u200b--&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.rootdir&lt;/name&gt;\n    &lt;value&gt;hdfs://node01:9000/hbase&lt;/value&gt;\n  &lt;/property&gt;\n&lt;!-- \u200b\u6307\u5b9a\u200bhbase\u200b\u7684\u200bmaster\u200b\u4e3b\u673a\u540d\u200b\u548c\u200b\u7aef\u53e3\u200b --&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.master&lt;/name&gt;\n    &lt;value&gt;node01:60000&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u200b\u6307\u5b9a\u200bhbase\u200b\u7684\u200b\u90e8\u7f72\u200b\u65b9\u5f0f\u200b --&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;\n    &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n &lt;!-- \u200b\u6307\u5b9a\u200bhbase\u200b\u7684\u200b\u4e34\u65f6\u200b\u76ee\u5f55\u200b --&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.tmp.dir&lt;/name&gt;\n    &lt;value&gt;/usr/local/hbase/tmp&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;\n    &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u200b\u6307\u5b9a\u200bzookeeper\u200b\u96c6\u7fa4\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b --&gt;\n  &lt;property&gt;\n    &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;\n    &lt;value&gt;node01,node02&lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#3213-regionserver","title":"3.2.1.3 regionserver","text":"<p>\u200b\u914d\u7f6e\u200b\u6240\u6709\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b\uff0c\u200b\u5728\u200b\u672c\u6b21\u200b\u90e8\u7f72\u200b\u4e2d\u4e3b\u200b\u8282\u70b9\u200b\u4e5f\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\uff0c\u200b\u6240\u4ee5\u200b\u914d\u7f6e\u200b\u5982\u4e0b\u200b\uff1a <pre><code>node01\nnode02\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#322-node02","title":"3.2.2 \u200b\u4ece\u200b\u8282\u70b9\u200b(node02)\u200b\u64cd\u4f5c","text":"<p>\u200b\u5c06\u4e3b\u200b\u8282\u70b9\u200b\u4e0a\u200b\u914d\u7f6e\u200b\u597d\u200b\u7684\u200bhbase\u200b\u4f20\u5230\u200b\u4ece\u200b\u8282\u70b9\u200b\u4e0a\u200b\uff1a <pre><code>scp -r hbase hadoop@node01:/usr/local\nsudo chown -R hadoop ./hbase\n</code></pre></p> <p>\u200b\u5728\u200b\uff5e/.bashrc\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\uff1a <pre><code>export HBASE_HOME=/usr/local/hbase\nexport PATH=$PATH:$HBASE_HOME/bin\n</code></pre> <pre><code>source ~/.bashrc\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#33","title":"3.3 \u200b\u96c6\u7fa4\u200b\u542f\u52a8","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#331-node01","title":"3.3.1 \u200b\u4e3b\u200b\u8282\u70b9\u200b(node01)\u200b\u64cd\u4f5c","text":"<p><pre><code>hadoop@node01:/usr/local/hbase$ bin/start-hbase.sh \nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/local/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/hbase/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/local/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/hbase/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Reload4jLoggerFactory]\nnode02: running zookeeper, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-zookeeper-node02.out\nnode01: running zookeeper, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-zookeeper-node01.out\nrunning master, logging to /usr/local/hbase/logs/hbase-hadoop-master-node01.out\nnode01: running regionserver, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-regionserver-node01.out\nnode02: running regionserver, logging to /usr/local/hbase/bin/../logs/hbase-hadoop-regionserver-node02.out\n</code></pre> \u200b\u901a\u8fc7\u200bjps\u200b\u67e5\u770b\u200b\u542f\u52a8\u200b\u7684\u200b\u8fdb\u7a0b\u200b: <pre><code>hadoop@node01:/usr/local/hbase$ jps\n10034 HMaster\n26565 NodeManager\n25975 NameNode\n26072 DataNode\n9928 HQuorumPeer\n26473 ResourceManager\n27001 JobHistoryServer\n26252 SecondaryNameNode\n10590 Jps\n10239 HRegionServer\n</code></pre> \u200b\u82e5\u200b\u6210\u529f\u200b\u542f\u52a8\u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u65b0\u200b\u589e\u52a0\u200b\u4e86\u200b3\u200b\u4e2a\u200b\u8fdb\u7a0b\u200b\uff1aHMaster(hbase master\u200b\u8fdb\u7a0b\u200b), HQuorumPeer\uff08zookeeper\u200b\u8fdb\u7a0b\u200b\uff09, HRegionServer\uff08hbase region server\u200b\u8fdb\u7a0b\u200b\uff09\u3002</p> <p>\u200b\u540c\u65f6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200bhbase\u200b\u76ee\u5f55\u200b\u5df2\u7ecf\u200b\u6302\u8f7d\u200b\u5230\u200bhdfs\u200b\u7684\u200b\u6839\u76ee\u5f55\u200b\u4e0b\u200b: <pre><code>hadoop@node01:/usr/local/hbase$ hdfs dfs -ls /\nFound 5 items\ndrwxr-xr-x   - hadoop supergroup          0 2023-02-22 14:28 /hbase\ndrwxrwx---   - hadoop supergroup          0 2023-02-20 09:31 /tmp\ndrwxr-xr-x   - hadoop supergroup          0 2023-02-20 09:35 /user\n-rw-r--r--   2 dr.who supergroup       3441 2023-02-20 09:40 /\u200b\u89e3\u51b3\u200b\u51b2\u7a81\u200b\n</code></pre> \u200b\u6b64\u65f6\u200b\uff0c\u200b\u5728\u200bhadoop\u200b\u7684\u200b\u96c6\u7fa4\u200b\u4e2d\u200b\u4e5f\u200b\u80fd\u200b\u770b\u5230\u200bhbase\u200b\u6587\u4ef6\u5939\u200b\u3002</p> <p></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#332-node02","title":"3.3.2 \u200b\u4ece\u200b\u8282\u70b9\u200b(node02)\u200b\u64cd\u4f5c","text":"<p><pre><code>hadoop@node02:/usr/local/hbase$ jps\n15457 NodeManager\n20930 HQuorumPeer\n21063 HRegionServer\n15785 DataNode\n21593 Jps\n</code></pre> \u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u65b0\u200b\u589e\u52a0\u200b\u4e86\u200b2\u200b\u4e2a\u200b\u8fdb\u7a0b\u200b\uff1aHQuorumPeer\u200b\u548c\u200bHRegionServer</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#333-uihbase","title":"3.3.3 \u200b\u901a\u8fc7\u200bUI\u200b\u754c\u9762\u200b\u67e5\u770b\u200bhbase\u200b\u8fd0\u884c\u200b\u72b6\u6001","text":"<p>\u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8f93\u5165\u200bhttp://10.130.0.80:16010 \u200b\u6216\u8005\u200b\u8f93\u5165\u200b http://node01:16010 \u200b\u53ef\u4ee5\u200b\u8fdb\u884c\u200b\u67e5\u770b\u200b\u3002 </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#34","title":"3.4 \u200b\u96c6\u7fa4\u200b\u6d4b\u8bd5","text":"<p>\u200b\u8fdb\u5165\u200bshell:  <pre><code>hadoop@node1:/usr/local/hbase$ hbase shell\n\u200b\u521b\u5efa\u200btable\uff1btest123\nhbase:055:0&gt; create 'test123', 'cf'\nCreated table test123\nTook 1.1293 seconds                                                                                                         \n=&gt; Hbase::Table - test123\n</code></pre></p> <p>\u200b\u63d2\u5165\u200b\u6570\u636e\u200b <pre><code>hbase:056:0&gt; put 'test123', 'row1', 'cf:a', 'value100'\nTook 0.0209 seconds                                                                                                         \nhbase:057:0&gt;  put 'test123', 'row2', 'cf:b', 'value200'\nTook 0.0125 seconds  \n</code></pre> \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b/usr/local/hadoop/tmp/dfs/data/current/BP-1581270469-10.130.0.62-1676893644213/current/rbw\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u751f\u6210\u200b\u4e86\u200b\u6587\u4ef6\u200b\u4e86\u200bblk_xxxxxxxxxx\uff0c\u200b\u5176\u4e2d\u200b\u6587\u4ef6\u200b\u7684\u200b\u5185\u5bb9\u200b\u4fbf\u662f\u200bput\u200b\u5199\u5165\u200b\u7684\u200b\u5185\u5bb9\u200b\u3002    hadoop@node02:/usr/local/hadoop/tmp/dfs/data/current/BP-1730813420-10.130.0.137-1676856486892$ grep -rn value200      \u200b\u5339\u914d\u200b\u5230\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b current/rbw/blk_1073741851     </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#35-terasort","title":"3.5 Terasort\u200b\u6d4b\u8bd5","text":"<p>Terasort\u200b\u662f\u200b\u6d4b\u8bd5\u200bhadoop\u200b\u7684\u200b\u4e00\u4e2a\u200b\u6709\u6548\u200b\u7684\u200b\u6392\u5e8f\u7a0b\u5e8f\u200b\uff0c\u200b\u901a\u8fc7\u200bhadoop\u200b\u81ea\u5e26\u200b\u7684\u200bTerasort\u200b\u6392\u5e8f\u7a0b\u5e8f\u200b\u8fdb\u884c\u200b\u6d4b\u8bd5\u200b\uff0c\u200b\u4e00\u4e2a\u200bTerasort\u200b\u6d4b\u8bd5\u200b\u5206\u4e3a\u200b\u4ee5\u4e0b\u200b\u4e09\u4e2a\u200b\u6b65\u9aa4\u200b\uff1a</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#351-teragen","title":"3.5.1 teragen\u200b\u4ea7\u751f\u200b\u968f\u673a\u200b\u6570\u636e","text":"<p>\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a <pre><code>$ hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.4.jar teragen -Dmapred.map.tasks=128 10000000 /terasort/terasort-input\n2023-11-13 11:37:27,450 INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties\n2023-11-13 11:37:27,675 INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).\n2023-11-13 11:37:27,675 INFO impl.MetricsSystemImpl: JobTracker metrics system started\n2023-11-13 11:37:27,935 INFO terasort.TeraGen: Generating 10000000 using 1\n2023-11-13 11:37:27,955 INFO mapreduce.JobSubmitter: number of splits:1\n2023-11-13 11:37:27,995 INFO Configuration.deprecation: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps\n......\n2023-11-13 11:37:50,359 INFO mapreduce.Job:  map 100% reduce 0%\n2023-11-13 11:37:50,360 INFO mapreduce.Job: Job job_local242609962_0001 completed successfully\n2023-11-13 11:37:50,370 INFO mapreduce.Job: Counters: 22\n    File System Counters\n        FILE: Number of bytes read=281117\n        FILE: Number of bytes written=918485\n        FILE: Number of read operations=0\n        FILE: Number of large read operations=0\n        FILE: Number of write operations=0\n        HDFS: Number of bytes read=0\n        HDFS: Number of bytes written=1000000000\n        HDFS: Number of read operations=5\n        HDFS: Number of large read operations=0\n        HDFS: Number of write operations=3\n        HDFS: Number of bytes read erasure-coded=0\n    Map-Reduce Framework\n        Map input records=10000000\n        Map output records=10000000\n        Input split bytes=82\n        Spilled Records=0\n        Failed Shuffles=0\n        Merged Map outputs=0\n        GC time elapsed (ms)=113\n        Total committed heap usage (bytes)=1166540800\n    org.apache.hadoop.examples.terasort.TeraGen$Counters\n        CHECKSUM=21472776955442690\n    File Input Format Counters \n        Bytes Read=0\n    File Output Format Counters \n        Bytes Written=1000000000\n</code></pre> \u200b\u5728\u200b\u6267\u884c\u200b\u5b8c\u200b\u4e0a\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u540e\u200b\u4f1a\u200b\u4ea7\u751f\u200b\u968f\u673a\u200b\u6570\u636e\u6587\u4ef6\u200bpart-m-xxx\uff1a <pre><code>hadoop@zhaixiaojuan-loongnix-01:~$ hadoop fs  -ls /terasort\nFound 1 items\ndrwxr-xr-x   - hadoop supergroup          0 2023-11-13 11:37 /terasort/terasort-input\nhadoop@zhaixiaojuan-loongnix-01:~$ hadoop fs  -ls /terasort/terasort-input\nFound 2 items\n-rw-r--r--   1 hadoop supergroup          0 2023-11-13 11:37 /terasort/terasort-input/_SUCCESS\n-rw-r--r--   1 hadoop supergroup 1000000000 2023-11-13 11:37 /terasort/terasort-input/part-m-00000\n</code></pre></p> <p>\u200b\u5728\u200b\u7f51\u9875\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff1a </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#352-terasort","title":"3.5.2 terasort\u200b\u5bf9\u200b\u4ea7\u751f\u200b\u7684\u200b\u6570\u636e\u200b\u968f\u673a\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u6392\u5e8f","text":"<p><pre><code>$ hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.4.jar terasort /terasort/terasort-input /terasort/terasort-output\n2023-11-14 09:31:40,955 INFO terasort.TeraSort: starting\n2023-11-14 09:31:42,493 INFO input.FileInputFormat: Total input files to process : 1\nSpent 301ms computing base-splits.\nSpent 3ms computing TeraScheduler splits.\nComputing input splits took 305ms\nSampling 8 splits of 8\nMaking 1 from 100000 sampled records\nComputing parititions took 582ms\nSpent 892ms computing partitions.\n......\n    Shuffle Errors\n        BAD_ID=0\n        CONNECTION=0\n        IO_ERROR=0\n        WRONG_LENGTH=0\n        WRONG_MAP=0\n        WRONG_REDUCE=0\n    File Input Format Counters \n        Bytes Read=1000000000\n    File Output Format Counters \n        Bytes Written=1000000000\n2023-11-14 09:33:18,090 INFO terasort.TeraSort: done\n</code></pre> \u200b\u5728\u200b\u6267\u884c\u200b\u5b8c\u200b\u4e0a\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u540e\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u4ea7\u751f\u200b\u4e86\u200b\u76ee\u5f55\u200bterasort-output\u200b\u548c\u200b\u6392\u5e8f\u200b\u540e\u200b\u7684\u200b\u6587\u4ef6\u200bpart-r-00000: <pre><code>hadoop@zhaixiaojuan-loongnix-01:~$ hadoop fs -ls /terasort/terasort-output\nFound 3 items\n-rw-r--r--   1 hadoop supergroup          0 2023-11-14 09:33 /terasort/terasort-output/_SUCCESS\n-rw-r--r--  10 hadoop supergroup          0 2023-11-14 09:31 /terasort/terasort-output/_partition.lst\n-rw-r--r--   1 hadoop supergroup 1000000000 2023-11-14 09:33 /terasort/terasort-output/part-r-00000\n</code></pre> \u200b\u5728\u200b\u7f51\u9875\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff1a </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#353","title":"3.5.3  \u200b\u6570\u636e\u200b\u6821\u9a8c","text":"<p>teravalidate\u200b\u6765\u200b\u9a8c\u8bc1\u200bterasort\u200b\u8f93\u51fa\u200b\u7684\u200b\u6570\u636e\u200b\u662f\u5426\u200b\u6709\u5e8f\u200b\uff0c\u200b\u5982\u679c\u200b\u68c0\u67e5\u200b\u5230\u200b\u95ee\u9898\u200b\uff0c\u200b\u5219\u200b\u4f1a\u200b\u5c06\u200b\u4e71\u5e8f\u200b\u7684\u200bkey\u200b\u8f93\u51fa\u200b\u5230\u200b\u76ee\u5f55\u200b <pre><code>$ hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.4.jar teravalidate /terasort/terasort-output /terasort/terasort-validate |&amp;tee sort1G-3.log\n2023-11-14 09:43:16,470 INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties\n2023-11-14 09:43:16,700 INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).\n2023-11-14 09:43:16,700 INFO impl.MetricsSystemImpl: JobTracker metrics system started\n2023-11-14 09:43:17,114 INFO input.FileInputFormat: Total input files to process : 1\nSpent 164ms computing base-splits.\nSpent 5ms computing TeraScheduler splits.\n......\n    Shuffle Errors\n        BAD_ID=0\n        CONNECTION=0\n        IO_ERROR=0\n        WRONG_LENGTH=0\n        WRONG_MAP=0\n        WRONG_REDUCE=0\n    File Input Format Counters \n        Bytes Read=1000000000\n    File Output Format Counters \n        Bytes Written=24\n</code></pre> \u200b\u6b64\u65f6\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u4ea7\u751f\u200b\u4e86\u200b\u76ee\u5f55\u200bterasort-validate\u200b\u548c\u200b\u6587\u4ef6\u200bpart-r-00000: <pre><code>hadoop@zhaixiaojuan-loongnix-01:~$ hadoop fs -ls /terasort/\nFound 3 items\ndrwxr-xr-x   - hadoop supergroup          0 2023-11-13 11:37 /terasort/terasort-input\ndrwxr-xr-x   - hadoop supergroup          0 2023-11-14 09:33 /terasort/terasort-output\ndrwxr-xr-x   - hadoop supergroup          0 2023-11-14 09:43 /terasort/terasort-validate\nhadoop@zhaixiaojuan-loongnix-01:~$ hadoop fs -ls /terasort/terasort-validate\nFound 2 items\n-rw-r--r--   1 hadoop supergroup          0 2023-11-14 09:43 /terasort/terasort-validate/_SUCCESS\n-rw-r--r--   1 hadoop supergroup         24 2023-11-14 09:43 /terasort/terasort-validate/part-r-00000\n</code></pre></p> <p>\u200b\u5728\u200b\u7f51\u9875\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff1a </p> <p>\u200b\u5907\u6ce8\u200b\uff1a\u200b\u82e5\u200b\u4e4b\u524d\u200b\u521b\u5efa\u200b\u8fc7\u200bterasort\uff0c\u200b\u5728\u200b\u91cd\u65b0\u200b\u8fdb\u884c\u200b\u6d4b\u8bd5\u200b\u65f6\u200b\u9700\u8981\u200b\u5148\u200b\u4f7f\u7528\u200b\u201chadoop fs -rm -r /terasort\u201d\u200b\u547d\u4ee4\u200b\u8fdb\u884c\u200b\u5220\u9664\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#4","title":"4. \u200b\u96c6\u7fa4\u200b\u5173\u95ed","text":"<pre><code>/usr/local/hbase/bin/stop-hbase.sh\n/usr/local/hadoop/sbin/stop-dfs.sh\n/usr/local/hadoop/sbin/stop-yarn.sh\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#5","title":"5. \u200b\u95ee\u9898\u200b\u8bb0\u5f55","text":"<p>hadoop\u200b\u4e0a\u4f20\u200b\u6587\u4ef6\u200b\u9519\u8bef\u200b \u200b\u5728\u200b\u4e0a\u4f20\u200b\u6587\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u51fa\u73b0\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200bCouldn\u2019t upload the file xxx\u3002 </p> <p>F12, \u200b\u67e5\u770b\u200b\u6d4f\u89c8\u5668\u200b\u9519\u8bef\u4fe1\u606f\u200b\uff0c\u200b\u5982\u4e0b\u200b\u3002\u200b\u901a\u8fc7\u200b\u4e0b\u9762\u200b\u7684\u200b\u4fe1\u606f\u200b\u662f\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u7684\u200b\u95ee\u9898\u200b\u3002 </p> <p>\u200b\u89e3\u51b3\u200b\u65b9\u6cd5\u200b\uff1a    \u200b\u5728\u200b\u4e3b\u200b\u8282\u70b9\u200bnode01\u200b\u6267\u884c\u547d\u4ee4\u200b\u201chdfs dfs -chmod 777 / \u201d\uff0c\u200b\u6b64\u65f6\u200b\u518d\u200b\u91cd\u65b0\u200b\u4e0a\u4f20\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u4e0a\u4f20\u200b\u6210\u529f\u200b\u3002    </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#6","title":"6. \u200b\u53c2\u8003","text":"<pre><code>https://book.itheima.net/course/1269935677353533441/1269937996044476418/1269939156776165379 \nhttps://dblab.xmu.edu.cn/blog/2775/ \nhttps://dblab.xmu.edu.cn/blog/2441/ \nhttps://blog.csdn.net/qq_42886289/article/details/90682592 \n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/hadoop%2Bhbase%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2/#7","title":"7. \u200b\u9644\u5f55","text":"<p>HDFS\u200b\u4f53\u7cfb\u200b\u4e3b\u8981\u200b\u7531\u200bnamenode\u200b\u548c\u200bdatanode\u200b\u7ec4\u6210\u200b\u3002 namenode: \u200b\u6574\u4e2a\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7684\u200b\u7ba1\u7406\u200b\u8282\u70b9\u200b\uff0c\u200b\u5b83\u200b\u7ef4\u62a4\u200b\u7740\u200b\u6574\u4e2a\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7684\u200b\u6587\u4ef6\u76ee\u5f55\u200b\u6811\u200b\uff0c\u200b\u6587\u4ef6\u200b/\u200b\u76ee\u5f55\u200b\u7684\u200b\u5143\u200b\u4fe1\u606f\u200b\u548c\u200b\u6bcf\u4e2a\u200b\u6587\u4ef6\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6570\u636e\u200b\u5757\u200b\u5217\u8868\u200b\uff0c\u200b\u63a5\u6536\u200b\u7528\u6237\u200b\u7684\u200b\u64cd\u4f5c\u200b\u8bf7\u6c42\u200b\u3002 namenode\u200b\u5305\u542b\u200b\u7684\u200b\u6587\u4ef6\u200b\u6709\u200b\uff1a 1\uff09fsimage\u200b\u6587\u4ef6\u200b\uff1a\u200b\u5143\u200b\u6570\u636e\u200b\u955c\u50cf\u200b\u3002\u200b\u5b58\u50a8\u200b\u67d0\u200b\u4e00\u4e2a\u200b\u65f6\u95f4\u200bnamenode\u200b\u5185\u5b58\u200b\u5143\u200b\u6570\u636e\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u6587\u4ef6\u200b\u5206\u5757\u200b\u5b58\u50a8\u200b\u5728\u200b\u54ea\u51e0\u4e2a\u200b\u6570\u636e\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002 2\uff09edits\u200b\u6587\u4ef6\u200b\uff1a\u200b\u64cd\u4f5c\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u3002 3\uff09fstime\u200b\u6587\u4ef6\u200b\uff1a\u200b\u4fdd\u5b58\u200b\u6700\u8fd1\u200b\u4e00\u6b21\u200bcheckpoint\u200b\u7684\u200b\u65f6\u95f4\u200b</p> <p>secondarynamenode:  1\uff09\u200b\u662f\u200bHA\u200b\u7684\u200b\u4e00\u4e2a\u200b\u89e3\u51b3\u65b9\u6848\u200b\u3002\u200b\u4f46\u200b\u4e0d\u200b\u652f\u6301\u200b\u70ed\u200b\u5907\u4efd\u200b\uff0c\u200b\u914d\u7f6e\u200b\u5373\u53ef\u200b\u3002 2\uff09\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b\uff1a\u200b\u4ece\u200bnamenode\u200b\u4e0a\u200b\u4e0b\u8f7d\u200b\u5143\u200b\u6570\u636e\u200b\u4fe1\u606f\u200b(fsimage,edits)\uff0c\u200b\u7136\u540e\u200b\u628a\u200b\u4e8c\u8005\u200b\u5408\u5e76\u200b\uff0c\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200bfsimage\uff0c\u200b\u5728\u200b\u672c\u5730\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u63a8\u9001\u200b\u5230\u200bnamenode\uff0c\u200b\u540c\u65f6\u200b\u91cd\u7f6e\u200bnamenode\u200b\u7684\u200bedits\u3002 3\uff09\u200b\u9ed8\u8ba4\u200b\u5b89\u88c5\u200b\u5728\u200bnamenode\u200b\u8282\u70b9\u200b\u4e0a\u200b\u3002</p> <p>datanode\u200b\u63d0\u4f9b\u200b\u771f\u5b9e\u200b\u6587\u4ef6\u200b\u6570\u636e\u200b\u7684\u200b\u5b58\u50a8\u200b\u670d\u52a1\u200b\uff0c\u200b\u4e3b\u8981\u200b\u5305\u62ec\u200b\uff1a 1\uff09\u200b\u6587\u4ef6\u200b\u5757\u200b\uff1a\u200b\u6700\u200b\u57fa\u672c\u200b\u7684\u200b\u5b58\u50a8\u5355\u5143\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u800c\u8a00\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u7684\u200b\u957f\u5ea6\u200b\u5927\u5c0f\u200b\u662f\u200bsize,\u200b\u5219\u200b\u4ece\u6587\u4ef6\u200b\u7684\u200b0\u200b\u504f\u79fb\u200b\u5f00\u59cb\u200b\uff0c\u200b\u6309\u7167\u200b\u56fa\u5b9a\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u987a\u5e8f\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u5212\u5206\u200b\u5e76\u200b\u7f16\u53f7\u200b\uff0c\u200b\u5212\u5206\u200b\u597d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4e2a\u200b\u5757\u200b\u79f0\u200b\u4e00\u4e2a\u200bblock; 2\uff09\u200b\u4e0d\u540c\u4e8e\u200b\u666e\u901a\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7684\u200b\u662f\u200b\uff0chdfs\u200b\u4e2d\u200b\uff0c\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u5c0f\u4e8e\u200b\u4e00\u4e2a\u200b\u6570\u636e\u200b\u5757\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u5e76\u200b\u4e0d\u200b\u5360\u7528\u200b\u6574\u4e2a\u200b\u6570\u636e\u200b\u5757\u200b\u7684\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\uff0c\u200b\u800c\u662f\u200b\u5360\u7528\u200b\u5b9e\u9645\u200b\u5927\u5c0f\u200b\u7684\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\u3002 3\uff09Replication:\u200b\u591a\u200b\u526f\u672c\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u662f\u200b3\u200b\u4e2a\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/harbor_deploy/","title":"Harbor deploy","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/harbor_deploy/#_1","title":"\u90e8\u7f72\u200b\u73af\u5883","text":"\u547d\u4ee4\u200b \u200b\u7ed3\u679c\u200b uname -m loongarch64 cat /etc/os-release loongnix-server:8"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/harbor_deploy/#_2","title":"\u51c6\u5907\u200b\u5de5\u4f5c","text":"<p>\u200b\u4ece\u200bharbor\u200b\u4e0b\u8f7d\u200b\u9875\u9762\u200b\u4e0b\u8f7d\u200bharbor-2.1.1\u200b\u7684\u200b\u5728\u7ebf\u200b\u90e8\u7f72\u200b\u5de5\u5177\u200b </p> <pre><code>wget https://github.com/goharbor/harbor/releases/download/v2.1.1/harbor-online-installer-v2.1.1.tgz\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b<code>harbor-online-installer-v2.1.1.tgz</code>\u200b\u89e3\u538b\u200b\u53ef\u4ee5\u200b\u5f97\u5230\u200b\u5982\u4e0b\u200b\u6587\u4ef6\u200b\uff1a</p> <pre><code>common.sh  harbor.yml.tmpl  install.sh*  LICENSE  prepare*\n</code></pre> <p>\u200b\u9996\u5148\u200b\u5bf9\u4e8e\u200b<code>harbor.yml</code>\u200b\u505a\u200b\u5982\u4e0b\u200b\u4fee\u6539\u200b</p> <pre><code>diff --git a/harbor.yml b/harbor.yml\nindex efe1749..186e314 100644\n--- a/harbor.yml\n+++ b/harbor.yml\n@@ -2,7 +2,7 @@\n# The IP address or hostname to access admin UI and registry service.\n # DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.\n-hostname: reg.mydomain.com\n+hostname: 10.130.200.238\n# http related config\n http:\n@@ -10,12 +10,12 @@ http:\n  port: 80\n\n# https related config\n-https:\n+#https:\n  # https port for harbor, default is 443\n-  port: 443\n+  #port: 443\n  # The path of cert and key files for nginx\n-  certificate: /your/certificate/path\n-  private_key: /your/private/key/path\n+  #certificate: /your/certificate/path\n+  #private_key: /your/private/key/path\n# # Uncomment following will enable tls communication between all harbor components\n # internal_tls:\n@@ -44,7 +44,7 @@ database:\n  max_open_conns: 1000\n\n# The default data volume\n-data_volume: /data\n+data_volume: /harbord\n</code></pre> <ol> <li>hostname\u200b\u4fee\u6539\u200b\u4e3a\u200b\u672c\u673a\u200b\u4e5f\u200b\u5c31\u662f\u200b\u90e8\u7f72\u200b\u673a\u5668\u200b\u7684\u200b\u57df\u540d\u200b\u6216\u8005\u200b<code>ip</code></li> <li>\u200b\u6ce8\u91ca\u200b\u6389\u200b<code>https</code>\u200b\u90e8\u5206\u200b\uff0c\u200b\u6211\u4eec\u200b\u8fd9\u91cc\u200b\u53ea\u662f\u200b\u7528\u200bhttp</li> <li>\u200b\u4fee\u6539\u200b<code>data_volume</code>\u200b\u7684\u200b\u8def\u5f84\u200b\u5230\u200b<code>/harbord</code>\uff0c\u200b\u8fd9\u91cc\u200b\u5c3d\u91cf\u200b\u5c06\u200b<code>data_volume</code>\u200b\u4fee\u6539\u200b\u5230\u200b\u72ec\u7acb\u200b\u7684\u200b\u76ee\u5f55\u200b\uff0c\u200b\u56e0\u4e3a\u200bharbor\u200b\u540e\u7eed\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u6216\u8005\u200b\u6570\u636e\u6587\u4ef6\u200b\u90fd\u200b\u4f1a\u200b\u5b58\u5230\u200b<code>data_volume</code>\u200b\u4e4b\u4e0b\u200b</li> </ol> <p>\u200b\u7136\u540e\u200b\u5bf9\u4e8e\u200b<code>prepare</code>\u200b\u811a\u672c\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u811a\u672c\u200b\u4e3b\u8981\u200b\u662f\u200b\u7528\u6765\u200b\u751f\u6210\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b</p> <pre><code>diff --git a/prepare b/prepare\nindex d4226a8..27e03f5 100755\n--- a/prepare\n+++ b/prepare\n@@ -57,7 +57,7 @@ docker run --rm -v $input_dir:/input \\\n                    -v $config_dir:/config \\\n                     -v /:/hostfs \\\n                     --privileged \\\n-                    goharbor/prepare:v2.1.1 prepare $@\n+                    cr.loongnix.cn/harbor/prepare:2.1.1 prepare $@\n</code></pre> <p>\u200b\u7136\u540e\u200b\u6267\u884c\u200b<code>install.sh</code>\u200b\u751f\u6210\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5e76\u200b\u542f\u52a8\u200b<code>harbor</code>\u200b\u670d\u52a1\u200b\uff0c\u200b\u5f53\u7136\u200b\u8fd9\u91cc\u200b\u4f1a\u200b\u90e8\u7f72\u200b\u5931\u8d25\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bx86\u200b\u7684\u200b\u955c\u50cf\u200b\uff0c\u200b\u4f46\u662f\u200b\u4f1a\u5e2e\u200b\u6211\u4eec\u200b\u751f\u6210\u200b\u4e09\u4e2a\u200b\u90e8\u5206\u200b\u7684\u200b\u6587\u4ef6\u200b\uff1a</p> <ol> <li>\u200b\u5de5\u4f5c\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b<code>docker-compose.yml</code>\u200b\u6587\u4ef6\u200b</li> <li>\u200b\u5de5\u4f5c\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b<code>common</code>\u200b\u6587\u4ef6\u5939\u200b</li> <li><code>/harbord</code>\u200b\u4e5f\u200b\u5c31\u662f\u200b<code>data_volume</code>\u200b\u4e0b\u200b\u76f8\u5173\u200b\u7684\u200b\u6570\u636e\u6587\u4ef6\u200b</li> </ol> <p>\u200b\u7136\u540e\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u770b\u200b\u4e00\u4e0b\u200b<code>docker-compose.yml</code>\u200b\u6587\u4ef6\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff1a</p> <pre><code>services:\n  log:\n    image: goharbor/harbor-log:v2.2.1-rc2\n    container_name: harbor-log\n    restart: always\n    dns_search: .\n    cap_drop:\n      - ALL\n    cap_add:\n      - CHOWN\n      - DAC_OVERRIDE\n      - SETGID\n      - SETUID\n    volumes:\n      - /var/log/harbor/:/var/log/docker/:z\n      - type: bind\n        source: ./common/config/log/logrotate.conf\n        target: /etc/logrotate.d/logrotate.conf\n      - type: bind\n        source: ./common/config/log/rsyslog_docker.conf\n        target: /etc/rsyslog.d/rsyslog_docker.conf\n    ports:\n      - 127.0.0.1:1514:10514\n    networks:\n      - harbor\n</code></pre> <p>\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u8fd9\u91cc\u200b\u7684\u200b\u955c\u50cf\u200b\u540d\u79f0\u200b\u548c\u200b<code>cr.loongnix.cn</code>\u200b\u91cc\u9762\u200b\u7684\u200b\u662f\u200b\u4e0d\u200b\u7b26\u5408\u200b\u7684\u200b\uff0c\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\uff0c\u200b\u4fee\u6539\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>diff --git a/docker-compose.yml b/docker-compose.yml\nindex f896996..2f56810 100644\n--- a/docker-compose.yml\n+++ b/docker-compose.yml\n@@ -1,7 +1,7 @@\nversion: '2.3'\n services:\n   log:\n-    image: goharbor/harbor-log:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-log:2.2.1\n    container_name: harbor-log\n     restart: always\n     dns_search: .\n@@ -25,7 +25,7 @@ services:\n    networks:\n       - harbor\n   registry:\n-    image: goharbor/registry-photon:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/registry-photon:2.2.1\n    container_name: registry\n     restart: always\n     cap_drop:\n@@ -54,7 +54,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"registry\"\n   registryctl:\n-    image: goharbor/harbor-registryctl:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-registryctl:2.2.1\n    container_name: registryctl\n     env_file:\n       - ./common/config/registryctl/env\n@@ -85,7 +85,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"registryctl\"\n   postgresql:\n-    image: goharbor/harbor-db:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-db:2.2.1\n    container_name: harbor-db\n     restart: always\n     cap_drop:\n@@ -110,7 +110,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"postgresql\"\n   core:\n-    image: goharbor/harbor-core:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-core:2.2.1\n    container_name: harbor-core\n     env_file:\n       - ./common/config/core/env\n@@ -150,7 +150,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"core\"\n   portal:\n-    image: goharbor/harbor-portal:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-portal:2.2.1\n    container_name: harbor-portal\n     restart: always\n     cap_drop:\n@@ -176,7 +176,7 @@ services:\n        tag: \"portal\"\n\n  jobservice:\n-    image: goharbor/harbor-jobservice:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/harbor-jobservice:2.2.1\n    container_name: harbor-jobservice\n     env_file:\n       - ./common/config/jobservice/env\n@@ -206,7 +206,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"jobservice\"\n   redis:\n-    image: goharbor/redis-photon:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/redis-photon:2.2.1\n    container_name: redis\n     restart: always\n     cap_drop:\n@@ -228,7 +228,7 @@ services:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n         tag: \"redis\"\n   proxy:\n-    image: goharbor/nginx-photon:v2.2.1-rc2\n+    image: cr.loongnix.cn/harbor/nginx-photon:2.2.1\n    container_name: nginx\n     restart: always\n     cap_drop:\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/harbor_deploy/#_3","title":"\u542f\u52a8","text":"<p>\u200b\u4f7f\u7528\u200b<code>docker-compose up</code>\u200b\u547d\u4ee4\u200b\u542f\u52a8\u200bharbor, \u200b\u7136\u540e\u200b\u8bbf\u95ee\u200b<code>http://{your_ip}</code>,\u200b\u6bd4\u5982\u200b\u6211\u200b\u7684\u200bip\u200b\u662f\u200b<code>10.130.200.238</code>,\u200b\u90a3\u4e48\u200b\u4e3b\u9875\u200b\u5730\u5740\u200b\u5c31\u662f\u200b<code>http://10.130.200.238</code></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/","title":"k8s-1.29.0\u200b\u90e8\u7f72\u200b\u53c2\u8003","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_1","title":"\u90e8\u7f72\u200b\u73af\u5883","text":"<p>\u200b\u4e24\u53f0\u200b\u865a\u62df\u673a\u200b cpu 3a6000 os  openEuler 24.03(LTS)</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_2","title":"\u51c6\u5907\u200b\u5de5\u4f5c","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_3","title":"\u8bbe\u7f6e\u200b\u4e3b\u673a\u540d","text":"<p>Master\u200b\u8282\u70b9\u200b\u547d\u540d\u200b\u4e3a\u200bk8s-master\uff0cWorker\u200b\u8282\u70b9\u200b\u547d\u540d\u200b\u4e3a\u200bk8s-node  </p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b#\u200b\u7279\u6b8a\u200b\u8bf4\u660e\u200b\uff0c\u200b\u4e0b\u6587\u200b\u51fa\u73b0\u200b\u7684\u200b\u547d\u4ee4\u200b\u9ed8\u8ba4\u200b\u5728\u200b\u4e24\u4e2a\u200b\u673a\u5668\u200b\u4e0a\u200b\u6267\u884c\u200b <pre><code>hostnamectl set-hostname k8s-master #\u200b\u5728\u200bMaster\u200b\u8282\u70b9\u200b\u673a\u5668\u200b\u4e0a\u200b\u6267\u884c\u200b\nhostnamectl set-hostname k8s-node   #\u200b\u5728\u200bWorker\u200b\u8282\u70b9\u200b\u673a\u5668\u200b\u4e0a\u200b\u6267\u884c\u200b\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#selinux","title":"\u5173\u95ed\u200b SElinux","text":"<pre><code>setenforce 0\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_4","title":"\u7981\u7528\u200b\u9632\u706b\u5899","text":"<pre><code>systemctl stop firewalld.service\nsystemctl disable firewalld.service\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#swap","title":"\u5173\u95ed\u200b swap","text":"<pre><code>swapoff -a\nsed -ri '/\\sswap\\s/s/^#?/#/' /etc/fstab\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#iptables","title":"\u6e05\u7406\u200b iptables","text":"<pre><code>iptables -F\niptables -X\niptables -Z\niptables -t nat -F\niptables -t nat -X\niptables -t nat -Z\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#host","title":"host \u200b\u89e3\u6790\u200b\u6587\u4ef6\u200b\u914d\u7f6e","text":"<p>\u200b\u6267\u884c\u200b\u4e0b\u8ff0\u200b\u6307\u4ee4\u200b\uff1a  </p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u5c06\u200b\u6307\u4ee4\u200b\u4e2d\u200bMaster/Worker IP\u200b\u4fee\u6539\u200b\u4e3a\u200b\u81ea\u5df1\u200b\u8282\u70b9\u200b\u7684\u200bIP <pre><code>cat &gt;&gt;/etc/hosts&lt;&lt; EOF\nMaster\u200b\u8282\u70b9\u200b\u673a\u5668\u200bIP   k8s-master\nWorker\u200b\u8282\u70b9\u200b\u673a\u5668\u200bIP   k8s-node\nEOF \n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#ipv4-iptables","title":"\u8f6c\u53d1\u200b IPv4 \u200b\u5e76\u200b\u8ba9\u200b iptables \u200b\u770b\u5230\u200b\u6865\u63a5\u200b\u6d41\u91cf","text":"<p><pre><code>cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\n# \u200b\u8bbe\u7f6e\u200b\u6240\u200b\u9700\u200b\u7684\u200b sysctl \u200b\u53c2\u6570\u200b\uff0c\u200b\u53c2\u6570\u200b\u5728\u200b\u91cd\u65b0\u542f\u52a8\u200b\u540e\u200b\u4fdd\u6301\u200b\u4e0d\u53d8\u200b\uff1a\ncat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n\n# \u200b\u5e94\u7528\u200b sysctl \u200b\u53c2\u6570\u200b\u800c\u200b\u4e0d\u200b\u91cd\u65b0\u542f\u52a8\u200b\uff1a\nsudo sysctl --system\n</code></pre> \u200b\u901a\u8fc7\u200b\u8fd0\u884c\u200b\u4ee5\u4e0b\u200b\u6307\u4ee4\u200b\u786e\u8ba4\u200b <code>br_netfilter</code> \u200b\u548c\u200b <code>overlay</code> \u200b\u6a21\u5757\u200b\u88ab\u200b\u52a0\u8f7d\u200b\uff1a <pre><code>lsmod | grep br_netfilter\nlsmod | grep overlay\n</code></pre> \u200b\u901a\u8fc7\u200b\u8fd0\u884c\u200b\u4ee5\u4e0b\u200b\u6307\u4ee4\u200b\u786e\u8ba4\u200b <code>net.bridge.bridge-nf-call-iptables</code>\u3001<code>net.bridge.bridge-nf-call-ip6tables</code> \u200b\u548c\u200b <code>net.ipv4.ip_forward</code> \u200b\u7cfb\u7edf\u200b\u53d8\u91cf\u200b\u5728\u200b\u4f60\u200b\u7684\u200b <code>sysctl</code> \u200b\u914d\u7f6e\u200b\u4e2d\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 1\uff1a <pre><code>sysctl net.bridge.bridge-nf-call-iptables net.bridge.bridge-nf-call-ip6tables net.ipv4.ip_forward\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#containerd","title":"\u5b89\u88c5\u200b containerd \u200b\u5bb9\u5668\u200b\u8fd0\u884c\u200b\u65f6","text":"<p>\u200b\u4e0b\u8f7d\u200b <code>containerd</code> \u200b\u538b\u7f29\u5305\u200b\uff1a <pre><code>wget https://github.com/Loongson-Cloud-Community/containerd/releases/download/v1.7.13/containerd-1.7.13-static-abi2.0-bin.tar.gz\ntar -xf containerd-1.7.13-static-abi2.0-bin.tar.gz\nmv containerd-1.7.13-static-abi2.0-bin/* /usr/local/bin/\n</code></pre> \u200b\u751f\u6210\u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a <pre><code>mkdir -p /etc/containerd\ncontainerd config default &gt; /etc/containerd/config.toml\n</code></pre> \u200b\u4e0b\u8f7d\u200b <code>containerd.service</code> \u200b\u6587\u4ef6\u200b\uff1a <pre><code>wget -O /usr/lib/systemd/system/containerd.service https://raw.githubusercontent.com/containerd/containerd/main/containerd.service\n\nsystemctl daemon-reload\nsystemctl enable --now containerd\n</code></pre> \u200b\u7ed3\u5408\u200b <code>runc</code> \u200b\u4f7f\u7528\u200b <code>systemd cgroup</code> \u200b\u9a71\u52a8\u200b\uff0c\u200b\u5728\u200b <code>/etc/containerd/config.toml</code> \u200b\u4e2d\u200b\u8bbe\u7f6e\u200b\uff1a <pre><code>[plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc]\n  ...\n  [plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc.options]\n    SystemdCgroup = true\n</code></pre> \u200b\u5728\u200b <code>/etc/containerd/config.toml</code>\u200b\u4e2d\u200b\u91cd\u8f7d\u200b\u6c99\u7bb1\u200b\uff08pause\uff09\u200b\u955c\u50cf\u200b\uff1a <pre><code>[plugins.\"io.containerd.grpc.v1.cri\"]\n  sandbox_image = \"lcr.loongnix.cn/kubernetes/pause:3.9\"\n</code></pre> \u200b\u4e00\u65e6\u200b\u66f4\u65b0\u200b\u4e86\u200b\u8fd9\u4e2a\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u9700\u8981\u200b\u91cd\u542f\u200b containerd\uff1a<code>systemctl restart containerd</code></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#runc","title":"\u5b89\u88c5\u200b runc","text":"<pre><code>wget https://github.com/Loongson-Cloud-Community/runc/releases/download/v1.1.12/runc-seccomp-1.1.12-abi2.0-bin.tar.gz\ntar -xf runc-seccomp-1.1.12-abi2.0-bin.tar.gz\nmv runc-seccomp-1.1.12-abi2.0-bin/runc-static /usr/local/bin/runc\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#kubeadmkubeletkubectl-rpm","title":"\u5b89\u88c5\u200b kubeadm\u3001kubelet\u3001kubectl \u200b\u7b49\u200b rpm \u200b\u5305","text":"<pre><code>mkdir -p /tmp/rpms\ncd /tmp/rpms\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/cri-tools-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubeadm-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubectl-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubelet-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubernetes-cni-1.3.0-0.loongarch64.rpm\nyum install -y ./*.rpm\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#crictl","title":"\u914d\u7f6e\u200b crictl","text":"<pre><code>cat &lt;&lt;EOF|tee /etc/crictl.yaml\nruntime-endpoint: unix:///run/containerd/containerd.sock\nEOF\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#kubeadm","title":"kubeadm \u200b\u521d\u59cb\u5316\u200b\u96c6\u7fa4","text":"<p>\u200b\u6267\u884c\u547d\u4ee4\u200b\uff1a <pre><code>kubeadm init \\\n--image-repository lcr.loongnix.cn/kubernetes \\\n--kubernetes-version v1.29.0 \\\n--cri-socket=/run/containerd/containerd.sock \\\n--pod-network-cidr=10.244.0.0/16 -v=5\n</code></pre> \u200b\u6ce8\u200b\uff1a\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u521d\u59cb\u5316\u200b\u914d\u7f6e\u200b\u6253\u5370\u200b\u5230\u200byaml\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u901a\u8fc7\u200byaml\u200b\u6587\u4ef6\u200b\u542f\u52a8\u200b\uff0ckubeadm config print init-defaults &gt;  kubeadm-config.yaml; kubeadm init --config kubeadm-config.yaml </p> <p>\u200b\u6210\u529f\u200b\u540e\u200b\u6839\u636e\u200b\u63d0\u793a\u200b\u914d\u7f6e\u200b\uff1a <pre><code>mkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#node","title":"\u52a0\u5165\u200b node","text":"<p>\u200b\u5728\u200bWorker\u200b\u8282\u70b9\u200b\u4e0a\u200b\u6267\u884c\u200bMaster\u200b\u8282\u70b9\u200b\u521d\u59cb\u5316\u200b\u6210\u529f\u200b\u65f6\u200b\u63d0\u4f9b\u200b\u7684\u200b\u52a0\u5165\u200b\u547d\u4ee4\u200b\u5373\u53ef\u200b\uff0c\u200b\u547d\u4ee4\u200b\u683c\u5f0f\u200b\u7c7b\u4f3c\u200b\uff1a <pre><code>kubeadm join Master_Node_IP:6443 --token wngmgg.sxr4n542r4y4pji7 \\\n    --discovery-token-ca-cert-hash sha256:a0a15138d3d2149c3cca6e6fc9ead95439e00f60fda314d9cef31ff1a6baa461\n</code></pre> \u200b\u5982\u679c\u200b\u4e0a\u8ff0\u200b\u6253\u5370\u4fe1\u606f\u200b\u88ab\u200b\u8986\u76d6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u4e0b\u8ff0\u200b\u547d\u4ee4\u200b\u91cd\u65b0\u200b\u751f\u6210\u200b\uff1a <pre><code>kubeadm token create --print-join-command\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_5","title":"\u6dfb\u52a0\u200b\u7f51\u7edc\u200b\u63d2\u4ef6","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#calico","title":"calico","text":"<p>\u200b\u4e0b\u8f7d\u200bcalico\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a <pre><code>wget https://github.com/Loongson-Cloud-Community/calico/releases/download/v3.26.1/calico.yaml\n</code></pre> yaml\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b<code>CALICO_IPV4POOL_CIDR</code>\u200b\u5b57\u200b\u6bb5\u200b\u9700\u8981\u200b\u4e0e\u200b\u521d\u59cb\u5316\u200b\u65f6\u200b\u7684\u200b<code>pod-network-cidr</code>\u200b\u4e00\u81f4\u200b\uff0c\u200b\u4fee\u6539\u200b\u540e\u200b\u6267\u884c\u200b\uff1a <pre><code>kubectl apply -f calico.yaml\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#flannel","title":"flannel","text":"<p>\u200b\u4e0b\u8f7d\u200bflannel\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a <pre><code>wget https://github.com/Loongson-Cloud-Community/flannel/releases/download/v0.24.3/kube-flannel.yml\n</code></pre> \u200b\u6dfb\u52a0\u200b\uff1a <pre><code>kubectl apply -f kube-flannel.yml\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#node_1","title":"\u67e5\u770b\u200b node \u200b\u72b6\u6001","text":"<pre><code>kubectl get nodes -o wide\nNAME         STATUS   ROLES           AGE     VERSION\nk8s-master   Ready    control-plane   2d20h   v1.29.0\nk8s-node     Ready    &lt;none&gt;          3m55s   v1.29.0\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s-1.29.0%E9%83%A8%E7%BD%B2%E5%8F%82%E8%80%83/#_6","title":"\u5f02\u5e38\u200b\u5904\u7406","text":"<p>\u200b\u5982\u679c\u200b\u7f51\u7edc\u200b\u63d2\u4ef6\u200bpod\u200b\u5df2\u7ecf\u200b\u542f\u52a8\u200b\uff0c\u200b\u4f46\u200bcoredns\u200b\u4e00\u76f4\u200b\u5904\u4e8e\u200bpending\u200b\u72b6\u6001\u200b\uff0c\u200b\u5efa\u8bae\u200b\u67e5\u770b\u200b\u65e5\u5fd7\u200b\uff1a <pre><code>journalctl -f -u kubelet.service\n</code></pre> \u200b\u5982\u679c\u200b\u51fa\u73b0\u200b\u7c7b\u4f3c\u200b\uff1a <pre><code>\"Container runtime network not ready\" networkReady=\"NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized\"\n</code></pre> \u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u5e76\u4e14\u200b<code>ip -a</code>\u200b\u6253\u5370\u200b\u7684\u200b\u7f51\u7edc\u63a5\u53e3\u200b\u6ca1\u6709\u200b<code>cni0</code>,\u200b\u5efa\u8bae\u200b\u91cd\u65b0\u542f\u52a8\u200b\u8be5\u200bnode\u200b\u673a\u5668\u200b</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/","title":"k8s1.20.0 \u200b\u90e8\u7f72","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#_1","title":"\u6240\u6709\u200b\u8282\u70b9","text":"<pre><code>vim /etc/hosts\n10.40.65.184 master\n10.40.65.107 node1\n\nssh-keygen \nssh-copy-id master\nssh-copy-id node1\n\nyum install docker-ce -y\nyum install socat conntrack-tools ebtables -y \n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#kubernetes","title":"\u6253\u5f00\u200bkubernetes\u200b\u6e90","text":"<pre><code>[kubernetes]\nname=Loongnix server $releasever kubernetes\nbaseurl=http://pkg.loongnix.cn/loongnix-server/$releasever/cloud/$basearch/release/kubernetes/\ngpgcheck=0\nenabled=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-LOONGNIX\nmodule_hotfixes=1\n\nyum install cri-tools kubeadm  kubectl kubelet  kubernetes-cni  -y\n\nsystemctl enable docker.service &amp;&amp; systemctl restart docker &amp;&amp; systemctl status docker \nsystemctl enable kubelet.service &amp;&amp; systemctl restart kubelet\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#docker","title":"docker \u200b\u8bbe\u7f6e","text":"<p>\u200b\u67e5\u770b\u200bdocker\u200b\u72b6\u6001\u200b\uff1a <pre><code>[root@master opt]# systemctl status docker\n\u25cf docker.service - Docker Application Container Engine\n   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)\n   Active: active (running) since Wed 2021-07-14 09:43:38 CST; 29s ago\n     Docs: https://docs.docker.com\n Main PID: 4837 (dockerd)\n    Tasks: 10\n   Memory: 40.7M\n   CGroup: /system.slice/docker.service\n           \u2514\u25004837 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\n\n7\u200b\u6708\u200b 14 09:43:37 master dockerd[4837]: time=\"2021-07-14T09:43:37.652737990+08:00\" level=info msg=\"ClientConn switching balancer to \\\"pick_first\\\"\" module=grpc\n7\u200b\u6708\u200b 14 09:43:37 master dockerd[4837]: time=\"2021-07-14T09:43:37.725904370+08:00\" level=warning msg=\"Your kernel does not support swap memory limit\"\n7\u200b\u6708\u200b 14 09:43:37 master dockerd[4837]: time=\"2021-07-14T09:43:37.726143470+08:00\" level=info msg=\"Loading containers: start.\"\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.023472700+08:00\" level=info msg=\"Default bridge (docker0) is assigned with an IP address 172.18.0.0/16. Daemon option --bip c&gt;\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.173480930+08:00\" level=info msg=\"Loading containers: done.\"\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.211472800+08:00\" level=warning msg=\"Not using native diff for overlay2, this may cause degraded performance for building imag&gt;\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.211825210+08:00\" level=info msg=\"Docker daemon\" commit=46229ca1d815cfd4b50eb377ac75ad8300e13a85 graphdriver(s)=overlay2 versi&gt;\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.211967530+08:00\" level=info msg=\"Daemon has completed initialization\"\n7\u200b\u6708\u200b 14 09:43:38 master systemd[1]: Started Docker Application Container Engine.\n7\u200b\u6708\u200b 14 09:43:38 master dockerd[4837]: time=\"2021-07-14T09:43:38.253139040+08:00\" level=info msg=\"API listen on /var/run/docker.sock\"\n</code></pre></p> <p>daemon\u200b\u8bbe\u7f6e\u200b\uff1a <pre><code>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\nEOF\n</code></pre></p> <p>\u200b\u91cd\u542f\u200bdocker\u200b\u670d\u52a1\u200b <pre><code>systemctl daemon-reload &amp;&amp; systemctl restart docker\nsystemctl status docker\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#k8sconf","title":"\u8bbe\u7f6e\u200bk8s.conf","text":"<pre><code>vim /etc/sysctl.d/k8s.conf\n## \u200b\u6dfb\u52a0\u200b\u5982\u4e0b\u200b\u5185\u5bb9\u200b\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\n## \u200b\u6267\u884c\u547d\u4ee4\u200b\u751f\u6548\u200b\nmodprobe br_netfilter\nsysctl -p /etc/sysctl.d/k8s.conf\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#_2","title":"\u5173\u95ed\u200b\u9632\u706b\u5899","text":"<p><pre><code>systemctl disable firewalld &amp;&amp; systemctl stop firewalld\n</code></pre> iptables\u200b\u8bbe\u7f6e\u200b\uff1a\u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u6e05\u9664\u200b\u9632\u706b\u5899\u200b\u89c4\u5219\u200b\u5e76\u200b\u67e5\u770b\u200b\u6e05\u9664\u200b\u540e\u200b\u7684\u200b\u7ed3\u679c\u200b\uff1a <pre><code>iptables -F &amp;&amp; iptables -X &amp;&amp; iptables -Z &amp;&amp; iptables -L &amp;&amp; systemctl stop iptables &amp;&amp; systemctl status iptables\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n</code></pre></p> <p>\u200b\u5173\u95ed\u200b\u4ea4\u6362\u200b\u5206\u533a\u200b \u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u200b\u4e0b\u9762\u200b\u4e24\u6761\u200b\u547d\u4ee4\u200b\u5173\u95ed\u200b\u4ea4\u6362\u200b\u5206\u533a\u200b\uff1a <pre><code>swapoff -a\n//sed -i -e /swap/d /etc/fstab\nvim /etc/fstab\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#selinux","title":"\u5173\u95ed\u200bselinux","text":"<p>\u200b\u67e5\u770b\u200bselinux\u200b\u72b6\u6001\u200b\uff1a <pre><code>getenforce\n -Enforcing\n -Disabled\n\n[root@master opt]#  /usr/sbin/sestatus\nSELinux status:                 disabled\n</code></pre></p> <p>\u200b\u5173\u95ed\u200b SELINUX\u3002 \u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u200b\u4e0b\u9762\u200b\u4e24\u6761\u200b\u547d\u4ee4\u200b\u5173\u95ed\u200bselinux\u200b\u5206\u533a\u200b\uff1a <pre><code>sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config\nsetenforce 0\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#master","title":"master\u200b\u8282\u70b9\u200b\u90e8\u7f72","text":"<p>\u200b\u83b7\u53d6\u200b\u955c\u50cf\u200b \u200b\u83b7\u53d6\u200bcalico\u200b\u548c\u200bk8s\u200b\u955c\u50cf\u200b\uff1a <pre><code>cr.loongnix.cn\ncalico:\ndocker pull cr.loongnix.cn/calico/node:3.18.0\ndocker pull cr.loongnix.cn/calico/cni:3.18.0\ndocker pull cr.loongnix.cn/calico/pod2daemon-flexvol:3.18.0\ndocker pull cr.loongnix.cn/calico/kube-controllers:3.18.0\n\nk8s:\ndocker pull cr.loongnix.cn/kubernetes/kube-apiserver:v1.20.0\ndocker pull cr.loongnix.cn/kubernetes/kube-controller-manager:v1.20.0\ndocker pull cr.loongnix.cn/kubernetes/kube-scheduler:v1.20.0\ndocker pull cr.loongnix.cn/kubernetes/kube-proxy:v1.20.0\ndocker pull cr.loongnix.cn/kubernetes/coredns:1.7.0\ndocker pull cr.loongnix.cn/kubernetes/etcd:3.4.13-0\ndocker pull cr.loongnix.cn/kubernetes/pause:3.2\n</code></pre></p> <p>\u200b\u51c6\u5907\u200b\u914d\u7f6e\u6587\u4ef6\u200b \u200b\u9700\u200b\u51c6\u5907\u200bkubeadm\u200b\u548c\u200bcalico\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff08\u200b\u6ce8\u200b\uff1a\u200b\u5982\u679c\u200b\u6709\u200b\u5b9a\u5236\u200b\u5316\u200b\u9700\u6c42\u200b\uff0c\u200b\u8bf7\u200b\u81ea\u884c\u200b\u4fee\u6539\u200bkubeadm\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u548c\u200bcalico\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff09\u3002 (1) kubeadm\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u51c6\u5907\u200b(master\u200b\u8282\u70b9\u200b)\uff1a \u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u751f\u6210\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u6a21\u677f\u200b <pre><code>kubeadm config print init-defaults &gt; init_default.yaml\n\napiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 10.40.65.184\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: master\n  taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: cr.loongnix.cn/kubernetes \nkind: ClusterConfiguration\nkubernetesVersion: v1.20.0\nnetworking:\n  dnsDomain: cluster.local\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n</code></pre></p> <p>(2) \u200b\u6267\u884c\u200b\u5982\u4e0b\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200bkubeadm\u200b\u914d\u7f6e\u200b\u540e\u200b\u6240\u200b\u9700\u200b\u955c\u50cf\u200b\u7248\u672c\u200b [root@master ~]# kubeadm config images list --config init_default.yaml  cr.loongnix.cn/kubernetes/kube-apiserver:v1.20.0 cr.loongnix.cn/kubernetes/kube-controller-manager:v1.20.0 cr.loongnix.cn/kubernetes/kube-scheduler:v1.20.0 cr.loongnix.cn/kubernetes/kube-proxy:v1.20.0 cr.loongnix.cn/kubernetes/pause:3.2 cr.loongnix.cn/kubernetes/etcd:3.4.13-0 cr.loongnix.cn/kubernetes/coredns:1.7.0</p> <p>calico\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u51c6\u5907\u200b\uff1a \u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u83b7\u53d6\u200b\u5b98\u65b9\u200bcalico\u200b\u914d\u7f6e\u6587\u4ef6\u200b <pre><code>curl https://docs.projectcalico.org/archive/v3.18/manifests/calico.yaml -O\n</code></pre> \u200b\u4fee\u6539\u200bcalico.yaml\u200b\u4e2d\u200b\u5bf9\u5e94\u200b\u914d\u7f6e\u200b,\u200b\u4f7f\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u955c\u50cf\u200b\u540d\u79f0\u200b\u4e0e\u200b\u672c\u5730\u200b\u955c\u50cf\u200b\u4e00\u81f4\u200b <pre><code>vim calico.yaml\n # It can be deleted if this is a fresh installation, or if you have already\n        # upgraded to use calico-ipam.\n        - name: upgrade-ipam\n          image: cr.loongnix.cn/calico/cni:3.18.0 (\u200b\u4fdd\u6301\u200b\u4e0e\u200b\u79c1\u6709\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b\u4e00\u81f4\u200b)\n--\n        # This container installs the CNI binaries\n        # and CNI network config file on each node.\n        - name: install-cni\n          image: cr.loongnix.cn/calico/cni:3.18.0 (\u200b\u4fdd\u6301\u200b\u4e0e\u200b\u79c1\u6709\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b\u4e00\u81f4\u200b)\n--\n        # Adds a Flex Volume Driver that creates a per-pod Unix Domain Socket to allow Dikastes\n        # to communicate with Felix over the Policy Sync API.\n        - name: flexvol-driver\n          image: cr.loongnix.cn/calico/pod2daemon-flexvol:3.18.0 (\u200b\u4fdd\u6301\u200b\u4e0e\u200b\u79c1\u6709\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b\u4e00\u81f4\u200b)\n--\n        # container programs network policy and routes on each\n        # host.\n        - name: calico-node\n          image: cr.loongnix.cn/calico/node:3.18.0 (\u200b\u4fdd\u6301\u200b\u4e0e\u200b\u79c1\u6709\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b\u4e00\u81f4\u200b)\n--\n      priorityClassName: system-cluster-critical\n      containers:\n        - name: calico-kube-controllers\n          image: cr.loongnix.cn/calico/kube-controllers:3.18.0 (\u200b\u4fdd\u6301\u200b\u4e0e\u200b\u79c1\u6709\u200b\u4ed3\u5e93\u200b\u5730\u5740\u200b\u4e00\u81f4\u200b)\n</code></pre></p> <p>\u200b\u521d\u59cb\u5316\u200bmaster\uff0c\u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u547d\u4ee4\u200b\uff0c\u200b\u5982\u4e0b\u200b\u793a\u200b\uff1amaster\u200b\u6267\u884c\u200b <pre><code>[root@master ~]# kubeadm init --config=init_default.yaml\n[init] Using Kubernetes version: v1.20.0\n[preflight] Running pre-flight checks\n    [WARNING FileExisting-tc]: tc not found in system path\n    [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.3. Latest validated version: 19.03\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\n[certs] Using existing ca certificate authority\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local master] and IPs [10.96.0.1 10.40.65.184]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\n[certs] Generating \"front-proxy-ca\" certificate and key\n[certs] Generating \"front-proxy-client\" certificate and key\n[certs] Generating \"etcd/ca\" certificate and key\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [localhost master] and IPs [10.40.65.184 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [localhost master] and IPs [10.40.65.184 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 19.502802 seconds\n[upload-config] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace\n[kubelet] Creating a ConfigMap \"kubelet-config-1.20\" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node master as control-plane by adding the labels \"node-role.kubernetes.io/master=''\" and \"node-role.kubernetes.io/control-plane='' (deprecated)\"\n[mark-control-plane] Marking the node master as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\n[kubelet-finalize] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 10.40.65.184:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:90f1e6027bd14b08d75c90cc4f59ce82b4425c5cb9f3ff6294bc612063180254 \n</code></pre></p> <p>\u200b\u521d\u59cb\u5316\u200b\u5b8c\u6210\u200b\u540e\u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff0c\u200b\u62f7\u8d1d\u200b\u5bf9\u5e94\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b: <pre><code>mkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> \u200b\u67e5\u770b\u200b\u5f53\u524d\u200bmater\u200b\u72b6\u6001\u200b: <pre><code>[root@master01 ~]#  kubectl get nodes\nNAME       STATUS     ROLES    AGE   VERSION\nmaster01   NotReady   master   16m   v1.20.0\n\n[root@master ~]# kubectl get pods --all-namespaces -o wide\nNAMESPACE     NAME                             READY   STATUS    RESTARTS   AGE     IP             NODE     NOMINATED NODE   READINESS GATES\nkube-system   coredns-5944856bb9-kl6cf         0/1     Pending   0          3m56s   &lt;none&gt;         &lt;none&gt;   &lt;none&gt;           &lt;none&gt;\nkube-system   coredns-5944856bb9-ttn8v         0/1     Pending   0          3m56s   &lt;none&gt;         &lt;none&gt;   &lt;none&gt;           &lt;none&gt;\nkube-system   etcd-master                      1/1     Running   0          3m54s   10.40.65.184   master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-apiserver-master            1/1     Running   0          3m54s   10.40.65.184   master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-controller-manager-master   1/1     Running   0          3m54s   10.40.65.184   master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-proxy-fbntc                 1/1     Running   0          3m57s   10.40.65.184   master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-scheduler-master            1/1     Running   0          3m54s   10.40.65.184   master   &lt;none&gt;           &lt;none&gt;\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#node","title":"node\u200b\u8282\u70b9\u200b\u90e8\u7f72","text":"<p>\u200b\u5728\u200b\u6267\u884c\u200b\u524d\u62c9\u53d6\u200b\u955c\u50cf\u200b\uff1a <pre><code>docker pull cr.loongnix.cn/kubernetes/pause:3.2\ndocker pull cr.loongnix.cn/kubernetes/kube-proxy:v1.20.0\ndocker pull cr.loongnix.cn/calico/cni:3.18.0\ndocker pull cr.loongnix.cn/calico/pod2daemon-flexvol:3.18.0\ndocker pull cr.loongnix.cn/calico/node:3.18.0\ndocker pull cr.loongnix.cn/kubernetes/coredns:1.7.0\n</code></pre></p> <p>(1) \u200b\u52a0\u5165\u200b\u96c6\u7fa4\u200b\uff0c\u200b\u5728\u200b\u7ec8\u7aef\u200b\u6267\u884c\u547d\u4ee4\u200b\uff0c\u200b\u5982\u4e0b\u200b\u793a\u200b\uff08\u200b\u6ce8\u200b\uff1a\u200b\u4ee5\u4e0b\u200btoken\u200b\u7531\u200b3.2.1(1)\u200b\u751f\u6210\u200b\uff09\uff1a <pre><code>kubeadm join 10.40.65.184:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:90f1e6027bd14b08d75c90cc4f59ce82b4425c5cb9f3ff6294bc612063180254 \n</code></pre> <pre><code>[root@node1 opt]# kubeadm join 10.40.65.184:6443 --token abcdef.0123456789abcdef     --discovery-token-ca-cert-hash sha256:90f1e6027bd14b08d75c90cc4f59ce82b4425c5cb9f3ff6294bc612063180254\n[preflight] Running pre-flight checks\n    [WARNING FileExisting-tc]: tc not found in system path\n    [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.3. Latest validated version: 19.03\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun 'kubectl get nodes' on the control-plane to see this node join the cluster.\n\nkubeadm join 10.40.65.121:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:b2b4a5651f5dff7de9921726508b46e90a2a26c0dfb29605fc33431c0a7e0426 \n</code></pre></p> <p>\u200b\u4e3b\u200b\u8282\u70b9\u200b\u9a8c\u8bc1\u200b\u662f\u5426\u200b\u52a0\u5165\u200b\uff1a <pre><code>[root@master ~]# kubectl get nodes\nNAME     STATUS     ROLES                  AGE    VERSION\nmaster   NotReady   control-plane,master   139m   v1.20.0\nnode1    NotReady   &lt;none&gt;                 73s    v1.20.0\n</code></pre> \u200b\u6ca1\u6709\u200b\u90e8\u7f72\u200b\u7f51\u7edc\u200b\u8fd9\u65f6\u200b\u7684\u200b\u72b6\u6001\u200b\u662f\u200bNotReady</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#masterk8scalico","title":"master\u200b\u4e0a\u200b\u90e8\u7f72\u200bk8s\u200b\u7f51\u7edc\u200b\u7ec4\u4ef6\u200bcalico\u200b\u64cd\u4f5c","text":"<p><pre><code>root@master ~]# kubectl create -f calico.yaml\nconfigmap/calico-config created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\nclusterrole.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrolebinding.rbac.authorization.k8s.io/calico-kube-controllers created\nclusterrole.rbac.authorization.k8s.io/calico-node created\nclusterrolebinding.rbac.authorization.k8s.io/calico-node created\ndaemonset.apps/calico-node created\nserviceaccount/calico-node created\ndeployment.apps/calico-kube-controllers created\nserviceaccount/calico-kube-controllers created\npoddisruptionbudget.policy/calico-kube-controllers created\n</code></pre> <pre><code>root@master ~]# kubectl get pods --all-namespaces -o wide\nNAMESPACE     NAME                                       READY   STATUS              RESTARTS   AGE     IP               NODE     NOMINATED NODE   READINESS GATES\nkube-system   calico-kube-controllers-5b974c9dc5-p5t98   1/1     Running             0          38s     192.168.219.65   master   &lt;none&gt;           &lt;none&gt;\nkube-system   calico-node-d9rk7                          1/1     Running             0          37s     10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   calico-node-xqpsk                          0/1     Init:0/3            0          37s     10.40.65.107     node1    &lt;none&gt;           &lt;none&gt;\nkube-system   coredns-5944856bb9-kl6cf                   1/1     Running             0          140m    192.168.219.67   master   &lt;none&gt;           &lt;none&gt;\nkube-system   coredns-5944856bb9-ttn8v                   1/1     Running             0          140m    192.168.219.66   master   &lt;none&gt;           &lt;none&gt;\nkube-system   etcd-master                                1/1     Running             0          140m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-apiserver-master                      1/1     Running             0          140m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-controller-manager-master             1/1     Running             0          140m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-proxy-fbntc                           1/1     Running             0          140m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-proxy-gdfnp                           0/1     ContainerCreating   0          2m31s   10.40.65.107     node1    &lt;none&gt;           &lt;none&gt;\nkube-system   kube-scheduler-master                      1/1     Running             0          140m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\n</code></pre> <pre><code>[root@master ~]# kubectl get pods --all-namespaces -o wide\nNAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE     IP               NODE     NOMINATED NODE   READINESS GATES\nkube-system   calico-kube-controllers-5b974c9dc5-p5t98   1/1     Running   0          151m    192.168.219.65   master   &lt;none&gt;           &lt;none&gt;\nkube-system   calico-node-d9rk7                          1/1     Running   0          151m    10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   calico-node-xqpsk                          1/1     Running   0          151m    10.40.65.107     node1    &lt;none&gt;           &lt;none&gt;\nkube-system   coredns-5944856bb9-kl6cf                   1/1     Running   0          4h51m   192.168.219.67   master   &lt;none&gt;           &lt;none&gt;\nkube-system   coredns-5944856bb9-ttn8v                   1/1     Running   0          4h51m   192.168.219.66   master   &lt;none&gt;           &lt;none&gt;\nkube-system   etcd-master                                1/1     Running   0          4h51m   10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-apiserver-master                      1/1     Running   0          4h51m   10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-controller-manager-master             1/1     Running   0          4h51m   10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-proxy-fbntc                           1/1     Running   0          4h51m   10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\nkube-system   kube-proxy-gdfnp                           1/1     Running   0          153m    10.40.65.107     node1    &lt;none&gt;           &lt;none&gt;\nkube-system   kube-scheduler-master                      1/1     Running   0          4h51m   10.40.65.184     master   &lt;none&gt;           &lt;none&gt;\n</code></pre></p> <p>\u200b\u9a8c\u8bc1\u200bnode\u200b\u4e0a\u200b\uff1a <pre><code>docker pull cr.loongnix.cn/library/nginx:1.19.9\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s1.20.0%E9%83%A8%E7%BD%B2/#masternginx-pod","title":"\u5728\u200bMaster\u200b\u4e0a\u200b\u521b\u5efa\u200bnginx pod","text":"<p>(1) \u200b\u521b\u5efa\u200bnginx.ymal\u200b\u6587\u4ef6\u200b,\u200b\u5185\u5bb9\u200b\u5982\u4e0b\u200b(\u200b\u53ef\u200b\u6839\u636e\u200b\u5b9e\u9645\u200b\u60c5\u51b5\u200b\u4fee\u6539\u200b)\uff1a <pre><code>vim nginx.ymal\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-app\nspec:\n  selector:\n    matchLabels:\n      app: nginx\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: cr.loongnix.cn/library/nginx:1.19.9\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 80\n</code></pre> <pre><code>[root@master pod]# kubectl apply -f nginx.ymal\ndeployment.apps/nginx-app created\n</code></pre> <pre><code>[root@master pod]# kubectl get pod\nNAME                         READY   STATUS    RESTARTS   AGE\nnginx-app-56b6b998d7-hs8ql   1/1     Running   0          23s\n</code></pre> <pre><code>[root@master pod]# kubectl expose deployment nginx-app --port=88 --target-port=80 --type=NodePort\nservice/nginx-app exposed\n</code></pre> <pre><code>[root@master pod]# kubectl get svc\nNAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE\nkubernetes   ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP        5h10m\nnginx-app    NodePort    10.101.106.108   &lt;none&gt;        88:30886/TCP   34s\n</code></pre> <pre><code>[root@master pod]# curl 10.101.106.108:88\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\"http://nginx.org/\"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\"http://nginx.com/\"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/","title":"k8s\u200b\u5355\u200b\u8282\u70b9\u200b\u90e8\u7f72\u200b.md","text":""},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#_1","title":"\u76f8\u5173\u200b\u8d44\u6e90\u200b\u5730\u5740","text":"<ol> <li>containerd-1.7.13\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b</li> <li>k8s-1.29\u200b\u76f8\u5173\u200b\u8d44\u6e90\u200b\u5730\u5740\u200b</li> <li>runc-1.1.12\u200b\u4e0b\u8f7d\u200b\u5730\u5740\u200b</li> </ol>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#_2","title":"\u90e8\u7f72\u200b\u73af\u5883\u200b\u51c6\u5907","text":"<ol> <li>\u200b\u5173\u95ed\u200bswap\u200b\u5206\u533a\u200b\uff1a<code>swapoff -a</code></li> <li>\u200b\u5173\u95ed\u200bselinux\uff1a <code>setenforce 0</code></li> <li>\u200b\u68c0\u67e5\u200b\u5185\u6838\u6a21\u5757\u200b <pre><code>modprobe overlay\nmodprobe br_netfilter\n</code></pre></li> <li> <p>\u200b\u8bbe\u7f6e\u200bk8s\u200b\u5185\u6838\u200b\u914d\u7f6e\u200b\u9009\u9879\u200b <pre><code>cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/99-kubernetes-cri.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nEOF\n</code></pre> \u200b\u6267\u884c\u200b<code>sysctl -p /etc/sysctl.d/99-kubernetes-cri.conf</code> \u200b\u4f7f\u200b\u5176\u200b\u751f\u6548\u200b</p> </li> <li> <p>\u200b\u5173\u95ed\u200b\u9632\u706b\u5899\u200b <pre><code>systemctl stop firewalld\n</code></pre></p> </li> <li> <p>\u200b\u4fee\u6539\u200bhosts\u200b\u6587\u4ef6\u200b</p> </li> </ol> <pre><code>\u200b\u673a\u5668\u200bip lab1\n</code></pre> <ol> <li>\u200b\u4fee\u6539\u200bhostname <pre><code>hostname lab1\n</code></pre></li> </ol>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#runc","title":"\u5b89\u88c5\u200brunc","text":"<pre><code>wget https://github.com/Loongson-Cloud-Community/runc/releases/download/v1.1.12/runc-seccomp-1.1.12-abi2.0-bin.tar.gz\ntar -xf runc-seccomp-1.1.12-abi2.0-bin.tar.gz\nmv runc-seccomp-1.1.12-abi2.0-bin/runc-static /usr/local/bin/runc\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#containerd","title":"\u5b89\u88c5\u200bcontainerd","text":"<ol> <li> <p>\u200b\u4e0b\u8f7d\u5b89\u88c5\u200bcontainerd\u200b\u4e8c\u8fdb\u5236\u200b <pre><code>wget https://github.com/Loongson-Cloud-Community/containerd/releases/download/v1.7.13/containerd-1.7.13-static-abi2.0-bin.tar.gz\ntar -xf containerd-1.7.13-static-abi2.0-bin.tar.gz\nmv containerd-1.7.13-static-abi2.0-bin/* /usr/local/bin/\n</code></pre></p> </li> <li> <p>\u200b\u751f\u6210\u200bcontainerd\u200b\u9ed8\u8ba4\u200b\u914d\u7f6e\u6587\u4ef6\u200b <pre><code>mkdir -p /etc/containerd\ncontainerd config default &gt; /etc/containerd/config.toml\n</code></pre></p> </li> <li> <p>\u200b\u4fee\u6539\u200b /etc/containerd/config.toml\uff0c \u200b\u5c06\u200bsystemd \u200b\u4f5c\u4e3a\u200b\u5bb9\u5668\u200b\u7684\u200bcgroup driver:</p> </li> </ol> <pre><code> [plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc]\n...\n[plugins.\"io.containerd.grpc.v1.cri\".containerd.runtimes.runc.options]\nSystemdCgroup = true\n</code></pre> <ol> <li>\u200b\u4fee\u6539\u200b /etc/containerd/config.toml\uff0c \u200b\u6307\u5b9a\u200b\u7684\u200bpause\u200b\u5bb9\u5668\u200b\u90e8\u5206\u200b:</li> </ol> <pre><code>[plugins.\"io.containerd.grpc.v1.cri\"]\nsandbox_image = \"lcr.loongnix.cn/kubernetes/pause:3.9\"\n</code></pre> <ol> <li>\u200b\u4e3a\u4e86\u200b\u901a\u8fc7\u200b systemd \u200b\u542f\u52a8\u200b containerd \uff0c\u200b\u8bf7\u200b\u8fd8\u200b\u9700\u8981\u200b\u4ece\u200b https://raw.githubusercontent.com/containerd/containerd/main/containerd.service \u200b\u4e0b\u8f7d\u200b containerd.service \u200b\u5355\u5143\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u653e\u7f6e\u200b\u5728\u200b /etc/systemd/system/containerd.service \u200b\u4e2d\u200b</li> </ol> <pre><code>wget https://raw.githubusercontent.com/containerd/containerd/main/containerd.service\nmv containerd.service /etc/systemd/system/containerd.service\n</code></pre> <ol> <li>\u200b\u542f\u52a8\u200bcontainerd</li> </ol> <pre><code>systemctl daemon-reload\nsystemctl start containerd\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#k8s","title":"k8s\u200b\u5b89\u88c5","text":"<pre><code>mkdir -p /tmp/rpms\ncd /tmp/rpms\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/cri-tools-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubeadm-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubectl-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubelet-1.29.0-0.loongarch64.rpm\nwget http://cloud.loongnix.cn/releases/loongarch64/kubernetes/kubernetes/v1.29.0/kubernetes-cni-1.3.0-0.loongarch64.rpm\nyum install -y ./*.rpm\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#crictl","title":"\u914d\u7f6e\u200bcrictl","text":"<pre><code> ## \u200b\u914d\u7f6e\u200bruntime-endpoint\ncrictl config runtime-endpoint unix:///run/containerd/containerd.sock\n ## \u200b\u914d\u7f6e\u200bimage-endpoint\ncrictl config image-endpoint unix:///run/containerd/containerd.sock\n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/k8s%E5%8D%95%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/#k8s_1","title":"\u521b\u5efa\u200bk8s\u200b\u96c6\u7fa4","text":"<pre><code>kubeadm init \\\n--image-repository lcr.loongnix.cn/kubernetes \\\n--kubernetes-version v1.29.0 \\\n--cri-socket=/run/containerd/containerd.sock \\\n--pod-network-cidr=10.244.0.0/16 -v=5\n</code></pre> <p>\u200b\u51fa\u73b0\u200b\u7c7b\u4f3c\u200b\u5982\u4e0b\u200b\u65e5\u5fd7\u200b\uff0c\u200b\u4ee3\u8868\u200b\u542f\u52a8\u200b\u6210\u529f\u200b</p> <pre><code>Your Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 10.130.0.193:6443 --token dpl4ij.njlpwjg3bzg8up0k \\\n    --discovery-token-ca-cert-hash sha256:7990c6a4850f6c4e1f1a45855e76fb0852e8113f63ff0b8ddfa252f3da2d5d10 \n</code></pre>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/openstack-Wallby-%E5%A4%9A%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/","title":"openstack-Wallby \u200b\u591a\u200b\u8282\u70b9\u200b\u90e8\u7f72","text":"<p>\u200b\u5177\u4f53\u200b\u89c1\u200b\uff1ahttp://cloud.loongnix.cn/releases/loongarch64/openstack/Wallby-openeuler2403/openstack2403-Wallby-\u200b\u591a\u200b\u8282\u70b9\u200b\u90e8\u7f72\u200b.wps </p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/openstack-Wallby%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AF%BC/","title":"openstack-Wallby\u200b\u5e38\u7528\u200b\u529f\u80fd\u200b\u4f7f\u7528\u200b\u6307\u5bfc","text":"<p>\u200b\u5177\u4f53\u200b\u89c1\u200b\uff1ahttp://cloud.loongnix.cn/releases/loongarch64/openstack/Wallby-openeuler2403/openstack-Wallby\u200b\u5e38\u7528\u200b\u529f\u80fd\u200b\u4f7f\u7528\u200b\u6307\u5bfc\u200b.wps</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/","title":"\u5355\u200b\u8282\u70b9\u200b\u72ec\u7acb\u200b\u542f\u52a8\u200bhbase","text":"<p>\u200b\u672c\u6587\u200b\u5c06\u200b\u5c55\u793a\u200b\u5982\u4f55\u200b\u901a\u8fc7\u200b<code>hbase shell</code>\u200b\u8fdb\u884c\u200b\u8868\u200b\u7684\u200b\u521b\u5efa\u200b\u3001\u200b\u63d2\u5165\u200b\u3001\u200b\u904d\u5386\u200b\u7b49\u200b\u64cd\u4f5c\u200b\u4ee5\u53ca\u200b\u5982\u4f55\u200b\u5f00\u542f\u200b\u548c\u200b\u505c\u6b62\u200bhbase\u3002\u200b\u6587\u4e2d\u200bhbase\u200b\u7684\u200b\u7248\u672c\u200b\u4e3a\u200b<code>2.4.16</code>\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_1","title":"\u90e8\u7f72\u200b\u73af\u5883","text":"<p><pre><code>NAME=\"Loongnix-Server Linux\"\nVERSION=\"8\"\nID=\"loongnix-server\"\nID_LIKE=\"rhel fedora centos\"\nVERSION_ID=\"8\"\nPLATFORM_ID=\"platform:lns8\"\nPRETTY_NAME=\"Loongnix-Server Linux 8\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:loongnix-server:loongnix-server:8\"\nHOME_URL=\"http://www.loongnix.cn/\"\nBUG_REPORT_URL=\"http://bugs.loongnix.cn/\"\nCENTOS_MANTISBT_PROJECT=\"Loongnix-server-8\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"8\"\n</code></pre> <pre><code>Linux 8f02d1b43d7b 4.19.190-2.1.lns8.loongarch64 #1 SMP Thu Sep 23 08:52:56 UTC 2021 loongarch64 loongarch64 loongarch64 GNU/Linux\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#jdk","title":"\u5b89\u88c5\u200bJDK","text":"<p>jdk\u200b\u7248\u672c\u200b\u4e3a\u200b<code>jdk 8</code>\uff0c\u200b\u66f4\u200b\u591a\u200b\u652f\u6301\u200bhbase\u200b\u7684\u200bjava jdk\u200b\u4fe1\u606f\u200b\u8bf7\u200b\u70b9\u51fb\u200b\u8fd9\u91cc\u200b\u3002\u200b\u5b89\u88c5\u200b\u540e\u200b\u8bbe\u7f6e\u200b<code>JAVA_HOME</code>\u200b\u73af\u5883\u53d8\u91cf\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_2","title":"\u5f00\u59cb","text":"<p><pre><code>tar -zxf hbase-2.4.16-bin.tar.gz &amp;&amp;\\\ncd hbase-2.4.16\n</code></pre> \u200b\u8bf7\u200b\u786e\u8ba4\u200b\u8bbe\u7f6e\u200b\u4e86\u200b<code>JAVA_HOME</code>\uff0c\u200b\u5426\u5219\u200b\u65e0\u6cd5\u200b\u542f\u52a8\u200bhbase\u3002\u200b\u6267\u884c\u200b<code>bin/start-hbase.sh</code>\u200b\u811a\u672c\u200b\u542f\u52a8\u200bhbase\uff0c\u200b\u542f\u52a8\u200b\u540e\u200b\u5728\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u8bbf\u95ee\u200bhttp://localhost:16010\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200bhbase\u200b\u524d\u7aef\u200b\u7684\u200bUI\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#hbase_1","title":"\u8fde\u63a5\u200bhbase","text":"<p>\u200b\u4f7f\u7528\u200b<code>hbase shell</code>\u200b\u547d\u4ee4\u200b\u8fde\u63a5\u200b\u5230\u200bhbase\u200b\u7684\u200b\u8fd0\u884c\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u8be5\u200b\u547d\u4ee4\u200b\u5728\u200b<code>bin/</code>\u200b\u76ee\u5f55\u200b\u4e0b\u200b\uff1a <pre><code>$ ./bin/hbase shell\nHBase Shell\nUse \"help\" to get list of supported commands.\nUse \"exit\" to quit this interactive shell.\nFor Reference, please visit: http://hbase.apache.org/2.0/book.html#shell\nVersion 2.4.16, rUnknown, Tue Feb 21 12:51:44 UTC 2023\nTook 0.0079 seconds                                                                          \nhbase:001:0&gt; \n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_3","title":"\u6253\u5370\u200b\u5e2e\u52a9\u200b\u4fe1\u606f","text":"<p>\u200b\u5728\u200b<code>hbase shell</code>\u200b\u4e2d\u200b\u8f93\u5165\u200b<code>help</code>\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_4","title":"\u521b\u5efa\u200b\u4e00\u5f20\u200b\u8868","text":"<p>\u200b\u4f7f\u7528\u200b<code>create</code>\u200b\u547d\u4ee4\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u8868\u200b,\u200b\u5fc5\u987b\u200b\u6307\u5b9a\u200b\u8868\u540d\u200b\u548c\u200b\u5217\u65cf\u200b(ColumnFamily)\u200b\u540d\u79f0\u200b: <pre><code>hbase:002:0&gt; create 'test', 'cf'\nCreated table test\nTook 2.1679 seconds                                                                          \n=&gt; Hbase::Table - test\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_5","title":"\u786e\u8ba4\u200b\u8868\u200b\u662f\u5426\u200b\u5b58\u5728","text":"<p>\u200b\u4f7f\u7528\u200b<code>list</code>\u200b\u547d\u4ee4\u200b\u786e\u8ba4\u200b\u8868\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\uff1a <pre><code>hbase:003:0&gt; list 'test'\nTABLE                                                                                        \ntest                                                                                         \n1 row(s)\nTook 0.0707 seconds                                                                          \n=&gt; [\"test\"]\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_6","title":"\u67e5\u770b\u200b\u8868\u200b\u7684\u200b\u8be6\u7ec6\u4fe1\u606f","text":"<p>\u200b\u4f7f\u7528\u200b<code>describe</code>\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u8868\u200b\u7684\u200b\u8be6\u7ec6\u4fe1\u606f\u200b\uff0c\u200b\u5305\u62ec\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u914d\u7f6e\u200b\uff1a <pre><code>hbase:004:0&gt; describe 'test'\nTable test is ENABLED                                                                        \ntest                                                                                         \nCOLUMN FAMILIES DESCRIPTION                                                                  \n{NAME =&gt; 'cf', BLOOMFILTER =&gt; 'ROW', IN_MEMORY =&gt; 'false', VERSIONS =&gt; '1', KEEP_DELETED_CELL\nS =&gt; 'FALSE', DATA_BLOCK_ENCODING =&gt; 'NONE', COMPRESSION =&gt; 'NONE', TTL =&gt; 'FOREVER', MIN_VER\nSIONS =&gt; '0', BLOCKCACHE =&gt; 'true', BLOCKSIZE =&gt; '65536', REPLICATION_SCOPE =&gt; '0'}          \n\n1 row(s)\nQuota is disabled\nTook 0.3040 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_7","title":"\u63d2\u5165\u200b\u6570\u636e","text":"<p>\u200b\u4f7f\u7528\u200b<code>put</code>\u200b\u547d\u4ee4\u200b\u5411\u8868\u4e2d\u200b\u63d2\u5165\u200b\u6570\u636e\u200b\uff1a <pre><code>hbase:002:0&gt; put 'test', 'row1', 'cf:a', 'value1'\nTook 0.3951 seconds                                                                          \nhbase:003:0&gt; put 'test', 'row2', 'cf:b', 'value2'\nTook 0.0211 seconds                                                                          \nhbase:004:0&gt; put 'test', 'row3', 'cf:c', 'value3'\nTook 0.0317 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_8","title":"\u904d\u5386\u200b\u8868\u4e2d\u200b\u6570\u636e","text":"<p>\u200b\u4f7f\u7528\u200b<code>scan</code>\u200b\u547d\u4ee4\u200b\u904d\u5386\u200b\u4e14\u200b\u6253\u5370\u200b\u8868\u4e2d\u200b\u6570\u636e\u200b\uff1a <pre><code>hbase:005:0&gt; scan 'test'\nROW                      COLUMN+CELL                                                         \n row1                    column=cf:a, timestamp=2023-02-23T07:09:38.540, value=value1        \n row2                    column=cf:b, timestamp=2023-02-23T07:09:45.685, value=value2        \n row3                    column=cf:c, timestamp=2023-02-23T07:09:54.162, value=value3        \n3 row(s)\nTook 0.1601 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_9","title":"\u83b7\u53d6\u200b\u4e00\u884c\u200b\u6570\u636e","text":"<p>\u200b\u4f7f\u7528\u200b<code>get</code>\u200b\u547d\u4ee4\u200b\u4e00\u6b21\u200b\u83b7\u53d6\u200b\u4e00\u884c\u200b\u6570\u636e\u200b\uff1a <pre><code>hbase:006:0&gt; get 'test', 'row1'\nCOLUMN                   CELL                                                                \n cf:a                    timestamp=2023-02-23T07:09:38.540, value=value1                     \n1 row(s)\nTook 0.1136 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_10","title":"\u7981\u7528\u200b\u8868","text":"<p>\u200b\u5f53\u200b\u9700\u8981\u200b\u5bf9\u8868\u200b\u8fdb\u884c\u200b\u5220\u9664\u200b\u3001\u200b\u4fee\u6539\u200b\u8bbe\u7f6e\u200b\u7b49\u200b\u60c5\u51b5\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5148\u200b\u7981\u7528\u200b\u8868\u200b\uff0c\u200b\u4f7f\u7528\u200b<code>disable</code>\u200b\u547d\u4ee4\u200b\u7981\u7528\u200b\u8868\u200b\uff0c\u200b\u4f7f\u7528\u200b'enable'\u200b\u547d\u4ee4\u200b\u5bf9\u200b\u5df2\u200b\u7981\u7528\u200b\u7684\u200b\u8868\u200b\u91cd\u65b0\u200b\u4f7f\u80fd\u200b\uff1a <pre><code>hbase:009:0&gt; disable 'test'\nTook 0.3501 seconds                                                                          \nhbase:010:0&gt; enable 'test'\nTook 0.6473 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#_11","title":"\u5220\u9664\u200b\u8868","text":"<p>\u200b\u4f7f\u7528\u200b<code>drop</code>\u200b\u547d\u4ee4\u200b\u5220\u9664\u200b\u8868\u200b\uff1a <pre><code>hbase:011:0&gt; disable 'test'\nTook 0.3521 seconds                                                                          \nhbase:012:0&gt; drop 'test'\nTook 0.3895 seconds\n</code></pre></p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#hbase-shell","title":"\u9000\u51fa\u200bhbase shell","text":"<p>\u200b\u4f7f\u7528\u200b<code>quit</code>\u200b\u547d\u4ee4\u200b\u9000\u51fa\u200bhbase shell\uff0chbase\u200b\u4ecd\u4f1a\u200b\u8fd0\u884c\u200b\u5728\u200b\u540e\u53f0\u200b\u3002</p>"},{"location":"%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/%E5%8D%95%E8%8A%82%E7%82%B9%E7%8B%AC%E7%AB%8B%E5%90%AF%E5%8A%A8hbase/#hbase_2","title":"\u505c\u6b62\u200bhbase","text":"<p>\u200b\u8fd0\u884c\u200b<code>bin/stop-hbase.sh</code>\u200b\u811a\u672c\u200b\u505c\u6b62\u200bhbase\u3002 <pre><code>$ ./bin/stop-hbase.sh\nstopping hbase....................\n</code></pre></p>"}]}